/*!
 * GSAP 3.12.2
 * https://greensock.com
 * 
 * @license Copyright 2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function n(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return"string"==typeof t}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return void 0===t}function s(t){return"object"==typeof t}function u(t){return!1!==t}function l(){return"undefined"!=typeof window}function c(t){return r(t)||i(t)}function h(t){return(tS=ed(t,ee))&&ny}function p(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function d(t,e){return!e&&console.warn(t)}function f(t,e){return t&&(ee[t]=e)&&tS&&(tS[t]=e)||ee}function m(){return 0}function g(t){var e,n,i=t[0];if(s(i)||r(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=eh.length;n--&&!eh[n].targetTest(i););e=eh[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new e2(t[n],e)))||t.splice(n,1);return t}function v(t){return t._gsap||g(ex(t))[0]._gsap}function $(t,e,n){return(n=t[e])&&r(n)?t[e]():o(n)&&t.getAttribute&&t.getAttribute(e)||n}function y(t,e){return(t=t.split(",")).forEach(e)||t}function x(t){return Math.round(1e5*t)/1e5||0}function _(t){return Math.round(1e7*t)/1e7||0}function b(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i}function w(t,e){for(var n=e.length,i=0;0>t.indexOf(e[i])&&++i<n;);return i<n}function S(){var t,e,n=eo.length,i=eo.slice(0);for(es={},t=eo.length=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function D(t,e,n,i){eo.length&&!ty&&S(),t.render(e,n,i||ty&&e<0&&(t._initted||t._startAt)),eo.length&&!ty&&S()}function M(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(t9).length<2?e:i(t)?t.trim():t}function E(t){return t}function T(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}function C(t,e){for(var n in e)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=s(e[n])?C(t[n]||(t[n]={}),e[n]):e[n]);return t}function A(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i}function L(t){var e,n=t.parent||t8,i=t.keyframes?(e=tX(t.keyframes),function(t,n){for(var i in n)i in t||"duration"===i&&e||"ease"===i||(t[i]=n[i])}):T;if(u(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t}function P(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,o=t[i];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e}function R(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null}function F(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0}function N(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t}function I(t,e,n,i){return t._startAt&&(ty?t._startAt.revert(ei):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))}function z(t){return t._repeat?ef(t._tTime,t=t.duration()+t._rDelay)*t:0}function B(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function O(t){return t._end=_(t._start+(t._tDur/Math.abs(t._ts||t._rts||t6)||0))}function U(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=_(n._time-(0<t._ts?e/t._ts:-(((t._dirty?t.totalDuration():t._tDur)-e)/t._ts))),O(t),n._dirty||N(n,t)),t}function k(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=B(t.rawTime(),e),(!e._dur||e$(0,e.totalDuration(),n)-e._tTime>t6)&&e.render(n,!0)),N(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;t._zTime=-t6}}function G(t,e,n,i){return e.parent&&F(e),e._start=_((a(n)?n:n||t!==t8?ev(t,n,e):t._time)+e._delay),e._end=_(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),P(t,e,"_first","_last",t._sort?"_start":0),em(e)||(t._recent=e),i||k(t,e),t._ts<0&&U(t,t._tTime),t}function H(t,e){return(ee.ScrollTrigger||p("scrollTrigger",e))&&ee.ScrollTrigger.create(e,t)}function V(t,e,n,i,r){return ek(t,e,r),t._initted?!n&&t._pt&&!ty&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&tM!==eE.frame?(eo.push(t),t._lazy=[r,i],1):void 0:1}function W(t,e,n,i){var r=t._repeat,a=_(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:_(a*(r+1)+t._rDelay*r):a,0<o&&!i&&U(t,t._tTime=t._tDur*o),t.parent&&O(t),n||N(t.parent,t),t}function j(t){return t instanceof ez?N(t):W(t,t._dur)}function q(t,e,n){var i,r,o=a(e[1]),s=(o?2:1)+(t<2?0:1),l=e[s];if(o&&(l.duration=e[1]),l.parent=n,t){for(i=l,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=u(r.vars.inherit)&&r.parent;l.immediateRender=u(i.immediateRender),t<2?l.runBackwards=1:l.startAt=e[s-1]}return new eH(e[0],l,e[1+s])}function X(t,e){return t||0===t?e(t):e}function Y(t,e){return i(t)&&(e=et.exec(t))?e[1]:""}function Z(t,e){return t&&s(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&s(t[0]))&&!t.nodeType&&t!==t_}function J(t){return t=ex(t)[0]||d("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return ex(e,n.querySelectorAll?n:n===t?d("Invalid scope")||tw.createElement("div"):t)}}function K(t){return t.sort(function(){return .5-Math.random()})}function Q(t){if(r(t))return t;var e=s(t)?t:{each:t},n=eL(e.ease),a=e.from||0,o=parseFloat(e.base)||0,u={},l=0<a&&a<1,c=isNaN(a)||l,h=e.axis,p=a,d=a;return i(a)?p=d=({center:.5,edges:.5,end:1})[a]||0:!l&&c&&(p=a[0],d=a[1]),function(t,i,r){var s,l,f,m,g,v,$,y,x,b=(r||e).length,w=u[b];if(!w){if(!(x="auto"===e.grid?0:(e.grid||[1,tG])[1])){for($=-tG;$<($=r[x++].getBoundingClientRect().left)&&x<b;);x--}for(w=u[b]=[],s=c?Math.min(x,b)*p-.5:a%x,l=x===tG?0:c?b*d/x-.5:a/x|0,y=tG,v=$=0;v<b;v++)f=v%x-s,m=l-(v/x|0),w[v]=g=h?Math.abs("y"===h?m:f):t7(f*f+m*m),$<g&&($=g),g<y&&(y=g);"random"===a&&K(w),w.max=$-y,w.min=y,w.v=b=(parseFloat(e.amount)||parseFloat(e.each)*(b<x?b-1:h?"y"===h?b/x:x:Math.max(x,b/x))||0)*("edges"===a?-1:1),w.b=b<0?o-b:o,w.u=Y(e.amount||e.each)||0,n=n&&b<0?eA(n):n}return b=(w[t]-w.min)/w.max||0,_(w.b+(n?n(b):b)*w.v)+w.u}}function tt(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=_(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(a(n)?0:Y(n))}}function te(t,e){var n,i,o=tX(t);return!o&&s(t)&&(n=o=t.radius||tG,t.values?(t=ex(t.values),(i=!a(t[0]))&&(n*=n)):t=tt(t.increment)),X(e,o?r(t)?function(e){return Math.abs((i=t(e))-e)<=n?i:e}:function(e){for(var r,o,s=parseFloat(i?e.x:e),u=parseFloat(i?e.y:0),l=tG,c=0,h=t.length;h--;)(r=i?(r=t[h].x-s)*r+(o=t[h].y-u)*o:Math.abs(t[h]-s))<l&&(l=r,c=h);return c=!n||l<=n?t[c]:e,i||c===e||a(e)?c:c+Y(e)}:tt(t))}function tn(t,e,n,i){return X(tX(t)?!e:!0===n?(n=0,!1):!i,function(){return tX(t)?t[~~(Math.random()*t.length)]:(i=(n=n||1e-5)<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i})}function ti(t,e,n){return X(n,function(n){return t[~~e(n)]})}function tr(t){for(var e,n,i,r,a=0,o="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?t9:tY),o+=t.substr(a,e-a)+tn(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),a=i+1;return o+t.substr(a,t.length-a)}function ta(t,e,n){var i,r,a,o=t.labels,s=tG;for(i in o)(r=o[i]-e)<0==!!n&&r&&s>(r=Math.abs(r))&&(a=i,s=r);return a}function to(t){return F(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ty),1>t.progress()&&e_(t,"onInterrupt"),t}function ts(t){if(l()&&t){var e=(t=!t.name&&t.default||t).name,n=r(t),i=e&&!n&&t.init?function(){this._props=[]}:t,a={init:m,render:eK,add:eU,kill:e9,modifier:eQ,rawVars:0},o={targetTest:0,get:0,getSetter:eX,aliases:{},register:0};if(eT(),t!==i){if(eu[e])return;T(i,T(A(t,a),o)),ed(i.prototype,ed(a,A(t,o))),eu[i.prop=e]=i,t.targetTest&&(eh.push(i),ea[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}f(e,i),t.register&&t.register(ny,i,ne)}else t&&eb.push(t)}function tu(t,e,n){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*ew+.5|0}function tl(t,e,n){var i,r,o,s,u,l,c,h,p,d,f=t?a(t)?[t>>16,t>>8&ew,t&ew]:0:eS.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),eS[t])f=eS[t];else if("#"===t.charAt(0)){if(t.length<6&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(o=t.charAt(3))+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&ew,f&ew,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&ew,t&ew]}else if("hsl"===t.substr(0,3)){if(f=d=t.match(tY),e){if(~t.indexOf("="))return f=t.match(tZ),n&&f.length<4&&(f[3]=1),f}else s=+f[0]%360/360,u=f[1]/100,i=2*(l=f[2]/100)-(r=l<=.5?l*(u+1):l+u-l*u),3<f.length&&(f[3]*=1),f[0]=tu(s+1/3,i,r),f[1]=tu(s,i,r),f[2]=tu(s-1/3,i,r)}else f=t.match(tY)||eS.transparent;f=f.map(Number)}return e&&!d&&(i=f[0]/ew,l=((c=Math.max(i,r=f[1]/ew,o=f[2]/ew))+(h=Math.min(i,r,o)))/2,c===h?s=u=0:(p=c-h,u=.5<l?p/(2-c-h):p/(c+h),s=c===i?(r-o)/p+(r<o?6:0):c===r?(o-i)/p+2:(i-r)/p+4,s*=60),f[0]=~~(s+.5),f[1]=~~(100*u+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f}function tc(t){var e=[],n=[],i=-1;return t.split(eD).forEach(function(t){var r=t.match(tJ)||[];e.push.apply(e,r),n.push(i+=r.length+1)}),e.c=n,e}function th(t,e,n){var i,r,a,o,s="",u=(t+s).match(eD),l=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map(function(t){return(t=tl(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(a=tc(t),(i=n.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(eD,"1").split(tJ)).length-1;c<o;c++)s+=r[c]+(~i.indexOf(c)?u.shift()||l+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!r)for(o=(r=t.split(eD)).length-1;c<o;c++)s+=r[c]+u[c];return s+r[o]}function tp(t){var e,n=t.join(" ");if(eD.lastIndex=0,eD.test(n))return e=eM.test(n),t[1]=th(t[1],e),t[0]=th(t[0],e,tc(t[1])),!0}function td(t,e){for(var n,i=t._first;i;)i instanceof ez?td(i,e):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===e||(i.timeline?td(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next}function tf(t,e,n,i){void 0===n&&(n=function t(n){return 1-e(1-n)}),void 0===i&&(i=function t(n){return n<.5?e(2*n)/2:1-e(2*(1-n))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return y(t,function(t){for(var e in e1[t]=ee[t]=a,e1[r=t.toLowerCase()]=n,a)e1[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=e1[t+"."+e]=a[e]}),a}function tm(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function tg(t,e,n){function i(t){return 1===t?1:r*Math.pow(2,-10*t)*tj((t-o)*a)+1}var r=1<=e?e:1,a=(n||(t?.3:.45))/(e<1?e:1),o=a/t5*(Math.asin(1/r)||0),s="out"===t?i:"in"===t?function(t){return 1-i(1-t)}:tm(i);return a=t5/a,s.config=function(e,n){return tg(t,e,n)},s}function tv(t,e){function n(t){return t?--t*t*((e+1)*t+e)+1:0}void 0===e&&(e=1.70158);var i="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:tm(n);return i.config=function(e){return tv(t,e)},i}var t$,ty,tx,t8,t_,tb,tw,tS,tD,tM,tE,tT,t1,t0,tC,tA,tL,tP,tR,tF,t2,tN,tI,tz,t3,tB,t4,tO,tU={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},tk={duration:.5,overwrite:!1,delay:0},tG=1e8,t6=1/tG,t5=2*Math.PI,tH=t5/4,tV=0,t7=Math.sqrt,tW=Math.cos,tj=Math.sin,tq="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},tX=Array.isArray,tY=/(?:-?\.?\d|\.)+/gi,tZ=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,tJ=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tK=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,tQ=/[+-]=-?[.\d]+/,t9=/[^,'"\[\]\s]+/gi,et=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ee={},en={suppressEvents:!0,isStart:!0,kill:!1},ei={suppressEvents:!0,kill:!1},er={suppressEvents:!0},ea={},eo=[],es={},eu={},el={},ec=30,eh=[],ep="",ed=function t(e,n){for(var i in n)e[i]=n[i];return e},ef=function t(e,n){var i=Math.floor(e/=n);return e&&i===e?i-1:i},em=function t(e){var n=e.data;return"isFromStart"===n||"isStart"===n},eg={_start:0,endTime:m,totalDuration:m},ev=function t(e,n,r){var a,o,s,u=e.labels,l=e._recent||eg,c=e.duration()>=tG?l.endTime(!1):e._dur;return i(n)&&(isNaN(n)||n in u)?(o=n.charAt(0),s="%"===n.substr(-1),a=n.indexOf("="),"<"===o||">"===o?(0<=a&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(0<=l._repeat))+(parseFloat(n.substr(1))||0)*(s?(a<0?l:r).totalDuration()/100:1)):a<0?(n in u||(u[n]=c),u[n]):(o=parseFloat(n.charAt(a-1)+n.substr(a+1)),s&&r&&(o=o/100*(tX(r)?r[0]:r).totalDuration()),1<a?t(e,n.substr(0,a-1),r)+o:c+o)):null==n?c:+n},e$=function t(e,n,i){return i<e?e:n<i?n:i},ey=[].slice,ex=function t(e,n,r){var a,o,s;return tx&&!n&&tx.selector?tx.selector(e):!i(e)||r||!tb&&eT()?tX(e)?(a=e,o=r,void 0===s&&(s=[]),a.forEach(function(t){return i(t)&&!o||Z(t,1)?s.push.apply(s,ex(t)):s.push(t)})||s):Z(e)?ey.call(e,0):e?[e]:[]:ey.call((n||tw).querySelectorAll(e),0)},e8=function t(e,n,i,r,a){var o=n-e,s=r-i;return X(a,function(t){return i+((t-e)/o*s||0)})},e_=function t(e,n,i){var r,a,o,s=e.vars,u=s[n],l=tx,c=e._ctx;if(u)return r=s[n+"Params"],a=s.callbackScope||e,i&&eo.length&&S(),c&&(tx=c),o=r?u.apply(a,r):u.call(a),tx=l,o},eb=[],ew=255,eS={aqua:[0,ew,ew],lime:[0,ew,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ew],navy:[0,0,128],white:[ew,ew,ew],olive:[128,128,0],yellow:[ew,ew,0],orange:[ew,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ew,0,0],pink:[ew,192,203],cyan:[0,ew,ew],transparent:[ew,ew,ew,0]},eD=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in eS)e+="|"+t+"\\b";return RegExp(e+")","gi")}(),eM=/hsl[a]?\(/,eE=(tF=500,t2=33,tI=tN=(tR=Date.now)(),t3=tz=1e3/240,tA={time:0,frame:0,tick:function t(){eP(!0)},deltaRatio:function t(e){return tL/(1e3/(e||60))},wake:function t(){tD&&(!tb&&l()&&(tw=(t_=tb=window).document||{},ee.gsap=ny,(t_.gsapVersions||(t_.gsapVersions=[])).push(ny.version),h(tS||t_.GreenSockGlobals||!t_.gsap&&t_||{}),tC=t_.requestAnimationFrame,eb.forEach(ts)),t1&&tA.sleep(),t0=tC||function(t){return setTimeout(t,t3-1e3*tA.time+1|0)},tT=1,eP(2))},sleep:function t(){(tC?t_.cancelAnimationFrame:clearTimeout)(t1),tT=0,t0=m},lagSmoothing:function t(e,n){t2=Math.min(n||33,tF=e||1/0)},fps:function t(e){tz=1e3/(e||240),t3=1e3*tA.time+tz},add:function t(e,n,i){var r=n?function(t,n,i,a){e(t,n,i,a),tA.remove(r)}:e;return tA.remove(e),tB[i?"unshift":"push"](r),eT(),r},remove:function t(e,n){~(n=tB.indexOf(e))&&tB.splice(n,1)&&n<=tP&&tP--},_listeners:tB=[]}),eT=function t(){return!tT&&eE.wake()},e1={},e0=/^[\d.\-M][\d.\-,\s]/,eC=/["']/g,eA=function t(e){return function(t){return 1-e(1-t)}},eL=function t(e,n){var i,a,o,s,u,l,c;return e&&(r(e)?e:e1[e]||((o=e1[(a=((i=e)+"").split("("))[0]])&&1<a.length&&o.config?o.config.apply(null,~i.indexOf("{")?[function t(e){for(var n,i,r,a={},o=e.substr(1,e.length-3).split(":"),s=o[0],u=1,l=o.length;u<l;u++)i=o[u],n=u!==l-1?i.lastIndexOf(","):i.length,r=i.substr(0,n),a[s]=isNaN(r)?r.replace(eC,"").trim():+r,s=i.substr(n+1).trim();return a}(a[1])]:(u=(s=i).indexOf("(")+1,l=s.indexOf(")"),c=s.indexOf("(",u),s.substring(u,~c&&c<l?s.indexOf(")",l+1):l)).split(",").map(M)):e1._CE&&e0.test(i)?e1._CE("",i):o))||n};function eP(t){var e,n,i,r,a=tR()-tI,o=!0===t;if(tF<a&&(tN+=a-t2),(0<(e=(i=(tI+=a)-tN)-t3)||o)&&(r=++tA.frame,tL=i-1e3*tA.time,tA.time=i/=1e3,t3+=e+(tz<=e?4:tz-e),n=1),o||(t1=t0(eP)),n)for(tP=0;tP<tB.length;tP++)tB[tP](i,tL,r,t)}function eR(t){return t<tO?t4*t*t:t<.7272727272727273?t4*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?t4*(t-=2.25/2.75)*t+.9375:t4*Math.pow(t-2.625/2.75,2)+.984375}y("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;tf(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),e1.Linear.easeNone=e1.none=e1.Linear.easeIn,tf("Elastic",tg("in"),tg("out"),tg()),t4=7.5625,tO=1/2.75,tf("Bounce",function(t){return 1-eR(1-t)},eR),tf("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),tf("Circ",function(t){return-(t7(1-t*t)-1)}),tf("Sine",function(t){return 1===t?1:1-tW(t*tH)}),tf("Back",tv("in"),tv("out"),tv()),e1.SteppedEase=e1.steps=ee.SteppedEase={config:function t(e,n){void 0===e&&(e=1);var i=1/e,r=e+(n?0:1),a=n?1:0;return function(t){return((r*e$(0,.99999999,t)|0)+a)*i}}},tk.ease=e1["quad.out"],y("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ep+=t+","+t+"Params,"});var eF,e2=function t(e,n){this.id=tV++,(e._gsap=this).target=e,this.harness=n,this.get=n?n.get:$,this.set=n?n.getSetter:eX},eN=((eF=eI.prototype).delay=function t(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},eF.duration=function t(e){return arguments.length?this.totalDuration(0<this._repeat?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},eF.totalDuration=function t(e){return arguments.length?(this._dirty=0,W(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},eF.totalTime=function t(e,n){if(eT(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(U(this,e),!i._dp||i.parent||k(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:-((i.totalDuration()-i._tTime)/i._ts))&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&e<this._tDur||this._ts<0&&0<e||!this._tDur&&!e)&&G(this._dp,this,this._start-this._delay)}return this._tTime===e&&(this._dur||n)&&(!this._initted||Math.abs(this._zTime)!==t6)&&(e||this._initted||!this.add&&!this._ptLookup)||(this._ts||(this._pTime=e),D(this,e,n)),this},eF.time=function t(e,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+z(this))%(this._dur+this._rDelay)||(e?this._dur:0),n):this._time},eF.totalProgress=function t(e,n){return arguments.length?this.totalTime(this.totalDuration()*e,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},eF.progress=function t(e,n){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+z(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},eF.iteration=function t(e,n){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,n):this._repeat?ef(this._tTime,i)+1:1},eF.timeScale=function t(e){if(!arguments.length)return this._rts===-t6?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?B(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||e===-t6?0:this._rts,this.totalTime(e$(-Math.abs(this._delay),this._tDur,n),!0),O(this),function t(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e}(this)},eF.paused=function t(e){return arguments.length?(this._ps!==e&&((this._ps=e)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(eT(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==t6&&(this._tTime-=t6)))),this):this._ps},eF.startTime=function t(e){if(arguments.length){this._start=e;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&G(n,this,e-this._delay),this}return this._start},eF.endTime=function t(e){return this._start+(u(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},eF.rawTime=function t(e){var n=this.parent||this._dp;return n?e&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?B(n.rawTime(e),this):this._tTime:this._tTime},eF.revert=function t(e){void 0===e&&(e=er);var n=ty;return ty=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),ty=n,this},eF.globalTime=function t(e){for(var n=this,i=arguments.length?e:n.rawTime();n;)i=n._start+i/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(e):i},eF.repeat=function t(e){return arguments.length?(this._repeat=e===1/0?-2:e,j(this)):-2===this._repeat?1/0:this._repeat},eF.repeatDelay=function t(e){if(arguments.length){var n=this._time;return this._rDelay=e,j(this),n?this.time(n):this}return this._rDelay},eF.yoyo=function t(e){return arguments.length?(this._yoyo=e,this):this._yoyo},eF.seek=function t(e,n){return this.totalTime(ev(this,e),u(n))},eF.restart=function t(e,n){return this.play().totalTime(e?-this._delay:0,u(n))},eF.play=function t(e,n){return null!=e&&this.seek(e,n),this.reversed(!1).paused(!1)},eF.reverse=function t(e,n){return null!=e&&this.seek(e||this.totalDuration(),n),this.reversed(!0).paused(!1)},eF.pause=function t(e,n){return null!=e&&this.seek(e,n),this.paused(!0)},eF.resume=function t(){return this.paused(!1)},eF.reversed=function t(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-t6:0)),this):this._rts<0},eF.invalidate=function t(){return this._initted=this._act=0,this._zTime=-t6,this},eF.isActive=function t(){var e,n=this.parent||this._dp,i=this._start;return!(n&&!(this._ts&&this._initted&&n.isActive()&&(e=n.rawTime(!0))>=i&&e<this.endTime(!0)-t6))},eF.eventCallback=function t(e,n,i){var r=this.vars;return 1<arguments.length?(n?(r[e]=n,i&&(r[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=n)):delete r[e],this):r[e]},eF.then=function t(e){var n=this;return new Promise(function(t){function i(){var e=n.then;n.then=null,r(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=e),t(a),n.then=e}var a=r(e)?e:E;n._initted&&1===n.totalProgress()&&0<=n._ts||!n._tTime&&n._ts<0?i():n._prom=i})},eF.kill=function t(){to(this)},eI);function eI(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,W(this,+t.duration,1,1),this.data=t.data,tx&&(this._ctx=tx).data.push(this),tT||eE.wake()}T(eN.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-t6,_prom:0,_ps:!1,_rts:1});var ez=function(t){function o(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=u(e.sortChildren),t8&&G(e.parent||t8,n(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&H(n(r),e.scrollTrigger),r}e(o,t);var s=o.prototype;return s.to=function t(e,n,i){return q(0,arguments,this),this},s.from=function t(e,n,i){return q(1,arguments,this),this},s.fromTo=function t(e,n,i,r){return q(2,arguments,this),this},s.set=function t(e,n,i){return n.duration=0,n.parent=this,L(n).repeatDelay||(n.repeat=0),n.immediateRender=!!n.immediateRender,new eH(e,n,ev(this,i),1),this},s.call=function t(e,n,i){return G(this,eH.delayedCall(0,e,n),i)},s.staggerTo=function t(e,n,i,r,a,o,s){return i.duration=n,i.stagger=i.stagger||r,i.onComplete=o,i.onCompleteParams=s,i.parent=this,new eH(e,i,ev(this,a)),this},s.staggerFrom=function t(e,n,i,r,a,o,s){return i.runBackwards=1,L(i).immediateRender=u(i.immediateRender),this.staggerTo(e,n,i,r,a,o,s)},s.staggerFromTo=function t(e,n,i,r,a,o,s,l){return r.startAt=i,L(r).immediateRender=u(r.immediateRender),this.staggerTo(e,n,r,a,o,s,l)},s.render=function t(e,n,i){var r,a,o,s,u,l,c,h,p,d,f,m,g=this._time,v=this._dirty?this.totalDuration():this._tDur,$=this._dur,y=e<=0?0:_(e),x=this._zTime<0!=e<0&&(this._initted||!$);if(this!==t8&&v<y&&0<=e&&(y=v),y!==this._tTime||i||x){if(g!==this._time&&$&&(y+=this._time-g,e+=this._time-g),r=y,p=this._start,l=!(h=this._ts),x&&($||(g=this._zTime),!e&&n||(this._zTime=e)),this._repeat){if(f=this._yoyo,u=$+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*u+e,n,i);if(r=_(y%u),y===v?(s=this._repeat,r=$):((s=~~(y/u))&&s===y/u&&(r=$,s--),$<r&&(r=$)),d=ef(this._tTime,u),!g&&this._tTime&&d!==s&&this._tTime-d*u-this._dur<=0&&(d=s),f&&1&s&&(r=$-r,m=1),s!==d&&!this._lock){var b=f&&1&d,w=b===(f&&1&s);if(s<d&&(b=!b),g=b?0:y%$?$:y,this._lock=1,this.render(g||(m?0:_(s*u)),n,!$)._lock=0,this._tTime=y,!n&&this.parent&&e_(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g&&g!==this._time||!this._ts!=l||this.vars.onRepeat&&!this.parent&&!this._act||($=this._dur,v=this._tDur,w&&(this._lock=2,g=b?$:-.0001,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l))return this;td(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function t(e,n,i){var r;if(n<i)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>n)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<n)return r;r=r._prev}}(this,_(g),_(r)))&&(y-=r-(r=c._start)),this._tTime=y,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&r&&!n&&!s&&(e_(this,"onStart"),this._tTime!==y))return this;if(g<=r&&0<=e)for(a=this._first;a;){if(o=a._next,(a._act||r>=a._start)&&a._ts&&c!==a){if(a.parent!==this)return this.render(e,n,i);if(a.render(0<a._ts?(r-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(r-a._start)*a._ts,n,i),r!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=-t6);break}}a=o}else{a=this._last;for(var S=e<0?e:r;a;){if(o=a._prev,(a._act||S<=a._end)&&a._ts&&c!==a){if(a.parent!==this)return this.render(e,n,i);if(a.render(0<a._ts?(S-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(S-a._start)*a._ts,n,i||ty&&(a._initted||a._startAt)),r!==this._time||!this._ts&&!l){c=0,o&&(y+=this._zTime=S?-t6:t6);break}}a=o}}if(c&&!n&&(this.pause(),c.render(g<=r?0:-t6)._zTime=g<=r?1:-1,this._ts))return this._start=p,O(this),this.render(e,n,i);this._onUpdate&&!n&&e_(this,"onUpdate",!0),(y===v&&this._tTime>=this.totalDuration()||!y&&g)&&(p!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((e||!$)&&(y===v&&0<this._ts||!y&&this._ts<0)&&F(this,1),n||e<0&&!g||!y&&!g&&v||(e_(this,y===v&&0<=e?"onComplete":"onReverseComplete",!0),!this._prom||y<v&&0<this.timeScale()||this._prom())))}return this},s.add=function t(e,n){var o=this;if(a(n)||(n=ev(this,n,e)),!(e instanceof eN)){if(tX(e))return e.forEach(function(t){return o.add(t,n)}),this;if(i(e))return this.addLabel(e,n);if(!r(e))return this;e=eH.delayedCall(0,e)}return this!==e?G(this,e,n):this},s.getChildren=function t(e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=-tG);for(var a=[],o=this._first;o;)o._start>=r&&(o instanceof eH?n&&a.push(o):(i&&a.push(o),e&&a.push.apply(a,o.getChildren(!0,n,i)))),o=o._next;return a},s.getById=function t(e){for(var n=this.getChildren(1,1,1),i=n.length;i--;)if(n[i].vars.id===e)return n[i]},s.remove=function t(e){return i(e)?this.removeLabel(e):r(e)?this.killTweensOf(e):(R(this,e),e===this._recent&&(this._recent=this._last),N(this))},s.totalTime=function e(n,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_(eE.time-(0<this._ts?n/this._ts:-((this.totalDuration()-n)/this._ts)))),t.prototype.totalTime.call(this,n,i),this._forcing=0,this):this._tTime},s.addLabel=function t(e,n){return this.labels[e]=ev(this,n),this},s.removeLabel=function t(e){return delete this.labels[e],this},s.addPause=function t(e,n,i){var r=eH.delayedCall(0,n||m,i);return r.data="isPause",this._hasPause=1,G(this,r,ev(this,e))},s.removePause=function t(e){var n=this._first;for(e=ev(this,e);n;)n._start===e&&"isPause"===n.data&&F(n),n=n._next},s.killTweensOf=function t(e,n,i){for(var r=this.getTweensOf(e,i),a=r.length;a--;)e4!==r[a]&&r[a].kill(e,n);return this},s.getTweensOf=function t(e,n){for(var i,r=[],o=ex(e),s=this._first,u=a(n);s;)s instanceof eH?w(s._targets,o)&&(u?(!e4||s._initted&&s._ts)&&s.globalTime(0)<=n&&s.globalTime(s.totalDuration())>n:!n||s.isActive())&&r.push(s):(i=s.getTweensOf(o,n)).length&&r.push.apply(r,i),s=s._next;return r},s.tweenTo=function t(e,n){n=n||{};var i,r=this,a=ev(r,e),o=n.startAt,s=n.onStart,u=n.onStartParams,l=n.immediateRender,c=eH.to(r,T({ease:n.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:n.duration||Math.abs((a-(o&&"time"in o?o.time:r._time))/r.timeScale())||t6,onStart:function t(){if(r.pause(),!i){var e=n.duration||Math.abs((a-(o&&"time"in o?o.time:r._time))/r.timeScale());c._dur!==e&&W(c,e,0,1).render(c._time,!0,!0),i=1}s&&s.apply(c,u||[])}},n));return l?c.render(0):c},s.tweenFromTo=function t(e,n,i){return this.tweenTo(n,T({startAt:{time:ev(this,e)}},i))},s.recent=function t(){return this._recent},s.nextLabel=function t(e){return void 0===e&&(e=this._time),ta(this,ev(this,e))},s.previousLabel=function t(e){return void 0===e&&(e=this._time),ta(this,ev(this,e),1)},s.currentLabel=function t(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+t6)},s.shiftChildren=function t(e,n,i){void 0===i&&(i=0);for(var r,a=this._first,o=this.labels;a;)a._start>=i&&(a._start+=e,a._end+=e),a=a._next;if(n)for(r in o)o[r]>=i&&(o[r]+=e);return N(this)},s.invalidate=function e(n){var i=this._first;for(this._lock=0;i;)i.invalidate(n),i=i._next;return t.prototype.invalidate.call(this,n)},s.clear=function t(e){void 0===e&&(e=!0);for(var n,i=this._first;i;)n=i._next,this.remove(i),i=n;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),N(this)},s.totalDuration=function t(e){var n,i,r,a=0,o=this,s=o._last,u=tG;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;s;)n=s._prev,s._dirty&&s.totalDuration(),u<(i=s._start)&&o._sort&&s._ts&&!o._lock?(o._lock=1,G(o,s,i-s._delay,1)._lock=0):u=i,i<0&&s._ts&&(a-=i,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=i/o._ts,o._time-=i,o._tTime-=i),o.shiftChildren(-i,!1,-1/0),u=0),s._end>a&&s._ts&&(a=s._end),s=n;W(o,o===t8&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},o.updateRoot=function t(e){if(t8._ts&&(D(t8,B(e,t8)),tM=eE.frame),eE.frame>=ec){ec+=tU.autoSleep||120;var n=t8._first;if((!n||!n._ts)&&tU.autoSleep&&eE._listeners.length<2){for(;n&&!n._ts;)n=n._next;n||eE.sleep()}}},o}(eN);function e3(t,e,n,a,o,u){var l,c,h,p;if(eu[t]&&!1!==(l=new eu[t]).init(o,l.rawVars?e[t]:function t(e,n,a,o,u){if(r(e)&&(e=eG(e,u,n,a,o)),!s(e)||e.style&&e.nodeType||tX(e)||tq(e))return i(e)?eG(e,u,n,a,o):e;var l,c={};for(l in e)c[l]=eG(e[l],u,n,a,o);return c}(e[t],a,o,u,n),n,a,u)&&(n._pt=c=new ne(n._pt,o,t,0,1,l.render,l,0,l.priority),n!==tE))for(h=n._ptLookup[n._targets.indexOf(o)],p=l._props.length;p--;)h[l._props[p]]=c;return l}function eB(t,e,n,i){var r,a,o=e.ease||i||"power1.inOut";if(tX(e))a=n[t]||(n[t]=[]),e.forEach(function(t,n){return a.push({t:n/(e.length-1)*100,v:t,e:o})});else for(r in e)a=n[r]||(n[r]=[]),"ease"===r||a.push({t:parseFloat(t),v:e[r],e:o})}T(ez.prototype,{_lock:0,_hasPause:0,_forcing:0});var e4,eO,eU=function t(e,n,a,o,s,u,l,c,h,d){r(o)&&(o=o(s||0,e,u));var f,m=e[n],g="get"!==a?a:r(m)?h?e[n.indexOf("set")||!r(e["get"+n.substr(3)])?n:"get"+n.substr(3)](h):e[n]():m,v=r(m)?h?eq:ej:eW;if(!i(o)||(~o.indexOf("random(")&&(o=tr(o)),"="!==o.charAt(1)||((f=b(g,o)+(Y(g)||0))||0===f)&&(o=f)),!d||g!==o||eO)return isNaN(g*o)||""===o?(m||n in e||p(n,o),(function t(e,n,i,r,a,o,s){var u,l,c,h,p,d,f,m,g=new ne(this._pt,e,n,0,1,eJ,null,a),v=0,$=0;for(g.b=i,g.e=r,i+="",(f=~(r+="").indexOf("random("))&&(r=tr(r)),o&&(o(m=[i,r],e,n),i=m[0],r=m[1]),l=i.match(tK)||[];u=tK.exec(r);)h=u[0],p=r.substring(v,u.index),c?c=(c+1)%5:"rgba("===p.substr(-5)&&(c=1),h!==l[$++]&&(d=parseFloat(l[$-1])||0,g._pt={_next:g._pt,p:p||1===$?p:",",s:d,c:"="===h.charAt(1)?b(d,h)-d:parseFloat(h)-d,m:c&&c<4?Math.round:0},v=tK.lastIndex);return g.c=v<r.length?r.substring(v,r.length):"",g.fp=s,(tQ.test(r)||f)&&(g.e=0),this._pt=g}).call(this,e,n,g,o,v,c||tU.stringFilter,h)):(f=new ne(this._pt,e,n,+g||0,o-(g||0),"boolean"==typeof m?eZ:eY,0,v),h&&(f.fp=h),l&&f.modifier(l,this,e),this._pt=f)},ek=function t(e,n,i){var r,a,o,s,l,c,h,p,d,f,m,$,y,x=e.vars,_=x.ease,b=x.startAt,w=x.immediateRender,D=x.lazy,M=x.onUpdate,E=x.onUpdateParams,C=x.callbackScope,L=x.runBackwards,P=x.yoyoEase,R=x.keyframes,N=x.autoRevert,I=e._dur,z=e._startAt,B=e._targets,O=e.parent,U=O&&"nested"===O.data?O.vars.targets:B,k="auto"===e._overwrite&&!t$,G=e.timeline;if(!G||R&&_||(_="none"),e._ease=eL(_,tk.ease),e._yEase=P?eA(eL(!0===P?_:P,tk.ease)):0,P&&e._yoyo&&!e._repeat&&(P=e._yEase,e._yEase=e._ease,e._ease=P),e._from=!G&&!!x.runBackwards,!G||R&&!x.stagger){if($=(p=B[0]?v(B[0]).harness:0)&&x[p.prop],r=A(x,ea),z&&(z._zTime<0&&z.progress(1),n<0&&L&&w&&!N?z.render(-1,!0):z.revert(L&&I?ei:en),z._lazy=0),b){if(F(e._startAt=eH.set(B,T({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:!z&&u(D),startAt:null,delay:0,onUpdate:M,onUpdateParams:E,callbackScope:C,stagger:0},b))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ty||!w&&!N)&&e._startAt.revert(ei),w&&I&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(L&&I&&!z){if(n&&(w=!1),o=T({overwrite:!1,data:"isFromStart",lazy:w&&!z&&u(D),immediateRender:w,stagger:0,parent:O},r),$&&(o[p.prop]=$),F(e._startAt=eH.set(B,o)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ty?e._startAt.revert(ei):e._startAt.render(-1,!0)),e._zTime=n,w){if(!n)return}else t(e._startAt,t6,t6)}for(e._pt=e._ptCache=0,D=I&&u(D)||D&&!I,a=0;a<B.length;a++){if(h=(l=B[a])._gsap||g(B)[a]._gsap,e._ptLookup[a]=f={},es[h.id]&&eo.length&&S(),m=U===B?a:U.indexOf(l),p&&!1!==(d=new p).init(l,$||r,e,m,U)&&(e._pt=s=new ne(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(t){f[t]=s}),d.priority&&(c=1)),!p||$)for(o in r)eu[o]&&(d=e3(o,r,e,m,l,U))?d.priority&&(c=1):f[o]=s=eU.call(e,l,o,"get",r[o],m,U,0,x.stringFilter);e._op&&e._op[a]&&e.kill(l,e._op[a]),k&&e._pt&&(e4=e,t8.killTweensOf(l,f,e.globalTime(n)),y=!e.parent,e4=0),e._pt&&D&&(es[h.id]=1)}c&&nt(e),e._onInit&&e._onInit(e)}e._onUpdate=M,e._initted=(!e._op||e._pt)&&!y,R&&n<=0&&G.render(tG,!0,!0)},eG=function t(e,n,a,o,s){return r(e)?e.call(n,a,o,s):i(e)&&~e.indexOf("random(")?tr(e):e},e6=ep+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",e5={};y(e6+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return e5[t]=1});var eH=function(t){function r(e,i,r,o){"number"==typeof i&&(r.duration=i,i=r,r=null);var l,h,p,f,m,v,$,y,x,b=(l=t.call(this,o?i:L(i))||this).vars,w=b.duration,S=b.delay,D=b.immediateRender,M=b.stagger,E=b.overwrite,C=b.keyframes,P=b.defaults,R=b.scrollTrigger,F=b.yoyoEase,N=i.parent||t8,I=(tX(e)||tq(e)?a(e[0]):"length"in i)?[e]:ex(e);if(l._targets=I.length?g(I):d("GSAP target "+e+" not found. https://greensock.com",!tU.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=E,C||M||c(w)||c(S)){if(i=l.vars,(h=l.timeline=new ez({data:"nested",defaults:P||{},targets:N&&"nested"===N.data?N.vars.targets:I})).kill(),h.parent=h._dp=n(l),h._start=0,M||c(w)||c(S)){if(m=I.length,y=M&&Q(M),s(M))for(v in M)~e6.indexOf(v)&&((x=x||{})[v]=M[v]);for(p=0;p<m;p++)(f=A(i,e5)).stagger=0,F&&(f.yoyoEase=F),x&&ed(f,x),$=I[p],f.duration=+eG(w,n(l),p,$,I),f.delay=(+eG(S,n(l),p,$,I)||0)-l._delay,!M&&1===m&&f.delay&&(l._delay=S=f.delay,l._start+=S,f.delay=0),h.to($,f,y?y(p,$,I):0),h._ease=e1.none;h.duration()?w=S=0:l.timeline=0}else if(C){L(T(h.vars.defaults,{ease:"none"})),h._ease=eL(C.ease||i.ease||"none");var z,B,O,U=0;if(tX(C))C.forEach(function(t){return h.to(I,t,">")}),h.duration();else{for(v in f={},C)"ease"===v||"easeEach"===v||eB(v,C[v],f,C.easeEach);for(v in f)for(z=f[v].sort(function(t,e){return t.t-e.t}),p=U=0;p<z.length;p++)(O={ease:(B=z[p]).e,duration:(B.t-(p?z[p-1].t:0))/100*w})[v]=B.v,h.to(I,O,U),U+=O.duration;h.duration()<w&&h.to({},{duration:w-h.duration()})}}w||l.duration(w=h.duration())}else l.timeline=0;return!0!==E||t$||(e4=n(l),t8.killTweensOf(I),e4=0),G(N,n(l),r),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(D||!w&&!C&&l._start===_(N._time)&&u(D)&&function t(e){return!e||e._ts&&t(e.parent)}(n(l))&&"nested"!==N.data)&&(l._tTime=-t6,l.render(Math.max(0,-S)||0)),R&&H(n(l),R),l}e(r,t);var o=r.prototype;return o.render=function t(e,n,i){var r,a,o,s,u,l,c,h,p,d=this._time,f=this._tDur,m=this._dur,g=e<0,v=f-t6<e&&!g?f:e<t6?0:e;if(m){if(v!==this._tTime||!e||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=g){if(r=v,h=this.timeline,this._repeat){if(s=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*s+e,n,i);if(r=_(v%s),v===f?(o=this._repeat,r=m):((o=~~(v/s))&&o===v/s&&(r=m,o--),m<r&&(r=m)),(l=this._yoyo&&1&o)&&(p=this._yEase,r=m-r),u=ef(this._tTime,s),r===d&&!i&&this._initted)return this._tTime=v,this;o!==u&&(h&&this._yEase&&td(h,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(_(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(V(this,g?e:r,i,n,v))return this._tTime=0,this;if(d!==this._time)return this;if(m!==this._dur)return this.render(e,n,i)}if(this._tTime=v,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(p||this._ease)(r/m),this._from&&(this.ratio=c=1-c),r&&!d&&!n&&!o&&(e_(this,"onStart"),this._tTime!==v))return this;for(a=this._pt;a;)a.r(c,a.d),a=a._next;h&&h.render(e<0?e:!r&&l?-t6:h._dur*h._ease(r/this._dur),n,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!n&&(g&&I(this,e,0,i),e_(this,"onUpdate")),this._repeat&&o!==u&&this.vars.onRepeat&&!n&&this.parent&&e_(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(g&&!this._onUpdate&&I(this,e,0,!0),(e||!m)&&(v===this._tDur&&0<this._ts||!v&&this._ts<0)&&F(this,1),n||g&&!d||!(v||d||l)||(e_(this,v===f?"onComplete":"onReverseComplete",!0),!this._prom||v<f&&0<this.timeScale()||this._prom()))}}else!function t(e,n,i,r){var a,o,s,u=e.ratio,l=n<0||!n&&(!e._start&&function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(0>n.rawTime()||t(n))}(e)&&(e._initted||!em(e))||(e._ts<0||e._dp._ts<0)&&!em(e))?0:1,c=e._rDelay,h=0;if(c&&e._repeat&&(h=e$(0,e._tDur,n),o=ef(h,c),e._yoyo&&1&o&&(l=1-l),o!==ef(e._tTime,c)&&(u=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==u||ty||r||e._zTime===t6||!n&&e._zTime){if(!e._initted&&V(e,n,r,i,h))return;for(s=e._zTime,e._zTime=n||(i?t6:0),i=i||n&&!s,e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,a=e._pt;a;)a.r(l,a.d),a=a._next;n<0&&I(e,n,0,!0),e._onUpdate&&!i&&e_(e,"onUpdate"),h&&e._repeat&&!i&&e.parent&&e_(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===l&&(l&&F(e,1),i||ty||(e_(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)}(this,e,n,i);return this},o.targets=function t(){return this._targets},o.invalidate=function e(n){return n&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),t.prototype.invalidate.call(this,n)},o.resetTo=function t(e,n,i,r){tT||eE.wake(),this._ts||this.play();var a,o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ek(this,o),!function t(e,n,i,r,a,o,s){var u,l,c,h,p=(e._pt&&e._ptCache||(e._ptCache={}))[n];if(!p)for(p=e._ptCache[n]=[],c=e._ptLookup,h=e._targets.length;h--;){if((u=c[h][n])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==n&&u.fp!==n;)u=u._next;if(!u)return eO=1,e.vars[n]="+=0",ek(e,s),eO=0,1;p.push(u)}for(h=p.length;h--;)(u=(l=p[h])._pt||l).s=!r&&0!==r||a?u.s+(r||0)+o*u.c:r,u.c=i-u.s,l.e&&(l.e=x(i)+Y(l.e)),l.b&&(l.b=u.s+Y(l.b))}(this,e,n,i,r,a=this._ease(o/this._dur),o)?(U(this,0),this.parent||P(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0)):this.resetTo(e,n,i,r)},o.kill=function t(e,n){if(void 0===n&&(n="all"),!(e||n&&"all"!==n))return this._lazy=this._pt=0,this.parent?to(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(e,n,e4&&!0!==e4.vars.overwrite)._first||to(this),this.parent&&r!==this.timeline.totalDuration()&&W(this,this._dur*this.timeline._tDur/r,0,1),this}var a,o,s,u,l,c,h,p=this._targets,d=e?ex(e):p,f=this._ptLookup,m=this._pt;if((!n||"all"===n)&&function t(e,n){for(var i=e.length,r=i===n.length;r&&i--&&e[i]===n[i];);return i<0}(p,d))return"all"===n&&(this._pt=0),to(this);for(a=this._op=this._op||[],"all"!==n&&(i(n)&&(l={},y(n,function(t){return l[t]=1}),n=l),n=function t(e,n){var i,r,a,o,s=e[0]?v(e[0]).harness:0,u=s&&s.aliases;if(!u)return n;for(r in i=ed({},n),u)if((r in i))for(a=(o=u[r].split(",")).length;a--;)i[o[a]]=i[r];return i}(p,n)),h=p.length;h--;)if(~d.indexOf(p[h]))for(l in o=f[h],"all"===n?(a[h]=n,u=o,s={}):(s=a[h]=a[h]||{},u=n),u)(c=o&&o[l])&&("kill"in c.d&&!0!==c.d.kill(l)||R(this,c,"_pt"),delete o[l]),"all"!==s&&(s[l]=1);return this._initted&&!this._pt&&m&&to(this),this},r.to=function t(e,n,i){return new r(e,n,i)},r.from=function t(e,n){return q(1,arguments)},r.delayedCall=function t(e,n,i,a){return new r(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:a})},r.fromTo=function t(e,n,i){return q(2,arguments)},r.set=function t(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new r(e,n)},r.killTweensOf=function t(e,n,i){return t8.killTweensOf(e,n,i)},r}(eN);function eV(t,e,n){return t.setAttribute(e,n)}function e7(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)}T(eH.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),y("staggerTo,staggerFrom,staggerFromTo",function(t){eH[t]=function(){var e=new ez,n=ey.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var eW=function t(e,n,i){return e[n]=i},ej=function t(e,n,i){return e[n](i)},eq=function t(e,n,i,r){return e[n](r.fp,i)},eX=function t(e,n){return r(e[n])?ej:o(e[n])&&e.setAttribute?eV:eW},eY=function t(e,n){return n.set(n.t,n.p,Math.round(1e6*(n.s+n.c*e))/1e6,n)},eZ=function t(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},eJ=function t(e,n){var i=n._pt,r="";if(!e&&n.b)r=n.b;else if(1===e&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},eK=function t(e,n){for(var i=n._pt;i;)i.r(e,i.d),i=i._next},eQ=function t(e,n,i,r){for(var a,o=this._pt;o;)a=o._next,o.p===r&&o.modifier(e,n,i),o=a},e9=function t(e){for(var n,i,r=this._pt;r;)i=r._next,(r.p!==e||r.op)&&r.op!==e?r.dep||(n=1):R(this,r,"_pt"),r=i;return!n},nt=function t(e){for(var n,i,r,a,o=e._pt;o;){for(n=o._next,i=r;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:a)?o._prev._next=o:r=o,(o._next=i)?i._prev=o:a=o,o=n}e._pt=r},ne=(nn.prototype.modifier=function t(e,n,i){this.mSet=this.mSet||this.set,this.set=e7,this.m=e,this.mt=i,this.tween=n},nn);function nn(t,e,n,i,r,a,o,s,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||eY,this.d=o||this,this.set=s||eW,this.pr=u||0,(this._next=t)&&(t._prev=this)}function ni(t){return(ns[t]||nu).map(function(t){return t()})}function nr(){var t=Date.now(),e=[];2<t-nl&&(ni("matchMediaInit"),no.forEach(function(t){var n,i,r,a,o=t.queries,s=t.conditions;for(i in o)(n=t_.matchMedia(o[i]).matches)&&(r=1),n!==s[i]&&(s[i]=n,a=1);a&&(t.revert(),r&&e.push(t))}),ni("matchMediaRevert"),e.forEach(function(t){return t.onMatch(t)}),nl=t,ni("matchMedia"))}y(ep+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return ea[t]=1}),ee.TweenMax=ee.TweenLite=eH,ee.TimelineLite=ee.TimelineMax=ez,t8=new ez({sortChildren:!1,defaults:tk,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),tU.stringFilter=tp;var na,no=[],ns={},nu=[],nl=0,nc=0,nh=((na=np.prototype).add=function t(e,n,i){function a(){var t,e=tx,a=o.selector;return e&&e!==o&&e.data.push(o),i&&(o.selector=J(i)),tx=o,t=n.apply(o,arguments),r(t)&&o._r.push(t),tx=e,o.selector=a,o.isReverted=!1,t}r(e)&&(i=n,n=e,e=r);var o=this;return o.last=a,e===r?a(o):e?o[e]=a:a},na.ignore=function t(e){var n=tx;tx=null,e(this),tx=n},na.getTweens=function t(){var e=[];return this.data.forEach(function(t){return t instanceof np?e.push.apply(e,t.getTweens()):t instanceof eH&&!(t.parent&&"nested"===t.parent.data)&&e.push(t)}),e},na.clear=function t(){this._r.length=this.data.length=0},na.kill=function t(e,n){var i=this;if(e){var r=this.getTweens();this.data.forEach(function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(t){return r.splice(r.indexOf(t),1)}))}),r.map(function(t){return{g:t.globalTime(0),t:t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(t){return t.t.revert(e)}),this.data.forEach(function(t){return!(t instanceof eH)&&t.revert&&t.revert(e)}),this._r.forEach(function(t){return t(e,i)}),this.isReverted=!0}else this.data.forEach(function(t){return t.kill&&t.kill()});if(this.clear(),n)for(var a=no.length;a--;)no[a].id===this.id&&no.splice(a,1)},na.revert=function t(e){this.kill(e||{})},np);function np(t,e){this.selector=e&&J(e),this.data=[],this._r=[],this.isReverted=!1,this.id=nc++,t&&this.add(t)}var nd,nf=((nd=nm.prototype).add=function t(e,n,i){s(e)||(e={matches:e});var r,a,o,u=new nh(0,i||this.scope),l=u.conditions={};for(a in tx&&!u.selector&&(u.selector=tx.selector),this.contexts.push(u),n=u.add("onMatch",n),u.queries=e)"all"===a?o=1:(r=t_.matchMedia(e[a]))&&(0>no.indexOf(u)&&no.push(u),(l[a]=r.matches)&&(o=1),r.addListener?r.addListener(nr):r.addEventListener("change",nr));return o&&n(u),this},nd.revert=function t(e){this.kill(e||{})},nd.kill=function t(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},nm);function nm(t){this.contexts=[],this.scope=t}var ng={registerPlugin:function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(t){return ts(t)})},timeline:function t(e){return new ez(e)},getTweensOf:function t(e,n){return t8.getTweensOf(e,n)},getProperty:function t(e,n,r,a){i(e)&&(e=ex(e)[0]);var o=v(e||{}).get,s=r?E:M;return"native"===r&&(r=""),e?n?s((eu[n]&&eu[n].get||o)(e,n,r,a)):function(t,n,i){return s((eu[t]&&eu[t].get||o)(e,t,n,i))}:e},quickSetter:function t(e,n,i){if(1<(e=ex(e)).length){var r=e.map(function(t){return ny.quickSetter(t,n,i)}),a=r.length;return function(t){for(var e=a;e--;)r[e](t)}}e=e[0]||{};var o=eu[n],s=v(e),u=s.harness&&(s.harness.aliases||{})[n]||n,l=o?function(t){var n=new o;tE._pt=0,n.init(e,i?t+i:t,tE,0,[e]),n.render(1,n),tE._pt&&eK(1,tE)}:s.set(e,u);return o?l:function(t){return l(e,u,i?t+i:t,s,1)}},quickTo:function t(e,n,i){function r(t,e,i){return o.resetTo(n,t,e,i)}var a,o=ny.to(e,ed(((a={})[n]="+=0.1",a.paused=!0,a),i||{}));return r.tween=o,r},isTweening:function t(e){return 0<t8.getTweensOf(e,!0).length},defaults:function t(e){return e&&e.ease&&(e.ease=eL(e.ease,tk.ease)),C(tk,e||{})},config:function t(e){return C(tU,e||{})},registerEffect:function t(e){var n=e.name,i=e.effect,r=e.plugins,a=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(t){return t&&!eu[t]&&!ee[t]&&d(n+" effect requires "+t+" plugin.")}),el[n]=function(t,e,n){return i(ex(t),T(e||{},a),n)},o&&(ez.prototype[n]=function(t,e,i){return this.add(el[n](t,s(e)?e:(i=e)&&{},this),i)})},registerEase:function t(e,n){e1[e]=eL(n)},parseEase:function t(e,n){return arguments.length?eL(e,n):e1},getById:function t(e){return t8.getById(e)},exportRoot:function t(e,n){void 0===e&&(e={});var i,r,a=new ez(e);for(a.smoothChildTiming=u(e.smoothChildTiming),t8.remove(a),a._dp=0,a._time=a._tTime=t8._time,i=t8._first;i;)r=i._next,!n&&!i._dur&&i instanceof eH&&i.vars.onComplete===i._targets[0]||G(a,i,i._start-i._delay),i=r;return G(t8,a,0),a},context:function t(e,n){return e?new nh(e,n):tx},matchMedia:function t(e){return new nf(e)},matchMediaRefresh:function t(){return no.forEach(function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()})||nr()},addEventListener:function t(e,n){var i=ns[e]||(ns[e]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function t(e,n){var i=ns[e],r=i&&i.indexOf(n);0<=r&&i.splice(r,1)},utils:{wrap:function t(e,n,i){var r=n-e;return tX(e)?ti(e,t(0,e.length),n):X(i,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,n,i){var r=n-e,a=2*r;return tX(e)?ti(e,t(0,e.length-1),n):X(i,function(t){return e+(r<(t=(a+(t-e)%a)%a||0)?a-t:t)})},distribute:Q,random:tn,snap:te,normalize:function t(e,n,i){return e8(e,n,0,1,i)},getUnit:Y,clamp:function t(e,n,i){return X(i,function(t){return e$(e,n,t)})},splitColor:tl,toArray:ex,selector:J,mapRange:e8,pipe:function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(t){return n.reduce(function(t,e){return e(t)},t)}},unitize:function t(e,n){return function(t){return e(parseFloat(t))+(n||Y(t))}},interpolate:function t(e,n,r,a){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var s,u,l,c,h,p=i(e),d={};if(!0===r&&(a=1)&&(r=null),p)e={p:e},n={p:n};else if(tX(e)&&!tX(n)){for(l=[],h=(c=e.length)-2,u=1;u<c;u++)l.push(t(e[u-1],e[u]));c--,o=function t(e){var n=Math.min(h,~~(e*=c));return l[n](e-n)},r=n}else a||(e=ed(tX(e)?[]:{},e));if(!l){for(s in n)eU.call(d,e,s,"get",n[s]);o=function t(n){return eK(n,d)||(p?e.p:e)}}}return X(r,o)},shuffle:K},install:h,effects:el,ticker:eE,updateRoot:ez.updateRoot,plugins:eu,globalTimeline:t8,core:{PropTween:ne,globals:f,Tween:eH,Timeline:ez,Animation:eN,getCache:v,_removeLinkedListItem:R,reverting:function t(){return ty},context:function t(e){return e&&tx&&(tx.data.push(e),e._ctx=tx),tx},suppressOverwrites:function t(e){return t$=e}}};function nv(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n}function n$(t,e){return{name:t,rawVars:1,init:function t(n,r,a){a._onInit=function(t){var n,a;if(i(r)&&(n={},y(r,function(t){return n[t]=1}),r=n),e){for(a in n={},r)n[a]=e(r[a]);r=n}!function t(e,n){var i,r,a,o=e._targets;for(i in n)for(r=o.length;r--;)(a=(a=e._ptLookup[r][i])&&a.d)&&(a._pt&&(a=nv(a,i)),a&&a.modifier&&a.modifier(n[i],e,o[r],i))}(t,r)}}}}y("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return ng[t]=eH[t]}),eE.add(ez.updateRoot),tE=ng.to({},{duration:0});var ny=ng.registerPlugin({name:"attr",init:function t(e,n,i,r,a){var o,s,u;for(o in this.tween=i,n)u=e.getAttribute(o)||"",(s=this.add(e,"setAttribute",(u||0)+"",n[o],r,a,0,0,o)).op=o,s.b=u,this._props.push(o)},render:function t(e,n){for(var i=n._pt;i;)ty?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function t(e,n){for(var i=n.length;i--;)this.add(e,i,e[i]||0,n[i],0,0,0,0,0,1)}},n$("roundProps",tt),n$("modifiers"),n$("snap",te))||ng;function nx(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function n8(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function n_(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function nw(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)}function nS(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function nD(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function nM(t,e,n){return t.style[e]=n}function nE(t,e,n){return t.style.setProperty(e,n)}function nT(t,e,n){return t._gsap[e]=n}function n1(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n}function n0(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)}function nC(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)}function nA(t,e){var n=this,i=this.target,r=i.style;if(t in i_&&r){if(this.tfm=this.tfm||{},"transform"===t)return iT.transform.split(",").forEach(function(t){return nA.call(n,t,e)});if(~(t=iT[t]||t).indexOf(",")?t.split(",").forEach(function(t){return n.tfm[t]=iR(i,t)}):this.tfm[t]=i._gsap.x?i._gsap[t]:iR(i,t),0<=this.props.indexOf(i1))return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(i0,e,"")),t=i1}(r||e)&&this.props.push(t,e,r[t])}function nL(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))}function nP(){var t,e,n=this.props,i=this.target,r=i.style,a=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(iD,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)a[e]=this.tfm[e];a.svg&&(a.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=it())&&t.isStart||r[i1]||(nL(r),a.uncache=1)}}function nR(t,e){var n={target:t,props:[],revert:nP,save:nA};return t._gsap||ny.core.getCache(t),e&&e.split(",").forEach(function(t){return n.save(t)}),n}function nF(t,e){var n=nZ.createElementNS?nZ.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):nZ.createElement(t);return n.style?n:nZ.createElement(t)}function n2(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(iD,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&n2(t,iA(e)||e,1)||""}function nN(){"undefined"!=typeof window&&window.document&&(nJ=(nZ=(nY=window).document).documentElement,nQ=nF("div")||{style:{}},nF("div"),i0=(i1=iA(i1))+"Origin",nQ.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ie=!!iA("perspective"),it=ny.core.reverting,nK=1)}function nI(t){var e,n=nF("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(nJ.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=nI}catch(o){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),nJ.removeChild(n),this.style.cssText=a,e}function nz(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])}function n3(t){var e;try{e=t.getBBox()}catch(n){e=nI.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===nI||(e=nI.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+nz(t,["x","cx","x1"])||0,y:+nz(t,["y","cy","y1"])||0,width:0,height:0}}function nB(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!n3(t))}function n4(t,e){if(e){var n=t.style;e in i_&&e!==i0&&(e=i1),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(iD,"-$1").toLowerCase())):n.removeAttribute(e)}}function nO(t,e,n,i,r,a){var o=new ne(t._pt,e,n,0,1,a?nD:nS);return(t._pt=o).b=i,o.e=r,t._props.push(n),o}function nU(t,e,n,i){var r,a,o,s,u=parseFloat(n)||0,l=(n+"").trim().substr((u+"").length)||"px",c=nQ.style,h=iM.test(e),p="svg"===t.tagName.toLowerCase(),d=(p?"client":"offset")+(h?"Width":"Height"),f="px"===i,m="%"===i;return i===l||!u||iL[i]||iL[l]?u:("px"===l||f||(u=nU(t,e,n,"px")),s=t.getCTM&&nB(t),(m||"%"===l)&&(i_[e]||~e.indexOf("adius"))?(r=s?t.getBBox()[h?"width":"height"]:t[d],x(m?u/r*100:u/100*r)):(c[h?"width":"height"]=100+(f?l:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==nZ&&a.appendChild||(a=nZ.body),(o=a._gsap)&&m&&o.width&&h&&o.time===eE.time&&!o.uncache?x(u/o.width*100):(!m&&"%"!==l||iP[n2(a,"display")]||(c.position=n2(t,"position")),a===t&&(c.position="static"),a.appendChild(nQ),r=nQ[d],a.removeChild(nQ),c.position="absolute",h&&m&&((o=v(a)).time=eE.time,o.width=a[d]),x(f?r*u/100:r&&u?100/r*u:0))))}function nk(t,e,n,i){if(!n||"none"===n){var r=iA(e,t,1),a=r&&n2(t,r,1);a&&a!==n?(e=r,n=a):"borderColor"===e&&(n=n2(t,"borderTopColor"))}var o,s,u,l,c,h,p,d,f,m,g,v=new ne(this._pt,t.style,e,0,1,eJ),$=0,y=0;if(v.b=n,v.e=i,n+="","auto"==(i+="")&&(t.style[e]=i,i=n2(t,e)||i,t.style[e]=n),tp(o=[n,i]),i=o[1],u=(n=o[0]).match(tJ)||[],(i.match(tJ)||[]).length){for(;s=tJ.exec(i);)p=s[0],f=i.substring($,s.index),c?c=(c+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(c=1),p!==(h=u[y++]||"")&&(l=parseFloat(h)||0,g=h.substr((l+"").length),"="===p.charAt(1)&&(p=b(l,p)+g),d=parseFloat(p),m=p.substr((d+"").length),$=tJ.lastIndex-m.length,m||(m=m||tU.units[e]||g,$===i.length&&(i+=m,v.e+=m)),g!==m&&(l=nU(t,e,h,m)||0),v._pt={_next:v._pt,p:f||1===y?f:",",s:l,c:d-l,m:c&&c<4||"zIndex"===e?Math.round:0});v.c=$<i.length?i.substring($,i.length):""}else v.r="display"===e&&"none"===i?nD:nS;return tQ.test(i)&&(v.e=0),this._pt=v}function nG(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=iF[n]||n,e[1]=iF[i]||i,e.join(" ")}function n6(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,o=a.style,s=e.u,u=a._gsap;if("all"===s||!0===s)o.cssText="",i=1;else for(r=(s=s.split(",")).length;-1<--r;)i_[n=s[r]]&&(i=1,n="transformOrigin"===n?i0:i1),n4(a,n);i&&(n4(a,i1),u&&(u.svg&&a.removeAttribute("transform"),iz(a,1),u.uncache=1,nL(o)))}}function n5(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function nH(t){var e=n2(t,i1);return n5(e)?iN:e.substr(7).match(tZ).map(x)}function nV(t,e){var n,i,r,a,o=t._gsap||v(t),s=t.style,u=nH(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?iN:u:(u!==iN||t.offsetParent||t===nJ||o.svg||(r=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,i=t.nextElementSibling,nJ.appendChild(t)),u=nH(t),r?s.display=r:n4(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):nJ.removeChild(t))),e&&6<u.length?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)}function n7(t,e,n,i,r,a){var o,s,u,l=t._gsap,c=r||nV(t,!0),h=l.xOrigin||0,p=l.yOrigin||0,d=l.xOffset||0,f=l.yOffset||0,m=c[0],g=c[1],v=c[2],$=c[3],y=c[4],x=c[5],_=e.split(" "),b=parseFloat(_[0])||0,w=parseFloat(_[1])||0;n?c!==iN&&(s=m*$-g*v)&&(u=b*(-g/s)+w*(m/s)-(m*x-g*y)/s,b=b*($/s)+w*(-v/s)+(v*x-$*y)/s,w=u):(b=(o=n3(t)).x+(~_[0].indexOf("%")?b/100*o.width:b),w=o.y+(~(_[1]||_[0]).indexOf("%")?w/100*o.height:w)),i||!1!==i&&l.smooth?(y=b-h,x=w-p,l.xOffset=d+(y*m+x*v)-y,l.yOffset=f+(y*g+x*$)-x):l.xOffset=l.yOffset=0,l.xOrigin=b,l.yOrigin=w,l.smooth=!!i,l.origin=e,l.originIsAbsolute=!!n,t.style[i0]="0px 0px",a&&(nO(a,l,"xOrigin",h,b),nO(a,l,"yOrigin",p,w),nO(a,l,"xOffset",d,l.xOffset),nO(a,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",b+" "+w)}function nW(t,e,n){var i=Y(e);return x(parseFloat(e)+parseFloat(nU(t,"x",n+"px",i)))+i}function nj(t,e,n,r,a){var o,s,u=i(a),l=parseFloat(a)*(u&&~a.indexOf("rad")?ib:1)-r,c=r+l+"deg";return u&&("short"===(o=a.split("_")[1])&&(l%=360)!=l%180&&(l+=l<0?360:-360),"cw"===o&&l<0?l=(l+36e9)%360-360*~~(l/360):"ccw"===o&&0<l&&(l=(l-36e9)%360-360*~~(l/360))),t._pt=s=new ne(t._pt,e,n,r,l,n8),s.e=c,s.u="deg",t._props.push(n),s}function nq(t,e){for(var n in e)t[n]=e[n];return t}function nX(t,e,n){var i,r,a,o,s,u,l,c=nq({},n._gsap),h=n.style;for(r in c.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),h[i1]=e,i=iz(n,1),n4(n,i1),n.setAttribute("transform",a)):(a=getComputedStyle(n)[i1],h[i1]=e,i=iz(n,1),h[i1]=a),i_)(a=c[r])!==(o=i[r])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)&&(s=Y(a)!==(l=Y(o))?nU(n,r,a,l):parseFloat(a),u=parseFloat(o),t._pt=new ne(t._pt,i,r,s,u-s,nx),t._pt.u=l||0,t._props.push(r));nq(i,c)}eH.version=ez.version=ny.version="3.12.2",tD=1,l()&&eT();var nY,nZ,nJ,nK,nQ,n9,it,ie,ii=e1.Power0,ir=e1.Power1,ia=e1.Power2,io=e1.Power3,is=e1.Power4,iu=e1.Linear,il=e1.Quad,ic=e1.Cubic,ih=e1.Quart,ip=e1.Quint,id=e1.Strong,im=e1.Elastic,ig=e1.Back,iv=e1.SteppedEase,i$=e1.Bounce,iy=e1.Sine,ix=e1.Expo,i8=e1.Circ,i_={},ib=180/Math.PI,iw=Math.PI/180,iS=Math.atan2,iD=/([A-Z])/g,iM=/(left|right|width|margin|padding|x)/i,iE=/[\s,\(]\S/,iT={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},i1="transform",i0=i1+"Origin",iC="O,Moz,ms,Ms,Webkit".split(","),iA=function t(e,n,i){var r=(n||nQ).style,a=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(iC[a]+e in r););return a<0?null:(3===a?"ms":0<=a?iC[a]:"")+e},iL={deg:1,rad:1,turn:1},iP={grid:1,flex:1},iR=function t(e,n,i,r){var a;return nK||nN(),n in iT&&"transform"!==n&&~(n=iT[n]).indexOf(",")&&(n=n.split(",")[0]),i_[n]&&"transform"!==n?(a=iz(e,r),a="transformOrigin"!==n?a[n]:a.svg?a.origin:i3(n2(e,i0))+" "+a.zOrigin+"px"):(a=e.style[n])&&"auto"!==a&&!r&&!~(a+"").indexOf("calc(")||(a=i2[n]&&i2[n](e,n,i)||n2(e,n)||$(e,n)||("opacity"===n?1:0)),i&&!~(a+"").trim().indexOf(" ")?nU(e,n,a,i)+i:a},iF={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},i2={clearProps:function t(e,n,i,r,a){if("isFromStart"!==a.data){var o=e._pt=new ne(e._pt,n,i,0,0,n6);return o.u=r,o.pr=-10,o.tween=a,e._props.push(i),1}}},iN=[1,0,0,1,0,0],iI={},iz=function t(e,n){var i=e._gsap||new e2(e);if("x"in i&&!n&&!i.uncache)return i;var r,a,o,s,u,l,c,h,p,d,f,m,g,v,$,y,_,b,w,S,D,M,E,T,C,A,L,P,R,F,N,I,z=e.style,B=i.scaleX<0,O=getComputedStyle(e),U=n2(e,i0)||"0";return r=a=o=l=c=h=p=d=f=0,s=u=1,i.svg=!(!e.getCTM||!nB(e)),O.translate&&("none"===O.translate&&"none"===O.scale&&"none"===O.rotate||(z[i1]=("none"!==O.translate?"translate3d("+(O.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==O.rotate?"rotate("+O.rotate+") ":"")+("none"!==O.scale?"scale("+O.scale.split(" ").join(",")+") ":"")+("none"!==O[i1]?O[i1]:"")),z.scale=z.rotate=z.translate="none"),v=nV(e,i.svg),i.svg&&(T=i.uncache?(C=e.getBBox(),U=i.xOrigin-C.x+"px "+(i.yOrigin-C.y)+"px",""):!n&&e.getAttribute("data-svg-origin"),n7(e,T||U,!!T||i.originIsAbsolute,!1!==i.smooth,v)),m=i.xOrigin||0,g=i.yOrigin||0,v!==iN&&(b=v[0],w=v[1],S=v[2],D=v[3],r=M=v[4],a=E=v[5],6===v.length?(s=Math.sqrt(b*b+w*w),u=Math.sqrt(D*D+S*S),l=b||w?iS(w,b)*ib:0,(p=S||D?iS(S,D)*ib+l:0)&&(u*=Math.abs(Math.cos(p*iw))),i.svg&&(r-=m-(m*b+g*S),a-=g-(m*w+g*D))):(I=v[6],F=v[7],L=v[8],P=v[9],R=v[10],N=v[11],r=v[12],a=v[13],o=v[14],c=($=iS(I,R))*ib,$&&(T=M*(y=Math.cos(-$))+L*(_=Math.sin(-$)),C=E*y+P*_,A=I*y+R*_,L=-(M*_)+L*y,P=-(E*_)+P*y,R=-(I*_)+R*y,N=-(F*_)+N*y,M=T,E=C,I=A),h=($=iS(-S,R))*ib,$&&(y=Math.cos(-$),N=D*(_=Math.sin(-$))+N*y,b=T=b*y-L*_,w=C=w*y-P*_,S=A=S*y-R*_),l=($=iS(w,b))*ib,$&&(T=b*(y=Math.cos($))+w*(_=Math.sin($)),C=M*y+E*_,w=w*y-b*_,E=E*y-M*_,b=T,M=C),c&&359.9<Math.abs(c)+Math.abs(l)&&(c=l=0,h=180-h),s=x(Math.sqrt(b*b+w*w+S*S)),u=x(Math.sqrt(E*E+I*I)),p=2e-4<Math.abs($=iS(M,E))?$*ib:0,f=N?1/(N<0?-N:N):0),i.svg&&(T=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!n5(n2(e,i1)),T&&e.setAttribute("transform",T))),90<Math.abs(p)&&270>Math.abs(p)&&(B?(s*=-1,p+=l<=0?180:-180,l+=l<=0?180:-180):(u*=-1,p+=p<=0?180:-180)),n=n||i.uncache,i.x=r-((i.xPercent=r&&(!n&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+"px",i.y=a-((i.yPercent=a&&(!n&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-a)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+"px",i.z=o+"px",i.scaleX=x(s),i.scaleY=x(u),i.rotation=x(l)+"deg",i.rotationX=x(c)+"deg",i.rotationY=x(h)+"deg",i.skewX=p+"deg",i.skewY=d+"deg",i.transformPerspective=f+"px",(i.zOrigin=parseFloat(U.split(" ")[2])||0)&&(z[i0]=i3(U)),i.xOffset=i.yOffset=0,i.force3D=tU.force3D,i.renderTransform=i.svg?iU:ie?iO:iB,i.uncache=0,i},i3=function t(e){return(e=e.split(" "))[0]+" "+e[1]},iB=function t(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,iO(e,n)},i4="0deg",iO=function t(e,n){var i=n||this,r=i.xPercent,a=i.yPercent,o=i.x,s=i.y,u=i.z,l=i.rotation,c=i.rotationY,h=i.rotationX,p=i.skewX,d=i.skewY,f=i.scaleX,m=i.scaleY,g=i.transformPerspective,v=i.force3D,$=i.target,y=i.zOrigin,x="",_="auto"===v&&e&&1!==e||!0===v;if(y&&(h!==i4||c!==i4)){var b,w=parseFloat(c)*iw,S=Math.sin(w),D=Math.cos(w);b=Math.cos(w=parseFloat(h)*iw),o=nW($,o,-(S*b*y)),s=nW($,s,-(-Math.sin(w)*y)),u=nW($,u,-(D*b*y)+y)}"0px"!==g&&(x+="perspective("+g+") "),(r||a)&&(x+="translate("+r+"%, "+a+"%) "),(_||"0px"!==o||"0px"!==s||"0px"!==u)&&(x+="0px"!==u||_?"translate3d("+o+", "+s+", "+u+") ":"translate("+o+", "+s+") "),l!==i4&&(x+="rotate("+l+") "),c!==i4&&(x+="rotateY("+c+") "),h!==i4&&(x+="rotateX("+h+") "),p===i4&&d===i4||(x+="skew("+p+", "+d+") "),1===f&&1===m||(x+="scale("+f+", "+m+") "),$.style[i1]=x||"translate(0, 0)"},iU=function t(e,n){var i,r,a,o,s,u=n||this,l=u.xPercent,c=u.yPercent,h=u.x,p=u.y,d=u.rotation,f=u.skewX,m=u.skewY,g=u.scaleX,v=u.scaleY,$=u.target,y=u.xOrigin,_=u.yOrigin,b=u.xOffset,w=u.yOffset,S=u.forceCSS,D=parseFloat(h),M=parseFloat(p);d=parseFloat(d),f=parseFloat(f),(m=parseFloat(m))&&(f+=m=parseFloat(m),d+=m),d||f?(d*=iw,f*=iw,i=Math.cos(d)*g,r=Math.sin(d)*g,a=-(Math.sin(d-f)*v),o=Math.cos(d-f)*v,f&&(m*=iw,a*=s=Math.sqrt(1+(s=Math.tan(f-m))*s),o*=s,m&&(i*=s=Math.sqrt(1+(s=Math.tan(m))*s),r*=s)),i=x(i),r=x(r),a=x(a),o=x(o)):(i=g,o=v,r=a=0),(D&&!~(h+"").indexOf("px")||M&&!~(p+"").indexOf("px"))&&(D=nU($,"x",h,"px"),M=nU($,"y",p,"px")),(y||_||b||w)&&(D=x(D+y-(y*i+_*a)+b),M=x(M+_-(y*r+_*o)+w)),(l||c)&&(D=x(D+l/100*(s=$.getBBox()).width),M=x(M+c/100*s.height)),s="matrix("+i+","+r+","+a+","+o+","+D+","+M+")",$.setAttribute("transform",s),S&&($.style[i1]=s)};y("padding,margin,Width,Radius",function(t,e){var n="Right",i="Bottom",r="Left",a=(e<3?["Top",n,i,r]:["Top"+r,"Top"+n,i+n,i+r]).map(function(n){return e<2?t+n:"border"+n+t});i2[1<e?"border"+t:t]=function(t,e,n,i,r){var o,s;if(arguments.length<4)return 5===(s=(o=a.map(function(e){return iR(t,e,n)})).join(" ")).split(o[0]).length?o[0]:s;o=(i+"").split(" "),s={},a.forEach(function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]}),t.init(e,s,r)}});var ik,iG,i6,i5={name:"css",register:nN,targetTest:function t(e){return e.style&&e.nodeType},init:function t(e,n,r,a,o){var s,u,l,c,h,d,f,m,g,v,$,y,x,_,w,S,D=this._props,M=e.style,E=r.vars.startAt;for(f in nK||nN(),this.styles=this.styles||nR(e),S=this.styles.props,this.tween=r,n)if("autoRound"!==f&&(u=n[f],!eu[f]||!e3(f,n,r,a,e,o))){if(h=typeof u,d=i2[f],"function"===h&&(h=typeof(u=u.call(r,a,e,o))),"string"===h&&~u.indexOf("random(")&&(u=tr(u)),d)d(this,e,f,u,r)&&(w=1);else if("--"===f.substr(0,2))s=(getComputedStyle(e).getPropertyValue(f)+"").trim(),u+="",eD.lastIndex=0,eD.test(s)||(m=Y(s),g=Y(u)),g?m!==g&&(s=nU(e,f,s,g)+g):m&&(u+=m),this.add(M,"setProperty",s,u,a,o,0,0,f),D.push(f),S.push(f,0,M[f]);else if("undefined"!==h){if(E&&f in E?(i(s="function"==typeof E[f]?E[f].call(r,a,e,o):E[f])&&~s.indexOf("random(")&&(s=tr(s)),Y(s+"")||(s+=tU.units[f]||Y(iR(e,f))||""),"="===(s+"").charAt(1)&&(s=iR(e,f))):s=iR(e,f),c=parseFloat(s),(v="string"===h&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),l=parseFloat(u),f in iT&&("autoAlpha"===f&&(1===c&&"hidden"===iR(e,"visibility")&&l&&(c=0),S.push("visibility",0,M.visibility),nO(this,M,"visibility",c?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==f&&"transform"!==f&&~(f=iT[f]).indexOf(",")&&(f=f.split(",")[0])),$=f in i_){if(this.styles.save(f),y||((x=e._gsap).renderTransform&&!n.parseTransform||iz(e,n.parseTransform),_=!1!==n.smoothOrigin&&x.smooth,(y=this._pt=new ne(this._pt,M,i1,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===f)this._pt=new ne(this._pt,x,"scaleY",x.scaleY,(v?b(x.scaleY,v+l):l)-x.scaleY||0,nx),this._pt.u=0,D.push("scaleY",f),f+="X";else{if("transformOrigin"===f){S.push(i0,0,M[i0]),u=nG(u),x.svg?n7(e,u,0,_,0,this):((g=parseFloat(u.split(" ")[2])||0)!==x.zOrigin&&nO(this,x,"zOrigin",x.zOrigin,g),nO(this,M,f,i3(s),i3(u)));continue}if("svgOrigin"===f){n7(e,u,1,_,0,this);continue}if(f in iI){nj(this,x,f,c,v?b(c,v+u):u);continue}if("smoothOrigin"===f){nO(this,x,"smooth",x.smooth,u);continue}if("force3D"===f){x[f]=u;continue}if("transform"===f){nX(this,u,e);continue}}}else f in M||(f=iA(f)||f);if($||(l||0===l)&&(c||0===c)&&!iE.test(u)&&f in M)l=l||0,(m=(s+"").substr((c+"").length))!==(g=Y(u)||(f in tU.units?tU.units[f]:m))&&(c=nU(e,f,s,g)),this._pt=new ne(this._pt,$?x:M,f,c,(v?b(c,v+l):l)-c,$||"px"!==g&&"zIndex"!==f||!1===n.autoRound?nx:nw),this._pt.u=g||0,m!==g&&"%"!==g&&(this._pt.b=s,this._pt.r=n_);else if(f in M)nk.call(this,e,f,s,v?v+u:u);else if(f in e)this.add(e,f,s||e[f],v?v+u:u,a,o);else if("parseTransform"!==f){p(f,u);continue}$||(f in M?S.push(f,0,M[f]):S.push(f,1,s||e[f])),D.push(f)}}w&&nt(this)},render:function t(e,n){if(n.tween._time||!it())for(var i=n._pt;i;)i.r(e,i.d),i=i._next;else n.styles.revert()},get:iR,aliases:iT,getSetter:function t(e,n,i){var r=iT[n];return r&&0>r.indexOf(",")&&(n=r),n in i_&&n!==i0&&(e._gsap.x||iR(e,"x"))?i&&n9===i?"scale"===n?n1:nT:(n9=i||{},"scale"===n?n0:nC):e.style&&!o(e.style[n])?nM:~n.indexOf("-")?nE:eX(e,n)},core:{_removeProperty:n4,_getMatrix:nV}};ny.utils.checkPrefix=iA,ny.core.getStyleSaver=nR,i6=y((ik="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(iG="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){i_[t]=1}),y(iG,function(t){tU.units[t]="deg",iI[t]=1}),iT[i6[13]]=ik+","+iG,y("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");iT[e[1]]=i6[e[0]]}),y("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){tU.units[t]="px"}),ny.registerPlugin(i5);var iH=ny.registerPlugin(i5)||ny,iV=iH.core.Tween;t.Back=ig,t.Bounce=i$,t.CSSPlugin=i5,t.Circ=i8,t.Cubic=ic,t.Elastic=im,t.Expo=ix,t.Linear=iu,t.Power0=ii,t.Power1=ir,t.Power2=ia,t.Power3=io,t.Power4=is,t.Quad=il,t.Quart=ih,t.Quint=ip,t.Sine=iy,t.SteppedEase=iv,t.Strong=id,t.TimelineLite=ez,t.TimelineMax=ez,t.TweenLite=eH,t.TweenMax=iV,t.default=iH,t.gsap=iH,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}),function(t,e,n){function i(t,e){return typeof t===e}function r(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function a(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):v?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function o(t,n,i,r){var o,s,u,l,c,h="modernizr",p=a("div"),d=((o=e.body)||((o=a(v?"svg":"body")).fake=!0),o);if(parseInt(i,10))for(;i--;)(l=a("div")).id=r?r[i]:h+(i+1),p.appendChild(l);return(s=a("style")).type="text/css",s.id="s"+h,(d.fake?d:p).appendChild(s),d.appendChild(p),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),p.id=h,d.fake&&(d.style.background="",d.style.overflow="hidden",c=g.style.overflow,g.style.overflow="hidden",g.appendChild(d)),u=n(p,t),d.fake?(d.parentNode.removeChild(d),g.style.overflow=c,g.offsetHeight):p.parentNode.removeChild(p),!!u}function s(t,e){return!!~(""+t).indexOf(e)}function u(t,e){return function(){return t.apply(e,arguments)}}function l(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(e,c,h,p,d){var f=e.charAt(0).toUpperCase()+e.slice(1),m=(e+" "+w.join(f+" ")+f).split(" ");return i(c,"string")||i(c,"undefined")?function e(u,c,h,p){function d(){m&&(delete E.style,delete E.modElem)}if(p=!i(p,"undefined")&&p,!i(h,"undefined")){var f=function e(i,r){var a=i.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(l(i[a]),r))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];a--;)s.push("("+l(i[a])+":"+r+")");return o("@supports ("+(s=s.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==function e(n,i,r){var a;if("getComputedStyle"in t){a=getComputedStyle.call(t,n,i);var o=t.console;null!==a?r&&(a=a.getPropertyValue(r)):o&&o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=!i&&n.currentStyle&&n.currentStyle[r];return a}(e,null,"position")})}return n}(u,h);if(!i(f,"undefined"))return f}for(var m,g,v,$,y,x=["modernizr","tspan","samp"];!E.style&&x.length;)m=!0,E.modElem=a(x.shift()),E.style=E.modElem.style;for(v=u.length,g=0;v>g;g++)if($=u[g],y=E.style[$],s($,"-")&&($=r($)),E.style[$]!==n){if(p||i(h,"undefined"))return d(),"pfx"!=c||$;try{E.style[$]=h}catch(_){}if(E.style[$]!=y)return d(),"pfx"!=c||$}return d(),!1}(m,c,p,d):function t(e,n,r){var a;for(var o in e)if(e[o]in n)return!1===r?e[o]:i(a=n[e[o]],"function")?u(a,r||n):a;return!1}(m=(e+" "+D.join(f+" ")+f).split(" "),c,h)}function h(t,e,i){return c(t,n,n,e,i)}var p=[],d=[],f={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){d.push({name:t,fn:e,options:n})},addAsyncTest:function(t){d.push({name:null,fn:t})}},m=function(){};m.prototype=f,m=new m;var g=e.documentElement,v="svg"===g.nodeName.toLowerCase(),$=f._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];f._prefixes=$;var y="CSS"in t&&"supports"in t.CSS,x="supportsCSS"in t;m.addTest("supports",y||x);var _=f.testStyles=o;m.addTest("touchevents",function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:_(["@media (",$.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n});var b="Moz O ms Webkit",w=f._config.usePrefixes?b.split(" "):[];f._cssomPrefixes=w;var S=function(e){var i,r=$.length,a=t.CSSRule;if(void 0===a)return n;if(!e)return!1;if((i=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+e;for(var o=0;r>o;o++){var s=$[o];if(s.toUpperCase()+"_"+i in a)return"@-"+s.toLowerCase()+"-"+e}return!1};f.atRule=S;var D=f._config.usePrefixes?b.toLowerCase().split(" "):[];f._domPrefixes=D;var M={elem:a("modernizr")};m._q.push(function(){delete M.elem});var E={style:M.elem.style};m._q.unshift(function(){delete E.style}),f.testAllProps=c;var T,C=f.prefixed=function(t,e,n){return 0===t.indexOf("@")?S(t):(-1!=t.indexOf("-")&&(t=r(t)),e?c(t,e,n):c(t,"pfx"))};m.addTest("backgroundblendmode",C("backgroundBlendMode","text")),f.testAllProps=h,m.addTest("csstransforms3d",function(){return!!h("perspective","1px",!0)});var A=(T=t.matchMedia||t.msMatchMedia)?function(t){var e=T(t);return e&&e.matches||!1}:function(e){var n=!1;return o("@media "+e+" { #modernizr { position: absolute; } }",function(e){n="absolute"==(t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle).position}),n};f.mq=A,m.addTest("mediaqueries",A("only all")),function t(){var e,n,r,a,o,s,u;for(var l in d)if(d.hasOwnProperty(l)){if(e=[],(n=d[l]).name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(r=0;r<n.options.aliases.length;r++)e.push(n.options.aliases[r].toLowerCase());for(a=i(n.fn,"function")?n.fn():n.fn,o=0;o<e.length;o++)1===(u=(s=e[o]).split(".")).length?m[u[0]]=a:(!m[u[0]]||m[u[0]]instanceof Boolean||(m[u[0]]=new Boolean(m[u[0]])),m[u[0]][u[1]]=a),p.push((a?"":"no-")+u.join("-"))}}(),function t(e){var n=g.className,i=m._config.classPrefix||"";if(v&&(n=n.baseVal),m._config.enableJSClass){var r=RegExp("(^|\\s)"+i+"no-js(\\s|$)");n=n.replace(r,"$1"+i+"js$2")}m._config.enableClasses&&(n+=" "+i+e.join(" "+i),v?g.className.baseVal=n:g.className=n)}(p),delete f.addTest,delete f.addAsyncTest;for(var L=0;L<m._q.length;L++)m._q[L]();t.Modernizr=m}(window,document),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.ScrollMagic=e()}(this,function(){"use strict";var t=function(){};t.version="2.0.7",window.addEventListener("mousewheel",function(){});var e="data-scrollmagic-pin-spacer";t.Controller=function(i){var a,o,s="REVERSE",u="PAUSED",l=n.defaults,c=this,h=r.extend({},l,i),p=[],d=!1,f=0,m=u,g=!0,v=0,$=!0,y=function(){0<h.refreshInterval&&(o=window.setTimeout(M,h.refreshInterval))},x=function(){return h.vertical?r.get.scrollTop(h.container):r.get.scrollLeft(h.container)},_=function(){return h.vertical?r.get.height(h.container):r.get.width(h.container)},b=this._setScrollPos=function(t){h.vertical?g?window.scrollTo(r.get.scrollLeft(),t):h.container.scrollTop=t:g?window.scrollTo(t,r.get.scrollTop()):h.container.scrollLeft=t},w=function(){if($&&d){var t=r.type.Array(d)?d:p.slice(0);d=!1;var e=f,n=(f=c.scrollPos())-e;0!==n&&(m=0<n?"FORWARD":s),m===s&&t.reverse(),t.forEach(function(t,e){t.update(!0)})}},S=function(){a=r.rAF(w)},D=function(t){"resize"==t.type&&(v=_(),m=u),!0!==d&&(d=!0,S())},M=function(){if(!g&&v!=_()){var t;try{t=new Event("resize",{bubbles:!1,cancelable:!1})}catch(e){(t=document.createEvent("Event")).initEvent("resize",!1,!1)}h.container.dispatchEvent(t)}p.forEach(function(t,e){t.refresh()}),y()};this._options=h;var E=function(t){if(t.length<=1)return t;var e=t.slice(0);return e.sort(function(t,e){return t.scrollOffset()>e.scrollOffset()?1:-1}),e};return this.addScene=function(e){if(r.type.Array(e))e.forEach(function(t,e){c.addScene(t)});else if(e instanceof t.Scene){if(e.controller()!==c)e.addTo(c);else if(0>p.indexOf(e))for(var n in p.push(e),p=E(p),e.on("shift.controller_sort",function(){p=E(p)}),h.globalSceneOptions)e[n]&&e[n].call(e,h.globalSceneOptions[n])}return c},this.removeScene=function(t){if(r.type.Array(t))t.forEach(function(t,e){c.removeScene(t)});else{var e=p.indexOf(t);-1<e&&(t.off("shift.controller_sort"),p.splice(e,1),t.remove())}return c},this.updateScene=function(e,n){return r.type.Array(e)?e.forEach(function(t,e){c.updateScene(t,n)}):n?e.update(!0):!0!==d&&e instanceof t.Scene&&(-1==(d=d||[]).indexOf(e)&&d.push(e),d=E(d),S()),c},this.update=function(t){return D({type:"resize"}),t&&w(),c},this.scrollTo=function(n,i){if(r.type.Number(n))b.call(h.container,n,i);else if(n instanceof t.Scene)n.controller()===c&&c.scrollTo(n.scrollOffset(),i);else if(r.type.Function(n))b=n;else{var a=r.get.elements(n)[0];if(a){for(;a.parentNode.hasAttribute(e);)a=a.parentNode;var o=h.vertical?"top":"left",s=r.get.offset(h.container),u=r.get.offset(a);g||(s[o]-=c.scrollPos()),c.scrollTo(u[o]-s[o],i)}}return c},this.scrollPos=function(t){return arguments.length?(r.type.Function(t)&&(x=t),c):x.call(c)},this.info=function(t){var e={size:v,vertical:h.vertical,scrollPos:f,scrollDirection:m,container:h.container,isDocument:g};return arguments.length?void 0!==e[t]?e[t]:void 0:e},this.loglevel=function(t){return c},this.enabled=function(t){return arguments.length?($!=t&&($=!!t,c.updateScene(p,!0)),c):$},this.destroy=function(t){window.clearTimeout(o);for(var e=p.length;e--;)p[e].destroy(t);return h.container.removeEventListener("resize",D),h.container.removeEventListener("scroll",D),r.cAF(a),null},function(){for(var t in h)l.hasOwnProperty(t)||delete h[t];if(h.container=r.get.elements(h.container)[0],!h.container)throw"ScrollMagic.Controller init failed.";(g=h.container===window||h.container===document.body||!document.body.contains(h.container))&&(h.container=window),v=_(),h.container.addEventListener("resize",D),h.container.addEventListener("scroll",D);var e=parseInt(h.refreshInterval,10);h.refreshInterval=r.type.Number(e)?e:l.refreshInterval,y()}(),c};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};t.Controller.addOption=function(t,e){n.defaults[t]=e},t.Controller.extend=function(e){var n=this;t.Controller=function(){return n.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Controller,n),t.Controller.prototype=n.prototype,t.Controller.prototype.constructor=t.Controller},t.Scene=function(n){var a,o,s="BEFORE",u="DURING",l="AFTER",c=i.defaults,h=this,p=r.extend({},c,n),d=s,f=0,m={start:0,end:0},g=0,v=!0,$={};this.on=function(t,e){return r.type.Function(e)&&(t=t.trim().split(" ")).forEach(function(t){var n=t.split("."),i=n[0],r=n[1];"*"!=i&&($[i]||($[i]=[]),$[i].push({namespace:r||"",callback:e}))}),h},this.off=function(t,e){return t&&(t=t.trim().split(" ")).forEach(function(t,n){var i=t.split("."),r=i[0],a=i[1]||"";("*"===r?Object.keys($):[r]).forEach(function(t){for(var n=$[t]||[],i=n.length;i--;){var r=n[i];!r||a!==r.namespace&&"*"!==a||e&&e!=r.callback||n.splice(i,1)}n.length||delete $[t]})}),h},this.trigger=function(e,n){if(e){var i=e.trim().split("."),r=i[0],a=i[1],o=$[r];o&&o.forEach(function(e,i){a&&a!==e.namespace||e.callback.call(h,new t.Event(r,e.namespace,h,n))})}return h},h.on("change.internal",function(t){"loglevel"!==t.what&&"tweenChanges"!==t.what&&("triggerElement"===t.what?w():"reverse"===t.what&&h.update())}).on("shift.internal",function(t){_(),h.update()}),this.addTo=function(e){return e instanceof t.Controller&&o!=e&&(o&&o.removeScene(h),o=e,M(),b(!0),w(!0),_(),o.info("container").addEventListener("resize",S),e.addScene(h),h.trigger("add",{controller:o}),h.update()),h},this.enabled=function(t){return arguments.length?(v!=t&&(v=!!t,h.update(!0)),h):v},this.remove=function(){if(o){o.info("container").removeEventListener("resize",S);var t=o;o=void 0,t.removeScene(h),h.trigger("remove")}return h},this.destroy=function(t){return h.trigger("destroy",{reset:t}),h.remove(),h.off("*.*"),null},this.update=function(t){if(o){if(t){if(o.enabled()&&v){var e,n=o.info("scrollPos");e=0<p.duration?(n-m.start)/(m.end-m.start):n>=m.start?1:0,h.trigger("update",{startPos:m.start,endPos:m.end,scrollPos:n}),h.progress(e)}else y&&d===u&&C(!0)}else o.updateScene(h,!1)}return h},this.refresh=function(){return b(),w(),h},this.progress=function(t){if(arguments.length){var e=!1,n=d,i=o?o.info("scrollDirection"):"PAUSED",r=p.reverse||f<=t;if(0===p.duration?(e=f!=t,d=0==(f=t<1&&r?0:1)?s:u):t<0&&d!==s&&r?(d=s,e=(f=0,!0)):0<=t&&t<1&&r?(f=t,d=u,e=!0):1<=t&&d!==l?(f=1,d=l,e=!0):d!==u||r||C(),e){var a={progress:f,state:d,scrollDirection:i},c=d!=n,m=function(t){h.trigger(t,a)};c&&n!==u&&(m("enter"),m(n===s?"start":"end")),m("progress"),c&&d!==u&&(m(d===s?"start":"end"),m("leave"))}return h}return f};var y,x,_=function(){m={start:g+p.offset},o&&p.triggerElement&&(m.start-=o.info("size")*p.triggerHook),m.end=m.start+p.duration},b=function(t){if(a){var e="duration";E(e,a.call(h))&&!t&&(h.trigger("change",{what:e,newval:p[e]}),h.trigger("shift",{reason:e}))}},w=function(t){var n=0,i=p.triggerElement;if(o&&(i||0<g)){if(i){if(i.parentNode){for(var a=o.info(),s=r.get.offset(a.container),u=a.vertical?"top":"left";i.parentNode.hasAttribute(e);)i=i.parentNode;var l=r.get.offset(i);a.isDocument||(s[u]-=o.scrollPos()),n=l[u]-s[u]}else h.triggerElement(void 0)}var c=n!=g;g=n,c&&!t&&h.trigger("shift",{reason:"triggerElementPosition"})}},S=function(t){0<p.triggerHook&&h.trigger("shift",{reason:"containerResize"})},D=r.extend(i.validate,{duration:function(t){if(r.type.String(t)&&t.match(/^(\.|\d)*\d+%$/)){var e=parseFloat(t)/100;t=function(){return o?o.info("size")*e:0}}if(r.type.Function(t)){a=t;try{t=parseFloat(a.call(h))}catch(n){t=-1}}if(t=parseFloat(t),!r.type.Number(t)||t<0)throw a&&(a=void 0),0;return t}}),M=function(t){(t=arguments.length?[t]:Object.keys(D)).forEach(function(t,e){var n;if(D[t])try{n=D[t](p[t])}catch(i){n=c[t]}finally{p[t]=n}})},E=function(t,e){var n=!1,i=p[t];return p[t]!=e&&(p[t]=e,M(t),n=i!=p[t]),n},T=function(t){h[t]||(h[t]=function(e){return arguments.length?("duration"===t&&(a=void 0),E(t,e)&&(h.trigger("change",{what:t,newval:p[t]}),-1<i.shifts.indexOf(t)&&h.trigger("shift",{reason:t})),h):p[t]})};this.controller=function(){return o},this.state=function(){return d},this.scrollOffset=function(){return m.start},this.triggerPosition=function(){var t=p.offset;return o&&(p.triggerElement?t+=g:t+=o.info("size")*h.triggerHook()),t},h.on("shift.internal",function(t){var e="duration"===t.reason;(d===l&&e||d===u&&0===p.duration)&&C(),e&&A()}).on("progress.internal",function(t){C()}).on("add.internal",function(t){A()}).on("destroy.internal",function(t){h.removePin(t.reset)});var C=function(t){if(y&&o){var e=o.info(),n=x.spacer.firstChild;if(t||d!==u){var i={position:x.inFlow?"relative":"absolute",top:0,left:0},a=r.css(n,"position")!=i.position;x.pushFollowers?0<p.duration&&(d===l&&0===parseFloat(r.css(x.spacer,"padding-top"))?a=!0:d===s&&0===parseFloat(r.css(x.spacer,"padding-bottom"))&&(a=!0)):i[e.vertical?"top":"left"]=p.duration*f,r.css(n,i),a&&A()}else{"fixed"!=r.css(n,"position")&&(r.css(n,{position:"fixed"}),A());var c=r.get.offset(x.spacer,!0),h=p.reverse||0===p.duration?e.scrollPos-m.start:Math.round(f*p.duration*10)/10;c[e.vertical?"top":"left"]+=h,r.css(x.spacer.firstChild,{top:c.top,left:c.left})}}},A=function(){if(y&&o&&x.inFlow){var t=d===u,e=o.info("vertical"),n=x.spacer.firstChild,i=r.isMarginCollapseType(r.css(x.spacer,"display")),a={};x.relSize.width||x.relSize.autoFullWidth?t?r.css(y,{width:r.get.width(x.spacer)}):r.css(y,{width:"100%"}):(a["min-width"]=r.get.width(e?y:n,!0,!0),a.width=t?a["min-width"]:"auto"),x.relSize.height?t?r.css(y,{height:r.get.height(x.spacer)-(x.pushFollowers?p.duration:0)}):r.css(y,{height:"100%"}):(a["min-height"]=r.get.height(e?n:y,!0,!i),a.height=t?a["min-height"]:"auto"),x.pushFollowers&&(a["padding"+(e?"Top":"Left")]=p.duration*f,a["padding"+(e?"Bottom":"Right")]=p.duration*(1-f)),r.css(x.spacer,a)}},L=function(){o&&y&&d===u&&!o.info("isDocument")&&C()},P=function(){o&&y&&d===u&&((x.relSize.width||x.relSize.autoFullWidth)&&r.get.width(window)!=r.get.width(x.spacer.parentNode)||x.relSize.height&&r.get.height(window)!=r.get.height(x.spacer.parentNode))&&A()},R=function(t){o&&y&&d===u&&!o.info("isDocument")&&(t.preventDefault(),o._setScrollPos(o.info("scrollPos")-((t.wheelDelta||t[o.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||-(30*t.detail))))};this.setPin=function(t,n){if(n=r.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},n),!(t=r.get.elements(t)[0])||"fixed"===r.css(t,"position"))return h;if(y){if(y===t)return h;h.removePin()}var i=(y=t).parentNode.style.display,a=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];y.parentNode.style.display="none";var o="absolute"!=r.css(y,"position"),s=r.css(y,a.concat(["display"])),u=r.css(y,["width","height"]);y.parentNode.style.display=i,!o&&n.pushFollowers&&(n.pushFollowers=!1);var l=y.parentNode.insertBefore(document.createElement("div"),y),c=r.extend(s,{position:o?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(o||r.extend(c,r.css(y,["width","height"])),r.css(l,c),l.setAttribute(e,""),r.addClass(l,n.spacerClass),x={spacer:l,relSize:{width:"%"===u.width.slice(-1),height:"%"===u.height.slice(-1),autoFullWidth:"auto"===u.width&&o&&r.isMarginCollapseType(s.display)},pushFollowers:n.pushFollowers,inFlow:o},!y.___origStyle){y.___origStyle={};var p=y.style;a.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach(function(t){y.___origStyle[t]=p[t]||""})}return x.relSize.width&&r.css(l,{width:u.width}),x.relSize.height&&r.css(l,{height:u.height}),l.appendChild(y),r.css(y,{position:o?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(x.relSize.width||x.relSize.autoFullWidth)&&r.css(y,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",L),window.addEventListener("resize",L),window.addEventListener("resize",P),y.addEventListener("mousewheel",R),y.addEventListener("DOMMouseScroll",R),C(),h},this.removePin=function(t){if(y){if(d===u&&C(!0),t||!o){var n=x.spacer.firstChild;if(n.hasAttribute(e)){var i=x.spacer.style,a={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(t){a[t]=i[t]||""}),r.css(n,a)}x.spacer.parentNode.insertBefore(n,x.spacer),x.spacer.parentNode.removeChild(x.spacer),y.parentNode.hasAttribute(e)||(r.css(y,y.___origStyle),delete y.___origStyle)}window.removeEventListener("scroll",L),window.removeEventListener("resize",L),window.removeEventListener("resize",P),y.removeEventListener("mousewheel",R),y.removeEventListener("DOMMouseScroll",R),y=void 0}return h};var F,N=[];return h.on("destroy.internal",function(t){h.removeClassToggle(t.reset)}),this.setClassToggle=function(t,e){var n=r.get.elements(t);return 0!==n.length&&r.type.String(e)&&(0<N.length&&h.removeClassToggle(),F=e,N=n,h.on("enter.internal_class leave.internal_class",function(t){var e="enter"===t.type?r.addClass:r.removeClass;N.forEach(function(t,n){e(t,F)})})),h},this.removeClassToggle=function(t){return t&&N.forEach(function(t,e){r.removeClass(t,F)}),h.off("start.internal_class end.internal_class"),F=void 0,N=[],h},function(){for(var t in p)c.hasOwnProperty(t)||delete p[t];for(var e in c)T(e);M()}(),h};var i={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(t){if(t=parseFloat(t),!r.type.Number(t))throw 0;return t},triggerElement:function(t){if(t=t||void 0){var e=r.get.elements(t)[0];if(!e||!e.parentNode)throw 0;t=e}return t},triggerHook:function(t){var e={onCenter:.5,onEnter:1,onLeave:0};if(r.type.Number(t))t=Math.max(0,Math.min(parseFloat(t),1));else{if(!(t in e))throw 0;t=e[t]}return t},reverse:function(t){return!!t}},shifts:["duration","offset","triggerHook"]};t.Scene.addOption=function(t,e,n,r){t in i.defaults||(i.defaults[t]=e,i.validate[t]=n,r&&i.shifts.push(t))},t.Scene.extend=function(e){var n=this;t.Scene=function(){return n.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Scene,n),t.Scene.prototype=n.prototype,t.Scene.prototype.constructor=t.Scene},t.Event=function(t,e,n,i){for(var r in i=i||{})this[r]=i[r];return this.type=t,this.target=this.currentTarget=n,this.namespace=e||"",this.timeStamp=this.timestamp=Date.now(),this};var r=t._util=function(t){var e,n={},i=function(t){return parseFloat(t)||0},r=function(e){return e.currentStyle?e.currentStyle:t.getComputedStyle(e)},a=function(e,n,a,o){if((n=n===document?t:n)===t)o=!1;else if(!h.DomElement(n))return 0;e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var s=(a?n["offset"+e]||n["outer"+e]:n["client"+e]||n["inner"+e])||0;if(a&&o){var u=r(n);s+="Height"===e?i(u.marginTop)+i(u.marginBottom):i(u.marginLeft)+i(u.marginRight)}return s},o=function(t){return t.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})};n.extend=function(t){for(t=t||{},e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t},n.isMarginCollapseType=function(t){return -1<["block","flex","list-item","table","-webkit-box"].indexOf(t)};var s=0,u=["ms","moz","webkit","o"],l=t.requestAnimationFrame,c=t.cancelAnimationFrame;for(e=0;!l&&e<4;++e)l=t[u[e]+"RequestAnimationFrame"],c=t[u[e]+"CancelAnimationFrame"]||t[u[e]+"CancelRequestAnimationFrame"];l||(l=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-s)),r=t.setTimeout(function(){e(n+i)},i);return s=n+i,r}),c||(c=function(e){t.clearTimeout(e)}),n.rAF=l.bind(t),n.cAF=c.bind(t);var h=n.type=function(t){return Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};h.String=function(t){return"string"===h(t)},h.Function=function(t){return"function"===h(t)},h.Array=function(t){return Array.isArray(t)},h.Number=function(t){return!h.Array(t)&&0<=t-parseFloat(t)+1},h.DomElement=function(t){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?t instanceof HTMLElement||t instanceof SVGElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName};var p=n.get={};return p.elements=function(e){var n=[];if(h.String(e))try{e=document.querySelectorAll(e)}catch(i){return n}if("nodelist"===h(e)||h.Array(e)||e instanceof NodeList)for(var r=0,a=n.length=e.length;r<a;r++){var o=e[r];n[r]=h.DomElement(o)?o:p.elements(o)}else(h.DomElement(e)||e===document||e===t)&&(n=[e]);return n},p.scrollTop=function(e){return e&&"number"==typeof e.scrollTop?e.scrollTop:t.pageYOffset||0},p.scrollLeft=function(e){return e&&"number"==typeof e.scrollLeft?e.scrollLeft:t.pageXOffset||0},p.width=function(t,e,n){return a("width",t,e,n)},p.height=function(t,e,n){return a("height",t,e,n)},p.offset=function(t,e){var n={top:0,left:0};if(t&&t.getBoundingClientRect){var i=t.getBoundingClientRect();n.top=i.top,n.left=i.left,e||(n.top+=p.scrollTop(),n.left+=p.scrollLeft())}return n},n.addClass=function(t,e){e&&(t.classList?t.classList.add(e):t.className+=" "+e)},n.removeClass=function(t,e){e&&(t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(t,e){if(h.String(e))return r(t)[o(e)];if(h.Array(e)){var n={},i=r(t);return e.forEach(function(t,e){n[t]=i[o(t)]}),n}for(var a in e){var s=e[a];s==parseFloat(s)&&(s+="px"),t.style[o(a)]=s}},n}(window||{});return t}),function(t,e){"use strict";function n(n,o){var s=this,u=i.extend({},s.config,o),l={},c=u.name+"-"+ ++r;return s.config=function(t,n){return n===e?u[t]:(u[t]=n,s)},s.addItems=function(t){return l.a&&l.a("string"===i.type(t)?i(t):t),s},s.getItems=function(){return l.g?l.g():{}},s.update=function(t){return l.e&&l.e({},!t),s},s.force=function(t){return l.f&&l.f("string"===i.type(t)?i(t):t),s},s.loadAll=function(){return l.e&&l.e({all:!0},!0),s},s.destroy=function(){return i(u.appendScroll).off("."+c,l.e),i(t).off("."+c),l={},e},function n(r,o,s,u,l){function c(){var e,n,a,c;b=t.devicePixelRatio>1,s=h(s),o.delay>=0&&setTimeout(function(){p(!0)},o.delay),(o.delay<0||o.combined)&&(u.e=(e=o.throttle,n=function(t){"resize"===t.type&&(x=_=-1),p(t.all)},c=0,function(t,i){function s(){c=+new Date,n.call(r,t)}var u=+new Date-c;a&&clearTimeout(a),u>e||!o.enableThrottle||i?s():a=setTimeout(s,e-u)}),u.a=function(t){t=h(t),s.push.apply(s,t)},u.g=function(){return s=i(s).filter(function(){return!i(this).data(o.loadedName)})},u.f=function(t){for(var e=0;e<t.length;e++){var n=s.filter(function(){return this===t[e]});n.length&&p(!1,n)}},p(),i(o.appendScroll).on("scroll."+l+" resize."+l,u.e))}function h(t){var n=o.defaultImage,a=o.placeholder,s=o.imageBase,u=o.srcsetAttribute,l=o.loaderAttribute,c=o._f||{};t=i(t).filter(function(){var t=i(this),n=m(this);return!t.data(o.handledName)&&(t.attr(o.attribute)||t.attr(u)||t.attr(l)||c[n]!==e)}).data("plugin_"+o.name,r);for(var h=0,p=t.length;h<p;h++){var d=i(t[h]),f=m(t[h]),v=d.attr(o.imageBaseAttribute)||s;f===M&&v&&d.attr(u)&&d.attr(u,g(d.attr(u),v)),c[f]===e||d.attr(l)||d.attr(l,c[f]),f===M&&n&&!d.attr(E)?d.attr(E,n):f===M||!a||d.css(A)&&"none"!==d.css(A)||d.css(A,"url('"+a+"')")}return t}function p(t,e){if(!s.length)return void(o.autoDestroy&&r.destroy());for(var n=e||s,a=!1,u=o.imageBase||"",l=o.srcsetAttribute,c=o.handledName,h=0;h<n.length;h++)if(t||e||f(n[h])){var p=i(n[h]),g=m(n[h]),v=p.attr(o.attribute),$=p.attr(o.imageBaseAttribute)||u,y=p.attr(o.loaderAttribute);p.data(c)||o.visibleOnly&&!p.is(":visible")||!((v||p.attr(l))&&(g===M&&($+v!==p.attr(E)||p.attr(l)!==p.attr(T))||g!==M&&$+v!==p.css(A))||y)||(a=!0,p.data(c,!0),d(p,g,$,y))}a&&(s=i(s).filter(function(){return!i(this).data(c)}))}function d(t,e,n,r){++y;var a=function(){$("onError",t),v(),a=i.noop};$("beforeLoad",t);var s=o.attribute,u=o.srcsetAttribute,l=o.sizesAttribute,c=o.retinaAttribute,h=o.removeAttribute,p=o.loadedName,d=t.attr(c);if(r){var f=function(){h&&t.removeAttr(o.loaderAttribute),t.data(p,!0),$(w,t),setTimeout(v,1),f=i.noop};t.off(D).one(D,a).one(S,f),$(r,t,function(e){e?(t.off(S),f()):(t.off(D),a())})||t.trigger(D)}else{var m=i(new Image);m.one(D,a).one(S,function(){t.hide(),e===M?t.attr(C,m.attr(C)).attr(T,m.attr(T)).attr(E,m.attr(E)):t.css(A,"url('"+m.attr(E)+"')"),t[o.effect](o.effectTime),h&&(t.removeAttr(s+" "+u+" "+c+" "+o.imageBaseAttribute),l!==C&&t.removeAttr(l)),t.data(p,!0),$(w,t),m.remove(),v()});var g=(b&&d?d:t.attr(s))||"";m.attr(C,t.attr(l)).attr(T,t.attr(u)).attr(E,g?n+g:null),m.complete&&m.trigger(S)}}function f(e){var n=e.getBoundingClientRect(),r=o.scrollDirection,a=o.threshold,s=(_>=0?_:_=i(t).height())+a>n.top&&-a<n.bottom,u=(x>=0?x:x=i(t).width())+a>n.left&&-a<n.right;return"vertical"===r?s:"horizontal"===r?u:s&&u}function m(t){return t.tagName.toLowerCase()}function g(t,e){if(e){var n=t.split(",");t="";for(var i=0,r=n.length;i<r;i++)t+=e+n[i].trim()+(i!==r-1?",":"")}return t}function v(){--y,s.length||y||$("onFinishedAll")}function $(t,e,n){return!!(t=o[t])&&(t.apply(r,[].slice.call(arguments,1)),!0)}var y=0,x=-1,_=-1,b=!1,w="afterLoad",S="load",D="error",M="img",E="src",T="srcset",C="sizes",A="background-image";"event"===o.bind||a?c():i(t).on(S+"."+l,c)}(s,u,n,l,c),u.chainable?n:s}var i=t.jQuery||t.Zepto,r=0,a=!1;i.fn.Lazy=i.fn.lazy=function(t){return new n(this,t)},i.Lazy=i.lazy=function(t,r,a){if(i.isFunction(r)&&(a=r,r=[]),i.isFunction(a)){t=i.isArray(t)?t:[t],r=i.isArray(r)?r:[r];for(var o=n.prototype.config,s=o._f||(o._f={}),u=0,l=t.length;u<l;u++)(o[t[u]]===e||i.isFunction(o[t[u]]))&&(o[t[u]]=a);for(var c=0,h=r.length;c<h;c++)s[r[c]]=t[0]}},n.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},i(t).on("load",function(){a=!0})}(window),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Scrollbar=e():t.Scrollbar=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=58)}([function(t,e,n){var i=n(25)("wks"),r=n(16),a=n(2).Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(2),r=n(3),a=n(11),o=n(6),s=n(10),u=function(t,e,n){var l,c,h,p,d=t&u.F,f=t&u.G,m=t&u.S,g=t&u.P,v=t&u.B,$=f?i:m?i[e]||(i[e]={}):(i[e]||{}).prototype,y=f?r:r[e]||(r[e]={}),x=y.prototype||(y.prototype={});for(l in f&&(n=e),n)h=((c=!d&&$&&void 0!==$[l])?$:n)[l],p=v&&c?s(h,i):g&&"function"==typeof h?s(Function.call,h):h,$&&o($,l,h,t&u.U),y[l]!=h&&a(y,l,p),g&&x[l]!=h&&(x[l]=h)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var i=n(2),r=n(11),a=n(9),o=n(16)("src"),s=n(60),u=(""+s).split("toString");n(3).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(a(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(a(n,o)||r(n,o,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,n){var i=n(8),r=n(41),a=n(43),o=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(1);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(44);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(7),r=n(17);t.exports=n(4)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(1);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports={}},function(t,e,n){var i=n(10),r=n(49),a=n(50),o=n(8),s=n(19),u=n(51),l={},c={};(e=t.exports=function(t,e,n,h,p){var d,f,m,g,v=p?function(){return t}:u(t),$=i(n,h,e?2:1),y=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(d=s(t.length);d>y;y++)if((g=e?$(o(f=t[y])[0],f[1]):$(t[y]))===l||g===c)return g}else for(m=v.call(t);!(f=m.next()).done;)if((g=r(m,$,f.value,e))===l||g===c)return g}).BREAK=l,e.RETURN=c},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(31),r=n(28);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(27),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(28);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(16)("meta"),r=n(1),a=n(9),o=n(7).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(13)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!a(t,i)&&c(t),t}}},function(t,e,n){"use strict";var i=n(23),r={};r[n(0)("toStringTag")]="z",r+""!="[object z]"&&n(6)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(24),r=n(0)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),r))?n:a?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(3),r=n(2),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(40)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";var i=n(61)(!0);n(29)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(40),r=n(5),a=n(6),o=n(11),s=n(14),u=n(62),l=n(33),c=n(68),h=n(0)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,f,m,g,v){u(n,e,f);var $,y,x,_=function(t){return!p&&t in D?D[t]:function(){return new n(this,t)}},b=e+" Iterator",w="values"==m,S=!1,D=t.prototype,M=D[h]||D["@@iterator"]||m&&D[m],E=M||_(m),T=m?w?_("entries"):E:void 0,C="Array"==e&&D.entries||M;if(C&&(x=c(C.call(new t)))!==Object.prototype&&x.next&&(l(x,b,!0),i||"function"==typeof x[h]||o(x,h,d)),w&&M&&"values"!==M.name&&(S=!0,E=function(){return M.call(this)}),(!i||v)&&(p||S||!D[h])&&o(D,h,E),s[e]=E,s[b]=d,m){if($={values:w?E:_("values"),keys:g?E:_("keys"),entries:T},v)for(y in $)y in D||a(D,y,$[y]);else r(r.P+r.F*(p||S),e,$)}return $}},function(t,e,n){var i=n(64),r=n(46);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(25)("keys"),r=n(16);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(7).f,r=n(9),a=n(0)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},function(t,e,n){for(var i=n(69),r=n(30),a=n(6),o=n(2),s=n(11),u=n(14),l=n(0),c=l("iterator"),h=l("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(d),m=0;m<f.length;m++){var g,v=f[m],$=d[v],y=o[v],x=y&&y.prototype;if(x&&(x[c]||s(x,c,p),x[h]||s(x,h,v),u[v]=p,$))for(g in i)x[g]||a(x,g,i[g],!0)}},function(t,e,n){var i=n(6);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var i=n(2),r=n(5),a=n(6),o=n(35),s=n(21),u=n(15),l=n(36),c=n(1),h=n(13),p=n(52),d=n(33),f=n(73);t.exports=function(t,e,n,m,g,v){var $=i[t],y=$,x=g?"set":"add",_=y&&y.prototype,b={},w=function(t){var e=_[t];a(_,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(v||_.forEach&&!h(function(){(new y).entries().next()}))){var S=new y,D=S[x](v?{}:-0,1)!=S,M=h(function(){S.has(1)}),E=p(function(t){new y(t)}),T=!v&&h(function(){for(var t=new y,e=5;e--;)t[x](e,e);return!t.has(-0)});E||((y=e(function(e,n){l(e,y,t);var i=f(new $,e,y);return null!=n&&u(n,g,i[x],i),i})).prototype=_,_.constructor=y),(M||T)&&(w("delete"),w("has"),g&&w("get")),(T||D)&&w(x),v&&_.clear&&delete _.clear}else o((y=m.getConstructor(e,t,g,x)).prototype,n),s.NEED=!0;return d(y,t),b[t]=y,r(r.G+r.W+r.F*(y!=$),b),v||m.setStrong(y,t,g),y}},function(t,e,n){"use strict";var i=n(5);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var i=n(5),r=n(44),a=n(10),o=n(15);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),null==t?new this:(n=[],e?(i=0,s=a(u,arguments[2],2),o(t,!1,function(t){n.push(s(t,i++))})):o(t,!1,n.push,n),new this(n))}})}},function(t,e){t.exports=!1},function(t,e,n){t.exports=!n(4)&&!n(13)(function(){return 7!=Object.defineProperty(n(42)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(1),r=n(2).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,n){var i=n(1);t.exports=function(t,e){var n,r;if(!i(t))return t;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t))||"function"==typeof(n=t.valueOf)&&!i(r=n.call(t))||!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(8),r=n(63),a=n(46),o=n(32)("IE_PROTO"),s=function(){},u=function(){var t,e=n(42)("iframe"),i=a.length;for(e.style.display="none",n(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</script>"),t.close(),u=t.F;i--;)delete u.prototype[a[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(7).f,r=n(45),a=n(35),o=n(10),s=n(36),u=n(15),l=n(29),c=n(47),h=n(72),p=n(4),d=n(21).fastKey,f=n(12),m=p?"_s":"size",g=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,null!=i&&u(i,n,t[l],t)});return a(c.prototype,{clear:function(){for(var t=f(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=f(this,e),i=g(n,t);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[m]--}return!!i},forEach:function(t){f(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(f(this,e),t)}}),p&&i(c.prototype,"size",{get:function(){return f(this,e)[m]}}),c},def:function(t,e,n){var i,r,a=g(t,e);return a?a.v=n:(t._l=a={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=a),i&&(i.n=a),t[m]++,"F"!==r&&(t._i[r]=a)),t},getEntry:g,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=f(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){var i=n(8);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(a){var o=t.return;throw void 0!==o&&i(o.call(t)),a}}},function(t,e,n){var i=n(14),r=n(0)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},function(t,e,n){var i=n(23),r=n(0)("iterator"),a=n(14);t.exports=n(3).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||a[i(t)]}},function(t,e,n){var i=n(0)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(o){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},t(a)}catch(s){}return n}},function(t,e){e.f=({}).propertyIsEnumerable},function(t,e,n){var i=n(23),r=n(77);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(10),r=n(31),a=n(20),o=n(19),s=n(87);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,h=6==t,p=5==t||h,d=e||s;return function(e,s,f){for(var m,g,v=a(e),$=r(v),y=i(s,f,3),x=o($.length),_=0,b=n?d(e,x):u?d(e,0):void 0;x>_;_++)if((p||_ in $)&&(g=y(m=$[_],_,v),t)){if(n)b[_]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return _;case 2:b.push(m)}else if(c)return!1}return h?-1:l||c?c:b}}},function(t,e,n){"use strict";var i=n(4),r=n(30),a=n(90),o=n(53),s=n(20),u=n(31),l=Object.assign;t.exports=!l||n(13)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=s(t),l=arguments.length,c=1,h=a.f,p=o.f;l>c;)for(var d,f=u(arguments[c++]),m=h?r(f).concat(h(f)):r(f),g=m.length,v=0;g>v;)d=m[v++],i&&!p.call(f,d)||(n[d]=f[d]);return n}:l},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(99))},function(t,e,n){t.exports=n(100)},function(t,e,n){n(22),n(26),n(34),n(71),n(76),n(78),n(79),t.exports=n(3).Map},function(t,e,n){t.exports=n(25)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(27),r=n(28);t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),u=i(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(45),r=n(17),a=n(33),o={};n(11)(o,n(0)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var i=n(7),r=n(8),a=n(30);t.exports=n(4)?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,u=0;s>u;)i.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var i=n(9),r=n(18),a=n(65)(!1),o=n(32)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=o&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e,n){var i=n(18),r=n(19),a=n(66);t.exports=function(t){return function(e,n,o){var s,u=i(e),l=r(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(27),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):a(t,e)}},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(9),r=n(20),a=n(32)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){"use strict";var i=n(70),r=n(47),a=n(14),o=n(18);t.exports=n(29)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(0)("unscopables"),r=Array.prototype;null==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){"use strict";var i=n(48),r=n(12);t.exports=n(37)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(2),r=n(7),a=n(4),o=n(0)("species");t.exports=function(t){var e=i[t];a&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(1),r=n(74).set;t.exports=function(t,e,n){var a,o=e.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&i(a)&&r&&r(t,a),t}},function(t,e,n){var i=n(1),r=n(8),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(10)(Function.call,n(75).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var i=n(53),r=n(17),a=n(18),o=n(43),s=n(9),u=n(41),l=Object.getOwnPropertyDescriptor;e.f=n(4)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(n){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(5);i(i.P+i.R,"Map",{toJSON:n(54)("Map")})},function(t,e,n){var i=n(15);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){n(38)("Map")},function(t,e,n){n(39)("Map")},function(t,e,n){n(22),n(26),n(34),n(81),n(82),n(83),n(84),t.exports=n(3).Set},function(t,e,n){"use strict";var i=n(48),r=n(12);t.exports=n(37)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){var i=n(5);i(i.P+i.R,"Set",{toJSON:n(54)("Set")})},function(t,e,n){n(38)("Set")},function(t,e,n){n(39)("Set")},function(t,e,n){n(22),n(34),n(86),n(92),n(93),t.exports=n(3).WeakMap},function(t,e,n){"use strict";var i,r=n(2),a=n(55)(0),o=n(6),s=n(21),u=n(56),l=n(91),c=n(1),h=n(12),p=n(12),d=!r.ActiveXObject&&"ActiveXObject"in r,f=s.getWeak,m=Object.isExtensible,g=l.ufstore,v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},$={get:function(t){if(c(t)){var e=f(t);return!0===e?g(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(h(this,"WeakMap"),t,e)}},y=t.exports=n(37)("WeakMap",v,$,l,!0,!0);p&&d&&(u((i=l.getConstructor(v,"WeakMap")).prototype,$),s.NEED=!0,a(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,r){if(c(e)&&!m(e)){this._f||(this._f=new i);var a=this._f[t](e,r);return"set"==t?this:a}return n.call(this,e,r)})}))},function(t,e,n){var i=n(88);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(1),r=n(89),a=n(0)("species");t.exports=function(t){var e;return r(t)&&("function"==typeof(e=t.constructor)&&(e===Array||r(e.prototype))&&(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(24);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(35),r=n(21).getWeak,a=n(8),o=n(1),s=n(36),u=n(15),l=n(55),c=n(9),h=n(12),p=l(5),d=l(6),f=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return p(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var l=t(function(t,i){s(t,l,e,"_i"),t._t=e,t._i=f++,t._l=void 0,null!=i&&u(i,n,t[a],t)});return i(l.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?m(h(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?m(h(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var i=r(a(e),!0);return!0===i?m(t).set(e,n):i[t._i]=n,t},ufstore:m}},function(t,e,n){n(38)("WeakMap")},function(t,e,n){n(39)("WeakMap")},function(t,e,n){n(26),n(95),t.exports=n(3).Array.from},function(t,e,n){"use strict";var i=n(10),r=n(5),a=n(20),o=n(49),s=n(50),u=n(19),l=n(96),c=n(51);r(r.S+!n(52)(function(t){Array.from(t)})*r.F,"Array",{from:function(t){var e,n,r,h,p=a(t),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,$=c(p);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),null==$||d==Array&&s($))for(n=new d(e=u(p.length));e>v;v++)l(n,v,g?m(p[v],v):p[v]);else for(h=$.call(p),n=new d;!(r=h.next()).done;v++)l(n,v,g?o(h,m,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(7),r=n(17);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){n(98),t.exports=n(3).Object.assign},function(t,e,n){var i=n(5);i(i.S+i.F,"Object",{assign:n(56)})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(i){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i,r,a={};n.r(a),n.d(a,"keyboardHandler",function(){return ta}),n.d(a,"mouseHandler",function(){return to}),n.d(a,"resizeHandler",function(){return ts}),n.d(a,"selectHandler",function(){return tu}),n.d(a,"touchHandler",function(){return tl}),n.d(a,"wheelHandler",function(){return tc});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */ var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function u(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}n(59),n(80),n(85),n(94),n(97);var l=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},c=n(57),h="object"==typeof self&&self&&self.Object===Object&&self,p=c.a||h||Function("return this")(),d=p.Symbol,f=Object.prototype,m=f.hasOwnProperty,g=f.toString,v=d?d.toStringTag:void 0,$=Object.prototype.toString,y=d?d.toStringTag:void 0,x=function(t){var e;return null==t?void 0===t?"[object Undefined]":"[object Null]":y&&y in Object(t)?function(t){var e=m.call(t,v),n=t[v];try{t[v]=void 0;var i=!0}catch(r){}var a=g.call(t);return i&&(e?t[v]=n:delete t[v]),a}(t):(e=t,$.call(e))},_=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,S=/^0o[0-7]+$/i,D=parseInt,M=function(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||null!=(n=e)&&"object"==typeof n&&"[object Symbol]"==x(e))return NaN;if(l(t)){var e,n,i="function"==typeof t.valueOf?t.valueOf():t;t=l(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_,"");var r=w.test(t);return r||S.test(t)?D(t.slice(2),r?2:8):b.test(t)?NaN:+t},E=function(t,e,n){var i,r,a;return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=M(n))==n?n:0),void 0!==e&&(e=(e=M(e))==e?e:0),i=M(t),r=e,a=n,i==i&&(void 0!==a&&(i=i<=a?i:a),void 0!==r&&(i=i>=r?i:r)),i};function T(t,e){return void 0===t&&(t=-1/0),void 0===e&&(e=1/0),function(n,i){var r="_"+i;Object.defineProperty(n,i,{get:function(){return this[r]},set:function(n){Object.defineProperty(this,r,{value:E(n,t,e),enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}}function C(t,e){var n="_"+e;Object.defineProperty(t,e,{get:function(){return this[n]},set:function(t){Object.defineProperty(this,n,{value:!!t,enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}var A=function(){return p.Date.now()},L=Math.max,P=Math.min,R=function(t,e,n){var i,r,a,o,s,u,c=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw TypeError("Expected a function");function f(e){var n=i,a=r;return i=r=void 0,c=e,o=t.apply(a,n)}function m(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-c>=a}function g(){var t,n,i=A();if(m(i))return v(i);s=setTimeout(g,(t=i,n=e-(t-u),p?P(n,a-(t-c)):n))}function v(t){return s=void 0,d&&i?f(t):(i=r=void 0,o)}function $(){var t,n=A(),a=m(n);if(i=arguments,r=this,u=n,a){if(void 0===s)return c=t=u,s=setTimeout(g,e),h?f(t):o;if(p)return clearTimeout(s),s=setTimeout(g,e),f(u)}return void 0===s&&(s=setTimeout(g,e)),o}return e=M(e)||0,l(n)&&(h=!!n.leading,a=(p="maxWait"in n)?L(M(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),$.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=u=r=s=void 0},$.flush=function(){return void 0===s?o:v(A())},$};function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n,i){var r=i.value;return{get:function(){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{value:R.apply(void 0,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}([r],t))}),this[n]}}}}var N,I=function(){function t(t){var e=this;void 0===t&&(t={}),this.damping=.1,this.thumbMinSize=20,this.renderByPixels=!0,this.alwaysShowTracks=!1,this.continuousScrolling=!0,this.delegateTo=null,this.plugins={},Object.keys(t).forEach(function(n){e[n]=t[n]})}return Object.defineProperty(t.prototype,"wheelEventTarget",{get:function(){return this.delegateTo},set:function(t){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead."),this.delegateTo=t},enumerable:!0,configurable:!0}),u([T(0,1)],t.prototype,"damping",void 0),u([T(0,1/0)],t.prototype,"thumbMinSize",void 0),u([C],t.prototype,"renderByPixels",void 0),u([C],t.prototype,"alwaysShowTracks",void 0),u([C],t.prototype,"continuousScrolling",void 0),t}(),z=new WeakMap;function B(){if(void 0!==N)return N;var t=!1;try{var e=function(){},n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",e,n),window.removeEventListener("testPassive",e,n)}catch(i){}return N=!!t&&{passive:!1}}function O(t){var e=z.get(t)||[];return z.set(t,e),function(t,n,i){function r(t){t.defaultPrevented||i(t)}n.split(/\s+/g).forEach(function(n){e.push({elem:t,eventName:n,handler:r}),t.addEventListener(n,r,B())})}}function U(t){var e,n=(e=t).touches?e.touches[e.touches.length-1]:e;return{x:n.clientX,y:n.clientY}}function k(t,e){return void 0===e&&(e=[]),e.some(function(e){return t===e})}var G=["webkit","moz","ms","o"],H=RegExp("^-(?!(?:"+G.join("|")+")-)");function V(t,e){var n,i;Object.keys(e=(i={},Object.keys(n=e).forEach(function(t){if(H.test(t)){var e=n[t];i[t=t.replace(/^-/,"")]=e,G.forEach(function(n){i["-"+n+"-"+t]=e})}else i[t]=n[t]}),i)).forEach(function(n){var i=n.replace(/^-/,"").replace(/-([a-z])/g,function(t,e){return e.toUpperCase()});t.style[i]=e[n]})}var W,j,q=function(){function t(t){this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition={x:0,y:0},this.lastPosition=U(t)}return t.prototype.update=function(t){var e=this.velocity,n=this.updateTime,i=this.lastPosition,r=Date.now(),a=U(t),o={x:-(a.x-i.x),y:-(a.y-i.y)},s=r-n||16,u=o.x/s*16,l=o.y/s*16;e.x=.9*u+.1*e.x,e.y=.9*l+.1*e.y,this.delta=o,this.updateTime=r,this.lastPosition=a},t}(),X=function(){function t(){this._touchList={}}return Object.defineProperty(t.prototype,"_primitiveValue",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){return void 0!==this._activeTouchID},t.prototype.getDelta=function(){var t=this._getActiveTracker();return t?s({},t.delta):this._primitiveValue},t.prototype.getVelocity=function(){var t=this._getActiveTracker();return t?s({},t.velocity):this._primitiveValue},t.prototype.track=function(t){var e=this;return Array.from(t.targetTouches).forEach(function(t){e._add(t)}),this._touchList},t.prototype.update=function(t){var e=this,n=t.touches,i=t.changedTouches;return Array.from(n).forEach(function(t){e._renew(t)}),this._setActiveID(i),this._touchList},t.prototype.release=function(t){var e=this;delete this._activeTouchID,Array.from(t.changedTouches).forEach(function(t){e._delete(t)})},t.prototype._add=function(t){if(!this._has(t)){var e=new q(t);this._touchList[t.identifier]=e}},t.prototype._renew=function(t){this._has(t)&&this._touchList[t.identifier].update(t)},t.prototype._delete=function(t){delete this._touchList[t.identifier]},t.prototype._has=function(t){return this._touchList.hasOwnProperty(t.identifier)},t.prototype._setActiveID=function(t){this._activeTouchID=t[t.length-1].identifier},t.prototype._getActiveTracker=function(){return this._touchList[this._activeTouchID]},t}();(j=W||(W={})).X="x",j.Y="y";var Y=function(){function t(t,e){void 0===e&&(e=0),this._direction=t,this._minSize=e,this.element=document.createElement("div"),this.displaySize=0,this.realSize=0,this.offset=0,this.element.className="scrollbar-thumb scrollbar-thumb-"+t}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.update=function(t,e,n){this.realSize=Math.min(e/n,1)*e,this.displaySize=Math.max(this.realSize,this._minSize),this.offset=t/n*(e+(this.realSize-this.displaySize)),V(this.element,this._getStyle())},t.prototype._getStyle=function(){switch(this._direction){case W.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case W.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null}},t}(),Z=function(){function t(t,e){void 0===e&&(e=0),this.element=document.createElement("div"),this._isShown=!1,this.element.className="scrollbar-track scrollbar-track-"+t,this.thumb=new Y(t,e),this.thumb.attachTo(this.element)}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.show=function(){this._isShown||(this._isShown=!0,this.element.classList.add("show"))},t.prototype.hide=function(){this._isShown&&(this._isShown=!1,this.element.classList.remove("show"))},t.prototype.update=function(t,e,n){V(this.element,{display:n<=e?"none":"block"}),this.thumb.update(t,e,n)},t}(),J=function(){function t(t){this._scrollbar=t;var e=t.options.thumbMinSize;this.xAxis=new Z(W.X,e),this.yAxis=new Z(W.Y,e),this.xAxis.attachTo(t.containerEl),this.yAxis.attachTo(t.containerEl),t.options.alwaysShowTracks&&(this.xAxis.show(),this.yAxis.show())}return t.prototype.update=function(){var t=this._scrollbar,e=t.size,n=t.offset;this.xAxis.update(n.x,e.container.width,e.content.width),this.yAxis.update(n.y,e.container.height,e.content.height)},t.prototype.autoHideOnIdle=function(){this._scrollbar.options.alwaysShowTracks||(this.xAxis.hide(),this.yAxis.hide())},u([F(300)],t.prototype,"autoHideOnIdle",null),t}(),K=new WeakMap;function Q(t){return Math.pow(t-1,3)+1}var tt,te,tn,ti=function(){function t(t,e){var n=this.constructor;this.scrollbar=t,this.name=n.pluginName,this.options=s(s({},n.defaultOptions),e)}return t.prototype.onInit=function(){},t.prototype.onDestroy=function(){},t.prototype.onUpdate=function(){},t.prototype.onRender=function(t){},t.prototype.transformDelta=function(t,e){return s({},t)},t.pluginName="",t.defaultOptions={},t}(),tr={order:new Set,constructors:{}};function ta(t){var e=O(t),n=t.containerEl;e(n,"keydown",function(e){var i,r=document.activeElement;if((r===n||n.contains(r))&&("INPUT"!==(i=r).tagName&&"SELECT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!i.isContentEditable||i.disabled)){var a=function(t,e){var n,i=t.size,r=t.limit,a=t.offset;switch(e){case tt.TAB:return n=t,void requestAnimationFrame(function(){n.scrollIntoView(document.activeElement,{offsetTop:n.size.container.height/2,onlyScrollIfNeeded:!0})});case tt.SPACE:return[0,200];case tt.PAGE_UP:return[0,40-i.container.height];case tt.PAGE_DOWN:return[0,i.container.height-40];case tt.END:return[0,r.y-a.y];case tt.HOME:return[0,-a.y];case tt.LEFT:return[-40,0];case tt.UP:return[0,-40];case tt.RIGHT:return[40,0];case tt.DOWN:return[0,40];default:return null}}(t,e.keyCode||e.which);if(a){var o=a[0],s=a[1];t.addTransformableMomentum(o,s,e,function(n){n?e.preventDefault():(t.containerEl.blur(),t.parent&&t.parent.containerEl.focus())})}}})}function to(t){var e,n,i,r,a,o=O(t),s=t.containerEl,u=t.track,l=u.xAxis,c=u.yAxis;function h(e,n){var i=t.size;return e===te.X?n/(i.container.width+(l.thumb.realSize-l.thumb.displaySize))*i.content.width:e===te.Y?n/(i.container.height+(c.thumb.realSize-c.thumb.displaySize))*i.content.height:0}function p(t){return k(t,[l.element,l.thumb.element])?te.X:k(t,[c.element,c.thumb.element])?te.Y:void 0}o(s,"click",function(e){if(!n&&k(e.target,[l.element,c.element])){var i=e.target,r=p(i),a=i.getBoundingClientRect(),o=U(e),s=t.offset,u=t.limit;if(r===te.X){var d=o.x-a.left-l.thumb.displaySize/2;t.setMomentum(E(h(r,d)-s.x,-s.x,u.x-s.x),0)}r===te.Y&&(d=o.y-a.top-c.thumb.displaySize/2,t.setMomentum(0,E(h(r,d)-s.y,-s.y,u.y-s.y)))}}),o(s,"mousedown",function(n){if(k(n.target,[l.thumb.element,c.thumb.element])){e=!0;var o=n.target,u=U(n),h=o.getBoundingClientRect();r=p(o),i={x:u.x-h.left,y:u.y-h.top},a=s.getBoundingClientRect(),V(t.containerEl,{"-user-select":"none"})}}),o(window,"mousemove",function(o){if(e){n=!0;var s=t.offset,u=U(o);if(r===te.X){var l=u.x-i.x-a.left;t.setPosition(h(r,l),s.y)}r===te.Y&&(l=u.y-i.y-a.top,t.setPosition(s.x,h(r,l)))}}),o(window,"mouseup blur",function(){e=n=!1,V(t.containerEl,{"-user-select":""})})}function ts(t){O(t)(window,"resize",R(t.update.bind(t),300))}function tu(t){var e,n=O(t),i=t.containerEl,r=t.contentEl,a=t.offset,o=t.limit,s=!1;n(window,"mousemove",function(n){var i,r,u,l,c,h,p,d,f,m,g;s&&(cancelAnimationFrame(e),function n(i){var r=i.x,s=i.y;(r||s)&&(t.setMomentum(E(a.x+r,0,o.x)-a.x,E(a.y+s,0,o.y)-a.y),e=requestAnimationFrame(function(){n({x:r,y:s})}))}((i=t,r=n,l=(u=i.bounding).top,c=u.right,h=u.bottom,p=u.left,f=(d=U(r)).x,m=d.y,g={x:0,y:0},0===f&&0===m||(f>c-20?g.x=f-c+20:f<p+20&&(g.x=f-p-20),m>h-20?g.y=m-h+20:m<l+20&&(g.y=m-l-20),g.x*=2,g.y*=2),g)))}),n(r,"selectstart",function(t){t.stopPropagation(),cancelAnimationFrame(e),s=!0}),n(window,"mouseup blur",function(){cancelAnimationFrame(e),s=!1}),n(i,"scroll",function(t){t.preventDefault(),i.scrollTop=i.scrollLeft=0})}function tl(t){var e,n=/Android/.test(navigator.userAgent)?3:2,i=t.options.delegateTo||t.containerEl,r=new X,a=O(t),o=0;a(i,"touchstart",function(n){r.track(n),t.setMomentum(0,0),0===o&&(e=t.options.damping,t.options.damping=Math.max(e,.5)),o++}),a(i,"touchmove",function(e){if(!tn||tn===t){r.update(e);var n=r.getDelta(),i=n.x,a=n.y;t.addTransformableMomentum(i,a,e,function(n){n&&(e.preventDefault(),tn=t)})}}),a(i,"touchcancel touchend",function(i){var a=r.getVelocity(),s={x:0,y:0};Object.keys(a).forEach(function(t){var i=a[t]/e;s[t]=50>Math.abs(i)?0:i*n}),t.addTransformableMomentum(s.x,s.y,i),0==--o&&(t.options.damping=e),r.release(i),tn=null})}function tc(t){O(t)(t.options.delegateTo||t.containerEl,"onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel",function(e){var n=function(t){if("deltaX"in t){var e=td(t.deltaMode);return{x:t.deltaX/th.STANDARD*e,y:t.deltaY/th.STANDARD*e}}return"wheelDeltaX"in t?{x:t.wheelDeltaX/th.OTHERS,y:t.wheelDeltaY/th.OTHERS}:{x:0,y:t.wheelDelta/th.OTHERS}}(e),i=n.x,r=n.y;t.addTransformableMomentum(i,r,e,function(t){t&&e.preventDefault()})})}(i=tt||(tt={}))[i.TAB=9]="TAB",i[i.SPACE=32]="SPACE",i[i.PAGE_UP=33]="PAGE_UP",i[i.PAGE_DOWN=34]="PAGE_DOWN",i[i.END=35]="END",i[i.HOME=36]="HOME",i[i.LEFT=37]="LEFT",i[i.UP=38]="UP",i[i.RIGHT=39]="RIGHT",i[i.DOWN=40]="DOWN",(r=te||(te={}))[r.X=0]="X",r[r.Y=1]="Y";var th={STANDARD:1,OTHERS:-3},tp=[1,28,500],td=function(t){return tp[t]||tp[0]},tf=new Map,tm=function(){function t(t,e){var n=this;this.offset={x:0,y:0},this.limit={x:1/0,y:1/0},this.bounding={top:0,right:0,bottom:0,left:0},this._plugins=[],this._momentum={x:0,y:0},this._listeners=new Set,this.containerEl=t;var i,r,a=this.contentEl=document.createElement("div");this.options=new I(e),t.setAttribute("data-scrollbar","true"),t.setAttribute("tabindex","-1"),V(t,{overflow:"hidden",outline:"none"}),window.navigator.msPointerEnabled&&(t.style.msTouchAction="none"),a.className="scroll-content",Array.from(t.childNodes).forEach(function(t){a.appendChild(t)}),t.appendChild(a),this.track=new J(this),this.size=this.getSize(),this._plugins=(i=this,r=this.options.plugins,Array.from(tr.order).filter(function(t){return!1!==r[t]}).map(function(t){var e=new tr.constructors[t](i,r[t]);return r[t]=e.options,e}));var o=t.scrollLeft,s=t.scrollTop;t.scrollLeft=t.scrollTop=0,this.setPosition(o,s,{withoutCallbacks:!0});var u=window,l=u.MutationObserver||u.WebKitMutationObserver||u.MozMutationObserver;"function"==typeof l&&(this._observer=new l(function(){n.update()}),this._observer.observe(a,{subtree:!0,childList:!0})),tf.set(t,this),requestAnimationFrame(function(){n._init()})}return Object.defineProperty(t.prototype,"parent",{get:function(){for(var t=this.containerEl.parentElement;t;){var e=tf.get(t);if(e)return e;t=t.parentElement}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.offset.y},set:function(t){this.setPosition(this.scrollLeft,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.offset.x},set:function(t){this.setPosition(t,this.scrollTop)},enumerable:!0,configurable:!0}),t.prototype.getSize=function(){var t,e,n;return t=this,e=t.containerEl,n=t.contentEl,{container:{width:e.clientWidth,height:e.clientHeight},content:{width:n.offsetWidth-n.clientWidth+n.scrollWidth,height:n.offsetHeight-n.clientHeight+n.scrollHeight}}},t.prototype.update=function(){var t,e,n,i,r;t=this,n={x:Math.max((e=t.getSize()).content.width-e.container.width,0),y:Math.max(e.content.height-e.container.height,0)},r={top:Math.max((i=t.containerEl.getBoundingClientRect()).top,0),right:Math.min(i.right,window.innerWidth),bottom:Math.min(i.bottom,window.innerHeight),left:Math.max(i.left,0)},t.size=e,t.limit=n,t.bounding=r,t.track.update(),t.setPosition(),this._plugins.forEach(function(t){t.onUpdate()})},t.prototype.isVisible=function(t){var e,n,i,r,a,o,s;return e=this,n=t,i=e.bounding,r=n.getBoundingClientRect(),a=Math.max(i.top,r.top),o=Math.max(i.left,r.left),s=Math.min(i.right,r.right),a<Math.min(i.bottom,r.bottom)&&o<s},t.prototype.setPosition=function(t,e,n){var i,r,a,o,u,l,c,h,p=this;void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===n&&(n={});var d=(i=this,r=t,a=e,o=i.options,u=i.offset,l=i.limit,c=i.track,h=i.contentEl,o.renderByPixels&&(r=Math.round(r),a=Math.round(a)),r=E(r,0,l.x),a=E(a,0,l.y),r!==u.x&&c.xAxis.show(),a!==u.y&&c.yAxis.show(),o.alwaysShowTracks||c.autoHideOnIdle(),r===u.x&&a===u.y?null:(u.x=r,u.y=a,V(h,{"-transform":"translate3d("+-r+"px, "+-a+"px, 0)"}),c.update(),{offset:s({},u),limit:s({},l)}));d&&!n.withoutCallbacks&&this._listeners.forEach(function(t){t.call(p,d)})},t.prototype.scrollTo=function(t,e,n,i){var r,a,o,s,u,l,c,h,p,d,f,m,g,v,$,y,x;void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===n&&(n=0),void 0===i&&(i={}),r=this,a=t,o=e,void 0===(s=n)&&(s=0),h=void 0===(c=(l=void 0===(u=i)?{}:u).easing)?Q:c,p=l.callback,d=r.options,f=r.offset,m=r.limit,d.renderByPixels&&(a=Math.round(a),o=Math.round(o)),g=f.x,v=f.y,$=E(a,0,m.x)-g,y=E(o,0,m.y)-v,x=Date.now(),cancelAnimationFrame(K.get(r)),function t(){var e=Date.now()-x,n=s?h(Math.min(e/s,1)):1;if(r.setPosition(g+$*n,v+y*n),e>=s)"function"==typeof p&&p.call(r);else{var i=requestAnimationFrame(t);K.set(r,i)}}()},t.prototype.scrollIntoView=function(t,e){void 0===e&&(e={}),function(t,e,n){var i=void 0===n?{}:n,r=i.alignToTop,a=i.onlyScrollIfNeeded,o=i.offsetTop,s=i.offsetLeft,u=i.offsetBottom,l=t.containerEl,c=t.bounding,h=t.offset,p=t.limit;if(e&&l.contains(e)){var d=e.getBoundingClientRect();if(!(void 0!==a&&a)||!t.isVisible(e)){var f=void 0===r||r?d.top-c.top-(void 0===o?0:o):d.bottom-c.bottom+(void 0===u?0:u);t.setMomentum(d.left-c.left-(void 0===s?0:s),E(f,-h.y,p.y-h.y))}}}(this,t,e)},t.prototype.addListener=function(t){if("function"!=typeof t)throw TypeError("[smooth-scrollbar] scrolling listener should be a function");this._listeners.add(t)},t.prototype.removeListener=function(t){this._listeners.delete(t)},t.prototype.addTransformableMomentum=function(t,e,n,i){this._updateDebounced();var r=this._plugins.reduce(function(t,e){return e.transformDelta(t,n)||t},{x:t,y:e}),a=!this._shouldPropagateMomentum(r.x,r.y);a&&this.addMomentum(r.x,r.y),i&&i.call(this,a)},t.prototype.addMomentum=function(t,e){this.setMomentum(this._momentum.x+t,this._momentum.y+e)},t.prototype.setMomentum=function(t,e){0===this.limit.x&&(t=0),0===this.limit.y&&(e=0),this.options.renderByPixels&&(t=Math.round(t),e=Math.round(e)),this._momentum.x=t,this._momentum.y=e},t.prototype.updatePluginOptions=function(t,e){this._plugins.forEach(function(n){n.name===t&&Object.assign(n.options,e)})},t.prototype.destroy=function(){var t,e,n=this.containerEl,i=this.contentEl;t=this,(e=z.get(t))&&(e.forEach(function(t){var e=t.elem,n=t.eventName,i=t.handler;e.removeEventListener(n,i,B())}),z.delete(t)),this._listeners.clear(),this.setMomentum(0,0),cancelAnimationFrame(this._renderID),this._observer&&this._observer.disconnect(),tf.delete(this.containerEl);for(var r=Array.from(i.childNodes);n.firstChild;)n.removeChild(n.firstChild);r.forEach(function(t){n.appendChild(t)}),V(n,{overflow:""}),n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,this._plugins.forEach(function(t){t.onDestroy()}),this._plugins.length=0},t.prototype._init=function(){var t=this;this.update(),Object.keys(a).forEach(function(e){a[e](t)}),this._plugins.forEach(function(t){t.onInit()}),this._render()},t.prototype._updateDebounced=function(){this.update()},t.prototype._shouldPropagateMomentum=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.options,i=this.offset,r=this.limit;if(!n.continuousScrolling)return!1;0===r.x&&0===r.y&&this._updateDebounced();var a=E(t+i.x,0,r.x),o=E(e+i.y,0,r.y),s=!0;return(s=(s=s&&a===i.x)&&o===i.y)&&(i.x===r.x||0===i.x||i.y===r.y||0===i.y)},t.prototype._render=function(){var t=this._momentum;if(t.x||t.y){var e=this._nextTick("x"),n=this._nextTick("y");t.x=e.momentum,t.y=n.momentum,this.setPosition(e.position,n.position)}var i=s({},this._momentum);this._plugins.forEach(function(t){t.onRender(i)}),this._renderID=requestAnimationFrame(this._render.bind(this))},t.prototype._nextTick=function(t){var e=this.options,n=this.offset,i=this._momentum,r=n[t],a=i[t];if(.1>=Math.abs(a))return{momentum:0,position:r+a};var o=a*(1-e.damping);return e.renderByPixels&&(o|=0),{momentum:o,position:r+a-o}},u([F(100,{leading:!0})],t.prototype,"_updateDebounced",null),t}(),tg="smooth-scrollbar-style",tv=!1;function t$(){if(!tv&&"undefined"!=typeof window){var t=document.createElement("style");t.id=tg,t.textContent="\n[data-scrollbar] {\n  display: block;\n  position: relative;\n}\n\n.scroll-content {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n\n.scrollbar-track {\n  position: absolute;\n  opacity: 0;\n  z-index: 1;\n  background: rgba(222, 222, 222, .75);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-transition: opacity 0.5s 0.5s ease-out;\n          transition: opacity 0.5s 0.5s ease-out;\n}\n.scrollbar-track.show,\n.scrollbar-track:hover {\n  opacity: 1;\n  -webkit-transition-delay: 0s;\n          transition-delay: 0s;\n}\n\n.scrollbar-track-x {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n}\n.scrollbar-track-y {\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 100%;\n}\n.scrollbar-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  background: rgba(0, 0, 0, .5);\n  border-radius: 4px;\n}\n",document.head&&document.head.appendChild(t),tv=!0}}n.d(e,"ScrollbarPlugin",function(){return ti});/*!
 * cast `I.Scrollbar` to `Scrollbar` to avoid error
 *
 * `I.Scrollbar` is not assignable to `Scrollbar`:
 *     "privateProp" is missing in `I.Scrollbar`
 *
 * @see https://github.com/Microsoft/TypeScript/issues/2672
 */ var ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.init=function(t,e){if(!t||1!==t.nodeType)throw TypeError("expect element to be DOM Element, but got "+t);return t$(),tf.has(t)?tf.get(t):new tm(t,e)},e.initAll=function(t){return Array.from(document.querySelectorAll("[data-scrollbar]"),function(n){return e.init(n,t)})},e.has=function(t){return tf.has(t)},e.get=function(t){return tf.get(t)},e.getAll=function(){return Array.from(tf.values())},e.destroy=function(t){var e=tf.get(t);e&&e.destroy()},e.destroyAll=function(){tf.forEach(function(t){t.destroy()})},e.use=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){var e=t.pluginName;if(!e)throw TypeError("plugin name is required");tr.order.add(e),tr.constructors[e]=t})}).apply(void 0,t)},e.attachStyle=function(){return t$()},e.detachStyle=function(){return function(){if(tv&&"undefined"!=typeof window){var t=document.getElementById(tg);t&&t.parentNode&&(t.parentNode.removeChild(t),tv=!1)}}()},e.version="8.5.1",e.ScrollbarPlugin=ti,e}(tm);e.default=ty}]).default}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t=t||self,e(t.THREE={}))}(this,function(t){function e(){}function n(t,e){this.x=t||0,this.y=e||0}function i(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function r(t,e,a,o,s,u,l,c,h,p){Object.defineProperty(this,"id",{value:ro++}),this.uuid=ri.generateUUID(),this.name="",this.image=void 0!==t?t:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:r.DEFAULT_MAPPING,this.wrapS=void 0!==a?a:1001,this.wrapT=void 0!==o?o:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==u?u:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==l?l:1023,this.internalFormat=null,this.type=void 0!==c?c:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new i,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function a(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function o(t,e,n){this.width=t,this.height=e,this.scissor=new a(0,0,t,e),this.scissorTest=!1,this.viewport=new a(0,0,t,e),n=n||{},this.texture=new r(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(t,e,n){o.call(this,t,e,n),this.samples=4}function u(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function l(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function c(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||h.DefaultOrder}function p(){this.mask=1}function d(){Object.defineProperty(this,"id",{value:r$++}),this.uuid=ri.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=d.DefaultUp.clone();var t=new l,e=new h,n=new u,r=new l(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new c},normalMatrix:{value:new i}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=d.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new p,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function f(){d.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(t,e){this.min=void 0!==t?t:new l(1/0,1/0,1/0),this.max=void 0!==e?e:new l(-1/0,-1/0,-1/0)}function g(t,e,n,i,r){var a,o=0;for(a=t.length-3;o<=a;o+=3){rB.fromArray(t,o);var s=r.x*Math.abs(rB.x)+r.y*Math.abs(rB.y)+r.z*Math.abs(rB.z),u=e.dot(rB),l=n.dot(rB),c=i.dot(rB);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}function v(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:-1}function $(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l(0,0,-1)}function y(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function x(t,e,n){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==n?n:new l}function _(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function b(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}function w(t){return .04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function S(t){return .0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}function D(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new l,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new _,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function M(){Object.defineProperty(this,"id",{value:ar++}),this.uuid=ri.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function E(t){M.call(this),this.type="MeshBasicMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(t)}function T(t,e,n){if(Array.isArray(t))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function C(t,e,n){T.call(this,new Int8Array(t),e,n)}function A(t,e,n){T.call(this,new Uint8Array(t),e,n)}function L(t,e,n){T.call(this,new Uint8ClampedArray(t),e,n)}function P(t,e,n){T.call(this,new Int16Array(t),e,n)}function R(t,e,n){T.call(this,new Uint16Array(t),e,n)}function F(t,e,n){T.call(this,new Int32Array(t),e,n)}function N(t,e,n){T.call(this,new Uint32Array(t),e,n)}function I(t,e,n){T.call(this,new Float32Array(t),e,n)}function z(t,e,n){T.call(this,new Float64Array(t),e,n)}function B(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function O(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function U(){Object.defineProperty(this,"id",{value:ao+=2}),this.uuid=ri.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function k(t,e){d.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new E,this.updateMorphTargets()}function G(t,e,n,i,r,a,o,s){return null===(1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s))?null:(aT.copy(s),aT.applyMatrix4(t.matrixWorld),(e=n.ray.origin.distanceTo(aT))<n.near||e>n.far?null:{distance:e,point:aT.clone(),object:t})}function H(t,e,i,r,a,o,s,u,l,c,h,p){if(ag.fromBufferAttribute(a,c),av.fromBufferAttribute(a,h),a$.fromBufferAttribute(a,p),a=t.morphTargetInfluences,e.morphTargets&&o&&a){a_.set(0,0,0),ab.set(0,0,0),aw.set(0,0,0);for(var d=0,f=o.length;d<f;d++){var m=a[d],g=o[d];0!==m&&(ay.fromBufferAttribute(g,c),ax.fromBufferAttribute(g,h),a8.fromBufferAttribute(g,p),s?(a_.addScaledVector(ay,m),ab.addScaledVector(ax,m),aw.addScaledVector(a8,m)):(a_.addScaledVector(ay.sub(ag),m),ab.addScaledVector(ax.sub(av),m),aw.addScaledVector(a8.sub(a$),m)))}ag.add(a_),av.add(ab),a$.add(aw)}return t.isSkinnedMesh&&(t.boneTransform(c,ag),t.boneTransform(h,av),t.boneTransform(p,a$)),(t=G(t,e,i,r,ag,av,a$,aE))&&(u&&(aS.fromBufferAttribute(u,c),aD.fromBufferAttribute(u,h),aM.fromBufferAttribute(u,p),t.uv=x.getUV(aE,ag,av,a$,aS,aD,aM,new n)),l&&(aS.fromBufferAttribute(l,c),aD.fromBufferAttribute(l,h),aM.fromBufferAttribute(l,p),t.uv2=x.getUV(aE,ag,av,a$,aS,aD,aM,new n)),u=new D(c,h,p),x.getNormal(ag,av,a$,u.normal),t.face=u),t}function V(){Object.defineProperty(this,"id",{value:a1+=2}),this.uuid=ri.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function W(t){var e,n={};for(e in t)for(var i in n[e]={},t[e]){var r=t[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?n[e][i]=r.clone():Array.isArray(r)?n[e][i]=r.slice():n[e][i]=r}return n}function j(t){for(var e={},n=0;n<t.length;n++){var i,r=W(t[n]);for(i in r)e[i]=r[i]}return e}function q(t){M.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function X(){d.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c,this.projectionMatrixInverse=new c}function Y(t,e,n,i){X.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Z(t,e,n){if(d.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=n;var i=new Y(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new l(1,0,0)),this.add(i);var r=new Y(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new l(-1,0,0)),this.add(r);var a=new Y(90,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new l(0,1,0)),this.add(a);var o=new Y(90,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var s=new Y(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new l(0,0,1)),this.add(s);var u=new Y(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new l(0,0,-1)),this.add(u),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var l=t.xr.enabled,c=t.getRenderTarget();t.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(c),t.xr.enabled=l},this.clear=function(t,e,i,r){for(var a=t.getRenderTarget(),o=0;6>o;o++)t.setRenderTarget(n,o),t.clear(e,i,r);t.setRenderTarget(a)}}}function J(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),o.call(this,t,t,e)}function K(t,e,n,i,a,o,s,u,l,c,h,p){r.call(this,null,o,s,u,l,c,i,a,h,p),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function Q(t,e,n,i,r,a){this.planes=[void 0!==t?t:new y,void 0!==e?e:new y,void 0!==n?n:new y,void 0!==i?i:new y,void 0!==r?r:new y,void 0!==a?a:new y]}function tt(){function t(r,a){!1!==n&&(i(r,a),e.requestAnimationFrame(t))}var e=null,n=!1,i=null;return{start:function(){!0!==n&&null!==i&&(e.requestAnimationFrame(t),n=!0)},stop:function(){n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function te(t,e){var n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var a,o,s,u,l,c=i.get(e);if(void 0===c)i.set(e,(a=e,o=r,s=a.array,u=a.usage,l=t.createBuffer(),t.bindBuffer(o,l),t.bufferData(o,s,u),a.onUploadCallback(),o=5126,s instanceof Float32Array?o=5126:s instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):s instanceof Uint16Array?o=5123:s instanceof Int16Array?o=5122:s instanceof Uint32Array?o=5125:s instanceof Int32Array?o=5124:s instanceof Int8Array?o=5120:s instanceof Uint8Array&&(o=5121),{buffer:l,type:o,bytesPerElement:s.BYTES_PER_ELEMENT,version:a.version}));else if(c.version<e.version){var h=e.array,p=e.updateRange;t.bindBuffer(r,c.buffer),-1===p.count?t.bufferSubData(r,0,h):(n?t.bufferSubData(r,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):t.bufferSubData(r,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1),c.version=e.version}}}}function tn(t,e,n,i){V.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new ti(t,e,n,i)),this.mergeVertices()}function ti(t,e,n,i){U.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r=(t=t||1)/2,a=(e=e||1)/2,o=(n=Math.floor(n)||1)+1,s=(i=Math.floor(i)||1)+1,u=t/n,l=e/i,c=[],h=[],p=[],d=[];for(t=0;t<s;t++){var f=t*l-a;for(e=0;e<o;e++)h.push(e*u-r,-f,0),p.push(0,0,1),d.push(e/n),d.push(1-t/i)}for(t=0;t<i;t++)for(e=0;e<n;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,c.push(e+o*t,r,s),c.push(r,a,s);this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}function tr(t,e,n,i){function r(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var a,o,s=new _(0),u=0,l=null,c=0,h=null;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,u=void 0!==e?e:1)},getClearAlpha:function(){return u},setClearAlpha:function(t){r(s,u=t)},render:function(e,i,p,d){i=i.background,(p=(p=t.xr).getSession&&p.getSession())&&"additive"===p.environmentBlendMode&&(i=null),null===i?r(s,u):i&&i.isColor&&(r(i,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),i&&(i.isCubeTexture||i.isWebGLCubeRenderTarget||306===i.mapping)?(void 0===o&&((o=new k(new aP(1,1,1),new q({type:"BackgroundCubeMaterial",uniforms:W(az.cube.uniforms),vertexShader:az.cube.vertexShader,fragmentShader:az.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),d=i.isWebGLCubeRenderTarget?i.texture:i,o.material.uniforms.envMap.value=d,o.material.uniforms.flipEnvMap.value=d.isCubeTexture?-1:1,(l!==i||c!==d.version||h!==t.toneMapping)&&(o.material.needsUpdate=!0,l=i,c=d.version,h=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)):i&&i.isTexture&&(void 0===a&&((a=new k(new ti(2,2),new q({type:"BackgroundMaterial",uniforms:W(az.background.uniforms),vertexShader:az.background.vertexShader,fragmentShader:az.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=i,!0===i.matrixAutoUpdate&&i.updateMatrix(),a.material.uniforms.uvTransform.value.copy(i.matrix),(l!==i||c!==i.version||h!==t.toneMapping)&&(a.material.needsUpdate=!0,l=i,c=i.version,h=t.toneMapping),e.unshift(a,a.geometry,a.material,0,0,null))}}}function ta(t,e,n,i){var r,a=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(i,o,s,u){if(0!==u){if(a){i=t;var l="drawArraysInstanced"}else if(i=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===i){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}i[l](r,o,s,u),n.update(s,r,u)}}}function to(t,e,n){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),n=!0===n.logarithmicDepthBuffer,s=t.getParameter(34930);var u=t.getParameter(35660),l=t.getParameter(3379),c=t.getParameter(34076),h=t.getParameter(34921),p=t.getParameter(36347),d=t.getParameter(36348),f=t.getParameter(36349),m=0<u,g=a||!!e.get("OES_texture_float"),v=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:n,maxTextures:s,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:p,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:v}}function ts(){function t(){c.value!==r&&(c.value=r,c.needsUpdate=0<a),n.numPlanes=a,n.numIntersection=0}function e(t,e,i,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=c.value,!0!==r||null===o)for(r=i+4*a,e=e.matrixWorldInverse,l.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,i+=4)u.copy(t[r]).applyMatrix4(e,l),u.normal.toArray(o,i),o[i+3]=u.constant;c.value=o,c.needsUpdate=!0}return n.numPlanes=a,n.numIntersection=0,o}var n=this,r=null,a=0,o=!1,s=!1,u=new y,l=new i,c={value:null,needsUpdate:!1};this.uniform=c,this.numIntersection=this.numPlanes=0,this.init=function(t,n,i){var s=0!==t.length||n||0!==a||o;return o=n,r=e(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,i,u,l,h,p){if(o&&null!==n&&0!==n.length&&(!s||u)){var d=4*(u=s?0:a),f=h.clippingState||null;for(c.value=f,f=e(n,l,d,p),n=0;n!==d;++n)f[n]=r[n];h.clippingState=f,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=u}else s?e(null):t()}}function tu(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];switch(n){case"WEBGL_depth_texture":var i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i}}}function tl(t,e,n){function i(t){var r=t.target;for(var s in null!==(t=a.get(r)).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);r.removeEventListener("dispose",i),a.delete(r),(s=o.get(t))&&(e.remove(s),o.delete(t)),n.memory.geometries--}function r(t){var n=[],i=t.index,r=t.attributes.position;if(null!==i){var a=i.array;i=i.version,r=0;for(var s=a.length;r<s;r+=3){var u=a[r+0],l=a[r+1],c=a[r+2];n.push(u,l,l,c,c,u)}}else for(a=r.array,i=r.version,r=0,s=a.length/3-1;r<s;r+=3)u=r+0,l=r+1,c=r+2,n.push(u,l,l,c,c,u);(n=new(65535<O(n)?N:R)(n,1)).version=i,e.update(n,34963),(a=o.get(t))&&e.remove(a),o.set(t,n)}var a=new WeakMap,o=new WeakMap;return{get:function(t,e){var r=a.get(e);return r||(e.addEventListener("dispose",i),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new U).setFromObject(t)),r=e._bufferGeometry),a.set(e,r),n.memory.geometries++),r},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);for(r in t=t.morphAttributes){n=t[r],i=0;for(var a=n.length;i<a;i++)e.update(n[i],34962)}},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&r(t)}else r(t);return o.get(t)}}}function tc(t,e,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r)},this.renderInstances=function(i,u,l,c){if(0!==c){if(s){i=t;var h="drawElementsInstanced"}else if(i=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===i){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}i[h](r,l,a,u*o,c),n.update(l,r,c)}}}function th(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=t/3*i;break;case 1:e.lines+=t/2*i;break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function tp(t,e){return Math.abs(e[1])-Math.abs(t[1])}function td(t){var e={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,u=void 0===s?0:s.length;if(void 0===(i=e[r.id])){i=[];for(var l=0;l<u;l++)i[l]=[l,0];e[r.id]=i}var c=a.morphTargets&&r.morphAttributes.position;for(l=0,a=a.morphNormals&&r.morphAttributes.normal;l<u;l++){var h=i[l];0!==h[1]&&(c&&r.deleteAttribute("morphTarget"+l),a&&r.deleteAttribute("morphNormal"+l))}for(l=0;l<u;l++)(h=i[l])[0]=l,h[1]=s[l];for(i.sort(tp),l=s=0;8>l;l++){if((h=i[l])&&(u=h[0],h=h[1])){c&&r.setAttribute("morphTarget"+l,c[u]),a&&r.setAttribute("morphNormal"+l,a[u]),n[l]=h,s+=h;continue}n[l]=0}r=r.morphTargetsRelative?1:1-s,o.getUniforms().setValue(t,"morphTargetBaseInfluence",r),o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function tf(t,e,n,i){var r=new WeakMap;return{update:function(t){var a=i.render.frame,o=t.geometry,s=e.get(t,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),r.set(s,a)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function tm(t,e,n,i,a,o,s,u,l,c){t=void 0!==t?t:[],r.call(this,t,void 0!==e?e:301,n,i,a,o,void 0!==s?s:1022,u,l,c),this.flipY=!1}function tg(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function tv(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function t$(t,e,n){var i=t[0];if(0>=i||0<i)return t;var r=e*n,a=aU[r];if(void 0===a&&(a=new Float32Array(r),aU[r]=a),0!==e)for(i.toArray(a,0),i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r);return a}function ty(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function tx(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function t8(t,e){var n=ak[e];void 0===n&&(n=new Int32Array(e),ak[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function t_(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function tb(t,e){var n=this.cache;void 0!==e.x?(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y):ty(n,e)||(t.uniform2fv(this.addr,e),tx(n,e))}function tw(t,e){var n=this.cache;void 0!==e.x?(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z):void 0!==e.r?(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b):ty(n,e)||(t.uniform3fv(this.addr,e),tx(n,e))}function tS(t,e){var n=this.cache;void 0!==e.x?(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w):ty(n,e)||(t.uniform4fv(this.addr,e),tx(n,e))}function tD(t,e){var n=this.cache,i=e.elements;void 0===i?ty(n,e)||(t.uniformMatrix2fv(this.addr,!1,e),tx(n,e)):ty(n,i)||(a5.set(i),t.uniformMatrix2fv(this.addr,!1,a5),tx(n,i))}function tM(t,e){var n=this.cache,i=e.elements;void 0===i?ty(n,e)||(t.uniformMatrix3fv(this.addr,!1,e),tx(n,e)):ty(n,i)||(a6.set(i),t.uniformMatrix3fv(this.addr,!1,a6),tx(n,i))}function tE(t,e){var n=this.cache,i=e.elements;void 0===i?ty(n,e)||(t.uniformMatrix4fv(this.addr,!1,e),tx(n,e)):ty(n,i)||(aG.set(i),t.uniformMatrix4fv(this.addr,!1,aG),tx(n,i))}function tT(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||a3,r)}function t1(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||aB,r)}function t0(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||a4,r)}function tC(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||aO,r)}function tA(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function tL(t,e){var n=this.cache;ty(n,e)||(t.uniform2iv(this.addr,e),tx(n,e))}function tP(t,e){var n=this.cache;ty(n,e)||(t.uniform3iv(this.addr,e),tx(n,e))}function tR(t,e){var n=this.cache;ty(n,e)||(t.uniform4iv(this.addr,e),tx(n,e))}function tF(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function t2(t,e){t.uniform1fv(this.addr,e)}function tN(t,e){t.uniform1iv(this.addr,e)}function tI(t,e){t.uniform2iv(this.addr,e)}function tz(t,e){t.uniform3iv(this.addr,e)}function t3(t,e){t.uniform4iv(this.addr,e)}function tB(t,e){e=t$(e,this.size,2),t.uniform2fv(this.addr,e)}function t4(t,e){e=t$(e,this.size,3),t.uniform3fv(this.addr,e)}function tO(t,e){e=t$(e,this.size,4),t.uniform4fv(this.addr,e)}function tU(t,e){e=t$(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function tk(t,e){e=t$(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function tG(t,e){e=t$(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function t6(t,e,n){var i=e.length,r=t8(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.safeSetTexture2D(e[t]||a3,r[t])}function t5(t,e,n){var i=e.length,r=t8(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.safeSetTextureCube(e[t]||aO,r[t])}function tH(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function t(e){switch(e){case 5126:return t_;case 35664:return tb;case 35665:return tw;case 35666:return tS;case 35674:return tD;case 35675:return tM;case 35676:return tE;case 5124:case 35670:return tA;case 35667:case 35671:return tL;case 35668:case 35672:return tP;case 35669:case 35673:return tR;case 5125:return tF;case 35678:case 36198:case 36298:case 36306:case 35682:return tT;case 35679:case 36299:case 36307:return t0;case 35680:case 36300:case 36308:case 36293:return tC;case 36289:case 36303:case 36311:case 36292:return t1}}(e.type)}function tV(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function t(e){switch(e){case 5126:return t2;case 35664:return tB;case 35665:return t4;case 35666:return tO;case 35674:return tU;case 35675:return tk;case 35676:return tG;case 5124:case 35670:return tN;case 35667:case 35671:return tI;case 35668:case 35672:return tz;case 35669:case 35673:return t3;case 35678:case 36198:case 36298:case 36306:case 35682:return t6;case 35680:case 36300:case 36308:case 36293:return t5}}(e.type)}function t7(t){this.id=t,this.seq=[],this.map={}}function tW(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name),o=this,s=r.name,u=s.length;for(aH.lastIndex=0;;){var l=aH.exec(s),c=aH.lastIndex,h=l[1],p=l[3];if("]"===l[2]&&(h|=0),void 0===p||"["===p&&c+2===u){s=o,r=void 0===p?new tH(h,r,a):new tV(h,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(p=o.map[h])&&(p=new t7(h),h=o,o=p,h.seq.push(o),h.map[o.id]=o),o=p}}}function tj(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),e}function tq(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+t)}}function tX(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";for(t=t.getShaderSource(e).split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+(t=t.join("\n"))}function tY(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=tq(e))[0]+"ToLinear"+e[1]+"; }"}function tZ(t){return""!==t}function tJ(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tK(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function tQ(t,e){if(void 0===(t=aI[e]))throw Error("Can not resolve #include <"+e+">");return t.replace(a7,tQ)}function t9(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),et(t,e,n,i)}function et(t,e,n,i){for(t="",e=parseInt(e);e<parseInt(n);e++)t+=i.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return t}function ee(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function en(t,e,n){var i,r,a,o,s,u=t.getContext(),l=n.defines,c=n.vertexShader,h=n.fragmentShader,p=(i=n,r="SHADOWMAP_TYPE_BASIC",1===i.shadowMapType?r="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?r="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(r="SHADOWMAP_TYPE_VSM"),r),d=function t(e){var n="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:n="ENVMAP_TYPE_EQUIREC";break;case 305:n="ENVMAP_TYPE_SPHERE"}return n}(n),f=function t(e){var n="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:n="ENVMAP_MODE_REFRACTION"}return n}(n),m=function t(e){var n="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:n="ENVMAP_BLENDING_MULTIPLY";break;case 1:n="ENVMAP_BLENDING_MIX";break;case 2:n="ENVMAP_BLENDING_ADD"}return n}(n),g=0<t.gammaFactor?t.gammaFactor:1,v=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(tZ).join("\n"),$=function t(e){var n,i=[];for(n in e){var r=e[n];!1!==r&&i.push("#define "+n+" "+r)}return i.join("\n")}(l),y=u.createProgram();return n.isRawShaderMaterial?(0<(l=[$].filter(tZ).join("\n")).length&&(l+="\n"),0<(p=[v,$].filter(tZ).join("\n")).length&&(p+="\n")):(l=[ee(n),"#define SHADER_NAME "+n.shaderName,$,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(tZ).join("\n"),p=[v,ee(n),"#define SHADER_NAME "+n.shaderName,$,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?aI.tonemapping_pars_fragment:"",0!==n.toneMapping?function t(e,n){switch(n){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+n)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?aI.encodings_pars_fragment:"",n.mapEncoding?tY("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?tY("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?tY("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?tY("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?tY("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(s=tq(s=n.outputEncoding))[0]+s[1]+"; }":"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(tZ).join("\n")),c=tK(c=tJ(c=c.replace(a7,tQ),n),n),h=tK(h=tJ(h=h.replace(a7,tQ),n),n),c=c.replace(aj,et).replace(aW,t9),h=h.replace(aj,et).replace(aW,t9),n.isWebGL2&&!n.isRawShaderMaterial&&(d=!1,f=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==c.match(f)&&null!==h.match(f)&&(d=!0,c=c.replace(f,""),h=h.replace(f,"")),l="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+l,p=["#version 300 es\n\n#define varying in",d?"":"out highp vec4 pc_fragColor;",d?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+p),h=p+h,c=tj(u,35633,l+c),h=tj(u,35632,h),u.attachShader(y,c),u.attachShader(y,h),void 0!==n.index0AttributeName?u.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&u.bindAttribLocation(y,0,"position"),u.linkProgram(y),t.debug.checkShaderErrors&&(t=u.getProgramInfoLog(y).trim(),d=u.getShaderInfoLog(c).trim(),f=u.getShaderInfoLog(h).trim(),g=m=!0,!1===u.getProgramParameter(y,35714)?(m=!1,v=tX(u,c,"vertex"),$=tX(u,h,"fragment"),console.error("THREE.WebGLProgram: shader error: ",u.getError(),"35715",u.getProgramParameter(y,35715),"gl.getProgramInfoLog",t,v,$)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):(""===d||""===f)&&(g=!1),g&&(this.diagnostics={runnable:m,programLog:t,vertexShader:{log:d,prefix:l},fragmentShader:{log:f,prefix:p}})),u.deleteShader(c),u.deleteShader(h),this.getUniforms=function(){return void 0===a&&(a=new tW(u,y)),a},this.getAttributes=function(){if(void 0===o){for(var t={},e=u.getProgramParameter(y,35721),n=0;n<e;n++){var i=u.getActiveAttrib(y,n).name;t[i]=u.getAttribLocation(y,i)}o=t}return o},this.destroy=function(){u.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=aV++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=c,this.fragmentShader=h,this}function ei(t,e,n){function i(t){if(t)t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding);else var e=3e3;return e}var r=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,u=n.precision,l=n.maxVertexUniforms,c=n.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(r,p,d,f,m,g,v){var $=f.fog;f=r.isMeshStandardMaterial?f.environment:null,f=r.envMap||f;var y=h[r.type];if(v.isSkinnedMesh){var x=v.skeleton.bones;if(s)x=1024;else{var _=Math.min(Math.floor((l-20)/4),x.length);_<x.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+x.length+" bones. This GPU supports "+_+"."),x=0):x=_}}else x=0;null!==r.precision&&(u=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",u,"instead."),y?(_=az[y],_={name:r.type,uniforms:aR.clone(_.uniforms),vertexShader:_.vertexShader,fragmentShader:_.fragmentShader}):_={name:r.type,uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader},r.onBeforeCompile(_,t);var b=t.getRenderTarget();return{isWebGL2:a,shaderID:y,shaderName:_.name,uniforms:_.uniforms,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:u,instancing:!0===v.isInstancedMesh,supportsVertexTextures:c,outputEncoding:null!==b?i(b.texture):t.outputEncoding,map:!!r.map,mapEncoding:i(r.map),matcap:!!r.matcap,matcapEncoding:i(r.matcap),envMap:!!f,envMapMode:f&&f.mapping,envMapEncoding:i(f),envMapCubeUV:!!f&&(306===f.mapping||307===f.mapping),lightMap:!!r.lightMap,lightMapEncoding:i(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:i(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatMap||!!r.clearcoatRoughnessMap||!!r.clearcoatNormalMap||!!r.displacementMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap)&&!!r.displacementMap,fog:!!$,useFog:r.fog,fogExp2:$&&$.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&0<x,maxBones:x,useVertexTexture:s,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:p.directional.length,numPointLights:p.point.length,numSpotLights:p.spot.length,numRectAreaLights:p.rectArea.length,numHemiLights:p.hemi.length,numDirLightShadows:p.directionalShadowMap.length,numPointLightShadows:p.pointShadowMap.length,numSpotLightShadows:p.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:g,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<d.length,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:a||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||null!==e.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile}},this.getProgramCacheKey=function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);if(void 0===e.isRawShaderMaterial){for(i=0;i<p.length;i++)n.push(e[p[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(e,n){for(var i,a=0,o=r.length;a<o;a++){var s=r[a];if(s.cacheKey===n){i=s,++i.usedTimes;break}}return void 0===i&&(i=new en(t,n,e),r.push(i)),i},this.releaseProgram=function(t){0==--t.usedTimes&&(r[r.indexOf(t)]=r[r.length-1],r.pop(),t.destroy())},this.programs=r}function er(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function ea(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function eo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function es(){function t(t,i,r,o,s,u){var l=e[n];return void 0===l?(l={id:t.id,object:t,geometry:i,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:u},e[n]=l):(l.id=t.id,l.object=t,l.geometry=i,l.material=r,l.program=r.program||a,l.groupOrder=o,l.renderOrder=t.renderOrder,l.z=s,l.group=u),n++,l}var e=[],n=0,i=[],r=[],a={id:-1};return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,n,a,o,s,u){e=t(e,n,a,o,s,u),(!0===a.transparent?r:i).push(e)},unshift:function(e,n,a,o,s,u){e=t(e,n,a,o,s,u),(!0===a.transparent?r:i).unshift(e)},finish:function(){for(var t=n,i=e.length;t<i;t++){var r=e[t];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(t,e){1<i.length&&i.sort(t||ea),1<r.length&&r.sort(e||eo)}}}function eu(){function t(n){(n=n.target).removeEventListener("dispose",t),e.delete(n)}var e=new WeakMap;return{get:function(n,i){var r=e.get(n);if(void 0===r){var a=new es;e.set(n,new WeakMap),e.get(n).set(i,a),n.addEventListener("dispose",t)}else void 0===(a=r.get(i))&&(a=new es,r.set(i,a));return a},dispose:function(){e=new WeakMap}}}function el(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new l,color:new _};break;case"SpotLight":n={position:new l,direction:new l,color:new _,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new l,color:new _,distance:0,decay:0};break;case"HemisphereLight":n={direction:new l,skyColor:new _,groundColor:new _};break;case"RectAreaLight":n={color:new _,position:new l,halfWidth:new l,halfHeight:new l}}return t[e.id]=n}}}function ec(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function eh(){for(var t,e=new el,i=(t={},{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var i={shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i}}),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;9>a;a++)r.probe.push(new l);var o=new l,s=new c,u=new c;return{setup:function(t,n,a){for(var l=0,c=0,h=0,p=0;9>p;p++)r.probe[p].set(0,0,0);var d=n=0,f=0,m=0,g=0,v=0,$=0,y=0;a=a.matrixWorldInverse,t.sort(ec),p=0;for(var x=t.length;p<x;p++){var _=t[p],b=_.color,w=_.intensity,S=_.distance,D=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)l+=b.r*w,c+=b.g*w,h+=b.b*w;else if(_.isLightProbe)for(D=0;9>D;D++)r.probe[D].addScaledVector(_.sh.coefficients[D],w);else if(_.isDirectionalLight){var M=e.get(_);M.color.copy(_.color).multiplyScalar(_.intensity),M.direction.setFromMatrixPosition(_.matrixWorld),o.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(o),M.direction.transformDirection(a),_.castShadow&&(w=_.shadow,(b=i.get(_)).shadowBias=w.bias,b.shadowRadius=w.radius,b.shadowMapSize=w.mapSize,r.directionalShadow[n]=b,r.directionalShadowMap[n]=D,r.directionalShadowMatrix[n]=_.shadow.matrix,v++),r.directional[n]=M,n++}else _.isSpotLight?((M=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(a),M.color.copy(b).multiplyScalar(w),M.distance=S,M.direction.setFromMatrixPosition(_.matrixWorld),o.setFromMatrixPosition(_.target.matrixWorld),M.direction.sub(o),M.direction.transformDirection(a),M.coneCos=Math.cos(_.angle),M.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),M.decay=_.decay,_.castShadow&&(w=_.shadow,(b=i.get(_)).shadowBias=w.bias,b.shadowRadius=w.radius,b.shadowMapSize=w.mapSize,r.spotShadow[f]=b,r.spotShadowMap[f]=D,r.spotShadowMatrix[f]=_.shadow.matrix,y++),r.spot[f]=M,f++):_.isRectAreaLight?((M=e.get(_)).color.copy(b).multiplyScalar(w),M.position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(a),u.identity(),s.copy(_.matrixWorld),s.premultiply(a),u.extractRotation(s),M.halfWidth.set(.5*_.width,0,0),M.halfHeight.set(0,.5*_.height,0),M.halfWidth.applyMatrix4(u),M.halfHeight.applyMatrix4(u),r.rectArea[m]=M,m++):_.isPointLight?((M=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),M.position.applyMatrix4(a),M.color.copy(_.color).multiplyScalar(_.intensity),M.distance=_.distance,M.decay=_.decay,_.castShadow&&(w=_.shadow,(b=i.get(_)).shadowBias=w.bias,b.shadowRadius=w.radius,b.shadowMapSize=w.mapSize,b.shadowCameraNear=w.camera.near,b.shadowCameraFar=w.camera.far,r.pointShadow[d]=b,r.pointShadowMap[d]=D,r.pointShadowMatrix[d]=_.shadow.matrix,$++),r.point[d]=M,d++):_.isHemisphereLight&&((M=e.get(_)).direction.setFromMatrixPosition(_.matrixWorld),M.direction.transformDirection(a),M.direction.normalize(),M.skyColor.copy(_.color).multiplyScalar(w),M.groundColor.copy(_.groundColor).multiplyScalar(w),r.hemi[g]=M,g++)}r.ambient[0]=l,r.ambient[1]=c,r.ambient[2]=h,((t=r.hash).directionalLength!==n||t.pointLength!==d||t.spotLength!==f||t.rectAreaLength!==m||t.hemiLength!==g||t.numDirectionalShadows!==v||t.numPointShadows!==$||t.numSpotShadows!==y)&&(r.directional.length=n,r.spot.length=f,r.rectArea.length=m,r.point.length=d,r.hemi.length=g,r.directionalShadow.length=v,r.directionalShadowMap.length=v,r.pointShadow.length=$,r.pointShadowMap.length=$,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=v,r.pointShadowMatrix.length=$,r.spotShadowMatrix.length=y,t.directionalLength=n,t.pointLength=d,t.spotLength=f,t.rectAreaLength=m,t.hemiLength=g,t.numDirectionalShadows=v,t.numPointShadows=$,t.numSpotShadows=y,r.version=aq++)},state:r}}function ep(){var t=new eh,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function ed(){function t(n){(n=n.target).removeEventListener("dispose",t),e.delete(n)}var e=new WeakMap;return{get:function(n,i){if(!1===e.has(n)){var r=new ep;e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)}else!1===e.get(n).has(i)?(r=new ep,e.get(n).set(i,r)):r=e.get(n).get(i);return r},dispose:function(){e=new WeakMap}}}function ef(t){M.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function em(t){M.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new l,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function eg(t,e,i){function r(t,e,n){var i=f[n=t<<0|e<<1|n<<2];return void 0===i&&(i=new ef({depthPacking:3201,morphTargets:t,skinning:e}),f[n]=i),i}function s(t,e,n){var i=m[n=t<<0|e<<1|n<<2];return void 0===i&&(i=new em({morphTargets:t,skinning:e}),m[n]=i),i}function u(e,n,i,a,o,u,l){var c=r,h=e.customDepthMaterial;return!0===a.isPointLight&&(c=s,h=e.customDistanceMaterial),void 0===h?(h=!1,!0===i.morphTargets&&(h=n.morphAttributes&&n.morphAttributes.position&&0<n.morphAttributes.position.length),n=!1,!0===e.isSkinnedMesh&&(!0===i.skinning?n=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),e=c(h,n,!0===e.isInstancedMesh)):e=h,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(h=e.uuid,c=i.uuid,void 0===(n=g[h])&&(n={},g[h]=n),void 0===(h=n[c])&&(h=e.clone(),n[c]=h),e=h),e.visible=i.visible,e.wireframe=i.wireframe,e.side=3===l?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:v[i.side],e.clipShadows=i.clipShadows,e.clippingPlanes=i.clippingPlanes,e.clipIntersection=i.clipIntersection,e.wireframeLinewidth=i.wireframeLinewidth,e.linewidth=i.linewidth,!0===a.isPointLight&&!0===e.isMeshDistanceMaterial&&(e.referencePosition.setFromMatrixPosition(a.matrixWorld),e.nearDistance=o,e.farDistance=u),e}function l(n,i,r,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);var s=e.update(n),h=n.material;if(Array.isArray(h))for(var p=s.groups,d=0,f=p.length;d<f;d++){var m=p[d],g=h[m.materialIndex];g&&g.visible&&(g=u(n,s,g,a,r.near,r.far,o),t.renderBufferDirect(r,null,s,g,n,m))}else h.visible&&(g=u(n,s,h,a,r.near,r.far,o),t.renderBufferDirect(r,null,s,g,n,null))}for(n=n.children,s=0,h=n.length;s<h;s++)l(n[s],i,r,a,o)}}var c=new Q,h=new n,p=new n,d=new a,f=[],m=[],g={},v={0:1,1:0,2:2},$=new q({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=$.clone();y.defines.HORIZONAL_PASS=1;var x=new U;x.setAttribute("position",new T(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new k(x,$),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(n,r,a){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==n.length){var s=t.getRenderTarget(),u=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var g=0,v=n.length;g<v;g++){var x=n[g],w=x.shadow;if(void 0===w)console.warn("THREE.WebGLShadowMap:",x,"has no shadow.");else{h.copy(w.mapSize);var S=w.getFrameExtents();h.multiply(S),p.copy(w.mapSize),(h.x>i||h.y>i)&&(h.x>i&&(p.x=Math.floor(i/S.x),h.x=p.x*S.x,w.mapSize.x=p.x),h.y>i&&(p.y=Math.floor(i/S.y),h.y=p.y*S.y,w.mapSize.y=p.y)),null!==w.map||w.isPointLightShadow||3!==this.type||(S={minFilter:1006,magFilter:1006,format:1023},w.map=new o(h.x,h.y,S),w.map.texture.name=x.name+".shadowMap",w.mapPass=new o(h.x,h.y,S),w.camera.updateProjectionMatrix()),null===w.map&&(S={minFilter:1003,magFilter:1003,format:1023},w.map=new o(h.x,h.y,S),w.map.texture.name=x.name+".shadowMap",w.camera.updateProjectionMatrix()),t.setRenderTarget(w.map),t.clear(),S=w.getViewportCount();for(var D=0;D<S;D++){var M=w.getViewport(D);d.set(p.x*M.x,p.y*M.y,p.x*M.z,p.y*M.w),m.viewport(d),w.updateMatrices(x,D),c=w.getFrustum(),l(r,a,w.camera,x,this.type)}w.isPointLightShadow||3!==this.type||(x=w,w=a,S=e.update(_),$.uniforms.shadow_pass.value=x.map.texture,$.uniforms.resolution.value=x.mapSize,$.uniforms.radius.value=x.radius,t.setRenderTarget(x.mapPass),t.clear(),t.renderBufferDirect(w,null,S,$,_,null),y.uniforms.shadow_pass.value=x.mapPass.texture,y.uniforms.resolution.value=x.mapSize,y.uniforms.radius.value=x.radius,t.setRenderTarget(x.map),t.clear(),t.renderBufferDirect(w,null,S,y,_,null))}}b.needsUpdate=!1,t.setRenderTarget(s,u,f)}}}function ev(t,e,n){function i(e,n,i){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return a}function r(n,i){v[n]=1,0===$[n]&&(t.enableVertexAttribArray(n),$[n]=1),y[n]!==i&&((d?t:e.get("ANGLE_instanced_arrays"))[d?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),y[n]=i)}function o(e){!0!==x[e]&&(t.enable(e),x[e]=!0)}function s(e){!1!==x[e]&&(t.disable(e),x[e]=!1)}function u(e,n,i,r,a,u,l,c){if(0===e)b&&(s(3042),b=!1);else if(b||(o(3042),b=!0),5!==e){if(e!==w||c!==A){if((100!==S||100!==E)&&(t.blendEquation(32774),E=S=100),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}C=T=M=D=null,w=e,A=c}}else a=a||n,u=u||i,l=l||r,(n!==S||a!==E)&&(t.blendEquationSeparate(H[n],H[a]),S=n,E=a),(i!==D||r!==M||u!==T||l!==C)&&(t.blendFuncSeparate(V[i],V[r],V[u],V[l]),D=i,M=r,T=u,C=l),w=e,A=null}function l(e){L!==e&&(e?t.frontFace(2304):t.frontFace(2305),L=e)}function c(e){0!==e?(o(2884),e!==P&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):s(2884),P=e}function h(e,n,i){e?(o(32823),(F!==n||N!==i)&&(t.polygonOffset(n,i),F=n,N=i)):s(32823)}function p(e){void 0===e&&(e=33984+I-1),B!==e&&(t.activeTexture(e),B=e)}var d=n.isWebGL2,f=new function(){var e=!1,n=new a,i=null,r=new a(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?o(2929):s(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=i=n=null}}},g=new function(){var e=!1,n=null,i=null,r=null,a=null,u=null,l=null,c=null,h=null;return{setTest:function(t){e||(t?o(2960):s(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){(i!==e||r!==n||a!==o)&&(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){(u!==e||l!==n||c!==i)&&(t.stencilOp(e,n,i),u=e,l=n,c=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=c=l=u=a=r=i=n=null}}};n=t.getParameter(34921);var v=new Uint8Array(n),$=new Uint8Array(n),y=new Uint8Array(n),x={},_=null,b=null,w=null,S=null,D=null,M=null,E=null,T=null,C=null,A=!1,L=null,P=null,R=null,F=null,N=null,I=t.getParameter(35661),z=!1;n=0,-1!==(n=t.getParameter(7938)).indexOf("WebGL")?z=1<=(n=parseFloat(/^WebGL ([0-9])/.exec(n)[1])):-1!==n.indexOf("OpenGL ES")&&(z=2<=(n=parseFloat(/^OpenGL ES ([0-9])/.exec(n)[1])));var B=null,O={},U=new a,k=new a,G={};G[3553]=i(3553,3553,1),G[34067]=i(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),l(!1),c(1),o(2884),u(0);var H={100:32774,101:32778,102:32779};d?(H[103]=32775,H[104]=32776):null!==(n=e.get("EXT_blend_minmax"))&&(H[103]=n.MIN_EXT,H[104]=n.MAX_EXT);var V={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=v.length;t<e;t++)v[t]=0},enableAttribute:function(t){r(t,0)},enableAttributeAndDivisor:r,disableUnusedAttributes:function(){for(var e=0,n=$.length;e!==n;++e)$[e]!==v[e]&&(t.disableVertexAttribArray(e),$[e]=0)},vertexAttribPointer:function(e,n,i,r,a,o){!0!==d||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,r,a,o):t.vertexAttribIPointer(e,n,i,r,a,o)},enable:o,disable:s,useProgram:function(e){return _!==e&&(t.useProgram(e),_=e,!0)},setBlending:u,setMaterial:function(t,e){2===t.side?s(2884):o(2884);var n=1===t.side;e&&(n=!n),l(n),1===t.blending&&!1===t.transparent?u(0):u(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),e=t.stencilWrite,g.setTest(e),e&&(g.setMask(t.stencilWriteMask),g.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),g.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),h(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:l,setCullFace:c,setLineWidth:function(e){e!==R&&(z&&t.lineWidth(e),R=e)},setPolygonOffset:h,setScissorTest:function(t){t?o(3089):s(3089)},activeTexture:p,bindTexture:function(e,n){null===B&&p();var i=O[B];void 0===i&&(i={type:void 0,texture:void 0},O[B]=i),(i.type!==e||i.texture!==n)&&(t.bindTexture(e,n||G[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=O[B];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))},viewport:function(e){!1===k.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),k.copy(e))},reset:function(){for(var e=0;e<$.length;e++)1===$[e]&&(t.disableVertexAttribArray(e),$[e]=0);x={},B=null,O={},P=L=w=_=null,f.reset(),m.reset(),g.reset()}}}function e$(t,e,n,i,r,a,o){function s(t,e){return P?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(i=e?ri.floorPowerOfTwo:Math.floor)(r*t.width),r=i(r*t.height),void 0===D&&(D=s(e,r)),(n=n?s(e,r):D).width=e,n.height=r,n.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),n;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function l(t){return ri.isPowerOfTwo(t.width)&&ri.isPowerOfTwo(t.height)}function c(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function h(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function p(n,i,r){if(!1===M)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}return n=i,6403===i&&(5126===r&&(n=33326),5131===r&&(n=33325),5121===r&&(n=33321)),6407===i&&(5126===r&&(n=34837),5131===r&&(n=34843),5121===r&&(n=32849)),6408===i&&(5126===r&&(n=34836),5131===r&&(n=34842),5121===r&&(n=32856)),33325!==n&&33326!==n&&34842!==n&&34836!==n||e.get("EXT_color_buffer_float"),n}function d(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e)),e.isVideoTexture&&L.delete(e),o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(r=0;6>r;r++)t.deleteFramebuffer(n.__webglFramebuffer[r]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}o.memory.textures--}function g(t,e){var r=i.get(t);if(t.isVideoTexture){var a=o.render.frame;L.get(t)!==a&&(L.set(t,a),t.update())}if(0<t.version&&r.__version!==t.version){if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(!1===a.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_(r,t,e);return}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function v(e,r){if(6===e.image.length){var o=i.get(e);if(0<e.version&&o.__version!==e.version){x(o,e),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture);r=e.image[0]&&e.image[0].isDataTexture;for(var d=[],f=0;6>f;f++)d[f]=s||r?r?e.image[f].image:e.image[f]:u(e.image[f],!1,!0,T);var m=d[0],g=l(m)||M,v=a.convert(e.format),$=a.convert(e.type),_=p(e.internalFormat,v,$);if(y(34067,e,g),s){for(f=0;6>f;f++){var b=d[f].mipmaps;for(s=0;s<b.length;s++){var w=b[s];1023!==e.format&&1022!==e.format?null!==v?n.compressedTexImage2D(34069+f,s,_,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+f,s,_,w.width,w.height,0,v,$,w.data)}}o.__maxMipLevel=b.length-1}else{for(f=0,b=e.mipmaps;6>f;f++)if(r)for(n.texImage2D(34069+f,0,_,d[f].width,d[f].height,0,v,$,d[f].data),s=0;s<b.length;s++)w=(w=b[s]).image[f].image,n.texImage2D(34069+f,s+1,_,w.width,w.height,0,v,$,w.data);else for(n.texImage2D(34069+f,0,_,v,$,d[f]),s=0;s<b.length;s++)w=b[s],n.texImage2D(34069+f,s+1,_,v,$,w.image[f]);o.__maxMipLevel=b.length}c(e,g)&&h(34067,e,m.width,m.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function $(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function y(n,a,o){o?(t.texParameteri(n,10242,N[a.wrapS]),t.texParameteri(n,10243,N[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,N[a.wrapR]),t.texParameteri(n,10240,I[a.magFilter]),t.texParameteri(n,10241,I[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,d(a.magFilter)),t.texParameteri(n,10241,d(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),(o=e.get("EXT_texture_filter_anisotropic"))&&(1015!==a.type||null!==e.get("OES_texture_float_linear"))&&(1016!==a.type||null!==(M||e.get("OES_texture_half_float_linear")))&&(1<a.anisotropy||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}function x(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function _(e,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),x(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),r=(r=!M&&(1001!==i.wrapS||1001!==i.wrapT||1003!==i.minFilter&&1006!==i.minFilter))&&!1===l(i.image),r=u(i.image,r,!1,C);var s=l(r)||M,d=a.convert(i.format),f=a.convert(i.type),m=p(i.internalFormat,d,f);y(o,i,s);var g=i.mipmaps;if(i.isDepthTexture)m=6402,M?m=1015===i.type?36012:1014===i.type?33190:1020===i.type?35056:33189:1015===i.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===i.format&&6402===m&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,f=a.convert(i.type)),1027===i.format&&6402===m&&(m=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,f=a.convert(i.type))),n.texImage2D(3553,0,m,r.width,r.height,0,d,f,null);else if(i.isDataTexture){if(0<g.length&&s){for(var v=0,$=g.length;v<$;v++){var _=g[v];n.texImage2D(3553,v,m,_.width,_.height,0,d,f,_.data)}i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,r.width,r.height,0,d,f,r.data),e.__maxMipLevel=0}else if(i.isCompressedTexture){for(v=0,$=g.length;v<$;v++)_=g[v],1023!==i.format&&1022!==i.format?null!==d?n.compressedTexImage2D(3553,v,m,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,v,m,_.width,_.height,0,d,f,_.data);e.__maxMipLevel=g.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,r.width,r.height,r.depth,0,d,f,r.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,r.width,r.height,r.depth,0,d,f,r.data),e.__maxMipLevel=0;else if(0<g.length&&s){for(v=0,$=g.length;v<$;v++)_=g[v],n.texImage2D(3553,v,m,d,f,_);i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,d,f,r),e.__maxMipLevel=0;c(i,s)&&h(o,i,r.width,r.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function b(e,r,o,s){var u=a.convert(r.texture.format),l=a.convert(r.texture.type),c=p(r.texture.internalFormat,u,l);n.texImage2D(s,0,c,r.width,r.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function w(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;i?((i=n.depthTexture)&&i.isDepthTexture&&(1015===i.type?r=36012:1014===i.type&&(r=33190)),i=S(n),t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)):t.renderbufferStorage(36161,r,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)}else n.depthBuffer&&n.stencilBuffer?(i?(i=S(n),t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(e=a.convert(n.texture.format),r=a.convert(n.texture.type),r=p(n.texture.internalFormat,e,r),i?(i=S(n),t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)):t.renderbufferStorage(36161,r,n.width,n.height));t.bindRenderbuffer(36161,null)}function S(t){return M&&t.isWebGLMultisampleRenderTarget?Math.min(A,t.samples):0}var D,M=r.isWebGL2,E=r.maxTextures,T=r.maxCubemapSize,C=r.maxTextureSize,A=r.maxSamples,L=new WeakMap,P=!1;try{P="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(R){}var F=0,N={1e3:10497,1001:33071,1002:33648},I={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},z=!1,B=!1;this.allocateTextureUnit=function(){var t=F;return t>=E&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+E),F+=1,t},this.resetTextureUnits=function(){F=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?_(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?_(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=$,this.setupRenderTarget=function(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",m),s.__webglTexture=t.createTexture(),o.memory.textures++;var u=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultisampleRenderTarget,f=l(e)||M;if(M&&1022===e.texture.format&&(1015===e.texture.type||1016===e.texture.type)&&(e.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u)for(r.__webglFramebuffer=[],d=0;6>d;d++)r.__webglFramebuffer[d]=t.createFramebuffer();else if(r.__webglFramebuffer=t.createFramebuffer(),d){if(M){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer),d=a.convert(e.texture.format);var v=a.convert(e.texture.type);d=p(e.texture.internalFormat,d,v),v=S(e),t.renderbufferStorageMultisample(36161,v,d,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),w(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}if(u){for(n.bindTexture(34067,s.__webglTexture),y(34067,e.texture,f),d=0;6>d;d++)b(r.__webglFramebuffer[d],e,36064,34069+d);c(e.texture,f)&&h(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),y(3553,e.texture,f),b(r.__webglFramebuffer,e,36064,3553),c(e.texture,f)&&h(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);if(e.depthBuffer){if(r=i.get(e),s=!0===e.isWebGLCubeRenderTarget,e.depthTexture){if(s)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,r.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(i.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),r=i.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,r,0);else if(1027===e.depthTexture.format)t.framebufferTexture2D(36160,33306,3553,r,0);else throw Error("Unknown depthTexture format")}else if(s)for(r.__webglDepthbuffer=[],s=0;6>s;s++)t.bindFramebuffer(36160,r.__webglFramebuffer[s]),r.__webglDepthbuffer[s]=t.createRenderbuffer(),w(r.__webglDepthbuffer[s],e,!1);else t.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),w(r.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,r=l(t)||M;if(c(e,r)){r=t.isWebGLCubeRenderTarget?34067:3553;var a=i.get(e).__webglTexture;n.bindTexture(r,a),h(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget){if(M){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):$(t,e)}}function ey(t,e,n){var i=n.isWebGL2;return{convert:function(t){if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i)return 5131;var n=e.get("OES_texture_half_float");return null!==n?n.HALF_FLOAT_OES:null}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:1020===t?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ex(t){Y.call(this),this.cameras=t||[]}function e8(){d.call(this),this.type="Group"}function e_(){this._grip=this._targetRay=null}function eb(t,e){function n(t){var e=g.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function i(){g.forEach(function(t,e){t.disconnect(e)}),g.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),M.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function r(t){p=t,M.setContext(c),M.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}function o(t){for(var e=c.inputSources,n=0;n<m.length;n++)g.set(e[n],m[n]);for(n=0;n<t.removed.length;n++){e=t.removed[n];var i=g.get(e);i&&(i.dispatchEvent({type:"disconnected",data:e}),g.delete(e))}for(n=0;n<t.added.length;n++)e=t.added[n],(i=g.get(e))&&i.dispatchEvent({type:"connected",data:e})}function s(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var u=this,c=null,h=1,p=null,d="local-floor",f=null,m=[],g=new Map,v=new Y;v.layers.enable(1),v.viewport=new a;var $=new Y;$.layers.enable(2),$.viewport=new a;var y=[v,$],x=new ex;x.layers.enable(1),x.layers.enable(2);var _=null,b=null;this.isPresenting=this.enabled=!1,this.getController=function(t){var e=m[t];return void 0===e&&(e=new e_,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=m[t];return void 0===e&&(e=new e_,m[t]=e),e.getGripSpace()},this.setFramebufferScaleFactor=function(t){h=t,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){d=t,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p},this.getSession=function(){return c},this.setSession=function(t){null!==(c=t)&&(c.addEventListener("select",n),c.addEventListener("selectstart",n),c.addEventListener("selectend",n),c.addEventListener("squeeze",n),c.addEventListener("squeezestart",n),c.addEventListener("squeezeend",n),c.addEventListener("end",i),!0!==(t=e.getContextAttributes()).xrCompatible&&e.makeXRCompatible(),t=new XRWebGLLayer(c,e,{antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:h}),c.updateRenderState({baseLayer:t}),c.requestReferenceSpace(d).then(r),c.addEventListener("inputsourceschange",o))};var w=new l,S=new l;this.getCamera=function(t){x.near=$.near=v.near=t.near,x.far=$.far=v.far=t.far,(_!==x.near||b!==x.far)&&(c.updateRenderState({depthNear:x.near,depthFar:x.far}),_=x.near,b=x.far);var e=t.parent,n=x.cameras;s(x,e);for(var i=0;i<n.length;i++)s(n[i],e);for(t.matrixWorld.copy(x.matrixWorld),t=t.children,i=0,e=t.length;i<e;i++)t[i].updateMatrixWorld(!0);if(2===n.length){w.setFromMatrixPosition(v.matrixWorld),S.setFromMatrixPosition($.matrixWorld),n=w.distanceTo(S);var r=v.projectionMatrix.elements,a=$.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1),t=(r[9]+1)/r[5],e=(r[9]-1)/r[5];var u=(r[8]-1)/r[0],l=(a[8]+1)/a[0];a=o*u,r=o*l,u=-((l=n/(-u+l))*u),v.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(u),x.translateZ(l),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.getInverse(x.matrixWorld),o+=l,l=i+l,x.projectionMatrix.makePerspective(a-u,r+(n-u),t*i/l*o,e*i/l*o,o,l)}else x.projectionMatrix.copy(v.projectionMatrix);return x};var D=null,M=new tt;M.setAnimationLoop(function(e,n){if(null!==(f=n.getViewerPose(p))){var i=f.views,r=c.renderState.baseLayer;t.setFramebuffer(r.framebuffer);var a=!1;i.length!==x.cameras.length&&(x.cameras.length=0,a=!0);for(var o=0;o<i.length;o++){var s=i[o],u=r.getViewport(s),l=y[o];l.matrix.fromArray(s.transform.matrix),l.projectionMatrix.fromArray(s.projectionMatrix),l.viewport.set(u.x,u.y,u.width,u.height),0===o&&x.matrix.copy(l.matrix),!0===a&&x.cameras.push(l)}}for(o=0,i=c.inputSources;o<m.length;o++)m[o].update(i[o],n,p);D&&D(e,n)}),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}function ew(t){function e(e,n,i){if(e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),(i=n.envMap||i)&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio,e.maxMipLevel.value=t.get(i).__maxMipLevel),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map)var r=n.map;else n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap&&(r=n.emissiveMap);if(void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap)var a=n.aoMap;else n.lightMap&&(a=n.lightMap);void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,a,o){if(i.isMeshBasicMaterial)e(t,i);else if(i.isMeshLambertMaterial)e(t,i),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap);else if(i.isMeshToonMaterial)e(t,i),t.specular.value.copy(i.specular),t.shininess.value=Math.max(i.shininess,1e-4),i.gradientMap&&(t.gradientMap.value=i.gradientMap),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshPhongMaterial)e(t,i),t.specular.value.copy(i.specular),t.shininess.value=Math.max(i.shininess,1e-4),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshStandardMaterial)e(t,i,r),i.isMeshPhysicalMaterial?(n(t,i,r),t.reflectivity.value=i.reflectivity,t.clearcoat.value=i.clearcoat,t.clearcoatRoughness.value=i.clearcoatRoughness,i.sheen&&t.sheen.value.copy(i.sheen),i.clearcoatMap&&(t.clearcoatMap.value=i.clearcoatMap),i.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap),i.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),t.clearcoatNormalMap.value=i.clearcoatNormalMap,1===i.side&&t.clearcoatNormalScale.value.negate()),t.transparency.value=i.transparency):n(t,i,r);else if(i.isMeshMatcapMaterial)e(t,i),i.matcap&&(t.matcap.value=i.matcap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshDepthMaterial)e(t,i),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshDistanceMaterial)e(t,i),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias),t.referencePosition.value.copy(i.referencePosition),t.nearDistance.value=i.nearDistance,t.farDistance.value=i.farDistance;else if(i.isMeshNormalMaterial)e(t,i),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isLineBasicMaterial)t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,i.isLineDashedMaterial&&(t.dashSize.value=i.dashSize,t.totalSize.value=i.dashSize+i.gapSize,t.scale.value=i.scale);else if(i.isPointsMaterial){if(t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.size.value=i.size*a,t.scale.value=.5*o,i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.map)var s=i.map;else i.alphaMap&&(s=i.alphaMap);void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uvTransform.value.copy(s.matrix))}else if(i.isSpriteMaterial){if(t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.rotation.value=i.rotation,i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.map)var u=i.map;else i.alphaMap&&(u=i.alphaMap);void 0!==u&&(!0===u.matrixAutoUpdate&&u.updateMatrix(),t.uvTransform.value.copy(u.matrix))}else i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function eS(t,e){this.name="",this.color=new _(t),this.density=void 0!==e?e:25e-5}function eD(t,e,n){this.name="",this.color=new _(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function eM(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function eE(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function eT(t){M.call(this),this.type="SpriteMaterial",this.color=new _(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(t)}function e1(t){if(d.call(this),this.type="Sprite",void 0===aY){aY=new U;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new eM(e,5),aY.setIndex([0,1,2,0,2,3]),aY.setAttribute("position",new eE(e,3,0,!1)),aY.setAttribute("uv",new eE(e,2,3,!1))}this.geometry=aY,this.material=void 0!==t?t:new eT,this.center=new n(.5,.5)}function e0(t,e,n,i,r,a){aQ.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(a9.x=a*aQ.x-r*aQ.y,a9.y=r*aQ.x+a*aQ.y):a9.copy(aQ),t.copy(e),t.x+=a9.x,t.y+=a9.y,t.applyMatrix4(ot)}function eC(){d.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function eA(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),k.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new c,this.bindMatrixInverse=new c}function eL(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new c)}function eP(){d.call(this),this.type="Bone"}function eR(t,e,n){k.call(this,t,e),this.instanceMatrix=new T(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function eF(t){M.call(this),this.type="LineBasicMaterial",this.color=new _(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(t)}function e2(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),d.call(this),this.type="Line",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new eF,this.updateMorphTargets()}function eN(t,e){e2.call(this,t,e),this.type="LineSegments"}function eI(t,e){e2.call(this,t,e),this.type="LineLoop"}function ez(t){M.call(this),this.type="PointsMaterial",this.color=new _(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function e3(t,e){d.call(this),this.type="Points",this.geometry=void 0!==t?t:new U,this.material=void 0!==e?e:new ez,this.updateMorphTargets()}function eB(t,e,n,i,r,a,o){var s=oE.distanceSqToPoint(t);s<n&&(n=new l,oE.closestPointToPoint(t,n),n.applyMatrix4(i),(t=r.ray.origin.distanceTo(n))<r.near||t>r.far||a.push({distance:t,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:o}))}function e4(t,e,n,i,a,o,s,u,l){r.call(this,t,e,n,i,a,o,s,u,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==a?a:1006,this.generateMipmaps=!1}function eO(t,e,n,i,a,o,s,u,l,c,h,p){r.call(this,null,o,s,u,l,c,i,a,h,p),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function eU(t,e,n,i,a,o,s,u,l){r.call(this,t,e,n,i,a,o,s,u,l),this.needsUpdate=!0}function ek(t,e,n,i,a,o,s,u,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),r.call(this,null,i,a,o,s,u,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=this.flipY=!1}function eG(t){U.call(this),this.type="WireframeGeometry";var e,n,i,r=[],a=[0,0],o={},s=["a","b","c"];if(t&&t.isGeometry){var u=t.faces,c=0;for(n=u.length;c<n;c++){var h=u[c];for(e=0;3>e;e++){var p=h[s[e]],d=h[s[(e+1)%3]];a[0]=Math.min(p,d),a[1]=Math.max(p,d),void 0===o[p=a[0]+","+a[1]]&&(o[p]={index1:a[0],index2:a[1]})}}for(p in o)c=o[p],s=t.vertices[c.index1],r.push(s.x,s.y,s.z),s=t.vertices[c.index2],r.push(s.x,s.y,s.z)}else if(t&&t.isBufferGeometry){if(s=new l,null!==t.index){u=t.attributes.position,h=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:h.count,materialIndex:0}]),t=0,i=f.length;t<i;++t)for(e=(c=f[t]).start,n=c.count,c=e,n=e+n;c<n;c+=3)for(e=0;3>e;e++)p=h.getX(c+e),d=h.getX(c+(e+1)%3),a[0]=Math.min(p,d),a[1]=Math.max(p,d),void 0===o[p=a[0]+","+a[1]]&&(o[p]={index1:a[0],index2:a[1]});for(p in o)c=o[p],s.fromBufferAttribute(u,c.index1),r.push(s.x,s.y,s.z),s.fromBufferAttribute(u,c.index2),r.push(s.x,s.y,s.z)}else for(u=t.attributes.position,c=0,n=u.count/3;c<n;c++)for(e=0;3>e;e++)o=3*c+e,s.fromBufferAttribute(u,o),r.push(s.x,s.y,s.z),o=3*c+(e+1)%3,s.fromBufferAttribute(u,o),r.push(s.x,s.y,s.z)}this.setAttribute("position",new I(r,3))}function e6(t,e,n){V.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new e5(t,e,n)),this.mergeVertices()}function e5(t,e,n){U.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],u=[],c=new l,h=new l,p=new l,d=new l,f=new l;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(i=0;i<=n;i++){var g=i/n;for(r=0;r<=e;r++){var v=r/e;t(v,g,h),o.push(h.x,h.y,h.z),0<=v-1e-5?(t(v-1e-5,g,p),d.subVectors(h,p)):(t(v+1e-5,g,p),d.subVectors(p,h)),0<=g-1e-5?(t(v,g-1e-5,p),f.subVectors(h,p)):(t(v,g+1e-5,p),f.subVectors(p,h)),c.crossVectors(d,f).normalize(),s.push(c.x,c.y,c.z),u.push(v,g)}}for(i=0;i<n;i++)for(r=0;r<e;r++)t=i*m+r+1,c=(i+1)*m+r+1,h=(i+1)*m+r,a.push(i*m+r,t,h),a.push(t,c,h);this.setIndex(a),this.setAttribute("position",new I(o,3)),this.setAttribute("normal",new I(s,3)),this.setAttribute("uv",new I(u,2))}function eH(t,e,n,i){V.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new eV(t,e,n,i)),this.mergeVertices()}function eV(t,e,i,r){function a(t){u.push(t.x,t.y,t.z)}function o(e,n){e*=3,n.x=t[e+0],n.y=t[e+1],n.z=t[e+2]}function s(t,e,n,i){0>i&&1===t.x&&(c[e]=t.x-1),0===n.x&&0===n.z&&(c[e]=i/2/Math.PI+.5)}U.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1;var u=[],c=[];(function(t){for(var n=new l,i=new l,r=new l,s=0;s<e.length;s+=3){o(e[s+0],n),o(e[s+1],i),o(e[s+2],r);var u,c,h=n,p=i,d=r,f=Math.pow(2,t),m=[];for(c=0;c<=f;c++){m[c]=[];var g=h.clone().lerp(d,c/f),v=p.clone().lerp(d,c/f),$=f-c;for(u=0;u<=$;u++)m[c][u]=0===u&&c===f?g:g.clone().lerp(v,u/$)}for(c=0;c<f;c++)for(u=0;u<2*(f-c)-1;u++)h=Math.floor(u/2),0==u%2?(a(m[c][h+1]),a(m[c+1][h]),a(m[c][h])):(a(m[c][h+1]),a(m[c+1][h+1]),a(m[c+1][h]))}})(r=r||0),function(t){for(var e=new l,n=0;n<u.length;n+=3)e.x=u[n+0],e.y=u[n+1],e.z=u[n+2],e.normalize().multiplyScalar(t),u[n+0]=e.x,u[n+1]=e.y,u[n+2]=e.z}(i),function(){for(var t=new l,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],c.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new l,e=new l;for(var i=new l,r=new l,a=new n,o=new n,h=new n,p=0,d=0;p<u.length;p+=9,d+=6){t.set(u[p+0],u[p+1],u[p+2]),e.set(u[p+3],u[p+4],u[p+5]),i.set(u[p+6],u[p+7],u[p+8]),a.set(c[d+0],c[d+1]),o.set(c[d+2],c[d+3]),h.set(c[d+4],c[d+5]),r.copy(t).add(e).add(i).divideScalar(3);var f=Math.atan2(r.z,-r.x);s(a,d+0,t,f),s(o,d+2,e,f),s(h,d+4,i,f)}for(t=0;t<c.length;t+=6)e=c[t+0],a=Math.min(e,i=c[t+2],r=c[t+4]),.9<Math.max(e,i,r)&&.1>a&&(.2>e&&(c[t+0]+=1),.2>i&&(c[t+2]+=1),.2>r&&(c[t+4]+=1))}(),this.setAttribute("position",new I(u,3)),this.setAttribute("normal",new I(u.slice(),3)),this.setAttribute("uv",new I(c,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function e7(t,e){V.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eW(t,e)),this.mergeVertices()}function eW(t,e){eV.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ej(t,e){V.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eq(t,e)),this.mergeVertices()}function eq(t,e){eV.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eX(t,e){V.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eY(t,e)),this.mergeVertices()}function eY(t,e){var n=(1+Math.sqrt(5))/2;eV.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eZ(t,e){V.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eJ(t,e)),this.mergeVertices()}function eJ(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;eV.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function eK(t,e,n,i,r,a){V.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new eQ(t,e,n,i,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function eQ(t,e,i,r,a){function o(n){f=t.getPointAt(n/e,f);var a=s.normals[n];for(c=0,n=s.binormals[n];c<=r;c++){var o=c/r*Math.PI*2,u=Math.sin(o);o=-Math.cos(o),p.x=o*a.x+u*n.x,p.y=o*a.y+u*n.y,p.z=o*a.z+u*n.z,p.normalize(),g.push(p.x,p.y,p.z),h.x=f.x+i*p.x,h.y=f.y+i*p.y,h.z=f.z+i*p.z,m.push(h.x,h.y,h.z)}}U.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var s=t.computeFrenetFrames(e,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var u,c,h=new l,p=new l,d=new n,f=new l,m=[],g=[],v=[],$=[];for(u=0;u<e;u++)o(u);for(o(!1===a?e:0),u=0;u<=e;u++)for(c=0;c<=r;c++)d.x=u/e,d.y=c/r,v.push(d.x,d.y);(function(){for(c=1;c<=e;c++)for(u=1;u<=r;u++){var t=(r+1)*c+(u-1),n=(r+1)*c+u,i=(r+1)*(c-1)+u;$.push((r+1)*(c-1)+(u-1),t,i),$.push(t,n,i)}})(),this.setIndex($),this.setAttribute("position",new I(m,3)),this.setAttribute("normal",new I(g,3)),this.setAttribute("uv",new I(v,2))}function e9(t,e,n,i,r,a,o){V.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new nt(t,e,n,i,r,a)),this.mergeVertices()}function nt(t,e,n,i,r,a){function o(t,e,n,i,r){var a=Math.sin(t);n=Math.cos(e=n/e*t),r.x=i*(2+n)*.5*Math.cos(t),r.y=i*(2+n)*a*.5,r.z=i*Math.sin(e)*.5}U.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var s,u=[],c=[],h=[],p=[],d=new l,f=new l,m=new l,g=new l,v=new l,$=new l,y=new l;for(s=0;s<=n;++s){var x=s/n*r*Math.PI*2;for(o(x,r,a,t,m),o(x+.01,r,a,t,g),$.subVectors(g,m),y.addVectors(g,m),v.crossVectors($,y),y.crossVectors(v,$),v.normalize(),y.normalize(),x=0;x<=i;++x){var _=x/i*Math.PI*2,b=-e*Math.cos(_);_=e*Math.sin(_),d.x=m.x+(b*y.x+_*v.x),d.y=m.y+(b*y.y+_*v.y),d.z=m.z+(b*y.z+_*v.z),c.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),h.push(f.x,f.y,f.z),p.push(s/n),p.push(x/i)}}for(x=1;x<=n;x++)for(s=1;s<=i;s++)t=(i+1)*x+(s-1),e=(i+1)*x+s,r=(i+1)*(x-1)+s,u.push((i+1)*(x-1)+(s-1),t,r),u.push(t,e,r);this.setIndex(u),this.setAttribute("position",new I(c,3)),this.setAttribute("normal",new I(h,3)),this.setAttribute("uv",new I(p,2))}function ne(t,e,n,i,r){V.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new nn(t,e,n,i,r)),this.mergeVertices()}function nn(t,e,n,i,r){U.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],u=[],c=[],h=[],p=new l,d=new l,f=new l;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var m=o/i*r,g=a/n*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),u.push(d.x,d.y,d.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),h.push(o/i),h.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++)t=(i+1)*(a-1)+o-1,e=(i+1)*(a-1)+o,r=(i+1)*a+o,s.push((i+1)*a+o-1,t,r),s.push(t,e,r);this.setIndex(s),this.setAttribute("position",new I(u,3)),this.setAttribute("normal",new I(c,3)),this.setAttribute("uv",new I(h,2))}function ni(t,e,n,i,r){for(var a,o=0,s=e,u=n-i;s<n;s+=i)o+=(t[u]-t[s])*(t[s+1]+t[u+1]),u=s;if(r===0<o)for(r=e;r<n;r+=i)a=n$(r,t[r],t[r+1],a);else for(r=n-i;r>=e;r-=i)a=n$(r,t[r],t[r+1],a);return a&&np(a,a.next)&&(ny(a),a=a.next),a}function nr(t,e){if(!t)return t;e||(e=t);do{var n=!1;if(t.steiner||!np(t,t.next)&&0!==nh(t.prev,t,t.next))t=t.next;else{if(ny(t),(t=e=t.prev)===t.next)break;n=!0}}while(n||t!==e);return e}function na(t,e,n,i){var r=t.prev,a=t.next;if(0<=nh(r,t,a))return!1;var o=r.x>t.x?r.x>a.x?r.x:a.x:t.x>a.x?t.x:a.x,s=r.y>t.y?r.y>a.y?r.y:a.y:t.y>a.y?t.y:a.y,u=nu(r.x<t.x?r.x<a.x?r.x:a.x:t.x<a.x?t.x:a.x,r.y<t.y?r.y<a.y?r.y:a.y:t.y<a.y?t.y:a.y,e,n,i);for(e=nu(o,s,e,n,i),n=t.prevZ,i=t.nextZ;n&&n.z>=u&&i&&i.z<=e;){if(n!==t.prev&&n!==t.next&&nc(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=nh(n.prev,n,n.next)||(n=n.prevZ,i!==t.prev&&i!==t.next&&nc(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=nh(i.prev,i,i.next)))return!1;i=i.nextZ}for(;n&&n.z>=u;){if(n!==t.prev&&n!==t.next&&nc(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=nh(n.prev,n,n.next))return!1;n=n.prevZ}for(;i&&i.z<=e;){if(i!==t.prev&&i!==t.next&&nc(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=nh(i.prev,i,i.next))return!1;i=i.nextZ}return!0}function no(t,e){return t.x-e.x}function ns(t,e){var n=e,i=t.x,r=t.y,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var o=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a){if(a=o,o===i){if(r===n.y)return n;if(r===n.next.y)return n.next}var s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===a)return s;e=s,o=s.x;var u=s.y,l=1/0;n=s;do{if(i>=n.x&&n.x>=o&&i!==n.x&&nc(r<u?i:a,r,o,u,r<u?a:i,r,n.x,n.y)){var c,h=Math.abs(r-n.y)/(i-n.x);if((c=ng(n,t))&&!(c=h<l)&&(c=h===l)&&!(c=n.x>s.x)&&(c=n.x===s.x)){c=s;var p=n;c=0>nh(c.prev,c,p.prev)&&0>nh(p.next,c,c.next)}c&&(s=n,l=h)}n=n.next}while(n!==e);return s}function nu(t,e,n,i,r){return((t=((t=((t=((t=32767*(t-n)*r)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765|(((e=((e=((e=((e=32767*(e-i)*r)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1}function nl(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function nc(t,e,n,i,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(i-s)-(n-o)*(e-s)&&0<=(n-o)*(a-s)-(r-o)*(i-s)}function nh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function np(t,e){return t.x===e.x&&t.y===e.y}function nd(t,e,n,i){var r=nm(nh(t,e,n)),a=nm(nh(t,e,i)),o=nm(nh(n,i,t)),s=nm(nh(n,i,e));return!!(r!==a&&o!==s||0===r&&nf(t,n,e)||0===a&&nf(t,i,e)||0===o&&nf(n,t,i)||0===s&&nf(n,e,i))}function nf(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function nm(t){return 0<t?1:0>t?-1:0}function ng(t,e){return 0>nh(t.prev,t,t.next)?0<=nh(t,e,t.next)&&0<=nh(t,t.prev,e):0>nh(t,e,t.prev)||0>nh(t,t.next,e)}function nv(t,e){var n=new nx(t.i,t.x,t.y),i=new nx(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function n$(t,e,n,i){return t=new nx(t,e,n),i?(t.next=i.next,t.prev=i,i.next.prev=t,i.next=t):(t.prev=t,t.next=t),t}function ny(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function nx(t,e,n){this.i=t,this.x=e,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function n8(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function n_(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function nw(t,e){V.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new nS(t,e)),this.mergeVertices()}function nS(t,e){function i(t){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function s(t,e,i){var r=t.x-e.x,a=t.y-e.y,o=i.x-t.x,s=i.y-t.y,u=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var l=Math.sqrt(u),c=Math.sqrt(o*o+s*s);if(u=e.x-a/l,e=e.y+r/l,s=((i.x-s/c-u)*s-(i.y+o/c-e)*o)/(r*s-a*o),2>=(a=(o=u+r*s-t.x)*o+(r=e+a*s-t.y)*r))return new n(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(u)):(o=r,r=a,a=Math.sqrt(u/2));return new n(o/a,r/a)}function u(t,e){for(k=t.length;0<=--k;){var n=k,i=k-1;0>i&&(i=t.length-1);var o,s=g+2*b;for(o=0;o<s;o++){var u=O*o,l=O*(o+1),c=e+i+u,h=e+i+l;l=e+n+l,p(e+n+u),p(c),p(l),p(c),p(h),p(l),u=a.length/3,d((u=S.generateSideWallUV(r,a,u-6,u-3,u-2,u-1))[0]),d(u[1]),d(u[3]),d(u[1]),d(u[2]),d(u[3])}}}function c(t,e,n){f.push(t),f.push(e),f.push(n)}function h(t,e,n){p(t),p(e),p(n),t=a.length/3,d((t=S.generateTopUV(r,a,t-3,t-2,t-1))[0]),d(t[1]),d(t[2])}function p(t){a.push(f[3*t]),a.push(f[3*t+1]),a.push(f[3*t+2])}function d(t){o.push(t.x),o.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,$=void 0===e.bevelEnabled||e.bevelEnabled,y=void 0!==e.bevelThickness?e.bevelThickness:6,x=void 0!==e.bevelSize?e.bevelSize:y-2,_=void 0!==e.bevelOffset?e.bevelOffset:0,b=void 0!==e.bevelSegments?e.bevelSegments:3,w=e.extrudePath,S=void 0!==e.UVGenerator?e.UVGenerator:oA;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var D=!1;if(w){var M=w.getSpacedPoints(g);D=!0,$=!1;var E=w.computeFrenetFrames(g,!1),T=new l,C=new l,A=new l}$||(_=x=y=b=0),t=(m=t.extractPoints(m)).shape;var L=m.holes;if(!oC.isClockWise(t)){t=t.reverse();var P=0;for(I=L.length;P<I;P++){var R=L[P];oC.isClockWise(R)&&(L[P]=R.reverse())}}var F=oC.triangulateShape(t,L),N=t;for(P=0,I=L.length;P<I;P++)R=L[P],t=t.concat(R);var I,z,B,O=t.length,U=F.length;m=[];var k=0,G=N.length,H=G-1;for(z=k+1;k<G;k++,H++,z++)H===G&&(H=0),z===G&&(z=0),m[k]=s(N[k],N[H],N[z]);w=[];var V=m.concat();for(P=0,I=L.length;P<I;P++){R=L[P];var W=[];for(k=0,H=(G=R.length)-1,z=k+1;k<G;k++,H++,z++)H===G&&(H=0),z===G&&(z=0),W[k]=s(R[k],R[H],R[z]);w.push(W),V=V.concat(W)}for(H=0;H<b;H++){var j=y*Math.cos((G=H/b)*Math.PI/2);for(z=x*Math.sin(G*Math.PI/2)+_,k=0,G=N.length;k<G;k++){var q=i(N[k],m[k],z);c(q.x,q.y,-j)}for(P=0,I=L.length;P<I;P++)for(R=L[P],W=w[P],k=0,G=R.length;k<G;k++)c((q=i(R[k],W[k],z)).x,q.y,-j)}for(k=0,z=x+_;k<O;k++)q=$?i(t[k],V[k],z):t[k],D?(C.copy(E.normals[0]).multiplyScalar(q.x),T.copy(E.binormals[0]).multiplyScalar(q.y),A.copy(M[0]).add(C).add(T),c(A.x,A.y,A.z)):c(q.x,q.y,0);for(G=1;G<=g;G++)for(k=0;k<O;k++)q=$?i(t[k],V[k],z):t[k],D?(C.copy(E.normals[G]).multiplyScalar(q.x),T.copy(E.binormals[G]).multiplyScalar(q.y),A.copy(M[G]).add(C).add(T),c(A.x,A.y,A.z)):c(q.x,q.y,v/g*G);for(H=b-1;0<=H;H--){for(j=y*Math.cos((G=H/b)*Math.PI/2),z=x*Math.sin(G*Math.PI/2)+_,k=0,G=N.length;k<G;k++)c((q=i(N[k],m[k],z)).x,q.y,v+j);for(P=0,I=L.length;P<I;P++)for(R=L[P],W=w[P],k=0,G=R.length;k<G;k++)q=i(R[k],W[k],z),D?c(q.x,q.y+M[g-1].y,M[g-1].x+j):c(q.x,q.y,v+j)}(function(){var t=a.length/3;if($){var e=0*O;for(k=0;k<U;k++)h((B=F[k])[2]+e,B[1]+e,B[0]+e);for(k=0,e=O*(g+2*b);k<U;k++)h((B=F[k])[0]+e,B[1]+e,B[2]+e)}else{for(k=0;k<U;k++)h((B=F[k])[2],B[1],B[0]);for(k=0;k<U;k++)h((B=F[k])[0]+O*g,B[1]+O*g,B[2]+O*g)}r.addGroup(t,a.length/3-t,0)})(),function(){var t=a.length/3,e=0;for(u(N,e),e+=N.length,P=0,I=L.length;P<I;P++)u(R=L[P],e),e+=R.length;r.addGroup(t,a.length/3-t,1)}()}U.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,a=[],o=[],s=0,u=t.length;s<u;s++)i(t[s]);this.setAttribute("position",new I(a,3)),this.setAttribute("uv",new I(o,2)),this.computeVertexNormals()}function nD(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function nM(t,e){V.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new nE(t,e)),this.mergeVertices()}function nE(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new V;t=n.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),nS.call(this,t,e),this.type="TextBufferGeometry"}function nT(t,e,n,i,r,a,o){V.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new n1(t,e,n,i,r,a,o)),this.mergeVertices()}function n1(t,e,n,i,r,a,o){U.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,u,c=Math.min((a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),Math.PI),h=0,p=[],d=new l,f=new l,m=[],g=[],v=[],$=[];for(u=0;u<=n;u++){var y=[],x=u/n,_=0;for(0==u&&0==a?_=.5/e:u==n&&c==Math.PI&&(_=-.5/e),s=0;s<=e;s++){var b=s/e;d.x=-t*Math.cos(i+b*r)*Math.sin(a+x*o),d.y=t*Math.cos(a+x*o),d.z=t*Math.sin(i+b*r)*Math.sin(a+x*o),g.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),$.push(b+_,1-x),y.push(h++)}p.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++)t=p[u][s+1],i=p[u][s],r=p[u+1][s],o=p[u+1][s+1],(0!==u||0<a)&&m.push(t,i,o),(u!==n-1||c<Math.PI)&&m.push(i,r,o);this.setIndex(m),this.setAttribute("position",new I(g,3)),this.setAttribute("normal",new I(v,3)),this.setAttribute("uv",new I($,2))}function n0(t,e,n,i,r,a){V.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new nC(t,e,n,i,r,a)),this.mergeVertices()}function nC(t,e,i,r,a,o){U.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},t=t||.5,e=e||1,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var s,u,c=[],h=[],p=[],d=[],f=t,m=(e-t)/(r=void 0!==r?Math.max(1,r):1),g=new l,v=new n;for(s=0;s<=r;s++){for(u=0;u<=i;u++)t=a+u/i*o,g.x=f*Math.cos(t),g.y=f*Math.sin(t),h.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,d.push(v.x,v.y);f+=m}for(s=0;s<r;s++)for(e=s*(i+1),u=0;u<i;u++)a=(t=u+e)+i+1,o=t+i+2,f=t+1,c.push(t,a,f),c.push(a,o,f);this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}function nA(t,e,n,i){V.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new nL(t,e,n,i)),this.mergeVertices()}function nL(t,e,i,r){U.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=ri.clamp(r,0,2*Math.PI);var a,o=[],s=[],u=[],c=1/e,h=new l,p=new n;for(a=0;a<=e;a++){var d=i+a*c*r,f=Math.sin(d),m=Math.cos(d);for(d=0;d<=t.length-1;d++)h.x=t[d].x*f,h.y=t[d].y,h.z=t[d].x*m,s.push(h.x,h.y,h.z),p.x=a/e,p.y=d/(t.length-1),u.push(p.x,p.y)}for(a=0;a<e;a++)for(d=0;d<t.length-1;d++)c=(i=d+a*t.length)+t.length,h=i+t.length+1,p=i+1,o.push(i,c,p),o.push(c,h,p);if(this.setIndex(o),this.setAttribute("position",new I(s,3)),this.setAttribute("uv",new I(u,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,o=new l,s=new l,u=new l,i=e*t.length*3,d=a=0;a<t.length;a++,d+=3)o.x=r[d+0],o.y=r[d+1],o.z=r[d+2],s.x=r[i+d+0],s.y=r[i+d+1],s.z=r[i+d+2],u.addVectors(o,s).normalize(),r[d+0]=r[i+d+0]=u.x,r[d+1]=r[i+d+1]=u.y,r[d+2]=r[i+d+2]=u.z}function nP(t,e){V.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new nR(t,e)),this.mergeVertices()}function nR(t,e){function n(t){var n,s=r.length/3,l=(t=t.extractPoints(e)).shape,c=t.holes;for(!1===oC.isClockWise(l)&&(l=l.reverse()),t=0,n=c.length;t<n;t++){var h=c[t];!0===oC.isClockWise(h)&&(c[t]=h.reverse())}var p=oC.triangulateShape(l,c);for(t=0,n=c.length;t<n;t++)h=c[t],l=l.concat(h);for(t=0,n=l.length;t<n;t++)h=l[t],r.push(h.x,h.y,0),a.push(0,0,1),o.push(h.x,h.y);for(t=0,n=p.length;t<n;t++)l=p[t],i.push(l[0]+s,l[1]+s,l[2]+s),u+=3}U.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],a=[],o=[],s=0,u=0;if(!1===Array.isArray(t))n(t);else for(var l=0;l<t.length;l++)n(t[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(i),this.setAttribute("position",new I(r,3)),this.setAttribute("normal",new I(a,3)),this.setAttribute("uv",new I(o,2))}function nF(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function n2(t,e){U.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var n=[];e=Math.cos(ri.DEG2RAD*(void 0!==e?e:1));var i=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new V;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices,o=o.faces;for(var s=0,u=o.length;s<u;s++)for(var l=o[s],c=0;3>c;c++){var h=l[a[c]],p=l[a[(c+1)%3]];i[0]=Math.min(h,p),i[1]=Math.max(h,p),void 0===r[h=i[0]+","+i[1]]?r[h]={index1:i[0],index2:i[1],face1:s,face2:void 0}:r[h].face2=s}for(h in r)(void 0===(i=r[h]).face2||o[i.face1].normal.dot(o[i.face2].normal)<=e)&&(a=t[i.index1],n.push(a.x,a.y,a.z),a=t[i.index2],n.push(a.x,a.y,a.z));this.setAttribute("position",new I(n,3))}function nN(t,e,n,i,r,a,o,s){V.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new nI(t,e,n,i,r,a,o,s)),this.mergeVertices()}function nI(t,e,i,r,a,o,s,u){function c(i){var a,o=new n,c=new l,v=0,x=!0===i?t:e,_=!0===i?1:-1,b=g;for(a=1;a<=r;a++)d.push(0,$*_,0),f.push(0,_,0),m.push(.5,.5),g++;var w=g;for(a=0;a<=r;a++){var S=a/r*u+s,D=Math.cos(S);S=Math.sin(S),c.x=x*S,c.y=$*_,c.z=x*D,d.push(c.x,c.y,c.z),f.push(0,_,0),o.x=.5*D+.5,o.y=.5*S*_+.5,m.push(o.x,o.y),g++}for(a=0;a<r;a++)o=b+a,c=w+a,!0===i?p.push(c,c+1,o):p.push(c+1,c,o),v+=3;h.addGroup(y,v,!0===i?1:2),y+=v}U.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],$=i/2,y=0;(function(){var n,o,c=new l,x=new l,_=0,b=(e-t)/i;for(o=0;o<=a;o++){var w=[],S=o/a,D=S*(e-t)+t;for(n=0;n<=r;n++){var M=n/r,E=M*u+s,T=Math.sin(E);E=Math.cos(E),x.x=D*T,x.y=-S*i+$,x.z=D*E,d.push(x.x,x.y,x.z),c.set(T,b,E).normalize(),f.push(c.x,c.y,c.z),m.push(M,1-S),w.push(g++)}v.push(w)}for(n=0;n<r;n++)for(o=0;o<a;o++)c=v[o+1][n],x=v[o+1][n+1],b=v[o][n+1],p.push(v[o][n],c,b),p.push(c,x,b),_+=6;h.addGroup(y,_,0),y+=_})(),!1===o&&(0<t&&c(!0),0<e&&c(!1)),this.setIndex(p),this.setAttribute("position",new I(d,3)),this.setAttribute("normal",new I(f,3)),this.setAttribute("uv",new I(m,2))}function nz(t,e,n,i,r,a,o){nN.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function n3(t,e,n,i,r,a,o){nI.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function nB(t,e,n,i){V.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new n4(t,e,n,i)),this.mergeVertices()}function n4(t,e,i,r){U.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a,o=[],s=[],u=[],c=[],h=new l,p=new n;s.push(0,0,0),u.push(0,0,1),c.push(.5,.5);var d=0;for(a=3;d<=e;d++,a+=3){var f=i+d/e*r;h.x=t*Math.cos(f),h.y=t*Math.sin(f),s.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(s[a]/t+1)/2,p.y=(s[a+1]/t+1)/2,c.push(p.x,p.y)}for(a=1;a<=e;a++)o.push(a,a+1,0);this.setIndex(o),this.setAttribute("position",new I(s,3)),this.setAttribute("normal",new I(u,3)),this.setAttribute("uv",new I(c,2))}function nO(t){M.call(this),this.type="ShadowMaterial",this.color=new _(0),this.transparent=!0,this.setValues(t)}function nU(t){q.call(this,t),this.type="RawShaderMaterial"}function nk(t){M.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function nG(t){nk.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new n(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function n6(t){M.call(this),this.type="MeshPhongMaterial",this.color=new _(16777215),this.specular=new _(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function n5(t){M.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _(16777215),this.specular=new _(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function nH(t){M.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(t)}function nV(t){M.call(this),this.type="MeshLambertMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function n7(t){M.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function nW(t){eF.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function nj(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function nq(t,e,n,i){nj.call(this,t,e,n,i),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function nX(t,e,n,i){nj.call(this,t,e,n,i)}function nY(t,e,n,i){nj.call(this,t,e,n,i)}function nZ(t,e,n,i){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=oR.convertArray(e,this.TimeBufferType),this.values=oR.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function nJ(t,e,n){nZ.call(this,t,e,n)}function nK(t,e,n,i){nZ.call(this,t,e,n,i)}function nQ(t,e,n,i){nZ.call(this,t,e,n,i)}function n9(t,e,n,i){nj.call(this,t,e,n,i)}function it(t,e,n,i){nZ.call(this,t,e,n,i)}function ie(t,e,n,i){nZ.call(this,t,e,n,i)}function ii(t,e,n,i){nZ.call(this,t,e,n,i)}function ir(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:2500,this.uuid=ri.generateUUID(),0>this.duration&&this.resetDuration()}function ia(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function t(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nQ;case"vector":case"vector2":case"vector3":case"vector4":return ii;case"color":return nK;case"quaternion":return it;case"bool":case"boolean":return nJ;case"string":return ie}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(t.type);if(void 0===t.times){var n=[],i=[];oR.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function io(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad)&&i.onLoad()},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){return -1!==(t=u.indexOf(t))&&u.splice(t,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var i=u[e],r=u[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}function is(t){this.manager=void 0!==t?t:o2,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function iu(t){is.call(this,t)}function il(t){is.call(this,t)}function ic(t){is.call(this,t)}function ih(t){is.call(this,t)}function ip(t){is.call(this,t)}function id(t){is.call(this,t)}function im(t){is.call(this,t)}function ig(){this.type="Curve",this.arcLengthDivisions=200}function iv(t,e,n,i,r,a,o,s){ig.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function i$(){var t=0,e=0,n=0,i=0;return{initCatmullRom:function(r,a,o,s,u){r=u*(o-r),s=u*(s-a),t=a,e=r,n=-3*a+3*o-2*r-s,i=2*a-2*o+r+s},initNonuniformCatmullRom:function(r,a,o,s,u,l,c){r=((a-r)/u-(o-r)/(u+l)+(o-a)/l)*l,s=((o-a)/l-(s-a)/(l+c)+(s-o)/c)*l,t=a,e=r,n=-3*a+3*o-2*r-s,i=2*a-2*o+r+s},calc:function(r){var a=r*r;return t+e*r+n*a+i*a*r}}}function iy(t,e,n,i){ig.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ix(t,e,n,i,r){e=.5*(i-e),r=.5*(r-n);var a=t*t;return(2*n-2*i+e+r)*t*a+(-3*n+3*i-2*e-r)*a+e*t+n}function i8(t,e,n,i){var r=1-t;return r*r*e+2*(1-t)*t*n+t*t*i}function i_(t,e,n,i,r){var a=1-t,o=1-t;return a*a*a*e+3*o*o*t*n+3*(1-t)*t*t*i+t*t*t*r}function ib(){ig.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function iw(t){ib.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function iS(t){iw.call(this,t),this.uuid=ri.generateUUID(),this.type="Shape",this.holes=[]}function iD(t,e){d.call(this),this.type="Light",this.color=new _(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function iM(t,e,n){iD.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(d.DefaultUp),this.updateMatrix(),this.groundColor=new _(e)}function iE(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.mapPass=this.map=null,this.matrix=new c,this._frustum=new Q,this._frameExtents=new n(1,1),this._viewportCount=1,this._viewports=[new a(0,0,1,1)]}function iT(){iE.call(this,new Y(50,1,.5,500))}function i1(t,e,n,i,r,a){iD.call(this,t,e),this.type="SpotLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new iT}function i0(){iE.call(this,new Y(90,1,.5,500)),this._frameExtents=new n(4,2),this._viewportCount=6,this._viewports=[new a(2,1,1,1),new a(0,1,1,1),new a(3,1,1,1),new a(1,1,1,1),new a(3,0,1,1),new a(1,0,1,1)],this._cubeDirections=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],this._cubeUps=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)]}function iC(t,e,n,i){iD.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new i0}function iA(t,e,n,i,r,a){X.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function iL(){iE.call(this,new iA(-5,5,5,-5,.5,500))}function iP(t,e){iD.call(this,t,e),this.type="DirectionalLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,this.shadow=new iL}function iR(t,e){iD.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function iF(t,e,n,i){iD.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function i2(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new l)}function iN(t,e){iD.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new i2}function iI(t){is.call(this,t),this.textures={}}function iz(){U.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function i3(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),T.call(this,t,e,n),this.meshPerAttribute=i||1}function iB(t){is.call(this,t)}function i4(t){is.call(this,t)}function iO(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),is.call(this,t),this.options=void 0}function iU(){this.type="ShapePath",this.color=new _,this.subPaths=[],this.currentPath=null}function ik(t){this.type="Font",this.data=t}function iG(t){is.call(this,t)}function i6(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function i5(t){d.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function iH(t,e,n){n=n||iV.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function iV(t,e,n){this.path=e,this.parsedPath=n||iV.parseTrackName(e),this.node=iV.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function i7(t,e,n,i){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=i||e.blendMode,n=Array(e=(t=e.tracks).length),i={endingStart:2400,endingEnd:2400};for(var r=0;r!==e;++r){var a=t[r].createInterpolant(null);n[r]=a,a.settings=i}this._interpolantSettings=i,this._interpolants=n,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function iW(t,e){return t.distance-e.distance}function ij(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){t=t.children,i=0;for(var r=t.length;i<r;i++)ij(t[i],e,n,!0)}}function iq(t,e,n,i,r,a,o){if(xf.set(r,a,o).unproject(i),void 0!==(t=e[t]))for(n=n.getAttribute("position"),e=0,i=t.length;e<i;e++)n.setXYZ(t[e],xf.x,xf.y,xf.z)}function iX(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),i=new U;i.setIndex(new T(t,1)),i.setAttribute("position",new T(n,3)),eN.call(this,i,new eF({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function iY(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new U).setAttribute("position",new I(e,3)),t.setAttribute("color",new I([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new eF({vertexColors:!0,toneMapped:!1}),eN.call(this,t,e),this.type="AxesHelper"}function iZ(t){return(t=new o(3*nb,3*nb,t)).texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function iJ(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function iK(){var t=new n(1,1);return(t=new nU({uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:mb[3e3]},outputEncoding:{value:mb[3e3]}},vertexShader:i9(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n"+rt()+"\n\n#include <common>\n\nvoid main() {\n	gl_FragColor = vec4(0.0);\n	vec3 outputDirection = normalize(vOutputDirection);\n	vec2 uv = equirectUv( outputDirection );\n	vec2 f = fract(uv / texelSize - 0.5);\n	uv -= f * texelSize;\n	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n	uv.x += texelSize.x;\n	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n	uv.y += texelSize.y;\n	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n	uv.x -= texelSize.x;\n	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n	vec3 tm = mix(tl, tr, f.x);\n	vec3 bm = mix(bl, br, f.x);\n	gl_FragColor.rgb = mix(tm, bm, f.y);\n	gl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n		",blending:0,depthTest:!1,depthWrite:!1})).type="EquirectangularToCubeUV",t}function iQ(){var t=new nU({uniforms:{envMap:{value:null},inputEncoding:{value:mb[3e3]},outputEncoding:{value:mb[3e3]}},vertexShader:i9(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n"+rt()+"\n\nvoid main() {\n	gl_FragColor = vec4(0.0);\n	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n	gl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n		",blending:0,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}function i9(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n	uv = 2.0 * uv - 1.0;\n	vec3 direction = vec3(uv, 1.0);\n	if (face == 0.0) {\n		direction = direction.zyx; // ( 1, v, u ) pos x\n	} else if (face == 1.0) {\n		direction = direction.xzy;\n		direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n	} else if (face == 2.0) {\n		direction.x *= -1.0; // ( -u, v, 1 ) pos z\n	} else if (face == 3.0) {\n		direction = direction.zyx;\n		direction.xz *= -1.0; // ( -1, v, -u ) neg x\n	} else if (face == 4.0) {\n		direction = direction.xzy;\n		direction.xy *= -1.0; // ( -u, -1, v ) neg y\n	} else if (face == 5.0) {\n		direction.z *= -1.0; // ( u, v, -1 ) neg z\n	}\n	return direction;\n}\n\nvoid main() {\n	vOutputDirection = getDirection(uv, faceIndex);\n	gl_Position = vec4( position, 1.0 );\n}\n	"}function rt(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n	if(inputEncoding == 0){\n		return value;\n	}else if(inputEncoding == 1){\n		return sRGBToLinear(value);\n	}else if(inputEncoding == 2){\n		return RGBEToLinear(value);\n	}else if(inputEncoding == 3){\n		return RGBMToLinear(value, 7.0);\n	}else if(inputEncoding == 4){\n		return RGBMToLinear(value, 16.0);\n	}else if(inputEncoding == 5){\n		return RGBDToLinear(value, 256.0);\n	}else{\n		return GammaToLinear(value, 2.2);\n	}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n	if(outputEncoding == 0){\n		return value;\n	}else if(outputEncoding == 1){\n		return LinearTosRGB(value);\n	}else if(outputEncoding == 2){\n		return LinearToRGBE(value);\n	}else if(outputEncoding == 3){\n		return LinearToRGBM(value, 7.0);\n	}else if(outputEncoding == 4){\n		return LinearToRGBM(value, 16.0);\n	}else if(outputEncoding == 5){\n		return LinearToRGBD(value, 256.0);\n	}else{\n		return LinearToGamma(value, 2.2);\n	}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n	return inputTexelToLinear(color);\n}\n	"}void 0===Number.EPSILON&&(Number.EPSILON=2220446049250313e-31),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this,e=e.slice(0);for(var n=0,i=e.length;n<i;n++)e[n].call(this,t)}}}});for(var re=[],rn=0;256>rn;rn++)re[rn]=(16>rn?"0":"")+rn.toString(16);var ri={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(re[255&t]+re[t>>8&255]+re[t>>16&255]+re[t>>24&255]+"-"+re[255&e]+re[e>>8&255]+"-"+re[e>>16&15|64]+re[e>>24&255]+"-"+re[63&n|128]+re[n>>8&255]+"-"+re[n>>16&255]+re[n>>24&255]+re[255&i]+re[i>>8&255]+re[i>>16&255]+re[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ri.DEG2RAD},radToDeg:function(t){return t*ri.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2);n=o(n/2);var u=a((e+i)/2),l=o((e+i)/2),c=a((e-i)/2),h=o((e-i)/2);switch(a=a((i-e)/2),e=o((i-e)/2),r){case"XYX":t.set(s*l,n*c,n*h,s*u);break;case"YZY":t.set(n*h,s*l,n*c,s*u);break;case"ZXZ":t.set(n*c,n*h,s*l,s*u);break;case"XZX":t.set(s*l,n*e,n*a,s*u);break;case"YXY":t.set(n*a,s*l,n*e,s*u);break;case"ZYZ":t.set(n*e,n*a,s*l,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e);e=Math.sin(e);var i=this.x-t.x,r=this.y-t.y;return this.x=i*n-r*e+t.x,this.y=i*e+r*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(i.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=i,l[2]=o,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements;e=this.elements,t=n[0];var r=n[3],a=n[6],o=n[1],s=n[4],u=n[7],l=n[2],c=n[5];n=n[8];var h=i[0],p=i[3],d=i[6],f=i[1],m=i[4],g=i[7],v=i[2],$=i[5];return i=i[8],e[0]=t*h+r*f+a*v,e[3]=t*p+r*m+a*$,e[6]=t*d+r*g+a*i,e[1]=o*h+s*f+u*v,e[4]=o*p+s*m+u*$,e[7]=o*d+s*g+u*i,e[2]=l*h+c*f+n*v,e[5]=l*p+c*m+n*$,e[8]=l*d+c*g+n*i,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return e*a*(t=t[8])-e*o*u-n*r*t+n*o*s+i*r*u-i*a*s},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements;t=this.elements,e=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=(n=n[8])*o-s*l,h=s*u-n*a,p=l*a-o*u,d=e*c+i*h+r*p;return 0===d?this.set(0,0,0,0,0,0,0,0,0):(d=1/d,t[0]=c*d,t[1]=(r*l-n*i)*d,t[2]=(s*i-r*o)*d,t[3]=h*d,t[4]=(n*e-r*u)*d,t[5]=(r*a-s*e)*d,t[6]=p*d,t[7]=(i*u-l*e)*d,t[8]=(o*e-i*a)*d,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(n*s,n*r,-n*(s*a+r*o)+a+t,-i*r,i*s,-i*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var n=this.elements,i=n[0],r=n[3],a=n[6],o=n[1],s=n[4],u=n[7];return n[0]=e*i+t*o,n[3]=e*r+t*s,n[6]=e*a+t*u,n[1]=-t*i+e*o,n[4]=-t*r+e*s,n[7]=-t*a+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;9>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var rr,ra={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===rr&&(rr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),rr.width=t.width,rr.height=t.height;var e=rr.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=rr}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},ro=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=300,r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=ri.generateUUID()),!e&&void 0===t.images[i.uuid]){if(Array.isArray(i))for(var r=[],a=0,o=i.length;a<o;a++)r.push(ra.getDataURL(i[a]));else r=ra.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(r.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(a.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(a.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],n=t[4],i=t[8],r=t[1],a=t[5],o=t[9],s=t[2],u=t[6],l=t[10];return .01>Math.abs(n-r)&&.01>Math.abs(i-s)&&.01>Math.abs(o-u)?.1>Math.abs(n+r)&&.1>Math.abs(i+s)&&.1>Math.abs(o+u)&&.1>Math.abs(e+a+l-3)?(this.set(1,0,0,0),this):(t=Math.PI,e=(e+1)/2,a=(a+1)/2,l=(l+1)/2,n=(n+r)/4,i=(i+s)/4,o=(o+u)/4,e>a&&e>l?.01>e?(u=0,n=s=.707106781):(s=n/(u=Math.sqrt(e)),n=i/u):a>l?.01>a?(u=.707106781,s=0,n=.707106781):(u=n/(s=Math.sqrt(a)),n=o/s):.01>l?(s=u=.707106781,n=0):(u=i/(n=Math.sqrt(l)),s=o/n),this.set(u,s,n,t),this):(.001>Math.abs(t=Math.sqrt((u-o)*(u-o)+(i-s)*(i-s)+(r-n)*(r-n)))&&(t=1),this.x=(u-o)/t,this.y=(i-s)/t,this.z=(r-n)/t,this.w=Math.acos((e+a+l-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.assign(Object.create(o.prototype),{constructor:s,isWebGLMultisampleRenderTarget:!0,copy:function(t){return o.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(u,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],u=n[i+1],l=n[i+2];n=n[i+3],i=r[a+0];var c=r[a+1],h=r[a+2];if(n!==(r=r[a+3])||s!==i||u!==c||l!==h){a=1-o;var p=s*i+u*c+l*h+n*r,d=0<=p?1:-1,f=1-p*p;f>Number.EPSILON&&(a=Math.sin(a*(p=Math.atan2(f=Math.sqrt(f),p*d)))/f,o=Math.sin(o*p)/f),d*=o,s=s*a+i*d,u=u*a+c*d,l=l*a+h*d,n=n*a+r*d,a===1-o&&(o=1/Math.sqrt(s*s+u*u+l*l+n*n),s*=o,u*=o,l*=o,n*=o)}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=n},multiplyQuaternionsFlat:function(t,e,n,i,r,a){var o=n[i],s=n[i+1],u=n[i+2];n=n[i+3],i=r[a];var l=r[a+1],c=r[a+2];return r=r[a+3],t[e]=o*r+n*i+s*c-u*l,t[e+1]=s*r+n*l+u*i-o*c,t[e+2]=u*r+n*c+o*l-s*i,t[e+3]=n*r-o*i-s*l-u*c,t}}),Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(u.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(n/2),u=a(i/2);switch(a=a(r/2),n=o(n/2),i=o(i/2),r=o(r/2),t){case"XYZ":this._x=n*u*a+s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a-n*i*r;break;case"YXZ":this._x=n*u*a+s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a+n*i*r;break;case"ZXY":this._x=n*u*a-s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a-n*i*r;break;case"ZYX":this._x=n*u*a-s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a+n*i*r;break;case"YZX":this._x=n*u*a+s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a-n*i*r;break;case"XZY":this._x=n*u*a-s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a+n*i*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=Math.sin(e/=2);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0];t=e[4];var i=e[8],r=e[1],a=e[5],o=e[9],s=e[2],u=e[6],l=n+a+(e=e[10]);return 0<l?(n=.5/Math.sqrt(l+1),this._w=.25/n,this._x=(u-o)*n,this._y=(i-s)*n,this._z=(r-t)*n):n>a&&n>e?(n=2*Math.sqrt(1+n-a-e),this._w=(u-o)/n,this._x=.25*n,this._y=(t+r)/n,this._z=(i+s)/n):a>e?(n=2*Math.sqrt(1+a-n-e),this._w=(i-s)/n,this._x=(t+r)/n,this._y=.25*n,this._z=(o+u)/n):(n=2*Math.sqrt(1+e-n-a),this._w=(r-t)/n,this._x=(i+s)/n,this._y=(o+u)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return 1e-6>n?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(ri.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);return 0===n||this.slerp(t,Math.min(1,e/n)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=n*e+t*a+i*s-r*o,this._y=i*e+t*o+r*a-n*s,this._z=r*e+t*s+n*o-i*a,this._w=t*e-n*a-i*o-r*s,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=n,this._y=i,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*n+e*this._x,this._y=o*i+e*this._y,this._z=o*r+e*this._z,this.normalize(),this._onChangeCallback(),this;var s=Math.atan2(t=Math.sqrt(t),o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=n*o+this._x*e,this._y=i*o+this._y*e,this._z=r*o+this._z*e,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var rs=new l,ru=new u;Object.assign(l.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ru.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(ru.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=1/((t=t.elements)[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*i-o*n,u=t*n+o*e-r*i,l=t*i+r*n-a*e;return e=-r*e-a*n-o*i,this.x=s*t+-(e*r)+-(u*o)- -(l*a),this.y=u*t+-(e*a)+-(l*r)- -(s*o),this.z=l*t+-(e*o)+-(s*a)- -(u*r),this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=i*e-t*a,this.y=t*r-n*e,this.z=n*a-i*r,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return rs.copy(this).projectOnVector(t),this.sub(rs)},reflect:function(t){return this.sub(rs.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(ri.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var rl=new l,rc=new c,rh=new l(0,0,0),rp=new l(1,1,1),rd=new l,rf=new l,rm=new l;Object.assign(c.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,u,l,c,h,p,d,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/rl.setFromMatrixColumn(t,0).length(),r=1/rl.setFromMatrixColumn(t,1).length();return t=1/rl.setFromMatrixColumn(t,2).length(),e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n);n=Math.sin(n);var o=Math.cos(i);i=Math.sin(i);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var u=a*r,l=n*s,c=n*r;e[0]=o*s,e[4]=-o*r,e[8]=i,e[1]=u+l*i,e[5]=t-c*i,e[9]=-n*o,e[2]=c-t*i,e[6]=l+u*i,e[10]=a*o}else"YXZ"===t.order?(t=o*s,u=o*r,l=i*s,c=i*r,e[0]=t+c*n,e[4]=l*n-u,e[8]=a*i,e[1]=a*r,e[5]=a*s,e[9]=-n,e[2]=u*n-l,e[6]=c+t*n,e[10]=a*o):"ZXY"===t.order?(t=o*s,u=o*r,l=i*s,c=i*r,e[0]=t-c*n,e[4]=-a*r,e[8]=l+u*n,e[1]=u+l*n,e[5]=a*s,e[9]=c-t*n,e[2]=-a*i,e[6]=n,e[10]=a*o):"ZYX"===t.order?(t=a*s,u=a*r,l=n*s,c=n*r,e[0]=o*s,e[4]=l*i-u,e[8]=t*i+c,e[1]=o*r,e[5]=c*i+t,e[9]=u*i-l,e[2]=-i,e[6]=n*o,e[10]=a*o):"YZX"===t.order?(t=a*o,u=a*i,l=n*o,c=n*i,e[0]=o*s,e[4]=c-t*r,e[8]=l*r+u,e[1]=r,e[5]=a*s,e[9]=-n*s,e[2]=-i*s,e[6]=u*r+l,e[10]=t-c*r):"XZY"===t.order&&(t=a*o,u=a*i,l=n*o,c=n*i,e[0]=o*s,e[4]=-r,e[8]=i*s,e[1]=t*r+c,e[5]=a*s,e[9]=u*r-l,e[2]=l*r-u,e[6]=n*s,e[10]=c*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(rh,t,rp)},lookAt:function(t,e,n){var i=this.elements;return rm.subVectors(t,e),0===rm.lengthSq()&&(rm.z=1),rm.normalize(),rd.crossVectors(n,rm),0===rd.lengthSq()&&(1===Math.abs(n.z)?rm.x+=1e-4:rm.z+=1e-4,rm.normalize(),rd.crossVectors(n,rm)),rd.normalize(),rf.crossVectors(rm,rd),i[0]=rd.x,i[4]=rf.x,i[8]=rm.x,i[1]=rd.y,i[5]=rf.y,i[9]=rm.y,i[2]=rd.z,i[6]=rf.z,i[10]=rm.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements;e=this.elements,t=n[0];var r=n[4],a=n[8],o=n[12],s=n[1],u=n[5],l=n[9],c=n[13],h=n[2],p=n[6],d=n[10],f=n[14],m=n[3],g=n[7],v=n[11];n=n[15];var $=i[0],y=i[4],x=i[8],_=i[12],b=i[1],w=i[5],S=i[9],D=i[13],M=i[2],E=i[6],T=i[10],C=i[14],A=i[3],L=i[7],P=i[11];return i=i[15],e[0]=t*$+r*b+a*M+o*A,e[4]=t*y+r*w+a*E+o*L,e[8]=t*x+r*S+a*T+o*P,e[12]=t*_+r*D+a*C+o*i,e[1]=s*$+u*b+l*M+c*A,e[5]=s*y+u*w+l*E+c*L,e[9]=s*x+u*S+l*T+c*P,e[13]=s*_+u*D+l*C+c*i,e[2]=h*$+p*b+d*M+f*A,e[6]=h*y+p*w+d*E+f*L,e[10]=h*x+p*S+d*T+f*P,e[14]=h*_+p*D+d*C+f*i,e[3]=m*$+g*b+v*M+n*A,e[7]=m*y+g*w+v*E+n*L,e[11]=m*x+g*S+v*T+n*P,e[15]=m*_+g*D+v*C+n*i,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],p=t[14];return t[3]*(+r*s*c-i*u*c-r*o*h+n*u*h+i*o*p-n*s*p)+t[7]*(+e*s*p-e*u*h+r*a*h-i*a*p+i*u*l-r*s*l)+t[11]*(+e*u*c-e*o*p-r*a*c+n*a*p+r*o*l-n*u*l)+t[15]*(-i*o*l-e*s*c+e*o*h+i*a*c-n*a*h+n*s*l)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),e=this.elements;var n=t.elements;t=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],p=n[10],d=n[11],f=n[12],m=n[13],g=n[14],v=h*g*l-m*p*l+m*u*d-s*g*d-h*u*(n=n[15])+s*p*n,$=f*p*l-c*g*l-f*u*d+o*g*d+c*u*n-o*p*n,y=c*m*l-f*h*l+f*s*d-o*m*d-c*s*n+o*h*n,x=f*h*u-c*m*u-f*s*p+o*m*p+c*s*g-o*h*g,_=t*v+i*$+r*y+a*x;return 0===_?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(_=1/_,e[0]=v*_,e[1]=(m*p*a-h*g*a-m*r*d+i*g*d+h*r*n-i*p*n)*_,e[2]=(s*g*a-m*u*a+m*r*l-i*g*l-s*r*n+i*u*n)*_,e[3]=(h*u*a-s*p*a-h*r*l+i*p*l+s*r*d-i*u*d)*_,e[4]=$*_,e[5]=(c*g*a-f*p*a+f*r*d-t*g*d-c*r*n+t*p*n)*_,e[6]=(f*u*a-o*g*a-f*r*l+t*g*l+o*r*n-t*u*n)*_,e[7]=(o*p*a-c*u*a+c*r*l-t*p*l-o*r*d+t*u*d)*_,e[8]=y*_,e[9]=(f*h*a-c*m*a-f*i*d+t*m*d+c*i*n-t*h*n)*_,e[10]=(o*m*a-f*s*a+f*i*l-t*m*l-o*i*n+t*s*n)*_,e[11]=(c*s*a-o*h*a-c*i*l+t*h*l+o*i*d-t*s*d)*_,e[12]=x*_,e[13]=(c*m*r-f*h*r+f*i*p-t*m*p-c*i*g+t*h*g)*_,e[14]=(f*s*r-o*m*r-f*i*u+t*m*u+o*i*g-t*s*g)*_,e[15]=(o*h*r-c*s*r+c*i*u-t*h*u-o*i*p+t*s*p)*_,this)},scale:function(t){var e=this.elements,n=t.x,i=t.y;return t=t.z,e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e);e=Math.sin(e);var i=1-n,r=t.x,a=t.y;t=t.z;var o=i*r,s=i*a;return this.set(o*r+n,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+n,s*t-e*r,0,o*t-e*a,s*t+e*r,i*t*t+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,u=r+r,l=a+a,c=o+o;e=r*u;var h=r*l;r*=c;var p=a*l;a*=c,o*=c,u*=s,l*=s,s*=c,c=n.x;var d=n.y;return n=n.z,i[0]=(1-(p+o))*c,i[1]=(h+s)*c,i[2]=(r-l)*c,i[3]=0,i[4]=(h-s)*d,i[5]=(1-(e+o))*d,i[6]=(a+u)*d,i[7]=0,i[8]=(r+l)*n,i[9]=(a-u)*n,i[10]=(1-(e+p))*n,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=rl.set(i[0],i[1],i[2]).length(),a=rl.set(i[4],i[5],i[6]).length(),o=rl.set(i[8],i[9],i[10]).length();0>this.determinant()&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],rc.copy(this),t=1/r,i=1/a;var s=1/o;return rc.elements[0]*=t,rc.elements[1]*=t,rc.elements[2]*=t,rc.elements[4]*=i,rc.elements[5]*=i,rc.elements[6]*=i,rc.elements[8]*=s,rc.elements[9]*=s,rc.elements[10]*=s,e.setFromRotationMatrix(rc),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(n-i),o[9]=(n+i)/(n-i),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),u=1/(n-i),l=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-((e+t)*s),o[1]=0,o[5]=2*u,o[9]=0,o[13]=-((n+i)*u),o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-((a+r)*l),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;16>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var rg=new c,rv=new u;h.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),h.DefaultOrder="XYZ",Object.defineProperties(h.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(h.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=ri.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6];switch(r=r[10],e=e||this._order){case"XYZ":this._y=Math.asin(i(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-l,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-i(l,-1,1)),.9999999>Math.abs(l)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,t),this._z=0);break;case"ZXY":this._x=Math.asin(i(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-c,r),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,t));break;case"ZYX":this._y=Math.asin(-i(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(h,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(i(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,t)):(this._x=0,this._y=Math.atan2(o,r));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-l,r),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return rg.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rg,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return rv.setFromEuler(this),this.setFromQuaternion(rv,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(p.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var r$=0,ry=new l,rx=new u,r8=new c,r_=new l,rb=new l,rw=new l,rS=new u,rD=new l(1,0,0),rM=new l(0,1,0),rE=new l(0,0,1),rT={type:"added"},r1={type:"removed"};d.DefaultUp=new l(0,1,0),d.DefaultMatrixAutoUpdate=!0,d.prototype=Object.assign(Object.create(e.prototype),{constructor:d,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return rx.setFromAxisAngle(t,e),this.quaternion.multiply(rx),this},rotateOnWorldAxis:function(t,e){return rx.setFromAxisAngle(t,e),this.quaternion.premultiply(rx),this},rotateX:function(t){return this.rotateOnAxis(rD,t)},rotateY:function(t){return this.rotateOnAxis(rM,t)},rotateZ:function(t){return this.rotateOnAxis(rE,t)},translateOnAxis:function(t,e){return ry.copy(t).applyQuaternion(this.quaternion),this.position.add(ry.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(rD,t)},translateY:function(t){return this.translateOnAxis(rM,t)},translateZ:function(t){return this.translateOnAxis(rE,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(r8.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?r_.copy(t):r_.set(t,e,n),t=this.parent,this.updateWorldMatrix(!0,!1),rb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?r8.lookAt(rb,r_,this.up):r8.lookAt(r_,rb,this.up),this.quaternion.setFromRotationMatrix(r8),t&&(r8.extractRotation(t.matrixWorld),rx.setFromRotationMatrix(r8),this.quaternion.premultiply(rx.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(rT)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return -1!==(e=this.children.indexOf(t))&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(r1)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),r8.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),r8.multiply(t.parent.matrixWorld)),t.applyMatrix4(r8),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new l),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rb,t,rw),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rb,rS,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(t=this.children,e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){if(Array.isArray(o=o.shapes))for(var s=0,u=o.length;s<u;s++)e(t.shapes,o[s]);else e(t.shapes,o)}}if(void 0!==this.material){if(Array.isArray(this.material)){for(o=[],s=0,u=this.material.length;s<u;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material)}if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(i){i=n(t.geometries),s=n(t.materials),u=n(t.textures);var l=n(t.images);o=n(t.shapes),0<i.length&&(r.geometries=i),0<s.length&&(r.materials=s),0<u.length&&(r.textures=u),0<l.length&&(r.images=l),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),f.prototype=Object.assign(Object.create(d.prototype),{constructor:f,isScene:!0,copy:function(t,e){return d.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=d.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var r0=[new l,new l,new l,new l,new l,new l,new l,new l],rC=new l,rA=new m,rL=new l,rP=new l,rR=new l,rF=new l,r2=new l,rN=new l,rI=new l,rz=new l,r3=new l,rB=new l;Object.assign(m.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=rC.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new l),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new l),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),rA.copy(e.boundingBox),rA.applyMatrix4(t.matrixWorld),this.union(rA)),t=t.children,e=0;for(var n=t.length;e<n;e++)this.expandByObject(t[e]);return this},containsPoint:function(t){return!(t.x<this.min.x)&&!(t.x>this.max.x)&&!(t.y<this.min.y)&&!(t.y>this.max.y)&&!(t.z<this.min.z)&&!(t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new l),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x)&&!(t.min.x>this.max.x)&&!(t.max.y<this.min.y)&&!(t.min.y>this.max.y)&&!(t.max.z<this.min.z)&&!(t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,rC),rC.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,n=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,n=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(rI),rz.subVectors(this.max,rI),rL.subVectors(t.a,rI),rP.subVectors(t.b,rI),rR.subVectors(t.c,rI),rF.subVectors(rP,rL),r2.subVectors(rR,rP),rN.subVectors(rL,rR),!!(g(t=[0,-rF.z,rF.y,0,-r2.z,r2.y,0,-rN.z,rN.y,rF.z,0,-rF.x,r2.z,0,-r2.x,rN.z,0,-rN.x,-rF.y,rF.x,0,-r2.y,r2.x,0,-rN.y,rN.x,0],rL,rP,rR,rz)&&g(t=[1,0,0,0,1,0,0,0,1],rL,rP,rR,rz))&&(r3.crossVectors(rF,r2),g(t=[r3.x,r3.y,r3.z],rL,rP,rR,rz)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new l),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return rC.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(rC).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(r0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),r0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),r0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),r0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),r0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),r0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),r0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),r0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(r0)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var r4=new m;Object.assign(v.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):r4.setFromPoints(t).getCenter(n);for(var i=e=0,r=t.length;i<r;i++)e=Math.max(e,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new l),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return(void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new m),this.isEmpty())?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var rO=new l,rU=new l,rk=new l,rG=new l,r6=new l,r5=new l,rH=new l;Object.assign($.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new l),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,rO)),this},closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new l),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=rO.subVectors(t,this.origin).dot(this.direction);return 0>e?this.origin.distanceToSquared(t):(rO.copy(this.direction).multiplyScalar(e).add(this.origin),rO.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){rU.copy(t).add(e).multiplyScalar(.5),rk.copy(e).sub(t).normalize(),rG.copy(this.origin).sub(rU);var r=.5*t.distanceTo(e),a=-this.direction.dot(rk),o=rG.dot(this.direction),s=-rG.dot(rk),u=rG.lengthSq(),l=Math.abs(1-a*a);if(0<l){t=a*s-o,e=a*o-s;var c=r*l;0<=t?e>=-c?e<=c?(t*=r=1/l,e*=r,a=t*(t+a*e+2*o)+e*(a*t+e+2*s)+u):a=-(t=Math.max(0,-(a*(e=r)+o)))*t+e*(e+2*s)+u:a=-(t=Math.max(0,-(a*(e=-r)+o)))*t+e*(e+2*s)+u:e<=-c?(e=0<(t=Math.max(0,-(-a*r+o)))?-r:Math.min(Math.max(-r,-s),r),a=-t*t+e*(e+2*s)+u):e<=c?(t=0,a=(e=Math.min(Math.max(-r,-s),r))*(e+2*s)+u):(e=0<(t=Math.max(0,-(a*r+o)))?r:Math.min(Math.max(-r,-s),r),a=-t*t+e*(e+2*s)+u)}else e=0<a?-r:r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(t).add(this.origin),i&&i.copy(rk).multiplyScalar(e).add(rU),a},intersectSphere:function(t,e){rO.subVectors(t.center,this.origin);var n=rO.dot(this.direction),i=rO.dot(rO)-n*n;return i>(t=t.radius*t.radius)?null:(i=n-(t=Math.sqrt(t-i)),n+=t,0>i&&0>n?null:0>i?this.at(n,e):this.at(i,e))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return!!(0===e||0>t.normal.dot(this.direction)*e)},intersectBox:function(t,e){var n=1/this.direction.x,i=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=n){var o=(t.min.x-a.x)*n;n*=t.max.x-a.x}else o=(t.max.x-a.x)*n,n*=t.min.x-a.x;if(0<=i){var s=(t.min.y-a.y)*i;i*=t.max.y-a.y}else s=(t.max.y-a.y)*i,i*=t.min.y-a.y;return o>i||s>n?null:((s>o||o!=o)&&(o=s),(i<n||n!=n)&&(n=i),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>n)?null:((s>o||o!=o)&&(o=s),(t<n||n!=n)&&(n=t),0>n?null:this.at(0<=o?o:n,e))},intersectsBox:function(t){return null!==this.intersectBox(t,rO)},intersectTriangle:function(t,e,n,i,r){if(r6.subVectors(e,t),r5.subVectors(n,t),rH.crossVectors(r6,r5),0<(e=this.direction.dot(rH))){if(i)return null;i=1}else{if(!(0>e))return null;i=-1,e=-e}return(rG.subVectors(this.origin,t),0>(t=i*this.direction.dot(r5.crossVectors(rG,r5)))||0>(n=i*this.direction.dot(r6.cross(rG)))||t+n>e)?null:0>(t=-i*rG.dot(rH))?null:this.at(t/e,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var rV=new l,r7=new l,rW=new i;Object.assign(y.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){return e=rV.subVectors(n,e).cross(r7.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new l),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new l);var n=t.delta(rV),i=this.normal.dot(n);if(0===i){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!(0>(i=-(t.start.dot(this.normal)+this.constant)/i)||1<i))return e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new l),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||rW.getNormalMatrix(t),t=this.coplanarPoint(rV).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var rj=new l,rq=new l,rX=new l,rY=new l,rZ=new l,rJ=new l,rK=new l,rQ=new l,r9=new l,at=new l;Object.assign(x,{getNormal:function(t,e,n,i){return void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new l),i.subVectors(n,e),rj.subVectors(t,e),i.cross(rj),0<(t=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){rj.subVectors(i,e),rq.subVectors(n,e),rX.subVectors(t,e),t=rj.dot(rj),e=rj.dot(rq),n=rj.dot(rX);var a=rq.dot(rq);i=rq.dot(rX);var o=t*a-e*e;return(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new l),0===o)?r.set(-2,-1,-1):(a=(a*n-e*i)*(o=1/o),t=(t*i-e*n)*o,r.set(1-a-t,t,a))},containsPoint:function(t,e,n,i){return x.getBarycoord(t,e,n,i,rY),0<=rY.x&&0<=rY.y&&1>=rY.x+rY.y},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,rY),s.set(0,0),s.addScaledVector(r,rY.x),s.addScaledVector(a,rY.y),s.addScaledVector(o,rY.z),s},isFrontFacing:function(t,e,n,i){return rj.subVectors(n,e),rq.subVectors(t,e),0>rj.cross(rq).dot(i)}}),Object.assign(x.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return rj.subVectors(this.c,this.b),rq.subVectors(this.a,this.b),.5*rj.cross(rq).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new l),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return x.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new y),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return x.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return x.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return x.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return x.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new l);var n=this.a,i=this.b,r=this.c;rZ.subVectors(i,n),rJ.subVectors(r,n),rQ.subVectors(t,n);var a=rZ.dot(rQ),o=rJ.dot(rQ);if(0>=a&&0>=o)return e.copy(n);r9.subVectors(t,i);var s=rZ.dot(r9),u=rJ.dot(r9);if(0<=s&&u<=s)return e.copy(i);var c=a*u-s*o;if(0>=c&&0<=a&&0>=s)return i=a/(a-s),e.copy(n).addScaledVector(rZ,i);at.subVectors(t,r),t=rZ.dot(at);var h=rJ.dot(at);return 0<=h&&t<=h?e.copy(r):0>=(a=t*o-a*h)&&0<=o&&0>=h?(c=o/(o-h),e.copy(n).addScaledVector(rJ,c)):0>=(o=s*h-t*u)&&0<=u-s&&0<=t-h?(rK.subVectors(r,i),c=(u-s)/(u-s+(t-h)),e.copy(i).addScaledVector(rK,c)):(r=1/(o+a+c),i=a*r,c*=r,e.copy(n).addScaledVector(rZ,i).addScaledVector(rJ,c))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},an={h:0,s:0,l:0},ai={h:0,s:0,l:0};Object.assign(_.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){return t=ri.euclideanModulo(t,1),e=ri.clamp(e,0,1),n=ri.clamp(n,0,1),0===e?this.r=this.g=this.b=n:(e=.5>=n?n*(1+e):n+e-n*e,n=2*n-e,this.r=b(n,e,t+1/3),this.g=b(n,e,t),this.b=b(n,e,t-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,i=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){i=parseFloat(n[1])/360;var r=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(i,r,a)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(i=(n=n[1]).length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===i)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=ae[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=w(t.r),this.g=w(t.g),this.b=w(t.b),this},copyLinearToSRGB:function(t){return this.r=S(t.r),this.g=S(t.g),this.b=S(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),o=Math.min(n,i,r),s=(o+a)/2;if(o===a)o=e=0;else{var u=a-o;switch(o=.5>=s?u/(a+o):u/(2-a-o),a){case n:e=(i-r)/u+(i<r?6:0);break;case i:e=(r-n)/u+2;break;case r:e=(n-i)/u+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(an),an.h+=t,an.s+=e,an.l+=n,this.setHSL(an.h,an.s,an.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(an),t.getHSL(ai),t=ri.lerp(an.h,ai.h,e);var n=ri.lerp(an.s,ai.s,e);return e=ri.lerp(an.l,ai.l,e),this.setHSL(t,n,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),_.NAMES=ae,Object.assign(D.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var ar=0;M.prototype=Object.assign(Object.create(e.prototype),{constructor:M,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else{var i=this[e];void 0===i?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n&&(n=e(t.textures),t=e(t.images),0<n.length&&(i.textures=n),0<t.length&&(i.images=t)),i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(M.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),E.prototype=Object.create(M.prototype),E.prototype.constructor=E,E.prototype.isMeshBasicMaterial=!0,E.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var aa=new l;Object.defineProperty(T.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(T.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new _),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new n),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new l),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){for(var e=0,n=this.count;e<n;e++)aa.x=this.getX(e),aa.y=this.getY(e),aa.z=this.getZ(e),aa.applyMatrix3(t),this.setXYZ(e,aa.x,aa.y,aa.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)aa.x=this.getX(e),aa.y=this.getY(e),aa.z=this.getZ(e),aa.applyMatrix4(t),this.setXYZ(e,aa.x,aa.y,aa.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)aa.x=this.getX(e),aa.y=this.getY(e),aa.z=this.getZ(e),aa.applyNormalMatrix(t),this.setXYZ(e,aa.x,aa.y,aa.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)aa.x=this.getX(e),aa.y=this.getY(e),aa.z=this.getZ(e),aa.transformDirection(t),this.setXYZ(e,aa.x,aa.y,aa.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),C.prototype=Object.create(T.prototype),C.prototype.constructor=C,A.prototype=Object.create(T.prototype),A.prototype.constructor=A,L.prototype=Object.create(T.prototype),L.prototype.constructor=L,P.prototype=Object.create(T.prototype),P.prototype.constructor=P,R.prototype=Object.create(T.prototype),R.prototype.constructor=R,F.prototype=Object.create(T.prototype),F.prototype.constructor=F,N.prototype=Object.create(T.prototype),N.prototype.constructor=N,I.prototype=Object.create(T.prototype),I.prototype.constructor=I,z.prototype=Object.create(T.prototype),z.prototype.constructor=z,Object.assign(B.prototype,{computeGroups:function(t){var e=[],n=void 0;t=t.faces;for(var i=0;i<t.length;i++){var r=t[i];if(r.materialIndex!==n){n=r.materialIndex,void 0!==a&&(a.count=3*i-a.start,e.push(a));var a={start:3*i,materialIndex:n}}}void 0!==a&&(a.count=3*i-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,u=s.length;if(0<u){for(var l=[],c=0;c<u;c++)l[c]={name:s[c].name,data:[]};this.morphTargets.position=l}var h=t.morphNormals,p=h.length;if(0<p){var d=[];for(c=0;c<p;c++)d[c]={name:h[c].name,data:[]};this.morphTargets.normal=d}var f=t.skinIndices,m=t.skinWeights,g=f.length===i.length,v=m.length===i.length;for(0<i.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<e.length;c++){var $=e[c];this.vertices.push(i[$.a],i[$.b],i[$.c]);var y=$.vertexNormals;for(3===y.length?this.normals.push(y[0],y[1],y[2]):(y=$.normal,this.normals.push(y,y,y)),3===(y=$.vertexColors).length?this.colors.push(y[0],y[1],y[2]):(y=$.color,this.colors.push(y,y,y)),!0===a&&(void 0!==(y=r[0][c])?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new n,new n,new n))),!0===o&&(void 0!==(y=r[1][c])?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new n,new n,new n))),y=0;y<u;y++){var x=s[y].vertices;l[y].data.push(x[$.a],x[$.b],x[$.c])}for(y=0;y<p;y++)x=h[y].vertexNormals[c],d[y].data.push(x.a,x.b,x.c);g&&this.skinIndices.push(f[$.a],f[$.b],f[$.c]),v&&this.skinWeights.push(m[$.a],m[$.b],m[$.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var ao=1,as=new c,au=new d,al=new l,ac=new m,ah=new m,ap=new l;U.prototype=Object.assign(Object.create(e.prototype),{constructor:U,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<O(t)?N:R)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;if(void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)){var n=(new i).getNormalMatrix(t);e.applyNormalMatrix(n),e.needsUpdate=!0}return void 0!==(e=this.attributes.tangent)&&(e.transformDirection(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return as.makeRotationX(t),this.applyMatrix4(as),this},rotateY:function(t){return as.makeRotationY(t),this.applyMatrix4(as),this},rotateZ:function(t){return as.makeRotationZ(t),this.applyMatrix4(as),this},translate:function(t,e,n){return as.makeTranslation(t,e,n),this.applyMatrix4(as),this},scale:function(t,e,n){return as.makeScale(t,e,n),this.applyMatrix4(as),this},lookAt:function(t){return au.lookAt(t),au.updateMatrix(),this.applyMatrix4(au.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(al).negate(),this.translate(al.x,al.y,al.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new I(3*e.vertices.length,3);var n=new I(3*e.colors.length,3);this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new I(e.lineDistances.length,1),this.setAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new I(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}return!0===e.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new B).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var n in this.setAttribute("position",new T(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.setAttribute("normal",new T(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.setAttribute("color",new T(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new T(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new T(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var i=t.morphTargets[n],r=0,a=i.length;r<a;r++){var o=i[r],s=new I(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[n]=e}return 0<t.skinIndices.length&&(n=new I(4*t.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new I(4*t.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e){t=0;for(var n=e.length;t<n;t++)ac.setFromBufferAttribute(e[t]),this.morphTargetsRelative?(ap.addVectors(this.boundingBox.min,ac.min),this.boundingBox.expandByPoint(ap),ap.addVectors(this.boundingBox.max,ac.max),this.boundingBox.expandByPoint(ap)):(this.boundingBox.expandByPoint(ac.min),this.boundingBox.expandByPoint(ac.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(ac.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];ah.setFromBufferAttribute(a),this.morphTargetsRelative?(ap.addVectors(ac.min,ah.min),ac.expandByPoint(ap),ap.addVectors(ac.max,ah.max),ac.expandByPoint(ap)):(ac.expandByPoint(ah.min),ac.expandByPoint(ah.max))}ac.getCenter(n);var o=0;for(i=0,r=t.count;i<r;i++)ap.fromBufferAttribute(t,i),o=Math.max(o,n.distanceToSquared(ap));if(e)for(i=0,r=e.length;i<r;i++){a=e[i];for(var s=this.morphTargetsRelative,u=0,l=a.count;u<l;u++)ap.fromBufferAttribute(a,u),s&&(al.fromBufferAttribute(t,u),ap.add(al)),o=Math.max(o,n.distanceToSquared(ap))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new T(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;i=e.normal.array;var o=new l,s=new l,u=new l,c=new l,h=new l;if(t){var p=t.array;for(r=0,a=t.count;r<a;r+=3){t=3*p[r+0];var d=3*p[r+1],f=3*p[r+2];o.fromArray(n,t),s.fromArray(n,d),u.fromArray(n,f),c.subVectors(u,s),h.subVectors(o,s),c.cross(h),i[t]+=c.x,i[t+1]+=c.y,i[t+2]+=c.z,i[d]+=c.x,i[d+1]+=c.y,i[d+2]+=c.z,i[f]+=c.x,i[f+1]+=c.y,i[f+2]+=c.z}}else for(r=0,a=n.length;r<a;r+=9)o.fromArray(n,r),s.fromArray(n,r+3),u.fromArray(n,r+6),c.subVectors(u,s),h.subVectors(o,s),c.cross(h),i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=c.x,i[r+4]=c.y,i[r+5]=c.z,i[r+6]=c.x,i[r+7]=c.y,i[r+8]=c.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,i=this.attributes;for(n in i)if(void 0!==t.attributes[n]){var r=i[n].array,a=t.attributes[n],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var u=0;u<a;u++,s++)r[s]=o[u]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)ap.x=t.getX(e),ap.y=t.getY(e),ap.z=t.getZ(e),ap.normalize(),t.setXYZ(e,ap.x,ap.y,ap.z)},toNonIndexed:function(){function t(t,e){var n=t.array,i=t.itemSize;t=t.normalized;for(var r,a=new n.constructor(e.length*i),o=0,s=0,u=e.length;s<u;s++){r=e[s]*i;for(var l=0;l<i;l++)a[o++]=n[r++]}return new T(a,i,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,n=new U,i=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,i),n.setAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],u=o[e];r=0;for(var l=u.length;r<l;r++)s.push(a=t(a=u[r],i));n.morphAttributes[e]=s}for(n.morphTargetsRelative=this.morphTargetsRelative,i=this.groups,r=0,e=i.length;r<e;r++)a=i[r],n.addGroup(a.start,a.count,a.materialIndex);return n},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(l in e)void 0!==e[l]&&(t[l]=e[l]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var n=this.attributes;for(l in n){var i=(e=n[l]).toJSON();""!==e.name&&(i.name=e.name),t.data.attributes[l]=i}n={};var r=!1;for(l in this.morphAttributes){for(var a=this.morphAttributes[l],o=[],s=0,u=a.length;s<u;s++)i=(e=a[s]).toJSON(),""!==e.name&&(i.name=e.name),o.push(i);0<o.length&&(n[l]=o,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);var l=this.groups;return 0<l.length&&(t.data.groups=JSON.parse(JSON.stringify(l))),null!==(l=this.boundingSphere)&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new U).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var e,n=t.index;for(o in null!==n&&this.setIndex(n.clone()),n=t.attributes)this.setAttribute(o,n[o].clone());var i=t.morphAttributes;for(o in i){var r=[],a=i[o];for(n=0,e=a.length;n<e;n++)r.push(a[n].clone());this.morphAttributes[o]=r}this.morphTargetsRelative=t.morphTargetsRelative;var o=t.groups;for(n=0,e=o.length;n<e;n++)i=o[n],this.addGroup(i.start,i.count,i.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ad=new c,af=new $,am=new v,ag=new l,av=new l,a$=new l,ay=new l,ax=new l,a8=new l,a_=new l,ab=new l,aw=new l,aS=new n,aD=new n,aM=new n,aE=new l,aT=new l;k.prototype=Object.assign(Object.create(d.prototype),{constructor:k,isMesh:!0,copy:function(t){return d.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=Object.keys(t=t.morphAttributes);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,e){var i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),am.copy(i.boundingSphere),am.applyMatrix4(a),!1!==t.ray.intersectsSphere(am)&&(ad.getInverse(a),af.copy(t.ray).applyMatrix4(ad),null===i.boundingBox||!1!==af.intersectsBox(i.boundingBox)))){if(i.isBufferGeometry){var o=i.index;a=i.attributes.position;var s,u,l=i.morphAttributes.position,c=i.morphTargetsRelative,h=i.attributes.uv,p=i.attributes.uv2,d=i.groups,f=i.drawRange;if(null!==o){if(Array.isArray(r)){var m=0;for(s=d.length;m<s;m++){var g=d[m],v=r[g.materialIndex],$=Math.max(g.start,f.start);for(u=i=Math.min(g.start+g.count,f.start+f.count);$<u;$+=3){i=o.getX($);var y=o.getX($+1),_=o.getX($+2);(i=H(this,v,t,af,a,l,c,h,p,i,y,_))&&(i.faceIndex=Math.floor($/3),i.face.materialIndex=g.materialIndex,e.push(i))}}}else for($=Math.max(0,f.start),i=Math.min(o.count,f.start+f.count),m=$,s=i;m<s;m+=3)i=o.getX(m),(i=H(this,r,t,af,a,l,c,h,p,i,y=o.getX(m+1),_=o.getX(m+2)))&&(i.faceIndex=Math.floor(m/3),e.push(i))}else if(void 0!==a){if(Array.isArray(r))for(m=0,s=d.length;m<s;m++)for(v=r[(g=d[m]).materialIndex],$=Math.max(g.start,f.start),u=i=Math.min(g.start+g.count,f.start+f.count);$<u;$+=3)i=$,(i=H(this,v,t,af,a,l,c,h,p,i,y=$+1,_=$+2))&&(i.faceIndex=Math.floor($/3),i.face.materialIndex=g.materialIndex,e.push(i));else for($=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count),m=$,s=i;m<s;m+=3)i=m,(i=H(this,r,t,af,a,l,c,h,p,i,y=m+1,_=m+2))&&(i.faceIndex=Math.floor(m/3),e.push(i))}}else if(i.isGeometry)for(a=Array.isArray(r),l=i.vertices,c=i.faces,0<(i=i.faceVertexUvs[0]).length&&(o=i),f=0,m=c.length;f<m;f++)s=c[f],void 0!==(i=a?r[s.materialIndex]:r)&&(h=l[s.a],i=G(this,i,t,af,h,p=l[s.b],d=l[s.c],aE))&&(o&&o[f]&&(g=o[f],aS.copy(g[0]),aD.copy(g[1]),aM.copy(g[2]),i.uv=x.getUV(aE,h,p,d,aS,aD,aM,new n)),i.face=s,i.faceIndex=f,e.push(i))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var a1=0,a0=new c,aC=new d,aA=new l;V.prototype=Object.assign(Object.create(e.prototype),{constructor:V,isGeometry:!0,applyMatrix4:function(t){for(var e=(new i).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){(t=this.faces[n]).normal.applyMatrix3(e).normalize();for(var a=0,o=t.vertexNormals.length;a<o;a++)t.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return a0.makeRotationX(t),this.applyMatrix4(a0),this},rotateY:function(t){return a0.makeRotationY(t),this.applyMatrix4(a0),this},rotateZ:function(t){return a0.makeRotationZ(t),this.applyMatrix4(a0),this},translate:function(t,e,n){return a0.makeTranslation(t,e,n),this.applyMatrix4(a0),this},scale:function(t,e,n){return a0.makeScale(t,e,n),this.applyMatrix4(a0),this},lookAt:function(t){return aC.lookAt(t),aC.updateMatrix(),this.applyMatrix4(aC.matrix),this},fromBufferGeometry:function(t){function e(t,e,r,a){var o=void 0===u?[]:[i.colors[t].clone(),i.colors[e].clone(),i.colors[r].clone()],p=void 0===s?[]:[(new l).fromArray(s,3*t),(new l).fromArray(s,3*e),(new l).fromArray(s,3*r)];a=new D(t,e,r,p,o,a),i.faces.push(a),void 0!==c&&i.faceVertexUvs[0].push([(new n).fromArray(c,2*t),(new n).fromArray(c,2*e),(new n).fromArray(c,2*r)]),void 0!==h&&i.faceVertexUvs[1].push([(new n).fromArray(h,2*t),(new n).fromArray(h,2*e),(new n).fromArray(h,2*r)])}var i=this,r=null!==t.index?t.index.array:void 0,a=t.attributes;if(void 0===a.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,u=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;for(void 0!==h&&(this.faceVertexUvs[1]=[]),a=0;a<o.length;a+=3)i.vertices.push((new l).fromArray(o,a)),void 0!==u&&i.colors.push((new _).fromArray(u,a));var p=t.groups;if(0<p.length)for(a=0;a<p.length;a++){var d=(o=p[a]).start,f=d;for(d+=o.count;f<d;f+=3)void 0!==r?e(r[f],r[f+1],r[f+2],o.materialIndex):e(f,f+1,f+2,o.materialIndex)}else if(void 0!==r)for(a=0;a<r.length;a+=3)e(r[a],r[a+1],r[a+2]);else for(a=0;a<o.length/3;a+=3)e(a,a+1,a+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(aA).negate(),this.translate(aA.x,aA.y,aA.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var n=new c;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var t=new l,e=new l,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b];t.subVectors(this.vertices[r.c],o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n=Array(this.vertices.length),i=0;for(e=this.vertices.length;i<e;i++)n[i]=new l;if(t){var r=new l,a=new l;for(t=0,i=this.faces.length;t<i;t++){e=this.faces[t];var o=this.vertices[e.a],s=this.vertices[e.b],u=this.vertices[e.c];r.subVectors(u,s),a.subVectors(o,s),r.cross(a),n[e.a].add(r),n[e.b].add(r),n[e.c].add(r)}}else for(this.computeFaceNormals(),t=0,i=this.faces.length;t<i;t++)n[(e=this.faces[t]).a].add(e.normal),n[e.b].add(e.normal),n[e.c].add(e.normal);for(i=0,e=this.vertices.length;i<e;i++)n[i].normalize();for(t=0,i=this.faces.length;t<i;t++)3===(o=(e=this.faces[t]).vertexNormals).length?(o[0].copy(n[e.a]),o[1].copy(n[e.b]),o[2].copy(n[e.c])):(o[0]=n[e.a].clone(),o[1]=n[e.b].clone(),o[2]=n[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();var t,e=0;for(t=this.faces.length;e<t;e++){var n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n=0;for(e=this.faces.length;n<e;n++){var i=this.faces[n];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);var r=0;for(t=i.vertexNormals.length;r<t;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}var a=new V;for(a.faces=this.faces,r=0,t=this.morphTargets.length;r<t;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],i=this.morphNormals[r].faceNormals;var o=this.morphNormals[r].vertexNormals;for(n=0,e=this.faces.length;n<e;n++){var s=new l,u={a:new l,b:new l,c:new l};i.push(s),o.push(u)}}for(o=this.morphNormals[r],a.vertices=this.morphTargets[r].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,e=this.faces.length;n<e;n++)i=this.faces[n],s=o.faceNormals[n],u=o.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,e=this.faces.length;n<e;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,a=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new i).getNormalMatrix(e));for(var p=0,d=s.length;p<d;p++){var f=s[p].clone();void 0!==e&&f.applyMatrix4(e),o.push(f)}for(p=0,d=h.length;p<d;p++)c.push(h[p].clone());for(p=0,d=l.length;p<d;p++){var m=(s=l[p]).vertexNormals;for(h=s.vertexColors,(c=new D(s.a+a,s.b+a,s.c+a)).normal.copy(s.normal),void 0!==r&&c.normal.applyMatrix3(r).normalize(),e=0,o=m.length;e<o;e++)f=m[e].clone(),void 0!==r&&f.applyMatrix3(r).normalize(),c.vertexNormals.push(f);for(c.color.copy(s.color),e=0,o=h.length;e<o;e++)f=h[e],c.vertexColors.push(f.clone());c.materialIndex=s.materialIndex+n,u.push(c)}for(p=0,d=t.faceVertexUvs.length;p<d;p++)for(n=t.faceVertexUvs[p],void 0===this.faceVertexUvs[p]&&(this.faceVertexUvs[p]=[]),e=0,o=n.length;e<o;e++){for(r=n[e],a=[],u=0,l=r.length;u<l;u++)a.push(r[u].clone());this.faceVertexUvs[p].push(a)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},n=[],i=[],r=1e4,a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=i[r.a],r.b=i[r.b],r.c=i[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),i=0,t=this.faceVertexUvs.length;i<t;i++)this.faceVertexUvs[i].splice(r,1);return a=this.vertices.length-n.length,this.vertices=n,a},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new l(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]),n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},clone:function(){return(new V).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var e,n,i,r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(r=t.colors,a=0,e=r.length;a<e;a++)this.colors.push(r[a].clone());for(r=t.faces,a=0,e=r.length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,n=o.length;r<n;r++){var s=o[r],u=[],l=0;for(i=s.length;l<i;l++)u.push(s[l].clone());this.faceVertexUvs[a].push(u)}}for(l=t.morphTargets,a=0,e=l.length;a<e;a++){if((i={}).name=l[a].name,void 0!==l[a].vertices)for(i.vertices=[],r=0,n=l[a].vertices.length;r<n;r++)i.vertices.push(l[a].vertices[r].clone());if(void 0!==l[a].normals)for(i.normals=[],r=0,n=l[a].normals.length;r<n;r++)i.normals.push(l[a].normals[r].clone());this.morphTargets.push(i)}for(l=t.morphNormals,a=0,e=l.length;a<e;a++){if(i={},void 0!==l[a].vertexNormals)for(i.vertexNormals=[],r=0,n=l[a].vertexNormals.length;r<n;r++)o=l[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),i.vertexNormals.push(s);if(void 0!==l[a].faceNormals)for(i.faceNormals=[],r=0,n=l[a].faceNormals.length;r<n;r++)i.faceNormals.push(l[a].faceNormals[r].clone());this.morphNormals.push(i)}for(r=t.skinWeights,a=0,e=r.length;a<e;a++)this.skinWeights.push(r[a].clone());for(r=t.skinIndices,a=0,e=r.length;a<e;a++)this.skinIndices.push(r[a].clone());for(r=t.lineDistances,a=0,e=r.length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var aL=function(t){function e(e,n,i,r,a,o){t.call(this),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new aP(e,n,i,r,a,o)),this.mergeVertices()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(V),aP=function(t){function e(e,n,i,r,a,o){function s(t,e,n,i,r,a,o,s,g,v,$){var y=a/g,x=o/v,_=a/2,b=o/2,w=s/2;o=g+1;for(var S=v+1,D=a=0,M=new l,E=0;E<S;E++)for(var T=E*x-b,C=0;C<o;C++)M[t]=(C*y-_)*i,M[e]=T*r,M[n]=w,h.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=0<s?1:-1,p.push(M.x,M.y,M.z),d.push(C/g),d.push(1-E/v),a+=1;for(t=0;t<v;t++)for(e=0;e<g;e++)n=f+e+o*(t+1),i=f+(e+1)+o*(t+1),r=f+(e+1)+o*t,c.push(f+e+o*t,n,r),c.push(n,i,r),D+=6;u.addGroup(m,D,$),m+=D,f+=a}t.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:o};var u=this;e=e||1,n=n||1,i=i||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var c=[],h=[],p=[],d=[],f=0,m=0;s("z","y","x",-1,-1,i,n,e,o=Math.floor(o)||1,a,0),s("z","y","x",1,-1,i,n,-e,o,a,1),s("x","z","y",1,1,e,i,n,r,o,2),s("x","z","y",1,-1,e,i,-n,r,o,3),s("x","y","z",1,-1,e,n,i,r,a,4),s("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(U),aR={clone:W,merge:j};q.prototype=Object.create(M.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=W(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},q.prototype.toJSON=function(t){var e=M.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;e.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},X.prototype=Object.assign(Object.create(d.prototype),{constructor:X,isCamera:!0,copy:function(t,e){return d.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){d.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){d.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Y.prototype=Object.assign(Object.create(X.prototype),{constructor:Y,isPerspectiveCamera:!0,copy:function(t,e){return X.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*ri.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ri.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ri.RAD2DEG*Math.atan(Math.tan(.5*ri.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ri.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=d.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Z.prototype=Object.create(d.prototype),Z.prototype.constructor=Z,J.prototype=Object.create(o.prototype),J.prototype.constructor=J,J.prototype.isWebGLCubeRenderTarget=!0,J.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new f,i=new q({type:"CubemapFromEquirect",uniforms:W({tEquirect:{value:null}}),vertexShader:"varying vec3 vWorldDirection;\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n}",side:1,blending:0});return i.uniforms.tEquirect.value=e,e=new k(new aP(5,5,5),i),n.add(e),new Z(1,10,this).update(t,n),e.geometry.dispose(),e.material.dispose(),this},K.prototype=Object.create(r.prototype),K.prototype.constructor=K,K.prototype.isDataTexture=!0;var aF=new v,a2=new l;Object.assign(Q.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements;t=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],p=n[10],d=n[11],f=n[12],m=n[13],g=n[14];return n=n[15],e[0].setComponents(a-t,l-o,d-c,n-f).normalize(),e[1].setComponents(a+t,l+o,d+c,n+f).normalize(),e[2].setComponents(a+i,l+s,d+h,n+m).normalize(),e[3].setComponents(a-i,l-s,d-h,n-m).normalize(),e[4].setComponents(a-r,l-u,d-p,n-g).normalize(),e[5].setComponents(a+r,l+u,d+p,n+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),aF.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(aF)},intersectsSprite:function(t){return aF.center.set(0,0,0),aF.radius=.7071067811865476,aF.applyMatrix4(t.matrixWorld),this.intersectsSphere(aF)},intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var i=0;6>i;i++)if(e[i].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,n=0;6>n;n++){var i=e[n];if(a2.x=0<i.normal.x?t.max.x:t.min.x,a2.y=0<i.normal.y?t.max.y:t.min.y,a2.z=0<i.normal.z?t.max.z:t.min.z,0>i.distanceToPoint(a2))return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0}});var aN={common:{diffuse:{value:new _(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new i},uv2Transform:{value:new i},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}},sprite:{diffuse:{value:new _(15658734)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}}};tn.prototype=Object.create(V.prototype),tn.prototype.constructor=tn,ti.prototype=Object.create(U.prototype),ti.prototype.constructor=ti;var aI={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	return vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n#else\n	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n	}\n	return 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n	return Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + viewDir );\n	float dotNL = saturate( dot( normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS  = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	return specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n	vec3 FssEss = F * brdf.x + brdf.y;\n	float Ess = brdf.x + brdf.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n	float invAlpha  = 1.0 / roughness;\n	float cos2h = NoH * NoH;\n	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n	vec3 N = geometry.normal;\n	vec3 V = geometry.viewDir;\n	vec3 H = normalize( V + L );\n	float dotNH = saturate( dot( N, H ) );\n	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#pragma unroll_loop_end\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop_start\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		#pragma unroll_loop_end\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n#ifdef CLEARCOAT\n	vec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n	return dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n	mat3 m = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n	transformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.r, max( value.g, value.b ) );\n	float D = max( maxRange / maxRGB, 1.0 );\n	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract( Le );\n	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n	return vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		}  else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		reflectVec = normalize( reflectVec );\n		vec2 sampleUV = equirectUv( reflectVec );\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		reflectVec = normalize( reflectVec );\n		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifndef ENVMAP_TYPE_CUBE_UV\n		envColor = envMapTexelToLinear( envColor );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform int maxMipLevel;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n	#ifdef ENVMAP_MODE_REFRACTION\n		uniform float refractionRatio;\n	#endif\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float sigma = PI * roughness * roughness / ( 1.0 + roughness );\n		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n		  vec3 reflectVec = reflect( -viewDir, normal );\n		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n		#else\n		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV = equirectUv( reflectVec );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) { \n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	fogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return texture2D( gradientMap, coord ).rgb;\n	#else\n		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n	#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n	vIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n	#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n	#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n	#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n	#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )	(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n#ifdef CLEARCOAT\n	float clearcoat;\n	float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n	vec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifdef CLEARCOAT\n		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = ccDotNL * directLight.color;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			ccIrradiance *= PI;\n		#endif\n		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n	#else\n		float clearcoatDHR = 0.0;\n	#endif\n	#ifdef USE_SHEEN\n		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n			material.specularRoughness,\n			directLight.direction,\n			geometry,\n			material.sheenColor\n		);\n	#else\n		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n	#endif\n	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef CLEARCOAT\n		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n		float ccDotNL = ccDotNV;\n		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n	#else\n		float clearcoatDHR = 0.0;\n	#endif\n	float clearcoatInv = 1.0 - clearcoatDHR;\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n	geometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	irradiance += getLightProbeIrradiance( lightProbe, geometry );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n	#ifdef CLEARCOAT\n		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n		varying float vIsPerspective;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n	#else\n		if ( isPerspectiveMatrix( projectionMatrix ) ) {\n			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n			gl_Position.z *= gl_Position.w;\n		}\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, uv );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	uniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	uniform float morphTargetBaseInfluence;\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n	transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n	transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n	transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n	transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n	transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n	transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n	#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n	#ifdef USE_TANGENT\n		vec3 tangent = normalize( vTangent );\n		vec3 bitangent = normalize( vBitangent );\n		#ifdef DOUBLE_SIDED\n			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#endif\n		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n			mat3 vTBN = mat3( tangent, bitangent, normal );\n		#endif\n	#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	#ifdef USE_TANGENT\n		normal = normalize( vTBN * mapN );\n	#else\n		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n	#endif\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		float scale = sign( st1.t * st0.s - st0.t * st1.s );\n		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n		vec3 N = normalize( surf_norm );\n		mat3 tsn = mat3( S, T, N );\n		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		return normalize( tsn * mapN );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n	vec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	#ifdef USE_TANGENT\n		clearcoatNormal = normalize( vTBN * clearcoatMapN );\n	#else\n		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n	#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform highp sampler2D boneTexture;\n		uniform int boneTextureSize;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureSize ) );\n			float y = floor( j / float( boneTextureSize ) );\n			float dx = 1.0 / float( boneTextureSize );\n			float dy = 1.0 / float( boneTextureSize );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n	#ifdef UVS_VERTEX_ONLY\n		vec2 vUv;\n	#else\n		varying vec2 vUv;\n	#endif\n	uniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n	uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	vec3 vReflect = vWorldDirection;\n	#include <envmap_fragment>\n	gl_FragColor = envColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	vec4 texColor = texture2D( tEquirect, sampleUV );\n	gl_FragColor = mapTexelToLinear( texColor );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n	\n		vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	#ifdef DOUBLE_SIDED\n		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n	#else\n		reflectedLight.indirectDiffuse += vIndirectFront;\n	#endif\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n	varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n		matcapColor = matcapTexelToLinear( matcapColor );\n	#else\n		vec4 matcapColor = vec4( 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#ifndef FLAT_SHADED\n		vNormal = normalize( transformedNormal );\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define REFLECTIVITY\n	#define CLEARCOAT\n	#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n	uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n	uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#ifdef TRANSPARENCY\n		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n	#endif\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}"},az={basic:{uniforms:j([aN.common,aN.specularmap,aN.envmap,aN.aomap,aN.lightmap,aN.fog]),vertexShader:aI.meshbasic_vert,fragmentShader:aI.meshbasic_frag},lambert:{uniforms:j([aN.common,aN.specularmap,aN.envmap,aN.aomap,aN.lightmap,aN.emissivemap,aN.fog,aN.lights,{emissive:{value:new _(0)}}]),vertexShader:aI.meshlambert_vert,fragmentShader:aI.meshlambert_frag},phong:{uniforms:j([aN.common,aN.specularmap,aN.envmap,aN.aomap,aN.lightmap,aN.emissivemap,aN.bumpmap,aN.normalmap,aN.displacementmap,aN.fog,aN.lights,{emissive:{value:new _(0)},specular:{value:new _(1118481)},shininess:{value:30}}]),vertexShader:aI.meshphong_vert,fragmentShader:aI.meshphong_frag},standard:{uniforms:j([aN.common,aN.envmap,aN.aomap,aN.lightmap,aN.emissivemap,aN.bumpmap,aN.normalmap,aN.displacementmap,aN.roughnessmap,aN.metalnessmap,aN.fog,aN.lights,{emissive:{value:new _(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:aI.meshphysical_vert,fragmentShader:aI.meshphysical_frag},toon:{uniforms:j([aN.common,aN.specularmap,aN.aomap,aN.lightmap,aN.emissivemap,aN.bumpmap,aN.normalmap,aN.displacementmap,aN.gradientmap,aN.fog,aN.lights,{emissive:{value:new _(0)},specular:{value:new _(1118481)},shininess:{value:30}}]),vertexShader:aI.meshtoon_vert,fragmentShader:aI.meshtoon_frag},matcap:{uniforms:j([aN.common,aN.bumpmap,aN.normalmap,aN.displacementmap,aN.fog,{matcap:{value:null}}]),vertexShader:aI.meshmatcap_vert,fragmentShader:aI.meshmatcap_frag},points:{uniforms:j([aN.points,aN.fog]),vertexShader:aI.points_vert,fragmentShader:aI.points_frag},dashed:{uniforms:j([aN.common,aN.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:aI.linedashed_vert,fragmentShader:aI.linedashed_frag},depth:{uniforms:j([aN.common,aN.displacementmap]),vertexShader:aI.depth_vert,fragmentShader:aI.depth_frag},normal:{uniforms:j([aN.common,aN.bumpmap,aN.normalmap,aN.displacementmap,{opacity:{value:1}}]),vertexShader:aI.normal_vert,fragmentShader:aI.normal_frag},sprite:{uniforms:j([aN.sprite,aN.fog]),vertexShader:aI.sprite_vert,fragmentShader:aI.sprite_frag},background:{uniforms:{uvTransform:{value:new i},t2D:{value:null}},vertexShader:aI.background_vert,fragmentShader:aI.background_frag},cube:{uniforms:j([aN.envmap,{opacity:{value:1}}]),vertexShader:aI.cube_vert,fragmentShader:aI.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:aI.equirect_vert,fragmentShader:aI.equirect_frag},distanceRGBA:{uniforms:j([aN.common,aN.displacementmap,{referencePosition:{value:new l},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:aI.distanceRGBA_vert,fragmentShader:aI.distanceRGBA_frag},shadow:{uniforms:j([aN.lights,aN.fog,{color:{value:new _(0)},opacity:{value:1}}]),vertexShader:aI.shadow_vert,fragmentShader:aI.shadow_frag}};az.physical={uniforms:j([az.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new n(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _(0)},transparency:{value:0}}]),vertexShader:aI.meshphysical_vert,fragmentShader:aI.meshphysical_frag},tm.prototype=Object.create(r.prototype),tm.prototype.constructor=tm,tm.prototype.isCubeTexture=!0,Object.defineProperty(tm.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),tg.prototype=Object.create(r.prototype),tg.prototype.constructor=tg,tg.prototype.isDataTexture2DArray=!0,tv.prototype=Object.create(r.prototype),tv.prototype.constructor=tv,tv.prototype.isDataTexture3D=!0;var a3=new r,aB=new tg,a4=new tv,aO=new tm,aU=[],ak=[],aG=new Float32Array(16),a6=new Float32Array(9),a5=new Float32Array(4);tV.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),tx(e,t)},t7.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var aH=/([\w\d_]+)(\])?(\[|\.)?/g;tW.prototype.setValue=function(t,e,n,i){void 0!==(e=this.map[e])&&e.setValue(t,n,i)},tW.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},tW.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},tW.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var aV=0,a7=/^[ \t]*#include +<([\w\d./]+)>/gm,aW=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,aj=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,aq=0;ef.prototype=Object.create(M.prototype),ef.prototype.constructor=ef,ef.prototype.isMeshDepthMaterial=!0,ef.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},em.prototype=Object.create(M.prototype),em.prototype.constructor=em,em.prototype.isMeshDistanceMaterial=!0,em.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ex.prototype=Object.assign(Object.create(Y.prototype),{constructor:ex,isArrayCamera:!0}),e8.prototype=Object.assign(Object.create(d.prototype),{constructor:e8,isGroup:!0}),Object.assign(e_.prototype,{constructor:e_,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new e8,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new e8,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(t,e,n){var i=null,r=null,a=this._targetRay,o=this._grip;return t&&(null!==a&&null!==(i=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)),null!==o&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),this}}),Object.assign(eb.prototype,e.prototype),Object.assign(eS.prototype,{isFogExp2:!0,clone:function(){return new eS(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(eD.prototype,{isFog:!0,clone:function(){return new eD(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(eM.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(eM.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var aX=new l;Object.defineProperties(eE.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(eE.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)aX.x=this.getX(e),aX.y=this.getY(e),aX.z=this.getZ(e),aX.applyMatrix4(t),this.setXYZ(e,aX.x,aX.y,aX.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],e=0;e<this.count;e++)for(var n=e*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[n+i]);return new T(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],e=0;e<this.count;e++)for(var n=e*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[n+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),eT.prototype=Object.create(M.prototype),eT.prototype.constructor=eT,eT.prototype.isSpriteMaterial=!0,eT.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var aY,aZ=new l,aJ=new l,aK=new l,aQ=new n,a9=new n,ot=new c,oe=new l,on=new l,oi=new l,or=new n,oa=new n,oo=new n;e1.prototype=Object.assign(Object.create(d.prototype),{constructor:e1,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),aJ.setFromMatrixScale(this.matrixWorld),ot.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),aK.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&aJ.multiplyScalar(-aK.z);var i=this.material.rotation;if(0!==i)var r=Math.cos(i),a=Math.sin(i);i=this.center,e0(oe.set(-.5,-.5,0),aK,i,aJ,a,r),e0(on.set(.5,-.5,0),aK,i,aJ,a,r),e0(oi.set(.5,.5,0),aK,i,aJ,a,r),or.set(0,0),oa.set(1,0),oo.set(1,1);var o=t.ray.intersectTriangle(oe,on,oi,!1,aZ);(null!==o||(e0(on.set(-.5,.5,0),aK,i,aJ,a,r),oa.set(0,1),null!==(o=t.ray.intersectTriangle(oe,oi,on,!1,aZ))))&&((a=t.ray.origin.distanceTo(aZ))<t.near||a>t.far||e.push({distance:a,point:aZ.clone(),uv:x.getUV(aZ,oe,on,oi,or,oa,oo,new n),face:null,object:this}))},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return d.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var os,ou,ol,oc,oh,op=new l,od=new l;eC.prototype=Object.assign(Object.create(d.prototype),{constructor:eC,isLOD:!0,copy:function(t){d.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(0<this.levels.length){op.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(op);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(1<e.length){op.setFromMatrixPosition(t.matrixWorld),od.setFromMatrixPosition(this.matrixWorld),t=op.distanceTo(od)/t.zoom,e[0].object.visible=!0;for(var n=1,i=e.length;n<i;n++)if(t>=e[n].distance)e[n-1].object.visible=!1,e[n].object.visible=!0;else break;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}},toJSON:function(t){t=d.prototype.toJSON.call(this,t),!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var e=this.levels,n=0,i=e.length;n<i;n++){var r=e[n];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),eA.prototype=Object.assign(Object.create(k.prototype),{constructor:eA,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new a,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){k.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:(os=new l,ou=new a,ol=new a,oc=new l,oh=new c,function(t,e){var n=this.skeleton,i=this.geometry;for(ou.fromBufferAttribute(i.attributes.skinIndex,t),ol.fromBufferAttribute(i.attributes.skinWeight,t),os.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0),t=0;4>t;t++)if(0!==(i=ol.getComponent(t))){var r=ou.getComponent(t);oh.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(oc.copy(os).applyMatrix4(oh),i)}return e.applyMatrix4(this.bindMatrixInverse)})});var of=new c,om=new c;Object.assign(eL.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new c;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n=0;for(e=this.bones.length;n<e;n++)(t=this.bones[n])&&t.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,e=this.bones.length;n<e;n++)(t=this.bones[n])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++)of.multiplyMatrices(t[r]?t[r].matrixWorld:om,e[r]),of.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new eL(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),eP.prototype=Object.assign(Object.create(d.prototype),{constructor:eP,isBone:!0});var og=new c,ov=new c,o$=[],oy=new k;eR.prototype=Object.assign(Object.create(k.prototype),{constructor:eR,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(oy.geometry=this.geometry,oy.material=this.material,void 0!==oy.material)for(var r=0;r<i;r++){this.getMatrixAt(r,og),ov.multiplyMatrices(n,og),oy.matrixWorld=ov,oy.raycast(t,o$);for(var a=0,o=o$.length;a<o;a++){var s=o$[a];s.instanceId=r,s.object=this,e.push(s)}o$.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),eF.prototype=Object.create(M.prototype),eF.prototype.constructor=eF,eF.prototype.isLineBasicMaterial=!0,eF.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var ox=new l,o8=new l,o_=new c,ob=new $,ow=new v;e2.prototype=Object.assign(Object.create(d.prototype),{constructor:e2,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)ox.fromBufferAttribute(e,i-1),o8.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=ox.distanceTo(o8);t.setAttribute("lineDistance",new I(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}else if(t.isGeometry)for(e=t.vertices,(n=t.lineDistances)[0]=0,i=1,r=e.length;i<r;i++)n[i]=n[i-1],n[i]+=e[i-1].distanceTo(e[i]);return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ow.copy(n.boundingSphere),ow.applyMatrix4(i),ow.radius+=r,!1!==t.ray.intersectsSphere(ow)){o_.getInverse(i),ob.copy(t.ray).applyMatrix4(o_),i=r/((this.scale.x+this.scale.y+this.scale.z)/3),i*=i;var a=new l,o=new l;r=new l;var s=new l,u=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var c=n.index,h=n.attributes.position.array;if(null!==c){c=c.array,n=0;for(var p=c.length-1;n<p;n+=u){var d=c[n+1];a.fromArray(h,3*c[n]),o.fromArray(h,3*d),(d=ob.distanceSqToSegment(a,o,s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,p=h.length/3-1;n<p;n+=u)a.fromArray(h,3*n),o.fromArray(h,3*n+3),(d=ob.distanceSqToSegment(a,o,s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(o=(a=n.vertices).length,n=0;n<o-1;n+=u)(d=ob.distanceSqToSegment(a[n],a[n+1],s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=Object.keys(t=t.morphAttributes);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var oS=new l,oD=new l;eN.prototype=Object.assign(Object.create(e2.prototype),{constructor:eN,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)oS.fromBufferAttribute(e,i),oD.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+oS.distanceTo(oD);t.setAttribute("lineDistance",new I(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.")}else if(t.isGeometry)for(e=t.vertices,n=t.lineDistances,i=0,r=e.length;i<r;i+=2)oS.copy(e[i]),oD.copy(e[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+oS.distanceTo(oD);return this}}),eI.prototype=Object.assign(Object.create(e2.prototype),{constructor:eI,isLineLoop:!0}),ez.prototype=Object.create(M.prototype),ez.prototype.constructor=ez,ez.prototype.isPointsMaterial=!0,ez.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var oM=new c,oE=new $,oT=new v,o1=new l;e3.prototype=Object.assign(Object.create(d.prototype),{constructor:e3,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),oT.copy(n.boundingSphere),oT.applyMatrix4(i),oT.radius+=r,!1!==t.ray.intersectsSphere(oT)){if(oM.getInverse(i),oE.copy(t.ray).applyMatrix4(oM),r/=(this.scale.x+this.scale.y+this.scale.z)/3,r*=r,n.isBufferGeometry){var a=n.index;if(n=n.attributes.position.array,null!==a){var o=a.array;a=0;for(var s=o.length;a<s;a++){var u=o[a];o1.fromArray(n,3*u),eB(o1,u,r,i,t,e,this)}}else for(a=0,o=n.length/3;a<o;a++)o1.fromArray(n,3*a),eB(o1,a,r,i,t,e,this)}else for(n=n.vertices,a=0,o=n.length;a<o;a++)eB(n[a],a,r,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=Object.keys(t=t.morphAttributes);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),e4.prototype=Object.assign(Object.create(r.prototype),{constructor:e4,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),eO.prototype=Object.create(r.prototype),eO.prototype.constructor=eO,eO.prototype.isCompressedTexture=!0,eU.prototype=Object.create(r.prototype),eU.prototype.constructor=eU,eU.prototype.isCanvasTexture=!0,ek.prototype=Object.create(r.prototype),ek.prototype.constructor=ek,ek.prototype.isDepthTexture=!0,eG.prototype=Object.create(U.prototype),eG.prototype.constructor=eG,e6.prototype=Object.create(V.prototype),e6.prototype.constructor=e6,e5.prototype=Object.create(U.prototype),e5.prototype.constructor=e5,eH.prototype=Object.create(V.prototype),eH.prototype.constructor=eH,eV.prototype=Object.create(U.prototype),eV.prototype.constructor=eV,e7.prototype=Object.create(V.prototype),e7.prototype.constructor=e7,eW.prototype=Object.create(eV.prototype),eW.prototype.constructor=eW,ej.prototype=Object.create(V.prototype),ej.prototype.constructor=ej,eq.prototype=Object.create(eV.prototype),eq.prototype.constructor=eq,eX.prototype=Object.create(V.prototype),eX.prototype.constructor=eX,eY.prototype=Object.create(eV.prototype),eY.prototype.constructor=eY,eZ.prototype=Object.create(V.prototype),eZ.prototype.constructor=eZ,eJ.prototype=Object.create(eV.prototype),eJ.prototype.constructor=eJ,eK.prototype=Object.create(V.prototype),eK.prototype.constructor=eK,eQ.prototype=Object.create(U.prototype),eQ.prototype.constructor=eQ,eQ.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},e9.prototype=Object.create(V.prototype),e9.prototype.constructor=e9,nt.prototype=Object.create(U.prototype),nt.prototype.constructor=nt,ne.prototype=Object.create(V.prototype),ne.prototype.constructor=ne,nn.prototype=Object.create(U.prototype),nn.prototype.constructor=nn;var o0={triangulate:function(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,a=ni(t,0,r,n,!0),o=[];if(!a||a.next===a.prev)return o;if(i){var s,u,l=n;i=[];var c=0;for(u=e.length;c<u;c++){var h=e[c]*l,p=c<u-1?e[c+1]*l:t.length;(h=ni(t,h,p,l,!1))===h.next&&(h.steiner=!0),i.push(nl(h))}for(i.sort(no),c=0;c<i.length;c++)l=i[c],e=a,(e=ns(l,e))&&(l=nv(e,l),nr(e,e.next),nr(l,l.next)),a=nr(a,a.next)}if(t.length>80*n){var d=s=t[0],f=i=t[1];for(l=n;l<r;l+=n)c=t[l],e=t[l+1],c<d&&(d=c),e<f&&(f=e),c>s&&(s=c),e>i&&(i=e);s=0!==(s=Math.max(s-d,i-f))?1/s:0}return function t(e,n,i,r,a,o,s){if(e){if(!s&&o){var u=e,l=u;do null===l.z&&(l.z=nu(l.x,l.y,r,a,o)),l.prevZ=l.prev,l=l.nextZ=l.next;while(l!==u);l.prevZ.nextZ=null,l.prevZ=null,u=l;var c,h,p,d,f=1;do{l=u;var m=u=null;for(h=0;l;){h++;var g=l;for(c=p=0;c<f&&(p++,g=g.nextZ);c++);for(d=f;0<p||0<d&&g;)0!==p&&(0===d||!g||l.z<=g.z)?(c=l,l=l.nextZ,p--):(c=g,g=g.nextZ,d--),m?m.nextZ=c:u=c,c.prevZ=m,m=c;l=g}m.nextZ=null,f*=2}while(1<h)}for(u=e;e.prev!==e.next;){if(l=e.prev,g=e.next,o)m=na(e,r,a,o);else a:if(h=(m=e).prev,0<=nh(h,p=m,f=m.next))m=!1;else{for(c=m.next.next;c!==m.prev;){if(nc(h.x,h.y,p.x,p.y,f.x,f.y,c.x,c.y)&&0<=nh(c.prev,c,c.next)){m=!1;break a}c=c.next}m=!0}if(m)n.push(l.i/i),n.push(e.i/i),n.push(g.i/i),ny(e),u=e=g.next;else if((e=g)===u){if(s){if(1===s){e=nr(e),s=n,u=i,l=e;do!np(g=l.prev,m=l.next.next)&&nd(g,l,l.next,m)&&ng(g,m)&&ng(m,g)&&(s.push(g.i/u),s.push(l.i/u),s.push(m.i/u),ny(l),ny(l.next),l=e=m),l=l.next;while(l!==e);e=nr(l),t(e,n,i,r,a,o,2)}else if(2===s)a:{s=e;do{for(u=s.next.next;u!==s.prev;){if(l=s.i!==u.i){if(l=s,g=u,m=l.next.i!==g.i&&l.prev.i!==g.i){b:{m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==g.i&&m.next.i!==g.i&&nd(m,m.next,l,g)){m=!0;break b}m=m.next}while(m!==l);m=!1}m=!m}if(m){if(m=ng(l,g)&&ng(g,l)){m=l,h=!1,p=(l.x+g.x)/2,f=(l.y+g.y)/2;do m.y>f!=m.next.y>f&&m.next.y!==m.y&&p<(m.next.x-m.x)*(f-m.y)/(m.next.y-m.y)+m.x&&(h=!h),m=m.next;while(m!==l);m=h}m=m&&(nh(l.prev,l,g.prev)||nh(l,g.prev,g))||np(l,g)&&0<nh(l.prev,l,l.next)&&0<nh(g.prev,g,g.next)}l=m}if(l){e=nv(s,u),s=nr(s,s.next),e=nr(e,e.next),t(s,n,i,r,a,o),t(e,n,i,r,a,o);break a}u=u.next}s=s.next}while(s!==e)}}else t(nr(e),n,i,r,a,o,1);break}}}}(a,o,n,d,f,s),o}},oC={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return .5*n},isClockWise:function(t){return 0>oC.area(t)},triangulateShape:function(t,e){var n=[],i=[],r=[];n8(t),n_(n,t);var a=t.length;for(e.forEach(n8),t=0;t<e.length;t++)i.push(a),a+=e[t].length,n_(n,e[t]);for(t=0,e=o0.triangulate(n,i);t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};nw.prototype=Object.create(V.prototype),nw.prototype.constructor=nw,nw.prototype.toJSON=function(){var t=V.prototype.toJSON.call(this);return nD(this.parameters.shapes,this.parameters.options,t)},nS.prototype=Object.create(U.prototype),nS.prototype.constructor=nS,nS.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return nD(this.parameters.shapes,this.parameters.options,t)};var oA={generateTopUV:function(t,e,i,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new n(e[3*i],e[3*i+1]),new n(t,r),new n(o,a)]},generateSideWallUV:function(t,e,i,r,a,o){t=e[3*i];var s=e[3*i+1];i=e[3*i+2];var u=e[3*r],l=e[3*r+1];r=e[3*r+2];var c=e[3*a],h=e[3*a+1];a=e[3*a+2];var p=e[3*o],d=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-l)?[new n(t,1-i),new n(u,1-r),new n(c,1-a),new n(p,1-e)]:[new n(s,1-i),new n(l,1-r),new n(h,1-a),new n(d,1-e)]}};nM.prototype=Object.create(V.prototype),nM.prototype.constructor=nM,nE.prototype=Object.create(nS.prototype),nE.prototype.constructor=nE,nT.prototype=Object.create(V.prototype),nT.prototype.constructor=nT,n1.prototype=Object.create(U.prototype),n1.prototype.constructor=n1,n0.prototype=Object.create(V.prototype),n0.prototype.constructor=n0,nC.prototype=Object.create(U.prototype),nC.prototype.constructor=nC,nA.prototype=Object.create(V.prototype),nA.prototype.constructor=nA,nL.prototype=Object.create(U.prototype),nL.prototype.constructor=nL,nP.prototype=Object.create(V.prototype),nP.prototype.constructor=nP,nP.prototype.toJSON=function(){var t=V.prototype.toJSON.call(this);return nF(this.parameters.shapes,t)},nR.prototype=Object.create(U.prototype),nR.prototype.constructor=nR,nR.prototype.toJSON=function(){var t=U.prototype.toJSON.call(this);return nF(this.parameters.shapes,t)},n2.prototype=Object.create(U.prototype),n2.prototype.constructor=n2,nN.prototype=Object.create(V.prototype),nN.prototype.constructor=nN,nI.prototype=Object.create(U.prototype),nI.prototype.constructor=nI,nz.prototype=Object.create(nN.prototype),nz.prototype.constructor=nz,n3.prototype=Object.create(nI.prototype),n3.prototype.constructor=n3,nB.prototype=Object.create(V.prototype),nB.prototype.constructor=nB,n4.prototype=Object.create(U.prototype),n4.prototype.constructor=n4;var oL=Object.freeze({__proto__:null,WireframeGeometry:eG,ParametricGeometry:e6,ParametricBufferGeometry:e5,TetrahedronGeometry:e7,TetrahedronBufferGeometry:eW,OctahedronGeometry:ej,OctahedronBufferGeometry:eq,IcosahedronGeometry:eX,IcosahedronBufferGeometry:eY,DodecahedronGeometry:eZ,DodecahedronBufferGeometry:eJ,PolyhedronGeometry:eH,PolyhedronBufferGeometry:eV,TubeGeometry:eK,TubeBufferGeometry:eQ,TorusKnotGeometry:e9,TorusKnotBufferGeometry:nt,TorusGeometry:ne,TorusBufferGeometry:nn,TextGeometry:nM,TextBufferGeometry:nE,SphereGeometry:nT,SphereBufferGeometry:n1,RingGeometry:n0,RingBufferGeometry:nC,PlaneGeometry:tn,PlaneBufferGeometry:ti,LatheGeometry:nA,LatheBufferGeometry:nL,ShapeGeometry:nP,ShapeBufferGeometry:nR,ExtrudeGeometry:nw,ExtrudeBufferGeometry:nS,EdgesGeometry:n2,ConeGeometry:nz,ConeBufferGeometry:n3,CylinderGeometry:nN,CylinderBufferGeometry:nI,CircleGeometry:nB,CircleBufferGeometry:n4,BoxGeometry:aL,BoxBufferGeometry:aP});nO.prototype=Object.create(M.prototype),nO.prototype.constructor=nO,nO.prototype.isShadowMaterial=!0,nO.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this},nU.prototype=Object.create(q.prototype),nU.prototype.constructor=nU,nU.prototype.isRawShaderMaterial=!0,nk.prototype=Object.create(M.prototype),nk.prototype.constructor=nk,nk.prototype.isMeshStandardMaterial=!0,nk.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},nG.prototype=Object.create(nk.prototype),nG.prototype.constructor=nG,nG.prototype.isMeshPhysicalMaterial=!0,nG.prototype.copy=function(t){return nk.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new _).copy(t.sheen):null,this.transparency=t.transparency,this},n6.prototype=Object.create(M.prototype),n6.prototype.constructor=n6,n6.prototype.isMeshPhongMaterial=!0,n6.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},n5.prototype=Object.create(M.prototype),n5.prototype.constructor=n5,n5.prototype.isMeshToonMaterial=!0,n5.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nH.prototype=Object.create(M.prototype),nH.prototype.constructor=nH,nH.prototype.isMeshNormalMaterial=!0,nH.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nV.prototype=Object.create(M.prototype),nV.prototype.constructor=nV,nV.prototype.isMeshLambertMaterial=!0,nV.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},n7.prototype=Object.create(M.prototype),n7.prototype.constructor=n7,n7.prototype.isMeshMatcapMaterial=!0,n7.prototype.copy=function(t){return M.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nW.prototype=Object.create(eF.prototype),nW.prototype.constructor=nW,nW.prototype.isLineDashedMaterial=!0,nW.prototype.copy=function(t){return eF.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var oP=Object.freeze({__proto__:null,ShadowMaterial:nO,SpriteMaterial:eT,RawShaderMaterial:nU,ShaderMaterial:q,PointsMaterial:ez,MeshPhysicalMaterial:nG,MeshStandardMaterial:nk,MeshPhongMaterial:n6,MeshToonMaterial:n5,MeshNormalMaterial:nH,MeshLambertMaterial:nV,MeshDepthMaterial:ef,MeshDistanceMaterial:em,MeshBasicMaterial:E,MeshMatcapMaterial:n7,LineDashedMaterial:nW,LineBasicMaterial:eF,Material:M}),oR={arraySlice:function(t,e,n){return oR.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return t&&(n||t.constructor!==e)?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,u=0;u!==e;++u)r[o++]=t[s+u];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o){if(Array.isArray(o))do void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++];while(void 0!==a);else if(void 0!==o.toArray)do void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++];while(void 0!==a);else do void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++];while(void 0!==a)}}},subclip:function(t,e,n,i,r){r=r||30,(t=t.clone()).name=e;var a=[];for(e=0;e<t.tracks.length;++e){for(var o=t.tracks[e],s=o.getValueSize(),u=[],l=[],c=0;c<o.times.length;++c){var h=o.times[c]*r;if(!(h<n||h>=i))for(u.push(o.times[c]),h=0;h<s;++h)l.push(o.values[c*s+h])}0!==u.length&&(o.times=oR.convertArray(u,o.times.constructor),o.values=oR.convertArray(l,o.values.constructor),a.push(o))}for(e=0,t.tracks=a,n=1/0;e<t.tracks.length;++e)n>t.tracks[e].times[0]&&(n=t.tracks[e].times[0]);for(e=0;e<t.tracks.length;++e)t.tracks[e].shift(-1*n);return t.resetDuration(),t},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===i||0>=i)&&(i=30);var r=t.tracks.length;for(e/=i,i=0;i<r;++i){var a=n.tracks[i],o=a.ValueTypeName;if("bool"!==o&&"string"!==o){var s=t.tracks.find(function(t){return t.name===a.name&&t.ValueTypeName===o});if(void 0!==s){var l=a.getValueSize(),c=a.times.length-1;e<=a.times[0]?c=oR.arraySlice(a.values,0,a.valueSize):e>=a.times[c]?c=oR.arraySlice(a.values,c*l):((c=a.createInterpolant()).evaluate(e),c=c.resultBuffer),"quaternion"===o&&new u(c[0],c[1],c[2],c[3]).normalize().conjugate().toArray(c);for(var h=s.times.length,p=0;p<h;++p){var d=p*l;if("quaternion"===o)u.multiplyQuaternionsFlat(s.values,d,c,0,s.values,d);else for(var f=0;f<l;++f)s.values[d+f]-=c[f]}}}}return t.blendMode=2501,t}};Object.assign(nj.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];a:{b:{c:{d:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break d;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,t<(i=e[++n]))break b}i=e.length;break c}if(t>=r)break a;for(t<(a=e[1])&&(n=2,r=a),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,t>=(r=e[--n-1]))break b}i=n,n=0}for(;n<i;)t<e[r=n+i>>>1]?i=r:n=r+1;if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize;t*=i;for(var r=0;r!==i;++r)e[r]=n[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(nj.prototype,{beforeStart_:nj.prototype.copySampleValue_,afterEnd_:nj.prototype.copySampleValue_}),nq.prototype=Object.assign(Object.create(nj.prototype),{constructor:nq,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}t=.5*(n-e),i=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-n),this._offsetPrev=r*i,this._offsetNext=a*i},interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,u=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,h=this._weightNext,p=(n-e)/(i-e);for(e=-c*(i=(n=p*p)*p)+2*c*n-c*p,c=(1+c)*i+(-1.5-2*c)*n+(-.5+c)*p+1,p=(-1-h)*i+(1.5+h)*n+.5*p,h=h*i-h*n,n=0;n!==o;++n)r[n]=e*a[u+n]+c*a[s+n]+p*a[t+n]+h*a[l+n];return r}}),nX.prototype=Object.assign(Object.create(nj.prototype),{constructor:nX,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(n=1-(e=(n-e)/(i-e)),i=0;i!==o;++i)r[i]=a[s+i]*n+a[t+i]*e;return r}}),nY.prototype=Object.assign(Object.create(nj.prototype),{constructor:nY,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(nZ,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:oR.convertArray(t.times,Array),values:oR.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e}}),Object.assign(nZ.prototype,{constructor:nZ,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new nY(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new nX(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new nq(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(e)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;return++a,(0!==r||a!==i)&&(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=oR.arraySlice(n,r,a),this.values=oR.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times;e=this.values;var i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==i;a++){var o=n[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&oR.isTypedArray(e)){for(a=0,n=e.length;a!==n;++a)if(isNaN(i=e[a])){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,i),t=!1;break}}return t},optimize:function(){for(var t=oR.arraySlice(this.times),e=oR.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0])){if(i)s=!0;else{var l=o*n,c=l-n,h=l+n;for(u=0;u!==n;++u){var p=e[l+u];if(p!==e[c+u]||p!==e[h+u]){s=!0;break}}}}if(s){if(o!==r)for(t[r]=t[o],s=o*n,l=r*n,u=0;u!==n;++u)e[l+u]=e[s+u];++r}}if(0<a){for(u=0,t[r]=t[a],s=a*n,l=r*n;u!==n;++u)e[l+u]=e[s+u];++r}return r!==t.length?(this.times=oR.arraySlice(t,0,r),this.values=oR.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this},clone:function(){var t=oR.arraySlice(this.times,0),e=oR.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),nJ.prototype=Object.assign(Object.create(nZ.prototype),{constructor:nJ,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),nK.prototype=Object.assign(Object.create(nZ.prototype),{constructor:nK,ValueTypeName:"color"}),nQ.prototype=Object.assign(Object.create(nZ.prototype),{constructor:nQ,ValueTypeName:"number"}),n9.prototype=Object.assign(Object.create(nj.prototype),{constructor:n9,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize;for(t*=o,e=(n-e)/(i-e),n=t+o;t!==n;t+=4)u.slerpFlat(r,0,a,t-o,a,t,e);return r}}),it.prototype=Object.assign(Object.create(nZ.prototype),{constructor:it,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new n9(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ie.prototype=Object.assign(Object.create(nZ.prototype),{constructor:ie,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ii.prototype=Object.assign(Object.create(nZ.prototype),{constructor:ii,ValueTypeName:"vector"}),Object.assign(ir,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(ia(n[r]).scale(i));return new ir(t.name,t.duration,e,t.blendMode)},toJSON:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(var i=0,r=n.length;i!==r;++i)e.push(nZ.toJSON(n[i]));return t},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],u=[];s.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);var l=oR.getKeyframeOrder(s);s=oR.sortedArray(s,1,l),u=oR.sortedArray(u,1,l),i||0!==s[0]||(s.push(r),u.push(u[0])),a.push(new nQ(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/n))}return new ir(t,-1,a)},findByName:function(t,e){var n=t;for(Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations),t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(r);if(u&&1<u.length){var l=u[1];(u=i[l])||(i[l]=u=[]),u.push(s)}}for(l in t=[],i)t.push(ir.CreateFromMorphTargetSequence(l,i[l],e,n));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];oR.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.blendMode;t=t.hierarchy||[];for(var u=0;u<t.length;u++){var l=t[u].keys;if(l&&0!==l.length){if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var p in a){var d=[],f=[];for(h=0;h!==l[c].morphTargets.length;++h){var m=l[c];d.push(m.time),f.push(m.morphTarget===p?1:0)}i.push(new nQ(".morphTargetInfluence["+p+"]",d,f))}a=a.length*(o||1)}else n(ii,(c=".bones["+e[u].name+"]")+".position",l,"pos",i),n(it,c+".quaternion",l,"rot",i),n(ii,c+".scale",l,"scl",i)}}return 0===i.length?null:new ir(r,a,i,s)}}),Object.assign(ir.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ir(this.name,this.duration,t,this.blendMode)}});var oF={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},o2=new io;Object.assign(is.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var oN={};iu.prototype=Object.assign(Object.create(is.prototype),{constructor:iu,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=oF.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0!==oN[t])oN[t].push({onLoad:e,onProgress:n,onError:i});else{var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){n=o[1];var s=!!o[2];o=decodeURIComponent(o=o[3]),s&&(o=atob(o));try{var u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":var l=new Uint8Array(o.length);for(s=0;s<o.length;s++)l[s]=o.charCodeAt(s);var c="blob"===u?new Blob([l.buffer],{type:n}):l.buffer;break;case"document":c=(new DOMParser).parseFromString(o,n);break;case"json":c=JSON.parse(o);break;default:c=o}setTimeout(function(){e&&e(c),r.manager.itemEnd(t)},0)}catch(h){setTimeout(function(){i&&i(h),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{oN[t]=[],oN[t].push({onLoad:e,onProgress:n,onError:i});var p=new XMLHttpRequest;for(s in p.open("https://artemsemkin.com/rhye/html/404.html",t,!0),p.addEventListener("load",function(e){var n=this.response,i=oN[t];if(delete oN[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),oF.add(t,n);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}}else{for(a=0,o=i.length;a<o;a++)(s=i[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)},!1),p.addEventListener("progress",function(e){for(var n=oN[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}},!1),p.addEventListener("error",function(e){var n=oN[t];delete oN[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),p.addEventListener("abort",function(e){var n=oN[t];delete oN[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(p.responseType=this.responseType),void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials),p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)p.setRequestHeader(s,this.requestHeader[s]);p.send(null)}return r.manager.itemStart(t),p}},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),il.prototype=Object.assign(Object.create(is.prototype),{constructor:il,load:function(t,e,n,i){var r=this,a=new iu(r.manager);a.setPath(r.path),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=ir.parse(t[n]);e.push(i)}return e}}),ic.prototype=Object.assign(Object.create(is.prototype),{constructor:ic,load:function(t,e,n,i){function r(r){u.load(t[r],function(t){t=a.parse(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(l+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))},n,i)}var a=this,o=[],s=new eO;s.image=o;var u=new iu(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)r(c);else u.load(t,function(t){if((t=a.parse(t,!0)).isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){o[i]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+r]),o[i].format=t.format,o[i].width=t.width,o[i].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)},n,i);return s}}),ih.prototype=Object.assign(Object.create(is.prototype),{constructor:ih,load:function(t,e,n,i){var r=this,a=new K,o=new iu(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,function(t){(t=r.parse(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1006,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=1008),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))},n,i),a}}),ip.prototype=Object.assign(Object.create(is.prototype),{constructor:ip,load:function(t,e,n,i){function r(){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),oF.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),i&&i(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=oF.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",r,!1),u.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}),id.prototype=Object.assign(Object.create(is.prototype),{constructor:id,load:function(t,e,n,i){function r(n){o.load(t[n],function(t){a.images[n]=t,6==++s&&(a.needsUpdate=!0,e&&e(a))},void 0,i)}var a=new tm,o=new ip(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(n=0;n<t.length;++n)r(n);return a}}),im.prototype=Object.assign(Object.create(is.prototype),{constructor:im,load:function(t,e,n,i){var a=new r,o=new ip(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){a.image=n,n=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),a.format=n?1022:1023,a.needsUpdate=!0,void 0!==e&&e(a)},n,i),a}}),Object.assign(ig.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;for(n.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(i),n.push(r),i=a}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n=this.getLengths(),i=n.length;e=e||t*n[i-1];for(var r,a=0,o=i-1;a<=o;)if(0>(r=n[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else if(0<r)o=t-1;else{o=t;break}return n[t=o]===e?t/(i-1):(a=n[t],(t+(e-a)/(n[t+1]-a))/(i-1))},getTangent:function(t,e){var i=t-1e-4;return 0>i&&(i=0),1<(t+=1e-4)&&(t=1),i=this.getPoint(i),t=this.getPoint(t),(e=e||(i.isVector2?new n:new l)).copy(t).sub(i).normalize(),e},getTangentAt:function(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)},computeFrenetFrames:function(t,e){var n,i=new l,r=[],a=[],o=[],s=new l,u=new c;for(n=0;n<=t;n++){var h=n/t;r[n]=this.getTangentAt(h,new l),r[n].normalize()}a[0]=new l,o[0]=new l,n=Number.MAX_VALUE,h=Math.abs(r[0].x);var p=Math.abs(r[0].y),d=Math.abs(r[0].z);for(h<=n&&(n=h,i.set(1,0,0)),p<=n&&(n=p,i.set(0,1,0)),d<=n&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],s),o[0].crossVectors(r[0],a[0]),n=1;n<=t;n++)a[n]=a[n-1].clone(),o[n]=o[n-1].clone(),s.crossVectors(r[n-1],r[n]),s.length()>Number.EPSILON&&(s.normalize(),i=Math.acos(ri.clamp(r[n-1].dot(r[n]),-1,1)),a[n].applyMatrix4(u.makeRotationAxis(s,i))),o[n].crossVectors(r[n],a[n]);if(!0===e)for(i=Math.acos(ri.clamp(a[0].dot(a[t]),-1,1)),i/=t,0<r[0].dot(s.crossVectors(a[0],a[t]))&&(i=-i),n=1;n<=t;n++)a[n].applyMatrix4(u.makeRotationAxis(r[n],i*n)),o[n].crossVectors(r[n],a[n]);return{tangents:r,normals:a,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),iA.prototype=Object.assign(Object.create(X.prototype),{constructor:iA,isOrthographicCamera:!0,copy:function(t,e){return X.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t;n+=t,t=i+e,e=i-e,null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,r+=i*this.view.offsetX,n=r+i*this.view.width,t-=e*this.view.offsetY,e=t-e*this.view.height),this.projectionMatrix.makeOrthographic(r,n,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=d.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),iI.prototype=Object.assign(Object.create(is.prototype),{constructor:iI,load:function(t,e,n,i){var r=this,a=new iu(r.manager);a.setPath(r.path),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)},parse:function(t){function e(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}var r=this.textures,o=new oP[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new _).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&(o.vertexColors="number"==typeof t.vertexColors?0<t.vertexColors:t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var u=t.uniforms[s];switch(o.uniforms[s]={},u.type){case"t":o.uniforms[s].value=e(u.value);break;case"c":o.uniforms[s].value=(new _).setHex(u.value);break;case"v2":o.uniforms[s].value=(new n).fromArray(u.value);break;case"v3":o.uniforms[s].value=(new l).fromArray(u.value);break;case"v4":o.uniforms[s].value=(new a).fromArray(u.value);break;case"m3":o.uniforms[s].value=(new i).fromArray(u.value);case"m4":o.uniforms[s].value=(new c).fromArray(u.value);break;default:o.uniforms[s].value=u.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(!1===Array.isArray(s=t.normalScale)&&(s=[s,s]),o.normalScale=(new n).fromArray(s)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new n).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}});var oI={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(r){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("https://artemsemkin.com/");return -1===e?"./":t.substr(0,e+1)}};iz.prototype=Object.assign(Object.create(U.prototype),{constructor:iz,isInstancedBufferGeometry:!0,copy:function(t){return U.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=U.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),i3.prototype=Object.assign(Object.create(T.prototype),{constructor:i3,isInstancedBufferAttribute:!0,copy:function(t){return T.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=T.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),iB.prototype=Object.assign(Object.create(is.prototype),{constructor:iB,load:function(t,e,n,i){var r=this,a=new iu(r.manager);a.setPath(r.path),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new iz:new U,n=t.data.index;if(void 0!==n){var i=new oz[n.type](n.array);e.setIndex(new T(i,1))}for(var r in n=t.data.attributes){var a=n[r];i=new oz[a.type](a.array),i=new(a.isInstancedBufferAttribute?i3:T)(i,a.itemSize,a.normalized),void 0!==a.name&&(i.name=a.name),e.setAttribute(r,i)}var o=t.data.morphAttributes;if(o)for(r in o){var s=o[r],u=[];n=0;for(var c=s.length;n<c;n++)i=new oz[(a=s[n]).type](a.array),i=new T(i,a.itemSize,a.normalized),void 0!==a.name&&(i.name=a.name),u.push(i);e.morphAttributes[r]=u}if(t.data.morphTargetsRelative&&(e.morphTargetsRelative=!0),void 0!==(r=t.data.groups||t.data.drawcalls||t.data.offsets))for(n=0,a=r.length;n!==a;++n)i=r[n],e.addGroup(i.start,i.count,i.materialIndex);return void 0!==(n=t.data.boundingSphere)&&(r=new l,void 0!==n.center&&r.fromArray(n.center),e.boundingSphere=new v(r,n.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var oz={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};i4.prototype=Object.assign(Object.create(is.prototype),{constructor:i4,load:function(t,e,n,i){var r=this,a=""===this.path?oI.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new iu(r.manager)).setPath(this.path),a.load(t,function(n){var a=null;try{a=JSON.parse(n)}catch(o){void 0!==i&&i(o),console.error("THREE:ObjectLoader: Can't parse "+t+".",o.message);return}void 0===(n=a.metadata)||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)},n,i)},parse:function(t,e){var n=this.parseShape(t.shapes);n=this.parseGeometries(t.geometries,n);var i=this.parseImages(t.images,function(){void 0!==e&&e(r)});i=this.parseTextures(t.textures,i),i=this.parseMaterials(t.materials,i);var r=this.parseObject(t.object,n,i);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new iS).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new iB,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new oL[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new oL[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new oL[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new oL[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new oL[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new oL[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new oL[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new oL[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new oL[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new oL[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new oL[o.type]((new kh[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new oL[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new oL[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var u=0,l=o.shapes.length;u<l;u++){var c=e[o.shapes[u]];s.push(c)}s=new oL[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],u=0,l=o.shapes.length;u<l;u++)c=e[o.shapes[u]],s.push(c);void 0!==(u=o.options.extrudePath)&&(o.options.extrudePath=(new kh[u.type]).fromJSON(u)),s=new oL[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(o);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new iI;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],u=0;u<o.materials.length;u++){var l=o.materials[u];void 0===n[l.uuid]&&(n[l.uuid]=r.parse(l)),s.push(n[l.uuid])}i[o.uuid]=s}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=ir.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){function n(t){return i.manager.itemStart(t),a.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t),i.manager.itemEnd(t)})}var i=this,r={};if(void 0!==t&&0<t.length){e=new io(e);var a=new ip(e);a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],u=s.url;if(Array.isArray(u)){r[s.uuid]=[];for(var l=0,c=u.length;l<c;l++){var h=u[l];h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h,r[s.uuid].push(n(h))}}else h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:i.resourcePath+s.url,r[s.uuid]=n(h)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var a=0,o=t.length;a<o;a++){var s=t[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var u=Array.isArray(e[s.image])?new tm(e[s.image]):new r(e[s.image]);u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping,o3)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.center&&u.center.fromArray(s.center),void 0!==s.rotation&&(u.rotation=s.rotation),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0],oB),u.wrapT=n(s.wrap[1],oB)),void 0!==s.format&&(u.format=s.format),void 0!==s.type&&(u.type=s.type),void 0!==s.encoding&&(u.encoding=s.encoding),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter,o4)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter,o4)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(u.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(u.unpackAlignment=s.unpackAlignment),i[s.uuid]=u}return i},parseObject:function(t,e,n){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":var a=new f;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new _(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new eD(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new eS(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Y(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new iA(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new iR(t.color,t.intensity);break;case"DirectionalLight":a=new iP(t.color,t.intensity);break;case"PointLight":a=new iC(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new iF(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new i1(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new iM(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new iN).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=i(t.geometry);var o=r(t.material);a=new k(a,o);break;case"InstancedMesh":a=i(t.geometry),o=r(t.material);var s=t.instanceMatrix;(a=new eR(a,o,t.count)).instanceMatrix=new T(new Float32Array(s.array),16);break;case"LOD":a=new eC;break;case"Line":a=new e2(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new eI(i(t.geometry),r(t.material));break;case"LineSegments":a=new eN(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new e3(i(t.geometry),r(t.material));break;case"Sprite":a=new e1(r(t.material));break;case"Group":a=new e8;break;default:a=new d}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(s=t.children,o=0;o<s.length;o++)a.add(this.parseObject(s[o],e,n));if("LOD"===t.type)for(void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate),t=t.levels,s=0;s<t.length;s++){o=t[s];var u=a.getObjectByProperty("uuid",o.object);void 0!==u&&a.addLevel(u,o.distance)}return a}});var o3={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},oB={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},o4={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};iO.prototype=Object.assign(Object.create(is.prototype),{constructor:iO,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=oF.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(n){oF.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(iU.prototype,{moveTo:function(t,e){return this.currentPath=new iw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new iS;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(o=e[a],u=-u,s=e[r],l=-l),!(t.y<o.y||t.y>s.y)){if(t.y===o.y){if(t.x===o.x)return!0}else{if(0==(r=l*(t.x-o.x)-u*(t.y-o.y)))return!0;0>r||(i=!i)}}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return i}var r=oC.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);if(e=[],1===a.length){var o=a[0],s=new iS;return s.curves=o.curves,e.push(s),e}var u=!r(a[0].getPoints());u=t?!u:u,s=[];var l=[],c=[],h=0;l[h]=void 0,c[h]=[];for(var p=0,d=a.length;p<d;p++){var f=(o=a[p]).getPoints(),m=r(f);(m=t?!m:m)?(!u&&l[h]&&h++,l[h]={s:new iS,p:f},l[h].s.curves=o.curves,u&&h++,c[h]=[]):c[h].push({h:o,p:f[0]})}if(!l[0])return n(a);if(1<l.length){for(p=!1,t=[],r=0,a=l.length;r<a;r++)s[r]=[];for(r=0,a=l.length;r<a;r++)for(o=c[r],m=0;m<o.length;m++){for(f=0,u=o[m],h=!0;f<l.length;f++)i(u.p,l[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),h?(h=!1,s[f].push(u)):p=!0);h&&s[r].push(u)}0<t.length&&(p||(c=s))}for(p=0,r=l.length;p<r;p++)for(s=l[p].s,e.push(s),t=c[p],a=0,o=t.length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(ik.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var n=[],i=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");i/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i;t=[];for(var o=0,s=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)o=0,s-=a;else{var c=l;l=i;var h=o,p=s,d=e,f=d.glyphs[c]||d.glyphs["?"];if(f){if(c=new iU,f.o){d=f._cachedOutline||(f._cachedOutline=f.o.split(" "));for(var m=0,g=d.length;m<g;)switch(d[m++]){case"m":var v=d[m++]*l+h,$=d[m++]*l+p;c.moveTo(v,$);break;case"l":v=d[m++]*l+h,$=d[m++]*l+p,c.lineTo(v,$);break;case"q":var y=d[m++]*l+h,x=d[m++]*l+p,_=d[m++]*l+h,b=d[m++]*l+p;c.quadraticCurveTo(_,b,y,x);break;case"b":y=d[m++]*l+h,x=d[m++]*l+p,_=d[m++]*l+h,b=d[m++]*l+p,v=d[m++]*l+h,$=d[m++]*l+p,c.bezierCurveTo(_,b,v,$,y,x)}}l={offsetX:f.ha*l,path:c}}else console.error('THREE.Font: character "'+c+'" does not exists in font family '+d.familyName+"."),l=void 0;o+=l.offsetX,t.push(l.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(n,t[e].toShapes());return n}}),iG.prototype=Object.assign(Object.create(is.prototype),{constructor:iG,load:function(t,e,n,i){var r=this,a=new iu(this.manager);a.setPath(this.path),a.load(t,function(t){try{var n=JSON.parse(t)}catch(i){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=r.parse(n),e&&e(t)},n,i)},parse:function(t){return new ik(t)}});var oO,oU={getContext:function(){return void 0===oO&&(oO=new(window.AudioContext||window.webkitAudioContext)),oO},setContext:function(t){oO=t}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),t.ACESFilmicToneMapping=5,t.AddEquation=100,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=iR,t.AmbientLightProbe=function t(e,n){iN.call(this,void 0,n),e=(new _).set(e),this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))},t.AnimationClip=ir,t.AnimationLoader=il,t.AnimationMixer=function t(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1},t.AnimationObjectGroup=function t(){this.uuid=ri.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={},this.stats={objects:{get total(){return this._objects.length},get inUse(){return this.total-this.nCachedObjects_}},get bindingsPerObject(){return this._bindings.length}}},t.AnimationUtils=oR,t.ArcCurve=function t(e,n,i,r,a,o){iv.call(this,e,n,i,i,r,a,o),this.type="ArcCurve"},t.ArrayCamera=ex,t.ArrowHelper=function t(e,n,i,r,a,o){d.call(this),this.type="ArrowHelper",void 0===e&&(e=new l(0,0,1)),void 0===n&&(n=new l(0,0,0)),void 0===i&&(i=1),void 0===r&&(r=16776960),void 0===a&&(a=.2*i),void 0===o&&(o=.2*a),void 0===yf&&((yf=new U).setAttribute("position",new I([0,0,0,0,1,0],3)),(Ng=new nI(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(n),this.line=new e2(yf,new eF({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new k(Ng,new E({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,o)},t.Audio=i5,t.AudioAnalyser=function t(e,n){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==n?n:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)},t.AudioContext=oU,t.AudioListener=function t(){d.call(this),this.type="AudioListener",this.context=oU.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new i6},t.AudioLoader=function t(e){is.call(this,e)},t.AxesHelper=iY,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new iY(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ih(t)},t.Bone=eP,t.BooleanKeyframeTrack=nJ,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new iX(t,e)},t.Box2=function t(e,i){this.min=void 0!==e?e:new n(1/0,1/0),this.max=void 0!==i?i:new n(-1/0,-1/0)},t.Box3=m,t.Box3Helper=function t(e,n){this.type="Box3Helper",this.box=e,n=n||16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new U;i.setIndex(new T(e,1)),i.setAttribute("position",new I([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),eN.call(this,i,new eF({color:n,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()},t.BoxBufferGeometry=aP,t.BoxGeometry=aL,t.BoxHelper=iX,t.BufferAttribute=T,t.BufferGeometry=U,t.BufferGeometryLoader=iB,t.ByteType=1010,t.Cache=oF,t.Camera=X,t.CameraHelper=function t(e){function n(t,e,n){i(t,n),i(e,n)}function i(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===u[t]&&(u[t]=[]),u[t].push(o.length/3-1)}var r=new U,a=new eF({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],u={},l=new _(16755200),c=new _(16711680),h=new _(43775),p=new _(16777215),d=new _(3355443);n("n1","n2",l),n("n2","n4",l),n("n4","n3",l),n("n3","n1",l),n("f1","f2",l),n("f2","f4",l),n("f4","f3",l),n("f3","f1",l),n("n1","f1",l),n("n2","f2",l),n("n3","f3",l),n("n4","f4",l),n("p","n1",c),n("p","n2",c),n("p","n3",c),n("p","n4",c),n("u1","u2",h),n("u2","u3",h),n("u3","u1",h),n("c","t",p),n("p","c",d),n("cn1","cn2",d),n("cn3","cn4",d),n("cf1","cf2",d),n("cf3","cf4",d),r.setAttribute("position",new I(o,3)),r.setAttribute("color",new I(s,3)),eN.call(this,r,a),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update()},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=eU,t.CatmullRomCurve3=iy,t.CineonToneMapping=4,t.CircleBufferGeometry=n4,t.CircleGeometry=nB,t.ClampToEdgeWrapping=1001,t.Clock=i6,t.ClosedSplineCurve3=function t(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),iy.call(this,e),this.type="catmullrom",this.closed=!0},t.Color=_,t.ColorKeyframeTrack=nK,t.CompressedTexture=eO,t.CompressedTextureLoader=ic,t.ConeBufferGeometry=n3,t.ConeGeometry=nz,t.CubeCamera=Z,t.CubeGeometry=aL,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=tm,t.CubeTextureLoader=id,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=function t(e,i,r,a){ig.call(this),this.type="CubicBezierCurve",this.v0=e||new n,this.v1=i||new n,this.v2=r||new n,this.v3=a||new n},t.CubicBezierCurve3=function t(e,n,i,r){ig.call(this),this.type="CubicBezierCurve3",this.v0=e||new l,this.v1=n||new l,this.v2=i||new l,this.v3=r||new l},t.CubicInterpolant=nq,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=ig,t.CurvePath=ib,t.CustomBlending=5,t.CylinderBufferGeometry=nI,t.CylinderGeometry=nN,t.Cylindrical=function t(e,n,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==n?n:0,this.y=void 0!==i?i:0,this},t.DataTexture=K,t.DataTexture2DArray=tg,t.DataTexture3D=tv,t.DataTextureLoader=ih,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=o2,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=ek,t.DirectionalLight=iP,t.DirectionalLightHelper=function t(e,n,i){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===n&&(n=1),(e=new U).setAttribute("position",new I([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3)),n=new eF({fog:!1,toneMapped:!1}),this.lightPlane=new e2(e,n),this.add(this.lightPlane),(e=new U).setAttribute("position",new I([0,0,0,0,0,1],3)),this.targetLine=new e2(e,n),this.add(this.targetLine),this.update()},t.DirectionalLightShadow=iL,t.DiscreteInterpolant=nY,t.DodecahedronBufferGeometry=eJ,t.DodecahedronGeometry=eZ,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new T(t,e).setUsage(35048)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=n2,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new eN(new n2(t.geometry),new eF({color:void 0!==e?e:16777215}))},t.EllipseCurve=iv,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=h,t.EventDispatcher=e,t.ExtrudeBufferGeometry=nS,t.ExtrudeGeometry=nw,t.Face3=D,t.Face4=function(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new D(t,e,n,r,a,o)},t.FaceColors=1,t.FileLoader=iu,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new I(t,e)},t.Float32BufferAttribute=I,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new z(t,e)},t.Float64BufferAttribute=z,t.FloatType=1015,t.Fog=eD,t.FogExp2=eS,t.Font=ik,t.FontLoader=iG,t.FrontFaceDirectionCCW=1,t.FrontFaceDirectionCW=0,t.FrontSide=0,t.Frustum=Q,t.GammaEncoding=3007,t.Geometry=V,t.GeometryUtils={merge:function(t,e,n){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var i=e.matrix;e=e.geometry}t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=function t(e,n,i,r){e=e||10,n=n||10,i=new _(void 0!==i?i:4473924),r=new _(void 0!==r?r:8947848);var a=n/2,o=e/n,s=e/2;e=[];for(var u=[],l=0,c=0,h=-s;l<=n;l++,h+=o){e.push(-s,0,h,s,0,h),e.push(h,0,-s,h,0,s);var p=l===a?i:r;p.toArray(u,c),c+=3,p.toArray(u,c),c+=3,p.toArray(u,c),c+=3,p.toArray(u,c),c+=3}(n=new U).setAttribute("position",new I(e,3)),n.setAttribute("color",new I(u,3)),i=new eF({vertexColors:!0,toneMapped:!1}),eN.call(this,n,i),this.type="GridHelper"},t.Group=e8,t.HalfFloatType=1016,t.HemisphereLight=iM,t.HemisphereLightHelper=function t(e,n,i){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(e=new eq(n)).rotateY(.5*Math.PI),this.material=new E({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),n=e.getAttribute("position"),n=new Float32Array(3*n.count),e.setAttribute("color",new T(n,3)),this.add(new k(e,this.material)),this.update()},t.HemisphereLightProbe=function t(e,n,i){iN.call(this,void 0,i),e=(new _).set(e),i=(new _).set(n),n=new l(e.r,e.g,e.b),e=new l(i.r,i.g,i.b);var r=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(n).add(e).multiplyScalar(i),this.sh.coefficients[1].copy(n).sub(e).multiplyScalar(r)},t.IcosahedronBufferGeometry=eY,t.IcosahedronGeometry=eX,t.ImageBitmapLoader=iO,t.ImageLoader=ip,t.ImageUtils=ra,t.ImmediateRenderObject=function t(e){d.call(this),this.material=e,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0},t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=i3,t.InstancedBufferGeometry=iz,t.InstancedInterleavedBuffer=function t(e,n,i){eM.call(this,e,n),this.meshPerAttribute=i||1},t.InstancedMesh=eR,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new P(t,e)},t.Int16BufferAttribute=P,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new F(t,e)},t.Int32BufferAttribute=F,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(t,e)},t.Int8BufferAttribute=C,t.IntType=1013,t.InterleavedBuffer=eM,t.InterleavedBufferAttribute=eE,t.Interpolant=nj,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=7680,t.KeyframeTrack=nZ,t.LOD=eC,t.LatheBufferGeometry=nL,t.LatheGeometry=nA,t.Layers=p,t.LensFlare=function(){console.error("https://artemsemkin.com/rhye/html/THREE.LensFlare has been moved to /examples/jsm/objects/404.html")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=iD,t.LightProbe=iN,t.LightShadow=iE,t.Line=e2,t.Line3=function t(e,n){this.start=void 0!==e?e:new l,this.end=void 0!==n?n:new l},t.LineBasicMaterial=eF,t.LineCurve=function t(e,i){ig.call(this),this.type="LineCurve",this.v1=e||new n,this.v2=i||new n},t.LineCurve3=function t(e,n){ig.call(this),this.type="LineCurve3",this.v1=e||new l,this.v2=n||new l},t.LineDashedMaterial=nW,t.LineLoop=eI,t.LinePieces=1,t.LineSegments=eN,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=nX,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=is,t.LoaderUtils=oI,t.LoadingManager=io,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=M,t.MaterialLoader=iI,t.Math=ri,t.MathUtils=ri,t.Matrix3=i,t.Matrix4=c,t.MaxEquation=104,t.Mesh=k,t.MeshBasicMaterial=E,t.MeshDepthMaterial=ef,t.MeshDistanceMaterial=em,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=nV,t.MeshMatcapMaterial=n7,t.MeshNormalMaterial=nH,t.MeshPhongMaterial=n6,t.MeshPhysicalMaterial=nG,t.MeshStandardMaterial=nk,t.MeshToonMaterial=n5,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=nQ,t.Object3D=d,t.ObjectLoader=i4,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=eq,t.OctahedronGeometry=ej,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=iA,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=function t(e){this._renderer=e,this._pingPongRenderTarget=null,e=new Float32Array(20);var n=new l(0,1,0);(e=new nU({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:mb[3e3]},outputEncoding:{value:mb[3e3]}},vertexShader:i9(),fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n"+rt()+"\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n	float cosTheta = cos(theta);\n	// Rodrigues' axis-angle rotation\n	vec3 sampleDirection = vOutputDirection * cosTheta\n		+ cross(axis, vOutputDirection) * sin(theta)\n		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n	return bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n	if (all(equal(axis, vec3(0.0))))\n		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n	axis = normalize(axis);\n	gl_FragColor = vec4(0.0);\n	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n	for (int i = 1; i < n; i++) {\n		if (i >= samples)\n			break;\n		float theta = dTheta * float(i);\n		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n		gl_FragColor.rgb += weights[i] * getSample(theta, axis);\n	}\n	gl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n		",blending:0,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",this._blurMaterial=e,this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)},t.ParametricBufferGeometry=e5,t.ParametricGeometry=e6,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new e1(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ez(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new e3(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ez(t)},t.Path=iw,t.PerspectiveCamera=Y,t.Plane=y,t.PlaneBufferGeometry=ti,t.PlaneGeometry=tn,t.PlaneHelper=function t(e,n,i){this.plane=e,this.size=void 0===n?1:n,e=void 0!==i?i:16776960,(n=new U).setAttribute("position",new I([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),e2.call(this,n,new eF({color:e,toneMapped:!1})),this.type="PlaneHelper",(n=new U).setAttribute("position",new I([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),n.computeBoundingSphere(),this.add(new k(n,new E({color:e,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new e3(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ez(t)},t.PointLight=iC,t.PointLightHelper=function t(e,n,i){this.light=e,this.light.updateMatrixWorld(),this.color=i,e=new n1(n,4,2),n=new E({wireframe:!0,fog:!1,toneMapped:!1}),k.call(this,e,n),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()},t.Points=e3,t.PointsMaterial=ez,t.PolarGridHelper=function t(e,n,i,r,a,o){e=e||10,n=n||16,i=i||8,r=r||64,a=new _(void 0!==a?a:4473924),o=new _(void 0!==o?o:8947848);var s,u=[],l=[];for(s=0;s<=n;s++){var c=s/n*2*Math.PI,h=Math.sin(c)*e;c=Math.cos(c)*e,u.push(0,0,0),u.push(h,0,c);var p=1&s?a:o;l.push(p.r,p.g,p.b),l.push(p.r,p.g,p.b)}for(s=0;s<=i;s++){p=1&s?a:o;var d=e-e/i*s;for(n=0;n<r;n++)h=Math.sin(c=n/r*2*Math.PI)*d,c=Math.cos(c)*d,u.push(h,0,c),l.push(p.r,p.g,p.b),h=Math.sin(c=(n+1)/r*2*Math.PI)*d,c=Math.cos(c)*d,u.push(h,0,c),l.push(p.r,p.g,p.b)}(e=new U).setAttribute("position",new I(u,3)),e.setAttribute("color",new I(l,3)),u=new eF({vertexColors:!0,toneMapped:!1}),eN.call(this,e,u),this.type="PolarGridHelper"},t.PolyhedronBufferGeometry=eV,t.PolyhedronGeometry=eH,t.PositionalAudio=function t(e){i5.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)},t.PropertyBinding=iV,t.PropertyMixer=function t(e,n,i){switch(this.binding=e,this.valueSize=i,n){case"quaternion":e=this._slerp,n=this._slerpAdditive;var r=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=e=this._select,r=this._setAdditiveIdentityOther,this.buffer=Array(5*i);break;default:e=this._lerp,n=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=e,this._mixBufferRegionAdditive=n,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0},t.QuadraticBezierCurve=function t(e,i,r){ig.call(this),this.type="QuadraticBezierCurve",this.v0=e||new n,this.v1=i||new n,this.v2=r||new n},t.QuadraticBezierCurve3=function t(e,n,i){ig.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new l,this.v1=n||new l,this.v2=i||new l},t.Quaternion=u,t.QuaternionKeyframeTrack=it,t.QuaternionLinearInterpolant=n9,t.REVISION="117",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=37496,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBIntegerFormat=1032,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=37492,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=nU,t.Ray=$,t.Raycaster=function t(e,n,i,r){this.ray=new $(e,n),this.near=i||0,this.far=r||1/0,this.camera=null,this.layers=new p,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.RectAreaLight=iF,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=nC,t.RingGeometry=n0,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=f,t.SceneUtils={createMultiMaterialObject:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")},detach:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")},attach:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")}},t.ShaderChunk=aI,t.ShaderLib=az,t.ShaderMaterial=q,t.ShadowMaterial=nO,t.Shape=iS,t.ShapeBufferGeometry=nR,t.ShapeGeometry=nP,t.ShapePath=iU,t.ShapeUtils=oC,t.ShortType=1011,t.Skeleton=eL,t.SkeletonHelper=function t(e){for(var n=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(e),i=new U,r=[],a=[],o=new _(0,0,1),s=new _(0,1,0),u=0;u<n.length;u++){var l=n[u];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}i.setAttribute("position",new I(r,3)),i.setAttribute("color",new I(a,3)),r=new eF({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),eN.call(this,i,r),this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},t.SkinnedMesh=eA,t.SmoothShading=2,t.Sphere=v,t.SphereBufferGeometry=n1,t.SphereGeometry=nT,t.Spherical=function t(e,n,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==n?n:0,this.theta=void 0!==i?i:0,this},t.SphericalHarmonics3=i2,t.SphericalReflectionMapping=305,t.Spline=function t(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),iy.call(this,e),this.type="catmullrom"},t.SplineCurve=function t(e){ig.call(this),this.type="SplineCurve",this.points=e||[]},t.SplineCurve3=function t(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),iy.call(this,e),this.type="catmullrom"},t.SpotLight=i1,t.SpotLightHelper=function t(e,n){d.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,e=new U,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,r=1;32>i;i++,r++){var a=i/32*Math.PI*2,o=r/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}e.setAttribute("position",new I(n,3)),n=new eF({fog:!1,toneMapped:!1}),this.cone=new eN(e,n),this.add(this.cone),this.update()},t.SpotLightShadow=iT,t.Sprite=e1,t.SpriteMaterial=eT,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=35044,t.StaticReadUsage=35045,t.StereoCamera=function t(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Y,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Y,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}},t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=ie,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=eW,t.TetrahedronGeometry=e7,t.TextBufferGeometry=nE,t.TextGeometry=nM,t.Texture=r,t.TextureLoader=im,t.TorusBufferGeometry=nn,t.TorusGeometry=ne,t.TorusKnotBufferGeometry=nt,t.TorusKnotGeometry=e9,t.Triangle=x,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=eQ,t.TubeGeometry=eK,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new R(t,e)},t.Uint16BufferAttribute=R,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new N(t,e)},t.Uint32BufferAttribute=N,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new A(t,e)},t.Uint8BufferAttribute=A,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new L(t,e)},t.Uint8ClampedBufferAttribute=L,t.Uncharted2ToneMapping=3,t.Uniform=function t(e,n){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=n),this.value=e},t.UniformsLib=aN,t.UniformsUtils=aR,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector2=n,t.Vector3=l,t.Vector4=a,t.VectorKeyframeTrack=ii,t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(t,e,n)},t.VertexColors=2,t.VideoTexture=e4,t.WebGLCubeRenderTarget=J,t.WebGLMultisampleRenderTarget=s,t.WebGLRenderTarget=o,t.WebGLRenderTargetCube=function(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new J(t,n)},t.WebGLRenderer=function t(e){function i(){v=new tu(tR),!1===($=new to(tR,v,e)).isWebGL2&&(v.get("WEBGL_depth_texture"),v.get("OES_texture_float"),v.get("OES_texture_half_float"),v.get("OES_texture_half_float_linear"),v.get("OES_standard_derivatives"),v.get("OES_element_index_uint"),v.get("ANGLE_instanced_arrays")),v.get("OES_texture_float_linear"),F=new ey(tR,v,$),(y=new ev(tR,v,$)).scissor(tx.copy(tE).multiplyScalar(tw).floor()),y.viewport(ty.copy(tM).multiplyScalar(tw).floor()),x=new th(tR),_=new er,b=new e$(tR,v,y,_,$,F,x),w=new te(tR,$),S=new tl(tR,w,x),D=new tf(tR,S,w,x),L=new td(tR),M=new ei(q,v,$),E=new ew(_),T=new eu,C=new ed,A=new tr(q,y,D,k),P=new ta(tR,v,x,$),R=new tc(tR,v,x,$),x.programs=M.programs,q.capabilities=$,q.extensions=v,q.properties=_,q.renderLists=T,q.state=y,q.info=x}function r(t){t.preventDefault(),X=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1,i()}function s(t){(t=t.target).removeEventListener("dispose",s),u(t),_.remove(t)}function u(t){var e=_.get(t).program;t.program=void 0,void 0!==e&&M.releaseProgram(e)}function h(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,u=o.geometry,l=void 0===i?o.material:i;if(o=o.group,n.isArrayCamera){t$=n;for(var c=n.cameras,h=0,d=c.length;h<d;h++){var f=c[h];s.layers.test(f.layers)&&(y.viewport(ty.copy(f.viewport)),j.setupLights(f),p(s,e,f,u,l,o))}}else t$=null,p(s,e,n,u,l,o)}}function p(t,e,n,i,r,a){if(t.onBeforeRender(q,e,n,i,r,a),j=C.get(e,t$||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var o=m(n,e,r,t);y.setMaterial(r),tm=g=null,tg=!1,function t(e,n){e.render(function(t){q.renderBufferImmediate(t,n)})}(t,o)}else q.renderBufferDirect(n,e,i,r,t,a);t.onAfterRender(q,e,n,i,r,a),j=C.get(e,t$||n)}function d(t,e,n){var i=_.get(t),r=j.state.lights,a=r.state.version;n=M.getParameters(t,r.state,j.state.shadowsArray,e,t0.numPlanes,t0.numIntersection,n);var o=M.getProgramCacheKey(n),l=i.program,c=!0;if(void 0===l)t.addEventListener("dispose",s);else if(l.cacheKey!==o)u(t);else{if(i.lightsStateVersion!==a)i.lightsStateVersion=a;else if(void 0!==n.shaderID)return;c=!1}if(c&&(l=M.acquireProgram(n,o),i.program=l,i.uniforms=n.uniforms,i.outputEncoding=n.outputEncoding,t.program=l),n=l.getAttributes(),t.morphTargets)for(o=t.numSupportedMorphTargets=0;o<q.maxMorphTargets;o++)0<=n["morphTarget"+o]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(o=t.numSupportedMorphNormals=0;o<q.maxMorphNormals;o++)0<=n["morphNormal"+o]&&t.numSupportedMorphNormals++;n=i.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=t0.numPlanes,i.numIntersection=t0.numIntersection,n.clippingPlanes=t0.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.needsLights=t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,i.lightsStateVersion=a,i.needsLights&&(n.ambientLightColor.value=r.state.ambient,n.lightProbe.value=r.state.probe,n.directionalLights.value=r.state.directional,n.directionalLightShadows.value=r.state.directionalShadow,n.spotLights.value=r.state.spot,n.spotLightShadows.value=r.state.spotShadow,n.rectAreaLights.value=r.state.rectArea,n.pointLights.value=r.state.point,n.pointLightShadows.value=r.state.pointShadow,n.hemisphereLights.value=r.state.hemi,n.directionalShadowMap.value=r.state.directionalShadowMap,n.directionalShadowMatrix.value=r.state.directionalShadowMatrix,n.spotShadowMap.value=r.state.spotShadowMap,n.spotShadowMatrix.value=r.state.spotShadowMatrix,n.pointShadowMap.value=r.state.pointShadowMap,n.pointShadowMatrix.value=r.state.pointShadowMatrix),t=i.program.getUniforms(),t=tW.seqWithValue(t.seq,n),i.uniformsList=t}function m(t,e,n,i){b.resetTextureUnits();var r=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===tn?q.outputEncoding:tn.texture.encoding,s=_.get(n),u=j.state.lights;tC&&(tA||t!==tv)&&t0.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,t===tv&&n.id===tp),n.version===s.__version?void 0===s.program?d(n,e,i):n.fog&&s.fog!==r?d(n,e,i):s.environment!==a?d(n,e,i):s.needsLights&&s.lightsStateVersion!==u.state.version?d(n,e,i):void 0===s.numClippingPlanes||s.numClippingPlanes===t0.numPlanes&&s.numIntersection===t0.numIntersection?s.outputEncoding!==o&&d(n,e,i):d(n,e,i):(d(n,e,i),s.__version=n.version);var l=!1,c=!1,h=!1;if(o=(e=s.program).getUniforms(),u=s.uniforms,y.useProgram(e.program)&&(h=c=l=!0),n.id!==tp&&(tp=n.id,c=!0),(l||tv!==t)&&(o.setValue(tR,"projectionMatrix",t.projectionMatrix),$.logarithmicDepthBuffer&&o.setValue(tR,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),tv!==t&&(tv=t,h=c=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(l=o.map.cameraPosition)&&l.setValue(tR,tP.setFromMatrixPosition(t.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&o.setValue(tR,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&o.setValue(tR,"viewMatrix",t.matrixWorldInverse)),n.skinning&&(o.setOptional(tR,i,"bindMatrix"),o.setOptional(tR,i,"bindMatrixInverse"),t=i.skeleton)){if(l=t.bones,$.floatVertexTextures){if(void 0===t.boneTexture){l=Math.sqrt(4*l.length),l=Math.max(l=ri.ceilPowerOfTwo(l),4);var p=new Float32Array(l*l*4);p.set(t.boneMatrices);var f=new K(p,l,l,1023,1015);t.boneMatrices=p,t.boneTexture=f,t.boneTextureSize=l}o.setValue(tR,"boneTexture",t.boneTexture,b),o.setValue(tR,"boneTextureSize",t.boneTextureSize)}else o.setOptional(tR,t,"boneMatrices")}return(c||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,o.setValue(tR,"receiveShadow",i.receiveShadow)),c&&(o.setValue(tR,"toneMappingExposure",q.toneMappingExposure),o.setValue(tR,"toneMappingWhitePoint",q.toneMappingWhitePoint),s.needsLights&&(c=h,u.ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.directionalLightShadows.needsUpdate=c,u.pointLights.needsUpdate=c,u.pointLightShadows.needsUpdate=c,u.spotLights.needsUpdate=c,u.spotLightShadows.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),r&&n.fog&&E.refreshFogUniforms(u,r),E.refreshMaterialUniforms(u,n,a,tw,tb),void 0!==u.ltc_1&&(u.ltc_1.value=aN.LTC_1),void 0!==u.ltc_2&&(u.ltc_2.value=aN.LTC_2),tW.upload(tR,s.uniformsList,u,b)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(tW.upload(tR,s.uniformsList,u,b),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&o.setValue(tR,"center",i.center),o.setValue(tR,"modelViewMatrix",i.modelViewMatrix),o.setValue(tR,"normalMatrix",i.normalMatrix),o.setValue(tR,"modelMatrix",i.matrixWorld),e}var g,v,$,y,x,_,b,w,S,D,M,E,T,C,A,L,P,R,F,N=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),I=void 0!==e.context?e.context:null,z=void 0!==e.alpha&&e.alpha,B=void 0===e.depth||e.depth,O=void 0===e.stencil||e.stencil,U=void 0!==e.antialias&&e.antialias,k=void 0===e.premultipliedAlpha||e.premultipliedAlpha,G=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,H=void 0!==e.powerPreference?e.powerPreference:"default",V=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,W=null,j=null;this.domElement=N,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var q=this,X=!1,Y=null,Z=0,J=0,tn=null,ti=null,tp=-1,tm=g=null,tg=!1,tv=null,t$=null,ty=new a,tx=new a,t8=null,t_=N.width,tb=N.height,tw=1,tS=null,tD=null,tM=new a(0,0,t_,tb),tE=new a(0,0,t_,tb),tT=!1,t1=new Q,t0=new ts,tC=!1,tA=!1,tL=new c,tP=new l;try{z={alpha:z,depth:B,stencil:O,antialias:U,premultipliedAlpha:k,preserveDrawingBuffer:G,powerPreference:H,failIfMajorPerformanceCaveat:V},N.addEventListener("webglcontextlost",r,!1),N.addEventListener("webglcontextrestored",o,!1);var tR=I||N.getContext("webgl",z)||N.getContext("experimental-webgl",z);if(null===tR){if(null!==N.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===tR.getShaderPrecisionFormat&&(tR.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(tF){throw console.error("THREE.WebGLRenderer: "+tF.message),tF}i();var t2=new eb(q,tR);this.xr=t2;var tN=new eg(q,D,$.maxTextureSize);this.shadowMap=tN,this.getContext=function(){return tR},this.getContextAttributes=function(){return tR.getContextAttributes()},this.forceContextLoss=function(){var t=v.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=v.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return tw},this.setPixelRatio=function(t){void 0!==t&&(tw=t,this.setSize(t_,tb,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new n),t.set(t_,tb)},this.setSize=function(t,e,n){t2.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(t_=t,tb=e,N.width=Math.floor(t*tw),N.height=Math.floor(e*tw),!1!==n&&(N.style.width=t+"px",N.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new n),t.set(t_*tw,tb*tw).floor()},this.setDrawingBufferSize=function(t,e,n){t_=t,tb=e,tw=n,N.width=Math.floor(t*n),N.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new a),t.copy(ty)},this.getViewport=function(t){return t.copy(tM)},this.setViewport=function(t,e,n,i){t.isVector4?tM.set(t.x,t.y,t.z,t.w):tM.set(t,e,n,i),y.viewport(ty.copy(tM).multiplyScalar(tw).floor())},this.getScissor=function(t){return t.copy(tE)},this.setScissor=function(t,e,n,i){t.isVector4?tE.set(t.x,t.y,t.z,t.w):tE.set(t,e,n,i),y.scissor(tx.copy(tE).multiplyScalar(tw).floor())},this.getScissorTest=function(){return tT},this.setScissorTest=function(t){y.setScissorTest(tT=t)},this.setOpaqueSort=function(t){tS=t},this.setTransparentSort=function(t){tD=t},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),tR.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){N.removeEventListener("webglcontextlost",r,!1),N.removeEventListener("webglcontextrestored",o,!1),T.dispose(),C.dispose(),_.dispose(),D.dispose(),t2.dispose(),t3.stop()},this.renderBufferImmediate=function(t,e){y.initAttributes();var n=_.get(t);t.hasPositions&&!n.position&&(n.position=tR.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=tR.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=tR.createBuffer()),t.hasColors&&!n.color&&(n.color=tR.createBuffer()),e=e.getAttributes(),t.hasPositions&&(tR.bindBuffer(34962,n.position),tR.bufferData(34962,t.positionArray,35048),y.enableAttribute(e.position),tR.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(tR.bindBuffer(34962,n.normal),tR.bufferData(34962,t.normalArray,35048),y.enableAttribute(e.normal),tR.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(tR.bindBuffer(34962,n.uv),tR.bufferData(34962,t.uvArray,35048),y.enableAttribute(e.uv),tR.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(tR.bindBuffer(34962,n.color),tR.bufferData(34962,t.colorArray,35048),y.enableAttribute(e.color),tR.vertexAttribPointer(e.color,3,5126,!1,0,0)),y.disableUnusedAttributes(),tR.drawArrays(4,0,t.count),t.count=0};var tI=new f;this.renderBufferDirect=function(t,e,n,i,r,a){null===e&&(e=tI);var o=r.isMesh&&0>r.matrixWorld.determinant(),s=m(t,e,i,r);y.setMaterial(i,o);var u=!1;if((g!==n.id||tm!==s.id||tg!==(!0===i.wireframe))&&(g=n.id,tm=s.id,tg=!0===i.wireframe,u=!0),(i.morphTargets||i.morphNormals)&&(L.update(r,n,i,s),u=!0),!0===r.isInstancedMesh&&(u=!0),t=n.index,e=n.attributes.position,null===t){if(void 0===e||0===e.count)return}else if(0===t.count)return;var l=1;if(!0===i.wireframe&&(t=S.getWireframeAttribute(n),l=2),o=P,null!==t){var c=w.get(t);(o=R).setIndex(c)}if(u){if(!1!==$.isWebGL2||!r.isInstancedMesh&&!n.isInstancedBufferGeometry||null!==v.get("ANGLE_instanced_arrays")){y.initAttributes(),u=n.attributes,s=s.getAttributes();var h=i.defaultAttributeValues;for(T in s){var p=s[T];if(0<=p){var d=u[T];if(void 0!==d){var f=d.normalized,x=d.itemSize,_=w.get(d);if(void 0!==_){var b=_.buffer,D=_.type;if(_=_.bytesPerElement,d.isInterleavedBufferAttribute){var M=d.data,E=M.stride;d=d.offset,M&&M.isInstancedInterleavedBuffer?(y.enableAttributeAndDivisor(p,M.meshPerAttribute),void 0===n._maxInstanceCount&&(n._maxInstanceCount=M.meshPerAttribute*M.count)):y.enableAttribute(p),tR.bindBuffer(34962,b),y.vertexAttribPointer(p,x,D,f,E*_,d*_)}else d.isInstancedBufferAttribute?(y.enableAttributeAndDivisor(p,d.meshPerAttribute),void 0===n._maxInstanceCount&&(n._maxInstanceCount=d.meshPerAttribute*d.count)):y.enableAttribute(p),tR.bindBuffer(34962,b),y.vertexAttribPointer(p,x,D,f,0,0)}}else if("instanceMatrix"===T)void 0!==(_=w.get(r.instanceMatrix))&&(b=_.buffer,D=_.type,y.enableAttributeAndDivisor(p+0,1),y.enableAttributeAndDivisor(p+1,1),y.enableAttributeAndDivisor(p+2,1),y.enableAttributeAndDivisor(p+3,1),tR.bindBuffer(34962,b),tR.vertexAttribPointer(p+0,4,D,!1,64,0),tR.vertexAttribPointer(p+1,4,D,!1,64,16),tR.vertexAttribPointer(p+2,4,D,!1,64,32),tR.vertexAttribPointer(p+3,4,D,!1,64,48));else if(void 0!==h&&void 0!==(f=h[T]))switch(f.length){case 2:tR.vertexAttrib2fv(p,f);break;case 3:tR.vertexAttrib3fv(p,f);break;case 4:tR.vertexAttrib4fv(p,f);break;default:tR.vertexAttrib1fv(p,f)}}}y.disableUnusedAttributes()}null!==t&&tR.bindBuffer(34963,c.buffer)}var T=n.drawRange.start*l;c=Math.max(T,u=null!==a?a.start*l:0),0!==(a=Math.max(0,Math.min(null!==t?t.count:e.count,T+n.drawRange.count*l,u+(null!==a?a.count*l:1/0))-1-c+1))&&(r.isMesh?!0===i.wireframe?(y.setLineWidth(i.wireframeLinewidth*(null===tn?tw:1)),o.setMode(1)):o.setMode(4):r.isLine?(void 0===(i=i.linewidth)&&(i=1),y.setLineWidth(i*(null===tn?tw:1)),r.isLineSegments?o.setMode(1):r.isLineLoop?o.setMode(2):o.setMode(3)):r.isPoints?o.setMode(0):r.isSprite&&o.setMode(4),r.isInstancedMesh?o.renderInstances(n,c,a,r.count):n.isInstancedBufferGeometry?o.renderInstances(n,c,a,Math.min(n.instanceCount,n._maxInstanceCount)):o.render(c,a))},this.compile=function(t,e){(j=C.get(t,e)).init(),t.traverse(function(t){t.isLight&&(j.pushLight(t),t.castShadow&&j.pushShadow(t))}),j.setupLights(e);var n={};t.traverse(function(e){var i=e.material;if(i){if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];!1==a.uuid in n&&(d(a,t,e),n[a.uuid]=!0)}else!1==i.uuid in n&&(d(i,t,e),n[i.uuid]=!0)}})};var tz=null,t3=new tt;t3.setAnimationLoop(function(t){t2.isPresenting||tz&&tz(t)}),"undefined"!=typeof window&&t3.setContext(window),this.setAnimationLoop=function(t){tz=t,t2.setAnimationLoop(t),t3.start()},this.render=function(t,e,n,i){if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var r=n}if(void 0!==i){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var a=i}e&&e.isCamera?X||(tm=g=null,tg=!1,tp=-1,tv=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),t2.enabled&&t2.isPresenting&&(e=t2.getCamera(e)),t.onBeforeRender(q,t,e,r||tn),(j=C.get(t,e)).init(),tL.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),t1.setFromProjectionMatrix(tL),tA=this.localClippingEnabled,tC=t0.init(this.clippingPlanes,tA,e),(W=T.get(t,e)).init(),function t(e,n,i,r){if(!1!==e.visible){if(e.layers.test(n.layers)){if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)j.pushLight(e),e.castShadow&&j.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||t1.intersectsSprite(e)){r&&tP.setFromMatrixPosition(e.matrixWorld).applyMatrix4(tL);var a=D.update(e),o=e.material;o.visible&&W.push(e,a,o,i,tP.z,null)}}else if(e.isImmediateRenderObject)r&&tP.setFromMatrixPosition(e.matrixWorld).applyMatrix4(tL),W.push(e,null,e.material,i,tP.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==x.render.frame&&(e.skeleton.update(),e.skeleton.frame=x.render.frame),!e.frustumCulled||t1.intersectsObject(e))){if(r&&tP.setFromMatrixPosition(e.matrixWorld).applyMatrix4(tL),a=D.update(e),Array.isArray(o=e.material))for(var s=a.groups,u=0,l=s.length;u<l;u++){var c=s[u],h=o[c.materialIndex];h&&h.visible&&W.push(e,a,h,i,tP.z,c)}else o.visible&&W.push(e,a,o,i,tP.z,null)}}for(e=e.children,u=0,l=e.length;u<l;u++)t(e[u],n,i,r)}}(t,e,0,q.sortObjects),W.finish(),!0===q.sortObjects&&W.sort(tS,tD),tC&&t0.beginShadows(),tN.render(j.state.shadowsArray,t,e),j.setupLights(e),tC&&t0.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),A.render(W,t,e,a),n=W.opaque,i=W.transparent,t.overrideMaterial?(r=t.overrideMaterial,n.length&&h(n,t,e,r),i.length&&h(i,t,e,r)):(n.length&&h(n,t,e),i.length&&h(i,t,e)),t.onAfterRender(q,t,e),null!==tn&&(b.updateRenderTargetMipmap(tn),b.updateMultisampleRenderTarget(tn)),y.buffers.depth.setTest(!0),y.buffers.depth.setMask(!0),y.buffers.color.setMask(!0),y.setPolygonOffset(!1),j=W=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){Y!==t&&null===tn&&tR.bindFramebuffer(36160,t),Y=t},this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return tn},this.setRenderTarget=function(t,e,n){tn=t,Z=e,J=n,t&&void 0===_.get(t).__webglFramebuffer&&b.setupRenderTarget(t);var i=Y,r=!1;t?(i=_.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(i=i[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?_.get(t).__webglMultisampledFramebuffer:i,ty.copy(t.viewport),tx.copy(t.scissor),t8=t.scissorTest):(ty.copy(tM).multiplyScalar(tw).floor(),tx.copy(tE).multiplyScalar(tw).floor(),t8=tT),ti!==i&&(tR.bindFramebuffer(36160,i),ti=i),y.viewport(ty),y.scissor(tx),y.setScissorTest(t8),r&&(t=_.get(t.texture),tR.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,n||0))},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=_.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){o=!1,s!==ti&&(tR.bindFramebuffer(36160,s),o=!0);try{var u=t.texture,l=u.format,c=u.type;1023!==l&&F.convert(l)!==tR.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===c||F.convert(c)===tR.getParameter(35738)||1015===c&&($.isWebGL2||v.get("OES_texture_float")||v.get("WEBGL_color_buffer_float"))||1016===c&&($.isWebGL2?v.get("EXT_color_buffer_float"):v.get("EXT_color_buffer_half_float"))?36053===tR.checkFramebufferStatus(36160)?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&tR.readPixels(e,n,i,r,F.convert(l),F.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&tR.bindFramebuffer(36160,ti)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i);i=Math.floor(e.image.height*i);var a=F.convert(e.format);b.setTexture2D(e,0),tR.copyTexImage2D(3553,n,a,t.x,t.y,r,i,0),y.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,a=e.image.height,o=F.convert(n.format),s=F.convert(n.type);b.setTexture2D(n,0),e.isDataTexture?tR.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?tR.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):tR.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&tR.generateMipmap(3553),y.unbindTexture()},this.initTexture=function(t){b.setTexture2D(t,0),y.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))},t.WebGLUtils=ey,t.WireframeGeometry=eG,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new eN(new eG(t.geometry),new eF({color:void 0!==e?e:16777215}))}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(t){"use strict";var e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function n(t){f=document,m=window,(v=v||t||m.gsap||console.warn("Please gsap.registerPlugin(SplitText)"))&&(y=v.utils.toArray,$=v.core.context||function(){},g=1)}function i(t){return m.getComputedStyle(t)}function r(t){return"absolute"===t.position||!0===t.absolute}function a(t,e){for(var n,i=e.length;-1<--i;)if(n=e[i],t.substr(0,n.length)===n)return n.length}function o(t,e){void 0===t&&(t="");var n=~t.indexOf("++"),i=1;return n&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(n?i++:"")+"'>":">")}}function s(t,e,n){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)s(t,e,n);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(e).join(n))}function u(t,e){for(var n=e.length;-1<--n;)t.push(e[n])}function l(t,e,n){for(var i;t&&t!==e;){if(i=t._next||t.nextSibling)return i.textContent.charAt(0)===n;t=t.parentNode||t._parent}}function c(t){var e,n,i=y(t.childNodes),r=i.length;for(e=0;e<r;e++)(n=i[e])._isSplit?c(n):e&&n.previousSibling&&3===n.previousSibling.nodeType?(n.previousSibling.nodeValue+=3===n.nodeType?n.nodeValue:n.firstChild.nodeValue,t.removeChild(n)):3!==n.nodeType&&(t.insertBefore(n.firstChild,n),t.removeChild(n))}function h(t,e){return parseFloat(e[t])||0}function p(t,e,n,a,o,p,d){var m,g,v,$,y,x,_,b,w,S,D,M,E=i(t),T=h("paddingLeft",E),C=-999,A=h("borderBottomWidth",E)+h("borderTopWidth",E),L=h("borderLeftWidth",E)+h("borderRightWidth",E),P=h("paddingTop",E)+h("paddingBottom",E),R=h("paddingLeft",E)+h("paddingRight",E),F=h("fontSize",E)*(e.lineThreshold||.2),N=E.textAlign,I=[],z=[],B=[],O=e.wordDelimiter||" ",U=e.tag?e.tag:e.span?"span":"div",k=e.type||e.split||"chars,words,lines",G=o&&~k.indexOf("lines")?[]:null,H=~k.indexOf("words"),V=~k.indexOf("chars"),W=r(e),j=e.linesClass,q=~(j||"").indexOf("++"),X=[],Y="flex"===E.display,Z=t.style.display;for(q&&(j=j.split("++").join("")),Y&&(t.style.display="block"),v=(g=t.getElementsByTagName("*")).length,y=[],m=0;m<v;m++)y[m]=g[m];if(G||W)for(m=0;m<v;m++)((x=($=y[m]).parentNode===t)||W||V&&!H)&&(M=$.offsetTop,G&&x&&Math.abs(M-C)>F&&("BR"!==$.nodeName||0===m)&&(_=[],G.push(_),C=M),W&&($._x=$.offsetLeft,$._y=M,$._w=$.offsetWidth,$._h=$.offsetHeight),G&&(($._isSplit&&x||!V&&x||H&&x||!H&&$.parentNode.parentNode===t&&!$.parentNode._isSplit)&&(_.push($),$._x-=T,l($,t,O)&&($._wordEnd=!0)),"BR"===$.nodeName&&($.nextSibling&&"BR"===$.nextSibling.nodeName||0===m)&&G.push([])));for(m=0;m<v;m++)if(x=($=y[m]).parentNode===t,"BR"!==$.nodeName){if(W&&(w=$.style,H||x||($._x+=$.parentNode._x,$._y+=$.parentNode._y),w.left=$._x+"px",w.top=$._y+"px",w.position="absolute",w.display="block",w.width=$._w+1+"px",w.height=$._h+"px"),!H&&V){if($._isSplit)for($._next=g=$.nextSibling,$.parentNode.appendChild($);g&&3===g.nodeType&&" "===g.textContent;)$._next=g.nextSibling,$.parentNode.appendChild(g),g=g.nextSibling;else $.parentNode._isSplit?($._parent=$.parentNode,!$.previousSibling&&$.firstChild&&($.firstChild._isFirst=!0),$.nextSibling&&" "===$.nextSibling.textContent&&!$.nextSibling.nextSibling&&X.push($.nextSibling),$._next=$.nextSibling&&$.nextSibling._isFirst?null:$.nextSibling,$.parentNode.removeChild($),y.splice(m--,1),v--):x||(M=!$.nextSibling&&l($.parentNode,t,O),$.parentNode._parent&&$.parentNode._parent.appendChild($),M&&$.parentNode.appendChild(f.createTextNode(" ")),"span"===U&&($.style.display="inline"),I.push($))}else $.parentNode._isSplit&&!$._isSplit&&""!==$.innerHTML?z.push($):V&&!$._isSplit&&("span"===U&&($.style.display="inline"),I.push($))}else G||W?($.parentNode&&$.parentNode.removeChild($),y.splice(m--,1),v--):H||t.appendChild($);for(m=X.length;-1<--m;)X[m].parentNode.removeChild(X[m]);if(G){for(W&&(S=f.createElement(U),t.appendChild(S),D=S.offsetWidth+"px",M=S.offsetParent===t?0:t.offsetLeft,t.removeChild(S)),w=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(b=" "===O&&(!W||!H&&!V),m=0;m<G.length;m++){for(_=G[m],(S=f.createElement(U)).style.cssText="display:block;text-align:"+N+";position:"+(W?"absolute;":"relative;"),j&&(S.className=j+(q?m+1:"")),B.push(S),v=_.length,g=0;g<v;g++)"BR"!==_[g].nodeName&&($=_[g],S.appendChild($),b&&$._wordEnd&&S.appendChild(f.createTextNode(" ")),W&&(0===g&&(S.style.top=$._y+"px",S.style.left=T+M+"px"),$.style.top="0px",M&&($.style.left=$._x-M+"px")));0===v?S.innerHTML="&nbsp;":H||V||(c(S),s(S,"\xa0"," ")),W&&(S.style.width=D,S.style.height=$._h+"px"),t.appendChild(S)}t.style.cssText=w}W&&(d>t.clientHeight&&(t.style.height=d-P+"px",t.clientHeight<d&&(t.style.height=d+A+"px")),p>t.clientWidth&&(t.style.width=p-R+"px",t.clientWidth<p&&(t.style.width=p+L+"px"))),Y&&(Z?t.style.display=Z:t.style.removeProperty("display")),u(n,I),H&&u(a,z),u(o,B)}function d(t,n,o,u){var l,c,h=y(t.childNodes),p=h.length,m=r(n);if(3!==t.nodeType||1<p){for(n.absolute=!1,l=0;l<p;l++)(c=h[l])._next=c._isFirst=c._parent=c._wordEnd=null,(3!==c.nodeType||/\S+/.test(c.nodeValue))&&(m&&3!==c.nodeType&&"inline"===i(c).display&&(c.style.display="inline-block",c.style.position="relative"),c._isSplit=!0,d(c,n,o,u));return n.absolute=m,void(t._isSplit=!0)}!function t(n,i,o,u){var l,c,h,p,d,m,g,v,$=i.tag?i.tag:i.span?"span":"div",y=~(i.type||i.split||"chars,words,lines").indexOf("chars"),x=r(i),w=i.wordDelimiter||" ",S=" "!==w?"":x?"&#173; ":" ",D="</"+$+">",M=1,E=i.specialChars?"function"==typeof i.specialChars?i.specialChars:a:null,T=f.createElement("div"),C=n.parentNode;for(C.insertBefore(T,n),T.textContent=n.nodeValue,C.removeChild(n),g=-1!==(l=function t(e){var n=e.nodeType,i="";if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=t(e)}else if(3===n||4===n)return e.nodeValue;return i}(n=T)).indexOf("<"),!1!==i.reduceWhiteSpace&&(l=l.replace(b," ").replace(_,"")),g&&(l=l.split("<").join("{{LT}}")),d=l.length,c=(" "===l.charAt(0)?S:"")+o(),h=0;h<d;h++)if(m=l.charAt(h),E&&(v=E(l.substr(h),i.specialChars)))m=l.substr(h,v||1),c+=y&&" "!==m?u()+m+"</"+$+">":m,h+=v-1;else if(m===w&&l.charAt(h-1)!==w&&h){for(c+=M?D:"",M=0;l.charAt(h+1)===w;)c+=S,h++;h===d-1?c+=S:")"!==l.charAt(h+1)&&(c+=S+o(),M=1)}else"{"===m&&"{{LT}}"===l.substr(h,6)?(c+=y?u()+"{{LT}}</"+$+">":"{{LT}}",h+=5):55296<=m.charCodeAt(0)&&56319>=m.charCodeAt(0)||65024<=l.charCodeAt(h+1)&&65039>=l.charCodeAt(h+1)?(p=((l.substr(h,12).split(e)||[])[1]||"").length||2,c+=y&&" "!==m?u()+l.substr(h,p)+"</"+$+">":l.substr(h,p),h+=p-1):c+=y&&" "!==m?u()+m+"</"+$+">":m;n.outerHTML=c+(M?D:""),g&&s(C,"{{LT}}","<")}(t,n,o,u)}var f,m,g,v,$,y,x,_=/(?:\r|\n|\t\t)/g,b=/(?:\s\s+)/g,w=((x=S.prototype).split=function t(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var n,i,r,a=this.elements.length,s=e.tag?e.tag:e.span?"span":"div",u=o(e.wordsClass,s),l=o(e.charsClass,s);-1<--a;)r=this.elements[a],this._originals[a]=r.innerHTML,n=r.clientHeight,i=r.clientWidth,d(r,e,u,l),p(r,e,this.chars,this.words,this.lines,i,n);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},x.revert=function t(){var e=this._originals;if(!e)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(t,n){return t.innerHTML=e[n]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},S.create=function t(e,n){return new S(e,n)},S);function S(t,e){g||n(),this.elements=y(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},$(this),this.split(e)}w.version="3.12.2",w.register=n,t.SplitText=w,t.default=w,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}),function(t,e){"function"==typeof define&&define.amd?define(["ScrollMagic","TweenMax","TimelineMax"],e):"object"==typeof exports?(require("gsap"),e(require("scrollmagic"),TweenMax,TimelineMax)):e(t.ScrollMagic||t.jQuery&&t.jQuery.ScrollMagic,t.TweenMax||t.TweenLite,t.TimelineMax||t.TimelineLite)}(this,function(t,e,n){"use strict";t.Scene.addOption("tweenChanges",!1,function(t){return!!t}),t.Scene.extend(function(){var t,i=this;i.on("progress.plugin_gsap",function(){r()}),i.on("destroy.plugin_gsap",function(t){i.removeTween(t.reset)});var r=function(){if(t){var e=i.progress(),n=i.state();t.repeat&&-1===t.repeat()?"DURING"===n&&t.paused()?t.play():"DURING"===n||t.paused()||t.pause():e!=t.progress()&&(0===i.duration()?0<e?t.play():t.reverse():i.tweenChanges()&&t.tweenTo?t.tweenTo(e*t.duration()):t.progress(e).pause())}};i.setTween=function(a,o,s){var u;1<arguments.length&&(arguments.length<3&&(s=o,o=1),a=e.to(a,o,s));try{(u=n?new n({smoothChildTiming:!0}).add(a):a).pause()}catch(l){return i}return t&&i.removeTween(),t=u,a.repeat&&-1===a.repeat()&&(t.repeat(-1),t.yoyo(a.yoyo())),r(),i},i.removeTween=function(e){return t&&(e&&t.progress(0).pause(),t.kill(),t=void 0),i}})}),function(t,e){"function"==typeof define&&define.amd?define(["ScrollMagic","jquery"],e):"object"==typeof exports?e(require("scrollmagic"),require("jquery")):e(t.ScrollMagic,t.jQuery)}(this,function(t,e){"use strict";t._util.get.elements=function(t){return e(t).toArray()},t._util.addClass=function(t,n){e(t).addClass(n)},t._util.removeClass=function(t,n){e(t).removeClass(n)},e.ScrollMagic=t}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.submitButton=e.currentTarget,t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function i(){var i,r;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),!n.settings.submitHandler||(r=n.settings.submitHandler.call(n,n.currentForm,e),i&&i.remove(),void 0!==r&&r)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)}))),n},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each(function(){(e=n.element(this)&&e)||(i=i.concat(n.errorList))}),n.errorList=i),e},rules:function(e,n){var i,r,a,o,s,u,l=this[0];if(null!=l&&(!l.form&&l.hasAttribute("contenteditable")&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(e)switch(r=(i=t.data(l.form,"validator").settings).rules,a=t.validator.staticRules(l),e){case"add":t.extend(a,t.validator.normalizeRule(n)),delete a.messages,r[l.name]=a,n.messages&&(i.messages[l.name]=t.extend(i.messages[l.name],n.messages));break;case"remove":return n?(u={},t.each(n.split(/\s/),function(t,e){u[e]=a[e],delete a[e]}),u):(delete r[l.name],a)}return(o=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l)).required&&(s=o.required,delete o.required,o=t.extend({required:s},o)),o.remote&&(s=o.remote,delete o.remote,o=t.extend(o,{remote:s})),o}}}),t.extend(t.expr.pseudos||t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(void 0===n||(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(RegExp("\\{"+t+"\\}","g"),function(){return n})})),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=t(this).attr("name"));var n=t.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),r=n.settings;r[i]&&!t(this).is(r.ignore)&&r[i].call(n,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,r=this.clean(e),a=this.validationTargetFor(r),o=this,s=!0;return void 0===a?delete this.invalid[r.name]:(this.prepareElement(a),this.currentElements=t(a),(i=this.groups[a.name])&&t.each(this.groups,function(t,e){e===i&&t!==a.name&&(r=o.validationTargetFor(o.clean(o.findByName(t))))&&r.name in o.invalid&&(o.currentElements.push(r),s=o.check(r)&&s)}),n=!1!==this.check(a),s=s&&n,n?this.invalid[a.name]=!1:this.invalid[a.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),s},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=i),!(i in n||!e.objectLength(t(this).rules()))&&(n[i]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,r=t(e),a=e.type;return"radio"===a||"checkbox"===a?this.findByName(e.name).filter(":checked").val():"number"===a&&void 0!==e.validity?e.validity.badInput?"NaN":r.val():(n=e.hasAttribute("contenteditable")?r.text():r.val(),"file"===a?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("https://artemsemkin.com/"))>=0?n.substr(i+1):(i=n.lastIndexOf("\\"))>=0?n.substr(i+1):n:"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,a,o=t(e).rules(),s=t.map(o,function(t,e){return e}).length,u=!1,l=this.elementValue(e);if("function"==typeof o.normalizer?a=o.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a){if("string"!=typeof(l=a.call(e,l)))throw TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){r={method:i,parameters:o[i]};try{if(n=t.validator.methods[i].call(this,l,e,r.parameters),"dependency-mismatch"===n&&1===s){u=!0;continue}if(u=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",c),c instanceof TypeError&&(c.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),c}}if(!u)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,r,a,o,s=this.errorsFor(e),u=this.idOrName(e),l=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(i=s=t("<"+this.settings.errorElement+">").attr("id",u+"-error").addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),s.is("label")?s.attr("for",u):0===s.parents("label[for='"+this.escapeCssMeta(u)+"']").length&&(a=s.attr("id"),l?l.match(RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(l+=" "+a):l=a,t(e).attr("aria-describedby",l),(r=this.groups[e.name])&&(o=this,t.each(o.groups,function(e,n){n===r&&t("[name='"+o.escapeCssMeta(e)+"']",o.currentForm).attr("aria-describedby",s.attr("id"))})))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.submitButton&&t("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&isNaN(i=Number(i))&&(i=void 0),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(""===(i=e.getAttribute(n))&&(i=!0),i=!!i):i=a.attr(n),this.normalizeAttributeRule(r,o,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)i=a.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(r,o,n,i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,r){if(!1===r)return void delete e[i];if(r.param||r.depends){var a=!0;switch(typeof r.depends){case"string":a=!!t(r.depends,n.form).length;break;case"function":a=r.depends.call(n,n)}a?e[i]=void 0===r.param||r.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}),t.each(e,function(i,r){e[i]=t.isFunction(r)&&"normalizer"!==i?r(n):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e}})});