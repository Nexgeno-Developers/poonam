/*!
 * GSAP 3.12.2
 * https://greensock.com
 * 
 * @license Copyright 2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return"string"==typeof t}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return void 0===t}function s(t){return"object"==typeof t}function u(t){return!1!==t}function l(){return"undefined"!=typeof window}function c(t){return r(t)||i(t)}function h(t){return(Dt=Me(t,he))&&kn}function p(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function d(t,e){return!e&&console.warn(t)}function f(t,e){return t&&(he[t]=e)&&Dt&&(Dt[t]=e)||he}function m(){return 0}function g(t){var e,n,i=t[0];if(s(i)||r(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=be.length;n--&&!be[n].targetTest(i););e=be[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ye(t[n],e)))||t.splice(n,1);return t}function v(t){return t._gsap||g(Le(t))[0]._gsap}function y(t,e,n){return(n=t[e])&&r(n)?t[e]():o(n)&&t.getAttribute&&t.getAttribute(e)||n}function x(t,e){return(t=t.split(",")).forEach(e)||t}function _(t){return Math.round(1e5*t)/1e5||0}function b(t){return Math.round(1e7*t)/1e7||0}function w(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i}function M(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n}function S(){var t,e,n=ge.length,i=ge.slice(0);for(ve={},t=ge.length=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function D(t,e,n,i){ge.length&&!xt&&S(),t.render(e,n,i||xt&&e<0&&(t._initted||t._startAt)),ge.length&&!xt&&S()}function E(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(le).length<2?e:i(t)?t.trim():t}function T(t){return t}function A(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}function C(t,e){for(var n in e)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=s(e[n])?C(t[n]||(t[n]={}),e[n]):e[n]);return t}function L(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i}function P(t){var e=t.parent||bt,n=t.keyframes?function(t){return function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}}(ie(t.keyframes)):A;if(u(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t}function F(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,o=t[i];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e}function R(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null}function O(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0}function N(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t}function I(t,e,n,i){return t._startAt&&(xt?t._startAt.revert(de):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))}function z(t){return t._repeat?Se(t._tTime,t=t.duration()+t._rDelay)*t:0}function B(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function U(t){return t._end=b(t._start+(t._tDur/Math.abs(t._ts||t._rts||Zt)||0))}function k(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=b(n._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),U(t),n._dirty||N(n,t)),t}function G(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=B(t.rawTime(),e),(!e._dur||Ae(0,e.totalDuration(),n)-e._tTime>Zt)&&e.render(n,!0)),N(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Zt}}function H(t,e,n,i){return e.parent&&O(e),e._start=b((a(n)?n:n||t!==bt?Te(t,n,e):t._time)+e._delay),e._end=b(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),F(t,e,"_first","_last",t._sort?"_start":0),De(e)||(t._recent=e),i||G(t,e),t._ts<0&&k(t,t._tTime),t}function V(t,e){return(he.ScrollTrigger||p("scrollTrigger",e))&&he.ScrollTrigger.create(e,t)}function j(t,e,n,i,r){return rn(t,e,r),t._initted?!n&&t._pt&&!xt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Tt!==Be.frame?(ge.push(t),t._lazy=[r,i],1):void 0:1}function W(t,e,n,i){var r=t._repeat,a=b(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:b(a*(r+1)+t._rDelay*r):a,0<o&&!i&&k(t,t._tTime=t._tDur*o),t.parent&&U(t),n||N(t.parent,t),t}function q(t){return t instanceof Ke?N(t):W(t,t._dur)}function X(t,e,n){var i,r,o=a(e[1]),s=(o?2:1)+(t<2?0:1),l=e[s];if(o&&(l.duration=e[1]),l.parent=n,t){for(i=l,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=u(r.vars.inherit)&&r.parent;l.immediateRender=u(i.immediateRender),t<2?l.runBackwards=1:l.startAt=e[s-1]}return new un(e[0],l,e[1+s])}function Y(t,e){return t||0===t?e(t):e}function Z(t,e){return i(t)&&(e=ce.exec(t))?e[1]:""}function J(t,e){return t&&s(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&s(t[0]))&&!t.nodeType&&t!==wt}function K(t){return t=Le(t)[0]||d("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Le(e,n.querySelectorAll?n:n===t?d("Invalid scope")||St.createElement("div"):t)}}function Q(t){return t.sort((function(){return.5-Math.random()}))}function $(t){if(r(t))return t;var e=s(t)?t:{each:t},n=je(e.ease),a=e.from||0,o=parseFloat(e.base)||0,u={},l=0<a&&a<1,c=isNaN(a)||l,h=e.axis,p=a,d=a;return i(a)?p=d={center:.5,edges:.5,end:1}[a]||0:!l&&c&&(p=a[0],d=a[1]),function(t,i,r){var s,l,f,m,g,v,y,x,_,w=(r||e).length,M=u[w];if(!M){if(!(_="auto"===e.grid?0:(e.grid||[1,Yt])[1])){for(y=-Yt;y<(y=r[_++].getBoundingClientRect().left)&&_<w;);_--}for(M=u[w]=[],s=c?Math.min(_,w)*p-.5:a%_,l=_===Yt?0:c?w*d/_-.5:a/_|0,x=Yt,v=y=0;v<w;v++)f=v%_-s,m=l-(v/_|0),M[v]=g=h?Math.abs("y"===h?m:f):$t(f*f+m*m),y<g&&(y=g),g<x&&(x=g);"random"===a&&Q(M),M.max=y-x,M.min=x,M.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(w<_?w-1:h?"y"===h?w/_:_:Math.max(_,w/_))||0)*("edges"===a?-1:1),M.b=w<0?o-w:o,M.u=Z(e.amount||e.each)||0,n=n&&w<0?Ve(n):n}return w=(M[t]-M.min)/M.max||0,b(M.b+(n?n(w):w)*M.v)+M.u}}function tt(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=b(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(a(n)?0:Z(n))}}function et(t,e){var n,i,o=ie(t);return!o&&s(t)&&(n=o=t.radius||Yt,t.values?(t=Le(t.values),(i=!a(t[0]))&&(n*=n)):t=tt(t.increment)),Y(e,o?r(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,o,s=parseFloat(i?e.x:e),u=parseFloat(i?e.y:0),l=Yt,c=0,h=t.length;h--;)(r=i?(r=t[h].x-s)*r+(o=t[h].y-u)*o:Math.abs(t[h]-s))<l&&(l=r,c=h);return c=!n||l<=n?t[c]:e,i||c===e||a(e)?c:c+Z(e)}:tt(t))}function nt(t,e,n,i){return Y(ie(t)?!e:!0===n?!!(n=0):!i,(function(){return ie(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))}function it(t,e,n){return Y(n,(function(n){return t[~~e(n)]}))}function rt(t){for(var e,n,i,r,a=0,o="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?le:re),o+=t.substr(a,e-a)+nt(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),a=i+1;return o+t.substr(a,t.length-a)}function at(t,e,n){var i,r,a,o=t.labels,s=Yt;for(i in o)(r=o[i]-e)<0==!!n&&r&&s>(r=Math.abs(r))&&(a=i,s=r);return a}function ot(t){return O(t),t.scrollTrigger&&t.scrollTrigger.kill(!!xt),t.progress()<1&&Fe(t,"onInterrupt"),t}function st(t){if(l()&&t){var e=(t=!t.name&&t.default||t).name,n=r(t),i=e&&!n&&t.init?function(){this._props=[]}:t,a={init:m,render:yn,add:nn,kill:_n,modifier:xn,rawVars:0},o={targetTest:0,get:0,getSetter:fn,aliases:{},register:0};if(Ue(),t!==i){if(ye[e])return;A(i,A(L(t,a),o)),Me(i.prototype,Me(a,L(t,o))),ye[i.prop=e]=i,t.targetTest&&(be.push(i),me[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}f(e,i),t.register&&t.register(kn,i,wn)}else t&&Re.push(t)}function ut(t,e,n){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Oe+.5|0}function lt(t,e,n){var i,r,o,s,u,l,c,h,p,d,f=t?a(t)?[t>>16,t>>8&Oe,t&Oe]:0:Ne.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ne[t])f=Ne[t];else if("#"===t.charAt(0)){if(t.length<6&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(o=t.charAt(3))+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&Oe,f&Oe,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&Oe,t&Oe]}else if("hsl"===t.substr(0,3))if(f=d=t.match(re),e){if(~t.indexOf("="))return f=t.match(ae),n&&f.length<4&&(f[3]=1),f}else s=+f[0]%360/360,u=f[1]/100,i=2*(l=f[2]/100)-(r=l<=.5?l*(u+1):l+u-l*u),3<f.length&&(f[3]*=1),f[0]=ut(s+1/3,i,r),f[1]=ut(s,i,r),f[2]=ut(s-1/3,i,r);else f=t.match(re)||Ne.transparent;f=f.map(Number)}return e&&!d&&(i=f[0]/Oe,r=f[1]/Oe,o=f[2]/Oe,l=((c=Math.max(i,r,o))+(h=Math.min(i,r,o)))/2,c===h?s=u=0:(p=c-h,u=.5<l?p/(2-c-h):p/(c+h),s=c===i?(r-o)/p+(r<o?6:0):c===r?(o-i)/p+2:(i-r)/p+4,s*=60),f[0]=~~(s+.5),f[1]=~~(100*u+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f}function ct(t){var e=[],n=[],i=-1;return t.split(Ie).forEach((function(t){var r=t.match(oe)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e}function ht(t,e,n){var i,r,a,o,s="",u=(t+s).match(Ie),l=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map((function(t){return(t=lt(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(a=ct(t),(i=n.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(Ie,"1").split(oe)).length-1;c<o;c++)s+=r[c]+(~i.indexOf(c)?u.shift()||l+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!r)for(o=(r=t.split(Ie)).length-1;c<o;c++)s+=r[c]+u[c];return s+r[o]}function pt(t){var e,n=t.join(" ");if(Ie.lastIndex=0,Ie.test(n))return e=ze.test(n),t[1]=ht(t[1],e),t[0]=ht(t[0],e,ct(t[1])),!0}function dt(t,e){for(var n,i=t._first;i;)i instanceof Ke?dt(i,e):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===e||(i.timeline?dt(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next}function ft(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return x(t,(function(t){for(var e in ke[t]=he[t]=a,ke[r=t.toLowerCase()]=n,a)ke[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=ke[t+"."+e]=a[e]})),a}function mt(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function gt(t,e,n){function i(t){return 1===t?1:r*Math.pow(2,-10*t)*ee((t-o)*a)+1}var r=1<=e?e:1,a=(n||(t?.3:.45))/(e<1?e:1),o=a/Jt*(Math.asin(1/r)||0),s="out"===t?i:"in"===t?function(t){return 1-i(1-t)}:mt(i);return a=Jt/a,s.config=function(e,n){return gt(t,e,n)},s}function vt(t,e){function n(t){return t?--t*t*((e+1)*t+e)+1:0}void 0===e&&(e=1.70158);var i="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:mt(n);return i.config=function(e){return vt(t,e)},i}var yt,xt,_t,bt,wt,Mt,St,Dt,Et,Tt,At,Ct,Lt,Pt,Ft,Rt,Ot,Nt,It,zt,Bt,Ut,kt,Gt,Ht,Vt,jt,Wt,qt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Xt={duration:.5,overwrite:!1,delay:0},Yt=1e8,Zt=1/Yt,Jt=2*Math.PI,Kt=Jt/4,Qt=0,$t=Math.sqrt,te=Math.cos,ee=Math.sin,ne="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ie=Array.isArray,re=/(?:-?\.?\d|\.)+/gi,ae=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,oe=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,se=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ue=/[+-]=-?[.\d]+/,le=/[^,'"\[\]\s]+/gi,ce=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,he={},pe={suppressEvents:!0,isStart:!0,kill:!1},de={suppressEvents:!0,kill:!1},fe={suppressEvents:!0},me={},ge=[],ve={},ye={},xe={},_e=30,be=[],we="",Me=function(t,e){for(var n in e)t[n]=e[n];return t},Se=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},De=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Ee={_start:0,endTime:m,totalDuration:m},Te=function t(e,n,r){var a,o,s,u=e.labels,l=e._recent||Ee,c=e.duration()>=Yt?l.endTime(!1):e._dur;return i(n)&&(isNaN(n)||n in u)?(o=n.charAt(0),s="%"===n.substr(-1),a=n.indexOf("="),"<"===o||">"===o?(0<=a&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(0<=l._repeat))+(parseFloat(n.substr(1))||0)*(s?(a<0?l:r).totalDuration()/100:1)):a<0?(n in u||(u[n]=c),u[n]):(o=parseFloat(n.charAt(a-1)+n.substr(a+1)),s&&r&&(o=o/100*(ie(r)?r[0]:r).totalDuration()),1<a?t(e,n.substr(0,a-1),r)+o:c+o)):null==n?c:+n},Ae=function(t,e,n){return n<t?t:e<n?e:n},Ce=[].slice,Le=function(t,e,n){return _t&&!e&&_t.selector?_t.selector(t):!i(t)||n||!Mt&&Ue()?ie(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){return i(t)&&!e||J(t,1)?n.push.apply(n,Le(t)):n.push(t)}))||n}(t,n):J(t)?Ce.call(t,0):t?[t]:[]:Ce.call((e||St).querySelectorAll(t),0)},Pe=function(t,e,n,i,r){var a=e-t,o=i-n;return Y(r,(function(e){return n+((e-t)/a*o||0)}))},Fe=function(t,e,n){var i,r,a,o=t.vars,s=o[e],u=_t,l=t._ctx;if(s)return i=o[e+"Params"],r=o.callbackScope||t,n&&ge.length&&S(),l&&(_t=l),a=i?s.apply(r,i):s.call(r),_t=u,a},Re=[],Oe=255,Ne={aqua:[0,Oe,Oe],lime:[0,Oe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Oe],navy:[0,0,128],white:[Oe,Oe,Oe],olive:[128,128,0],yellow:[Oe,Oe,0],orange:[Oe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Oe,0,0],pink:[Oe,192,203],cyan:[0,Oe,Oe],transparent:[Oe,Oe,Oe,0]},Ie=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ne)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ze=/hsl[a]?\(/,Be=(It=Date.now,zt=500,Bt=33,Ut=It(),kt=Ut,Ht=Gt=1e3/240,Rt={time:0,frame:0,tick:function(){We(!0)},deltaRatio:function(t){return Ot/(1e3/(t||60))},wake:function(){Et&&(!Mt&&l()&&(wt=Mt=window,St=wt.document||{},he.gsap=kn,(wt.gsapVersions||(wt.gsapVersions=[])).push(kn.version),h(Dt||wt.GreenSockGlobals||!wt.gsap&&wt||{}),Ft=wt.requestAnimationFrame,Re.forEach(st)),Lt&&Rt.sleep(),Pt=Ft||function(t){return setTimeout(t,Ht-1e3*Rt.time+1|0)},Ct=1,We(2))},sleep:function(){(Ft?wt.cancelAnimationFrame:clearTimeout)(Lt),Ct=0,Pt=m},lagSmoothing:function(t,e){zt=t||1/0,Bt=Math.min(e||33,zt)},fps:function(t){Gt=1e3/(t||240),Ht=1e3*Rt.time+Gt},add:function(t,e,n){var i=e?function(e,n,r,a){t(e,n,r,a),Rt.remove(i)}:t;return Rt.remove(t),Vt[n?"unshift":"push"](i),Ue(),i},remove:function(t,e){~(e=Vt.indexOf(t))&&Vt.splice(e,1)&&e<=Nt&&Nt--},_listeners:Vt=[]}),Ue=function(){return!Ct&&Be.wake()},ke={},Ge=/^[\d.\-M][\d.\-,\s]/,He=/["']/g,Ve=function(t){return function(e){return 1-t(1-e)}},je=function(t,e){return t&&(r(t)?t:ke[t]||function(t){var e=(t+"").split("("),n=ke[e[0]];return n&&1<e.length&&n.config?n.config.apply(null,~t.indexOf("{")?[function(t){for(var e,n,i,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)n=a[s],e=s!==u-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(He,"").trim():+i,o=n.substr(e+1).trim();return r}(e[1])]:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",e);return t.substring(e,~i&&i<n?t.indexOf(")",n+1):n)}(t).split(",").map(E)):ke._CE&&Ge.test(t)?ke._CE("",t):n}(t))||e};function We(t){var e,n,i,r,a=It()-kt,o=!0===t;if(zt<a&&(Ut+=a-Bt),(0<(e=(i=(kt+=a)-Ut)-Ht)||o)&&(r=++Rt.frame,Ot=i-1e3*Rt.time,Rt.time=i/=1e3,Ht+=e+(Gt<=e?4:Gt-e),n=1),o||(Lt=Pt(We)),n)for(Nt=0;Nt<Vt.length;Nt++)Vt[Nt](i,Ot,r,t)}function qe(t){return t<Wt?jt*t*t:t<.7272727272727273?jt*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?jt*(t-=2.25/2.75)*t+.9375:jt*Math.pow(t-2.625/2.75,2)+.984375}x("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;ft(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),ke.Linear.easeNone=ke.none=ke.Linear.easeIn,ft("Elastic",gt("in"),gt("out"),gt()),jt=7.5625,Wt=1/2.75,ft("Bounce",(function(t){return 1-qe(1-t)}),qe),ft("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ft("Circ",(function(t){return-($t(1-t*t)-1)})),ft("Sine",(function(t){return 1===t?1:1-te(t*Kt)})),ft("Back",vt("in"),vt("out"),vt()),ke.SteppedEase=ke.steps=he.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*Ae(0,.99999999,t)|0)+r)*n}}},Xt.ease=ke["quad.out"],x("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return we+=t+","+t+"Params,"}));var Xe,Ye=function(t,e){this.id=Qt++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:y,this.set=e?e.getSetter:fn},Ze=((Xe=Je.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Xe.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Xe.totalDuration=function(t){return arguments.length?(this._dirty=0,W(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Xe.totalTime=function(t,e){if(Ue(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(k(this,t),!n._dp||n.parent||G(n,this);n&&n.parent;)n.parent._time!==n._start+(0<=n._ts?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&H(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Zt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),D(this,t,e)),this},Xe.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+z(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},Xe.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Xe.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+z(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Xe.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Se(this._tTime,n)+1:1},Xe.timeScale=function(t){if(!arguments.length)return this._rts===-Zt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?B(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-Zt?0:this._rts,this.totalTime(Ae(-Math.abs(this._delay),this._tDur,e),!0),U(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},Xe.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ue(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Zt&&(this._tTime-=Zt)))),this):this._ps},Xe.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||H(e,this,t-this._delay),this}return this._start},Xe.endTime=function(t){return this._start+(u(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},Xe.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?B(e.rawTime(t),this):this._tTime:this._tTime},Xe.revert=function(t){void 0===t&&(t=fe);var e=xt;return xt=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),xt=e,this},Xe.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(t):n},Xe.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,q(this)):-2===this._repeat?1/0:this._repeat},Xe.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,q(this),e?this.time(e):this}return this._rDelay},Xe.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Xe.seek=function(t,e){return this.totalTime(Te(this,t),u(e))},Xe.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,u(e))},Xe.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Xe.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Xe.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Xe.resume=function(){return this.paused(!1)},Xe.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-Zt:0)),this):this._rts<0},Xe.invalidate=function(){return this._initted=this._act=0,this._zTime=-Zt,this},Xe.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Zt))},Xe.eventCallback=function(t,e,n){var i=this.vars;return 1<arguments.length?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},Xe.then=function(t){var e=this;return new Promise((function(n){function i(){var t=e.then;e.then=null,r(a)&&(a=a(e))&&(a.then||a===e)&&(e.then=t),n(a),e.then=t}var a=r(t)?t:T;e._initted&&1===e.totalProgress()&&0<=e._ts||!e._tTime&&e._ts<0?i():e._prom=i}))},Xe.kill=function(){ot(this)},Je);function Je(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,W(this,+t.duration,1,1),this.data=t.data,_t&&(this._ctx=_t).data.push(this),Ct||Be.wake()}A(Ze.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Zt,_prom:0,_ps:!1,_rts:1});var Ke=function(t){function o(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=u(e.sortChildren),bt&&H(e.parent||bt,n(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&V(n(r),e.scrollTrigger),r}e(o,t);var s=o.prototype;return s.to=function(t,e,n){return X(0,arguments,this),this},s.from=function(t,e,n){return X(1,arguments,this),this},s.fromTo=function(t,e,n,i){return X(2,arguments,this),this},s.set=function(t,e,n){return e.duration=0,e.parent=this,P(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new un(t,e,Te(this,n),1),this},s.call=function(t,e,n){return H(this,un.delayedCall(0,t,e),n)},s.staggerTo=function(t,e,n,i,r,a,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new un(t,n,Te(this,r)),this},s.staggerFrom=function(t,e,n,i,r,a,o){return n.runBackwards=1,P(n).immediateRender=u(n.immediateRender),this.staggerTo(t,e,n,i,r,a,o)},s.staggerFromTo=function(t,e,n,i,r,a,o,s){return i.startAt=n,P(i).immediateRender=u(i.immediateRender),this.staggerTo(t,e,i,r,a,o,s)},s.render=function(t,e,n){var i,r,a,o,s,u,l,c,h,p,d,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=t<=0?0:b(t),x=this._zTime<0!=t<0&&(this._initted||!v);if(this!==bt&&g<y&&0<=t&&(y=g),y!==this._tTime||n||x){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),i=y,h=this._start,u=!(c=this._ts),x&&(v||(m=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(d=this._yoyo,s=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,n);if(i=b(y%s),y===g?(o=this._repeat,i=v):((o=~~(y/s))&&o===y/s&&(i=v,o--),v<i&&(i=v)),p=Se(this._tTime,s),!m&&this._tTime&&p!==o&&this._tTime-p*s-this._dur<=0&&(p=o),d&&1&o&&(i=v-i,f=1),o!==p&&!this._lock){var _=d&&1&p,w=_===(d&&1&o);if(o<p&&(_=!_),m=_?0:y%v?v:y,this._lock=1,this.render(m||(f?0:b(o*s)),e,!v)._lock=0,this._tTime=y,!e&&this.parent&&Fe(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||u!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,w&&(this._lock=2,m=_?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;dt(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,n){var i;if(e<n)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,b(m),b(i)))&&(y-=i-(i=l._start)),this._tTime=y,this._time=i,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&!o&&(Fe(this,"onStart"),this._tTime!==y))return this;if(m<=i&&0<=t)for(r=this._first;r;){if(a=r._next,(r._act||i>=r._start)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!u){l=0,a&&(y+=this._zTime=-Zt);break}}r=a}else{r=this._last;for(var M=t<0?t:i;r;){if(a=r._prev,(r._act||M<=r._end)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(M-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(M-r._start)*r._ts,e,n||xt&&(r._initted||r._startAt)),i!==this._time||!this._ts&&!u){l=0,a&&(y+=this._zTime=M?-Zt:Zt);break}}r=a}}if(l&&!e&&(this.pause(),l.render(m<=i?0:-Zt)._zTime=m<=i?1:-1,this._ts))return this._start=h,U(this),this.render(t,e,n);this._onUpdate&&!e&&Fe(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||(!t&&v||!(y===g&&0<this._ts||!y&&this._ts<0)||O(this,1),e||t<0&&!m||!y&&!m&&g||(Fe(this,y===g&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||y<g&&0<this.timeScale()||this._prom())))}return this},s.add=function(t,e){var n=this;if(a(e)||(e=Te(this,e,t)),!(t instanceof Ze)){if(ie(t))return t.forEach((function(t){return n.add(t,e)})),this;if(i(t))return this.addLabel(t,e);if(!r(t))return this;t=un.delayedCall(0,t)}return this!==t?H(this,t,e):this},s.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-Yt);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof un?e&&r.push(a):(n&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,n)))),a=a._next;return r},s.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},s.remove=function(t){return i(t)?this.removeLabel(t):r(t)?this.killTweensOf(t):(R(this,t),t===this._recent&&(this._recent=this._last),N(this))},s.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=b(Be.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},s.addLabel=function(t,e){return this.labels[t]=Te(this,e),this},s.removeLabel=function(t){return delete this.labels[t],this},s.addPause=function(t,e,n){var i=un.delayedCall(0,e||m,n);return i.data="isPause",this._hasPause=1,H(this,i,Te(this,t))},s.removePause=function(t){var e=this._first;for(t=Te(this,t);e;)e._start===t&&"isPause"===e.data&&O(e),e=e._next},s.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)tn!==i[r]&&i[r].kill(t,e);return this},s.getTweensOf=function(t,e){for(var n,i=[],r=Le(t),o=this._first,s=a(e);o;)o instanceof un?M(o._targets,r)&&(s?(!tn||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&i.push(o):(n=o.getTweensOf(r,e)).length&&i.push.apply(i,n),o=o._next;return i},s.tweenTo=function(t,e){e=e||{};var n,i=this,r=Te(i,t),a=e.startAt,o=e.onStart,s=e.onStartParams,u=e.immediateRender,l=un.to(i,A({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||Zt,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());l._dur!==t&&W(l,t,0,1).render(l._time,!0,!0),n=1}o&&o.apply(l,s||[])}},e));return u?l.render(0):l},s.tweenFromTo=function(t,e,n){return this.tweenTo(e,A({startAt:{time:Te(this,t)}},n))},s.recent=function(){return this._recent},s.nextLabel=function(t){return void 0===t&&(t=this._time),at(this,Te(this,t))},s.previousLabel=function(t){return void 0===t&&(t=this._time),at(this,Te(this,t),1)},s.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Zt)},s.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return N(this)},s.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},s.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),N(this)},s.totalDuration=function(t){var e,n,i,r=0,a=this,o=a._last,s=Yt;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(i=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),s<(n=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,H(a,o,n-o._delay,1)._lock=0):s=n,n<0&&o._ts&&(r-=n,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-1/0),s=0),o._end>r&&o._ts&&(r=o._end),o=e;W(a,a===bt&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},o.updateRoot=function(t){if(bt._ts&&(D(bt,B(t,bt)),Tt=Be.frame),Be.frame>=_e){_e+=qt.autoSleep||120;var e=bt._first;if((!e||!e._ts)&&qt.autoSleep&&Be._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Be.sleep()}}},o}(Ze);function Qe(t,e,n,a,o,u){var l,c,h,p;if(ye[t]&&!1!==(l=new ye[t]).init(o,l.rawVars?e[t]:function(t,e,n,a,o){if(r(t)&&(t=an(t,o,e,n,a)),!s(t)||t.style&&t.nodeType||ie(t)||ne(t))return i(t)?an(t,o,e,n,a):t;var u,l={};for(u in t)l[u]=an(t[u],o,e,n,a);return l}(e[t],a,o,u,n),n,a,u)&&(n._pt=c=new wn(n._pt,o,t,0,1,l.render,l,0,l.priority),n!==At))for(h=n._ptLookup[n._targets.indexOf(o)],p=l._props.length;p--;)h[l._props[p]]=c;return l}function $e(t,e,n,i){var r,a,o=e.ease||i||"power1.inOut";if(ie(e))a=n[t]||(n[t]=[]),e.forEach((function(t,n){return a.push({t:n/(e.length-1)*100,v:t,e:o})}));else for(r in e)a=n[r]||(n[r]=[]),"ease"===r||a.push({t:parseFloat(t),v:e[r],e:o})}A(Ke.prototype,{_lock:0,_hasPause:0,_forcing:0});var tn,en,nn=function(t,e,n,a,o,s,u,l,c,h){r(a)&&(a=a(o||0,t,s));var d,f=t[e],m="get"!==n?n:r(f)?c?t[e.indexOf("set")||!r(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():f,g=r(f)?c?dn:pn:hn;if(i(a)&&(~a.indexOf("random(")&&(a=rt(a)),"="===a.charAt(1)&&(!(d=w(m,a)+(Z(m)||0))&&0!==d||(a=d))),!h||m!==a||en)return isNaN(m*a)||""===a?(f||e in t||p(e,a),function(t,e,n,i,r,a,o){var s,u,l,c,h,p,d,f,m=new wn(this._pt,t,e,0,1,vn,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(d=~(i+="").indexOf("random("))&&(i=rt(i)),a&&(a(f=[n,i],t,e),n=f[0],i=f[1]),u=n.match(se)||[];s=se.exec(i);)c=s[0],h=i.substring(g,s.index),l?l=(l+1)%5:"rgba("===h.substr(-5)&&(l=1),c!==u[v++]&&(p=parseFloat(u[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:p,c:"="===c.charAt(1)?w(p,c)-p:parseFloat(c)-p,m:l&&l<4?Math.round:0},g=se.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=o,(ue.test(i)||d)&&(m.e=0),this._pt=m}.call(this,t,e,m,a,g,l||qt.stringFilter,c)):(d=new wn(this._pt,t,e,+m||0,a-(m||0),"boolean"==typeof f?gn:mn,0,g),c&&(d.fp=c),u&&d.modifier(u,this,t),this._pt=d)},rn=function t(e,n,i){var r,a,o,s,l,c,h,p,d,f,m,y,x,_=e.vars,b=_.ease,w=_.startAt,M=_.immediateRender,D=_.lazy,E=_.onUpdate,T=_.onUpdateParams,C=_.callbackScope,P=_.runBackwards,F=_.yoyoEase,R=_.keyframes,N=_.autoRevert,I=e._dur,z=e._startAt,B=e._targets,U=e.parent,k=U&&"nested"===U.data?U.vars.targets:B,G="auto"===e._overwrite&&!yt,H=e.timeline;if(!H||R&&b||(b="none"),e._ease=je(b,Xt.ease),e._yEase=F?Ve(je(!0===F?b:F,Xt.ease)):0,F&&e._yoyo&&!e._repeat&&(F=e._yEase,e._yEase=e._ease,e._ease=F),e._from=!H&&!!_.runBackwards,!H||R&&!_.stagger){if(y=(p=B[0]?v(B[0]).harness:0)&&_[p.prop],r=L(_,me),z&&(z._zTime<0&&z.progress(1),n<0&&P&&M&&!N?z.render(-1,!0):z.revert(P&&I?de:pe),z._lazy=0),w){if(O(e._startAt=un.set(B,A({data:"isStart",overwrite:!1,parent:U,immediateRender:!0,lazy:!z&&u(D),startAt:null,delay:0,onUpdate:E,onUpdateParams:T,callbackScope:C,stagger:0},w))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(xt||!M&&!N)&&e._startAt.revert(de),M&&I&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(P&&I&&!z)if(n&&(M=!1),o=A({overwrite:!1,data:"isFromStart",lazy:M&&!z&&u(D),immediateRender:M,stagger:0,parent:U},r),y&&(o[p.prop]=y),O(e._startAt=un.set(B,o)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(xt?e._startAt.revert(de):e._startAt.render(-1,!0)),e._zTime=n,M){if(!n)return}else t(e._startAt,Zt,Zt);for(e._pt=e._ptCache=0,D=I&&u(D)||D&&!I,a=0;a<B.length;a++){if(h=(l=B[a])._gsap||g(B)[a]._gsap,e._ptLookup[a]=f={},ve[h.id]&&ge.length&&S(),m=k===B?a:k.indexOf(l),p&&!1!==(d=new p).init(l,y||r,e,m,k)&&(e._pt=s=new wn(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){f[t]=s})),d.priority&&(c=1)),!p||y)for(o in r)ye[o]&&(d=Qe(o,r,e,m,l,k))?d.priority&&(c=1):f[o]=s=nn.call(e,l,o,"get",r[o],m,k,0,_.stringFilter);e._op&&e._op[a]&&e.kill(l,e._op[a]),G&&e._pt&&(tn=e,bt.killTweensOf(l,f,e.globalTime(n)),x=!e.parent,tn=0),e._pt&&D&&(ve[h.id]=1)}c&&bn(e),e._onInit&&e._onInit(e)}e._onUpdate=E,e._initted=(!e._op||e._pt)&&!x,R&&n<=0&&H.render(Yt,!0,!0)},an=function(t,e,n,a,o){return r(t)?t.call(e,n,a,o):i(t)&&~t.indexOf("random(")?rt(t):t},on=we+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",sn={};x(on+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return sn[t]=1}));var un=function(t){function r(e,i,r,o){var l;"number"==typeof i&&(r.duration=i,i=r,r=null);var h,p,f,m,v,y,x,_,w=(l=t.call(this,o?i:P(i))||this).vars,M=w.duration,S=w.delay,D=w.immediateRender,E=w.stagger,T=w.overwrite,C=w.keyframes,F=w.defaults,R=w.scrollTrigger,O=w.yoyoEase,N=i.parent||bt,I=(ie(e)||ne(e)?a(e[0]):"length"in i)?[e]:Le(e);if(l._targets=I.length?g(I):d("GSAP target "+e+" not found. https://greensock.com",!qt.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=T,C||E||c(M)||c(S)){if(i=l.vars,(h=l.timeline=new Ke({data:"nested",defaults:F||{},targets:N&&"nested"===N.data?N.vars.targets:I})).kill(),h.parent=h._dp=n(l),h._start=0,E||c(M)||c(S)){if(m=I.length,x=E&&$(E),s(E))for(v in E)~on.indexOf(v)&&((_=_||{})[v]=E[v]);for(p=0;p<m;p++)(f=L(i,sn)).stagger=0,O&&(f.yoyoEase=O),_&&Me(f,_),y=I[p],f.duration=+an(M,n(l),p,y,I),f.delay=(+an(S,n(l),p,y,I)||0)-l._delay,!E&&1===m&&f.delay&&(l._delay=S=f.delay,l._start+=S,f.delay=0),h.to(y,f,x?x(p,y,I):0),h._ease=ke.none;h.duration()?M=S=0:l.timeline=0}else if(C){P(A(h.vars.defaults,{ease:"none"})),h._ease=je(C.ease||i.ease||"none");var z,B,U,k=0;if(ie(C))C.forEach((function(t){return h.to(I,t,">")})),h.duration();else{for(v in f={},C)"ease"===v||"easeEach"===v||$e(v,C[v],f,C.easeEach);for(v in f)for(z=f[v].sort((function(t,e){return t.t-e.t})),p=k=0;p<z.length;p++)(U={ease:(B=z[p]).e,duration:(B.t-(p?z[p-1].t:0))/100*M})[v]=B.v,h.to(I,U,k),k+=U.duration;h.duration()<M&&h.to({},{duration:M-h.duration()})}}M||l.duration(M=h.duration())}else l.timeline=0;return!0!==T||yt||(tn=n(l),bt.killTweensOf(I),tn=0),H(N,n(l),r),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(D||!M&&!C&&l._start===b(N._time)&&u(D)&&function t(e){return!e||e._ts&&t(e.parent)}(n(l))&&"nested"!==N.data)&&(l._tTime=-Zt,l.render(Math.max(0,-S)||0)),R&&V(n(l),R),l}e(r,t);var o=r.prototype;return o.render=function(t,e,n){var i,r,a,o,s,u,l,c,h,p=this._time,d=this._tDur,f=this._dur,m=t<0,g=d-Zt<t&&!m?d:t<Zt?0:t;if(f){if(g!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=m){if(i=g,c=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*o+t,e,n);if(i=b(g%o),g===d?(a=this._repeat,i=f):((a=~~(g/o))&&a===g/o&&(i=f,a--),f<i&&(i=f)),(u=this._yoyo&&1&a)&&(h=this._yEase,i=f-i),s=Se(this._tTime,o),i===p&&!n&&this._initted)return this._tTime=g,this;a!==s&&(c&&this._yEase&&dt(c,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(b(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(j(this,m?t:i,n,e,g))return this._tTime=0,this;if(p!==this._time)return this;if(f!==this._dur)return this.render(t,e,n)}if(this._tTime=g,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(h||this._ease)(i/f),this._from&&(this.ratio=l=1-l),i&&!p&&!e&&!a&&(Fe(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(l,r.d),r=r._next;c&&c.render(t<0?t:!i&&u?-Zt:c._dur*c._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&I(this,t,0,n),Fe(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&Fe(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&I(this,t,0,!0),!t&&f||!(g===this._tDur&&0<this._ts||!g&&this._ts<0)||O(this,1),e||m&&!p||!(g||p||u)||(Fe(this,g===d?"onComplete":"onReverseComplete",!0),!this._prom||g<d&&0<this.timeScale()||this._prom()))}}else!function(t,e,n,i){var r,a,o,s=t.ratio,u=e<0||!e&&(!t._start&&function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))}(t)&&(t._initted||!De(t))||(t._ts<0||t._dp._ts<0)&&!De(t))?0:1,l=t._rDelay,c=0;if(l&&t._repeat&&(c=Ae(0,t._tDur,e),a=Se(c,l),t._yoyo&&1&a&&(u=1-u),a!==Se(t._tTime,l)&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==s||xt||i||t._zTime===Zt||!e&&t._zTime){if(!t._initted&&j(t,e,i,n,c))return;for(o=t._zTime,t._zTime=e||(n?Zt:0),n=n||e&&!o,t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=c,r=t._pt;r;)r.r(u,r.d),r=r._next;e<0&&I(t,e,0,!0),t._onUpdate&&!n&&Fe(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&Fe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&O(t,1),n||xt||(Fe(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},o.targets=function(){return this._targets},o.invalidate=function(e){return e&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},o.resetTo=function(t,e,n,i){Ct||Be.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||rn(this,r),function(t,e,n,i,r,a,o){var s,u,l,c,h=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!h)for(h=t._ptCache[e]=[],l=t._ptLookup,c=t._targets.length;c--;){if((s=l[c][e])&&s.d&&s.d._pt)for(s=s.d._pt;s&&s.p!==e&&s.fp!==e;)s=s._next;if(!s)return en=1,t.vars[e]="+=0",rn(t,o),en=0,1;h.push(s)}for(c=h.length;c--;)(s=(u=h[c])._pt||u).s=!i&&0!==i||r?s.s+(i||0)+a*s.c:i,s.c=n-s.s,u.e&&(u.e=_(n)+Z(u.e)),u.b&&(u.b=s.s+Z(u.b))}(this,t,e,n,i,this._ease(r/this._dur),r)?this.resetTo(t,e,n,i):(k(this,0),this.parent||F(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},o.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ot(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,tn&&!0!==tn.vars.overwrite)._first||ot(this),this.parent&&n!==this.timeline.totalDuration()&&W(this,this._dur*this.timeline._tDur/n,0,1),this}var r,a,o,s,u,l,c,h=this._targets,p=t?Le(t):h,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(h,p))return"all"===e&&(this._pt=0),ot(this);for(r=this._op=this._op||[],"all"!==e&&(i(e)&&(u={},x(e,(function(t){return u[t]=1})),e=u),e=function(t,e){var n,i,r,a,o=t[0]?v(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(i in n=Me({},e),s)if(i in n)for(r=(a=s[i].split(",")).length;r--;)n[a[r]]=n[i];return n}(h,e)),c=h.length;c--;)if(~p.indexOf(h[c]))for(u in a=d[c],"all"===e?(r[c]=e,s=a,o={}):(o=r[c]=r[c]||{},s=e),s)(l=a&&a[u])&&("kill"in l.d&&!0!==l.d.kill(u)||R(this,l,"_pt"),delete a[u]),"all"!==o&&(o[u]=1);return this._initted&&!this._pt&&f&&ot(this),this},r.to=function(t,e,n){return new r(t,e,n)},r.from=function(t,e){return X(1,arguments)},r.delayedCall=function(t,e,n,i){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},r.fromTo=function(t,e,n){return X(2,arguments)},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,n){return bt.killTweensOf(t,e,n)},r}(Ze);function ln(t,e,n){return t.setAttribute(e,n)}function cn(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)}A(un.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),x("staggerTo,staggerFrom,staggerFromTo",(function(t){un[t]=function(){var e=new Ke,n=Ce.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var hn=function(t,e,n){return t[e]=n},pn=function(t,e,n){return t[e](n)},dn=function(t,e,n,i){return t[e](i.fp,n)},fn=function(t,e){return r(t[e])?pn:o(t[e])&&t.setAttribute?ln:hn},mn=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},gn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},vn=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},yn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},xn=function(t,e,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(t,e,n),a=r},_n=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?R(this,i,"_pt"):i.dep||(e=1),i=n;return!e},bn=function(t){for(var e,n,i,r,a=t._pt;a;){for(e=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=e}t._pt=i},wn=(Mn.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=cn,this.m=t,this.mt=n,this.tween=e},Mn);function Mn(t,e,n,i,r,a,o,s,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||mn,this.d=o||this,this.set=s||hn,this.pr=u||0,(this._next=t)&&(t._prev=this)}function Sn(t){return(An[t]||Cn).map((function(t){return t()}))}function Dn(){var t=Date.now(),e=[];2<t-Ln&&(Sn("matchMediaInit"),Tn.forEach((function(t){var n,i,r,a,o=t.queries,s=t.conditions;for(i in o)(n=wt.matchMedia(o[i]).matches)&&(r=1),n!==s[i]&&(s[i]=n,a=1);a&&(t.revert(),r&&e.push(t))})),Sn("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t)})),Ln=t,Sn("matchMedia"))}x(we+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return me[t]=1})),he.TweenMax=he.TweenLite=un,he.TimelineLite=he.TimelineMax=Ke,bt=new Ke({sortChildren:!1,defaults:Xt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),qt.stringFilter=pt;var En,Tn=[],An={},Cn=[],Ln=0,Pn=0,Fn=((En=Rn.prototype).add=function(t,e,n){function i(){var t,i=_t,o=a.selector;return i&&i!==a&&i.data.push(a),n&&(a.selector=K(n)),_t=a,r(t=e.apply(a,arguments))&&a._r.push(t),_t=i,a.selector=o,a.isReverted=!1,t}r(t)&&(n=e,e=t,t=r);var a=this;return a.last=i,t===r?i(a):t?a[t]=i:i},En.ignore=function(t){var e=_t;_t=null,t(this),_t=e},En.getTweens=function(){var t=[];return this.data.forEach((function(e){return e instanceof Rn?t.push.apply(t,e.getTweens()):e instanceof un&&!(e.parent&&"nested"===e.parent.data)&&t.push(e)})),t},En.clear=function(){this._r.length=this.data.length=0},En.kill=function(t,e){var n=this;if(t){var i=this.getTweens();this.data.forEach((function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(t){return i.splice(i.indexOf(t),1)})))})),i.map((function(t){return{g:t.globalTime(0),t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof un)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,n)})),this.isReverted=!0}else this.data.forEach((function(t){return t.kill&&t.kill()}));if(this.clear(),e)for(var r=Tn.length;r--;)Tn[r].id===this.id&&Tn.splice(r,1)},En.revert=function(t){this.kill(t||{})},Rn);function Rn(t,e){this.selector=e&&K(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Pn++,t&&this.add(t)}var On,Nn=((On=In.prototype).add=function(t,e,n){s(t)||(t={matches:t});var i,r,a,o=new Fn(0,n||this.scope),u=o.conditions={};for(r in _t&&!o.selector&&(o.selector=_t.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t)"all"===r?a=1:(i=wt.matchMedia(t[r]))&&(Tn.indexOf(o)<0&&Tn.push(o),(u[r]=i.matches)&&(a=1),i.addListener?i.addListener(Dn):i.addEventListener("change",Dn));return a&&e(o),this},On.revert=function(t){this.kill(t||{})},On.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},In);function In(t){this.contexts=[],this.scope=t}var zn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return st(t)}))},timeline:function(t){return new Ke(t)},getTweensOf:function(t,e){return bt.getTweensOf(t,e)},getProperty:function(t,e,n,r){i(t)&&(t=Le(t)[0]);var a=v(t||{}).get,o=n?T:E;return"native"===n&&(n=""),t?e?o((ye[e]&&ye[e].get||a)(t,e,n,r)):function(e,n,i){return o((ye[e]&&ye[e].get||a)(t,e,n,i))}:t},quickSetter:function(t,e,n){if(1<(t=Le(t)).length){var i=t.map((function(t){return kn.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var a=ye[e],o=v(t),s=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(e){var i=new a;At._pt=0,i.init(t,n?e+n:e,At,0,[t]),i.render(1,i),At._pt&&yn(1,At)}:o.set(t,s);return a?u:function(e){return u(t,s,n?e+n:e,o,1)}},quickTo:function(t,e,n){function i(t,n,i){return a.resetTo(e,t,n,i)}var r,a=kn.to(t,Me(((r={})[e]="+=0.1",r.paused=!0,r),n||{}));return i.tween=a,i},isTweening:function(t){return 0<bt.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=je(t.ease,Xt.ease)),C(Xt,t||{})},config:function(t){return C(qt,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!ye[t]&&!he[t]&&d(e+" effect requires "+t+" plugin.")})),xe[e]=function(t,e,i){return n(Le(t),A(e||{},r),i)},a&&(Ke.prototype[e]=function(t,n,i){return this.add(xe[e](t,s(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){ke[t]=je(e)},parseEase:function(t,e){return arguments.length?je(t,e):ke},getById:function(t){return bt.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Ke(t);for(r.smoothChildTiming=u(t.smoothChildTiming),bt.remove(r),r._dp=0,r._time=r._tTime=bt._time,n=bt._first;n;)i=n._next,!e&&!n._dur&&n instanceof un&&n.vars.onComplete===n._targets[0]||H(r,n,n._start-n._delay),n=i;return H(bt,r,0),r},context:function(t,e){return t?new Fn(t,e):_t},matchMedia:function(t){return new Nn(t)},matchMediaRefresh:function(){return Tn.forEach((function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()}))||Dn()},addEventListener:function(t,e){var n=An[t]||(An[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=An[t],i=n&&n.indexOf(e);0<=i&&n.splice(i,1)},utils:{wrap:function t(e,n,i){var r=n-e;return ie(e)?it(e,t(0,e.length),n):Y(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,a=2*r;return ie(e)?it(e,t(0,e.length-1),n):Y(i,(function(t){return e+(r<(t=(a+(t-e)%a)%a||0)?a-t:t)}))},distribute:$,random:nt,snap:et,normalize:function(t,e,n){return Pe(t,e,0,1,n)},getUnit:Z,clamp:function(t,e,n){return Y(n,(function(n){return Ae(t,e,n)}))},splitColor:lt,toArray:Le,selector:K,mapRange:Pe,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Z(n))}},interpolate:function t(e,n,r,a){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var s,u,l,c,h,p=i(e),d={};if(!0===r&&(a=1)&&(r=null),p)e={p:e},n={p:n};else if(ie(e)&&!ie(n)){for(l=[],c=e.length,h=c-2,u=1;u<c;u++)l.push(t(e[u-1],e[u]));c--,o=function(t){t*=c;var e=Math.min(h,~~t);return l[e](t-e)},r=n}else a||(e=Me(ie(e)?[]:{},e));if(!l){for(s in n)nn.call(d,e,s,"get",n[s]);o=function(t){return yn(t,d)||(p?e.p:e)}}}return Y(r,o)},shuffle:Q},install:h,effects:xe,ticker:Be,updateRoot:Ke.updateRoot,plugins:ye,globalTimeline:bt,core:{PropTween:wn,globals:f,Tween:un,Timeline:Ke,Animation:Ze,getCache:v,_removeLinkedListItem:R,reverting:function(){return xt},context:function(t){return t&&_t&&(_t.data.push(t),t._ctx=_t),_t},suppressOverwrites:function(t){return yt=t}}};function Bn(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n}function Un(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,a;if(i(n)&&(r={},x(n,(function(t){return r[t]=1})),n=r),e){for(a in r={},n)r[a]=e(n[a]);n=r}!function(t,e){var n,i,r,a=t._targets;for(n in e)for(i=a.length;i--;)(r=(r=t._ptLookup[i][n])&&r.d)&&(r._pt&&(r=Bn(r,n)),r&&r.modifier&&r.modifier(e[n],t,a[i],n))}(t,n)}}}}x("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return zn[t]=un[t]})),Be.add(Ke.updateRoot),At=zn.to({},{duration:0});var kn=zn.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,o,s;for(a in this.tween=n,e)s=t.getAttribute(a)||"",(o=this.add(t,"setAttribute",(s||0)+"",e[a],i,r,0,0,a)).op=a,o.b=s,this._props.push(a)},render:function(t,e){for(var n=e._pt;n;)xt?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Un("roundProps",tt),Un("modifiers"),Un("snap",et))||zn;function Gn(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Hn(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Vn(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function jn(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)}function Wn(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function qn(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Xn(t,e,n){return t.style[e]=n}function Yn(t,e,n){return t.style.setProperty(e,n)}function Zn(t,e,n){return t._gsap[e]=n}function Jn(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n}function Kn(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)}function Qn(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)}function $n(t,e){var n=this,i=this.target,r=i.style;if(t in Ji&&r){if(this.tfm=this.tfm||{},"transform"===t)return ir.transform.split(",").forEach((function(t){return $n.call(n,t,e)}));if(~(t=ir[t]||t).indexOf(",")?t.split(",").forEach((function(t){return n.tfm[t]=cr(i,t)})):this.tfm[t]=i._gsap.x?i._gsap[t]:cr(i,t),0<=this.props.indexOf(rr))return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ar,e,"")),t=rr}(r||e)&&this.props.push(t,e,r[t])}function ti(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))}function ei(){var t,e,n=this.props,i=this.target,r=i.style,a=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(tr,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)a[e]=this.tfm[e];a.svg&&(a.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=Li())&&t.isStart||r[rr]||(ti(r),a.uncache=1)}}function ni(t,e){var n={target:t,props:[],revert:ei,save:$n};return t._gsap||kn.core.getCache(t),e&&e.split(",").forEach((function(t){return n.save(t)})),n}function ii(t,e){var n=Di.createElementNS?Di.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Di.createElement(t);return n.style?n:Di.createElement(t)}function ri(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(tr,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&ri(t,sr(e)||e,1)||""}function ai(){"undefined"!=typeof window&&window.document&&(Si=window,Di=Si.document,Ei=Di.documentElement,Ai=ii("div")||{style:{}},ii("div"),rr=sr(rr),ar=rr+"Origin",Ai.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Pi=!!sr("perspective"),Li=kn.core.reverting,Ti=1)}function oi(t){var e,n=ii("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(Ei.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=oi}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Ei.removeChild(n),this.style.cssText=a,e}function si(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])}function ui(t){var e;try{e=t.getBBox()}catch(n){e=oi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===oi||(e=oi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+si(t,["x","cx","x1"])||0,y:+si(t,["y","cy","y1"])||0,width:0,height:0}}function li(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!ui(t))}function ci(t,e){if(e){var n=t.style;e in Ji&&e!==ar&&(e=rr),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(tr,"-$1").toLowerCase())):n.removeAttribute(e)}}function hi(t,e,n,i,r,a){var o=new wn(t._pt,e,n,0,1,a?qn:Wn);return(t._pt=o).b=i,o.e=r,t._props.push(n),o}function pi(t,e,n,i){var r,a,o,s,u=parseFloat(n)||0,l=(n+"").trim().substr((u+"").length)||"px",c=Ai.style,h=er.test(e),p="svg"===t.tagName.toLowerCase(),d=(p?"client":"offset")+(h?"Width":"Height"),f="px"===i,m="%"===i;return i===l||!u||ur[i]||ur[l]?u:("px"===l||f||(u=pi(t,e,n,"px")),s=t.getCTM&&li(t),!m&&"%"!==l||!Ji[e]&&!~e.indexOf("adius")?(c[h?"width":"height"]=100+(f?l:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==Di&&a.appendChild||(a=Di.body),(o=a._gsap)&&m&&o.width&&h&&o.time===Be.time&&!o.uncache?_(u/o.width*100):(!m&&"%"!==l||lr[ri(a,"display")]||(c.position=ri(t,"position")),a===t&&(c.position="static"),a.appendChild(Ai),r=Ai[d],a.removeChild(Ai),c.position="absolute",h&&m&&((o=v(a)).time=Be.time,o.width=a[d]),_(f?r*u/100:r&&u?100/r*u:0))):(r=s?t.getBBox()[h?"width":"height"]:t[d],_(m?u/r*100:u/100*r)))}function di(t,e,n,i){if(!n||"none"===n){var r=sr(e,t,1),a=r&&ri(t,r,1);a&&a!==n?(e=r,n=a):"borderColor"===e&&(n=ri(t,"borderTopColor"))}var o,s,u,l,c,h,p,d,f,m,g,v=new wn(this._pt,t.style,e,0,1,vn),y=0,x=0;if(v.b=n,v.e=i,n+="","auto"==(i+="")&&(t.style[e]=i,i=ri(t,e)||i,t.style[e]=n),pt(o=[n,i]),i=o[1],u=(n=o[0]).match(oe)||[],(i.match(oe)||[]).length){for(;s=oe.exec(i);)p=s[0],f=i.substring(y,s.index),c?c=(c+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(c=1),p!==(h=u[x++]||"")&&(l=parseFloat(h)||0,g=h.substr((l+"").length),"="===p.charAt(1)&&(p=w(l,p)+g),d=parseFloat(p),m=p.substr((d+"").length),y=oe.lastIndex-m.length,m||(m=m||qt.units[e]||g,y===i.length&&(i+=m,v.e+=m)),g!==m&&(l=pi(t,e,h,m)||0),v._pt={_next:v._pt,p:f||1===x?f:",",s:l,c:d-l,m:c&&c<4||"zIndex"===e?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===e&&"none"===i?qn:Wn;return ue.test(i)&&(v.e=0),this._pt=v}function fi(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=hr[n]||n,e[1]=hr[i]||i,e.join(" ")}function mi(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,o=a.style,s=e.u,u=a._gsap;if("all"===s||!0===s)o.cssText="",i=1;else for(r=(s=s.split(",")).length;-1<--r;)n=s[r],Ji[n]&&(i=1,n="transformOrigin"===n?ar:rr),ci(a,n);i&&(ci(a,rr),u&&(u.svg&&a.removeAttribute("transform"),mr(a,1),u.uncache=1,ti(o)))}}function gi(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function vi(t){var e=ri(t,rr);return gi(e)?dr:e.substr(7).match(ae).map(_)}function yi(t,e){var n,i,r,a,o=t._gsap||v(t),s=t.style,u=vi(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?dr:u:(u!==dr||t.offsetParent||t===Ei||o.svg||(r=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,i=t.nextElementSibling,Ei.appendChild(t)),u=vi(t),r?s.display=r:ci(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):Ei.removeChild(t))),e&&6<u.length?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)}function xi(t,e,n,i,r,a){var o,s,u,l=t._gsap,c=r||yi(t,!0),h=l.xOrigin||0,p=l.yOrigin||0,d=l.xOffset||0,f=l.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],x=c[4],_=c[5],b=e.split(" "),w=parseFloat(b[0])||0,M=parseFloat(b[1])||0;n?c!==dr&&(s=m*y-g*v)&&(u=w*(-g/s)+M*(m/s)-(m*_-g*x)/s,w=w*(y/s)+M*(-v/s)+(v*_-y*x)/s,M=u):(w=(o=ui(t)).x+(~b[0].indexOf("%")?w/100*o.width:w),M=o.y+(~(b[1]||b[0]).indexOf("%")?M/100*o.height:M)),i||!1!==i&&l.smooth?(x=w-h,_=M-p,l.xOffset=d+(x*m+_*v)-x,l.yOffset=f+(x*g+_*y)-_):l.xOffset=l.yOffset=0,l.xOrigin=w,l.yOrigin=M,l.smooth=!!i,l.origin=e,l.originIsAbsolute=!!n,t.style[ar]="0px 0px",a&&(hi(a,l,"xOrigin",h,w),hi(a,l,"yOrigin",p,M),hi(a,l,"xOffset",d,l.xOffset),hi(a,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",w+" "+M)}function _i(t,e,n){var i=Z(e);return _(parseFloat(e)+parseFloat(pi(t,"x",n+"px",i)))+i}function bi(t,e,n,r,a){var o,s,u=360,l=i(a),c=parseFloat(a)*(l&&~a.indexOf("rad")?Ki:1)-r,h=r+c+"deg";return l&&("short"===(o=a.split("_")[1])&&(c%=u)!=c%180&&(c+=c<0?u:-u),"cw"===o&&c<0?c=(c+36e9)%u-~~(c/u)*u:"ccw"===o&&0<c&&(c=(c-36e9)%u-~~(c/u)*u)),t._pt=s=new wn(t._pt,e,n,r,c,Hn),s.e=h,s.u="deg",t._props.push(n),s}function wi(t,e){for(var n in e)t[n]=e[n];return t}function Mi(t,e,n){var i,r,a,o,s,u,l,c=wi({},n._gsap),h=n.style;for(r in c.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),h[rr]=e,i=mr(n,1),ci(n,rr),n.setAttribute("transform",a)):(a=getComputedStyle(n)[rr],h[rr]=e,i=mr(n,1),h[rr]=a),Ji)(a=c[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=Z(a)!==(l=Z(o))?pi(n,r,a,l):parseFloat(a),u=parseFloat(o),t._pt=new wn(t._pt,i,r,s,u-s,Gn),t._pt.u=l||0,t._props.push(r));wi(i,c)}un.version=Ke.version=kn.version="3.12.2",Et=1,l()&&Ue();var Si,Di,Ei,Ti,Ai,Ci,Li,Pi,Fi=ke.Power0,Ri=ke.Power1,Oi=ke.Power2,Ni=ke.Power3,Ii=ke.Power4,zi=ke.Linear,Bi=ke.Quad,Ui=ke.Cubic,ki=ke.Quart,Gi=ke.Quint,Hi=ke.Strong,Vi=ke.Elastic,ji=ke.Back,Wi=ke.SteppedEase,qi=ke.Bounce,Xi=ke.Sine,Yi=ke.Expo,Zi=ke.Circ,Ji={},Ki=180/Math.PI,Qi=Math.PI/180,$i=Math.atan2,tr=/([A-Z])/g,er=/(left|right|width|margin|padding|x)/i,nr=/[\s,\(]\S/,ir={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},rr="transform",ar=rr+"Origin",or="O,Moz,ms,Ms,Webkit".split(","),sr=function(t,e,n){var i=(e||Ai).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(or[r]+t in i););return r<0?null:(3===r?"ms":0<=r?or[r]:"")+t},ur={deg:1,rad:1,turn:1},lr={grid:1,flex:1},cr=function(t,e,n,i){var r;return Ti||ai(),e in ir&&"transform"!==e&&~(e=ir[e]).indexOf(",")&&(e=e.split(",")[0]),Ji[e]&&"transform"!==e?(r=mr(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:gr(ri(t,ar))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!i&&!~(r+"").indexOf("calc(")||(r=pr[e]&&pr[e](t,e,n)||ri(t,e)||y(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?pi(t,e,r,n)+n:r},hr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},pr={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var a=t._pt=new wn(t._pt,e,n,0,0,mi);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},dr=[1,0,0,1,0,0],fr={},mr=function(t,e){var n=t._gsap||new Ye(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,a,o,s,u,l,c,h,p,d,f,m,g,v,y,x,b,w,M,S,D,E,T,A,C,L,P,F,R,O,N,I=t.style,z=n.scaleX<0,B="deg",U=getComputedStyle(t),k=ri(t,ar)||"0";return i=r=a=u=l=c=h=p=d=0,o=s=1,n.svg=!(!t.getCTM||!li(t)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(I[rr]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[rr]?U[rr]:"")),I.scale=I.rotate=I.translate="none"),g=yi(t,n.svg),n.svg&&(T=n.uncache?(A=t.getBBox(),k=n.xOrigin-A.x+"px "+(n.yOrigin-A.y)+"px",""):!e&&t.getAttribute("data-svg-origin"),xi(t,T||k,!!T||n.originIsAbsolute,!1!==n.smooth,g)),f=n.xOrigin||0,m=n.yOrigin||0,g!==dr&&(b=g[0],w=g[1],M=g[2],S=g[3],i=D=g[4],r=E=g[5],6===g.length?(o=Math.sqrt(b*b+w*w),s=Math.sqrt(S*S+M*M),u=b||w?$i(w,b)*Ki:0,(h=M||S?$i(M,S)*Ki+u:0)&&(s*=Math.abs(Math.cos(h*Qi))),n.svg&&(i-=f-(f*b+m*M),r-=m-(f*w+m*S))):(N=g[6],R=g[7],L=g[8],P=g[9],F=g[10],O=g[11],i=g[12],r=g[13],a=g[14],l=(v=$i(N,F))*Ki,v&&(T=D*(y=Math.cos(-v))+L*(x=Math.sin(-v)),A=E*y+P*x,C=N*y+F*x,L=D*-x+L*y,P=E*-x+P*y,F=N*-x+F*y,O=R*-x+O*y,D=T,E=A,N=C),c=(v=$i(-M,F))*Ki,v&&(y=Math.cos(-v),O=S*(x=Math.sin(-v))+O*y,b=T=b*y-L*x,w=A=w*y-P*x,M=C=M*y-F*x),u=(v=$i(w,b))*Ki,v&&(T=b*(y=Math.cos(v))+w*(x=Math.sin(v)),A=D*y+E*x,w=w*y-b*x,E=E*y-D*x,b=T,D=A),l&&359.9<Math.abs(l)+Math.abs(u)&&(l=u=0,c=180-c),o=_(Math.sqrt(b*b+w*w+M*M)),s=_(Math.sqrt(E*E+N*N)),v=$i(D,E),h=2e-4<Math.abs(v)?v*Ki:0,d=O?1/(O<0?-O:O):0),n.svg&&(T=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!gi(ri(t,rr)),T&&t.setAttribute("transform",T))),90<Math.abs(h)&&Math.abs(h)<270&&(z?(o*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+"px",n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+"px",n.z=a+"px",n.scaleX=_(o),n.scaleY=_(s),n.rotation=_(u)+B,n.rotationX=_(l)+B,n.rotationY=_(c)+B,n.skewX=h+B,n.skewY=p+B,n.transformPerspective=d+"px",(n.zOrigin=parseFloat(k.split(" ")[2])||0)&&(I[ar]=gr(k)),n.xOffset=n.yOffset=0,n.force3D=qt.force3D,n.renderTransform=n.svg?wr:Pi?br:vr,n.uncache=0,n},gr=function(t){return(t=t.split(" "))[0]+" "+t[1]},vr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,br(t,e)},yr="0deg",xr="0px",_r=") ",br=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,o=n.y,s=n.z,u=n.rotation,l=n.rotationY,c=n.rotationX,h=n.skewX,p=n.skewY,d=n.scaleX,f=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,x="",_="auto"===g&&t&&1!==t||!0===g;if(y&&(c!==yr||l!==yr)){var b,w=parseFloat(l)*Qi,M=Math.sin(w),S=Math.cos(w);w=parseFloat(c)*Qi,a=_i(v,a,M*(b=Math.cos(w))*-y),o=_i(v,o,-Math.sin(w)*-y),s=_i(v,s,S*b*-y+y)}m!==xr&&(x+="perspective("+m+_r),(i||r)&&(x+="translate("+i+"%, "+r+"%) "),!_&&a===xr&&o===xr&&s===xr||(x+=s!==xr||_?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+_r),u!==yr&&(x+="rotate("+u+_r),l!==yr&&(x+="rotateY("+l+_r),c!==yr&&(x+="rotateX("+c+_r),h===yr&&p===yr||(x+="skew("+h+", "+p+_r),1===d&&1===f||(x+="scale("+d+", "+f+_r),v.style[rr]=x||"translate(0, 0)"},wr=function(t,e){var n,i,r,a,o,s=e||this,u=s.xPercent,l=s.yPercent,c=s.x,h=s.y,p=s.rotation,d=s.skewX,f=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,x=s.yOrigin,b=s.xOffset,w=s.yOffset,M=s.forceCSS,S=parseFloat(c),D=parseFloat(h);p=parseFloat(p),d=parseFloat(d),(f=parseFloat(f))&&(d+=f=parseFloat(f),p+=f),p||d?(p*=Qi,d*=Qi,n=Math.cos(p)*m,i=Math.sin(p)*m,r=Math.sin(p-d)*-g,a=Math.cos(p-d)*g,d&&(f*=Qi,o=Math.tan(d-f),r*=o=Math.sqrt(1+o*o),a*=o,f&&(o=Math.tan(f),n*=o=Math.sqrt(1+o*o),i*=o)),n=_(n),i=_(i),r=_(r),a=_(a)):(n=m,a=g,i=r=0),(S&&!~(c+"").indexOf("px")||D&&!~(h+"").indexOf("px"))&&(S=pi(v,"x",c,"px"),D=pi(v,"y",h,"px")),(y||x||b||w)&&(S=_(S+y-(y*n+x*r)+b),D=_(D+x-(y*i+x*a)+w)),(u||l)&&(S=_(S+u/100*(o=v.getBBox()).width),D=_(D+l/100*o.height)),o="matrix("+n+","+i+","+r+","+a+","+S+","+D+")",v.setAttribute("transform",o),M&&(v.style[rr]=o)};x("padding,margin,Width,Radius",(function(t,e){var n="Right",i="Bottom",r="Left",a=(e<3?["Top",n,i,r]:["Top"+r,"Top"+n,i+n,i+r]).map((function(n){return e<2?t+n:"border"+n+t}));pr[1<e?"border"+t:t]=function(t,e,n,i,r){var o,s;if(arguments.length<4)return o=a.map((function(e){return cr(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(i+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,r)}}));var Mr,Sr,Dr={name:"css",register:ai,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,a){var o,s,u,l,c,h,d,f,m,g,v,y,x,_,b,M,S=this._props,D=t.style,E=n.vars.startAt;for(d in Ti||ai(),this.styles=this.styles||ni(t),M=this.styles.props,this.tween=n,e)if("autoRound"!==d&&(s=e[d],!ye[d]||!Qe(d,e,n,r,t,a)))if(c=typeof s,h=pr[d],"function"===c&&(c=typeof(s=s.call(n,r,t,a))),"string"===c&&~s.indexOf("random(")&&(s=rt(s)),h)h(this,t,d,s,n)&&(b=1);else if("--"===d.substr(0,2))o=(getComputedStyle(t).getPropertyValue(d)+"").trim(),s+="",Ie.lastIndex=0,Ie.test(o)||(f=Z(o),m=Z(s)),m?f!==m&&(o=pi(t,d,o,m)+m):f&&(s+=f),this.add(D,"setProperty",o,s,r,a,0,0,d),S.push(d),M.push(d,0,D[d]);else if("undefined"!==c){if(E&&d in E?(i(o="function"==typeof E[d]?E[d].call(n,r,t,a):E[d])&&~o.indexOf("random(")&&(o=rt(o)),Z(o+"")||(o+=qt.units[d]||Z(cr(t,d))||""),"="===(o+"").charAt(1)&&(o=cr(t,d))):o=cr(t,d),l=parseFloat(o),(g="string"===c&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),u=parseFloat(s),d in ir&&("autoAlpha"===d&&(1===l&&"hidden"===cr(t,"visibility")&&u&&(l=0),M.push("visibility",0,D.visibility),hi(this,D,"visibility",l?"inherit":"hidden",u?"inherit":"hidden",!u)),"scale"!==d&&"transform"!==d&&~(d=ir[d]).indexOf(",")&&(d=d.split(",")[0])),v=d in Ji)if(this.styles.save(d),y||((x=t._gsap).renderTransform&&!e.parseTransform||mr(t,e.parseTransform),_=!1!==e.smoothOrigin&&x.smooth,(y=this._pt=new wn(this._pt,D,rr,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===d)this._pt=new wn(this._pt,x,"scaleY",x.scaleY,(g?w(x.scaleY,g+u):u)-x.scaleY||0,Gn),this._pt.u=0,S.push("scaleY",d),d+="X";else{if("transformOrigin"===d){M.push(ar,0,D[ar]),s=fi(s),x.svg?xi(t,s,0,_,0,this):((m=parseFloat(s.split(" ")[2])||0)!==x.zOrigin&&hi(this,x,"zOrigin",x.zOrigin,m),hi(this,D,d,gr(o),gr(s)));continue}if("svgOrigin"===d){xi(t,s,1,_,0,this);continue}if(d in fr){bi(this,x,d,l,g?w(l,g+s):s);continue}if("smoothOrigin"===d){hi(this,x,"smooth",x.smooth,s);continue}if("force3D"===d){x[d]=s;continue}if("transform"===d){Mi(this,s,t);continue}}else d in D||(d=sr(d)||d);if(v||(u||0===u)&&(l||0===l)&&!nr.test(s)&&d in D)u=u||0,(f=(o+"").substr((l+"").length))!==(m=Z(s)||(d in qt.units?qt.units[d]:f))&&(l=pi(t,d,o,m)),this._pt=new wn(this._pt,v?x:D,d,l,(g?w(l,g+u):u)-l,v||"px"!==m&&"zIndex"!==d||!1===e.autoRound?Gn:jn),this._pt.u=m||0,f!==m&&"%"!==m&&(this._pt.b=o,this._pt.r=Vn);else if(d in D)di.call(this,t,d,o,g?g+s:s);else if(d in t)this.add(t,d,o||t[d],g?g+s:s,r,a);else if("parseTransform"!==d){p(d,s);continue}v||(d in D?M.push(d,0,D[d]):M.push(d,1,o||t[d])),S.push(d)}b&&bn(this)},render:function(t,e){if(e.tween._time||!Li())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:cr,aliases:ir,getSetter:function(t,e,n){var i=ir[e];return i&&i.indexOf(",")<0&&(e=i),e in Ji&&e!==ar&&(t._gsap.x||cr(t,"x"))?n&&Ci===n?"scale"===e?Jn:Zn:(Ci=n||{})&&("scale"===e?Kn:Qn):t.style&&!o(t.style[e])?Xn:~e.indexOf("-")?Yn:fn(t,e)},core:{_removeProperty:ci,_getMatrix:yi}};kn.utils.checkPrefix=sr,kn.core.getStyleSaver=ni,Sr=x("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Mr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Ji[t]=1})),x(Mr,(function(t){qt.units[t]="deg",fr[t]=1})),ir[Sr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Mr,x("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");ir[e[1]]=Sr[e[0]]})),x("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){qt.units[t]="px"})),kn.registerPlugin(Dr);var Er=kn.registerPlugin(Dr)||kn,Tr=Er.core.Tween;t.Back=ji,t.Bounce=qi,t.CSSPlugin=Dr,t.Circ=Zi,t.Cubic=Ui,t.Elastic=Vi,t.Expo=Yi,t.Linear=zi,t.Power0=Fi,t.Power1=Ri,t.Power2=Oi,t.Power3=Ni,t.Power4=Ii,t.Quad=Bi,t.Quart=ki,t.Quint=Gi,t.Sine=Xi,t.SteppedEase=Wi,t.Strong=Hi,t.TimelineLite=Ke,t.TimelineMax=Ke,t.TweenLite=un,t.TweenMax=Tr,t.default=Er,t.gsap=Er,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e,n){function i(t,e){return typeof t===e}function r(t){return t.replace(/([a-z])-([a-z])/g,(function(t,e,n){return e+n.toUpperCase()})).replace(/^-/,"")}function a(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):_?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function o(t,n,i,r){var o,s,u,l,c="modernizr",h=a("div"),p=function(){var t=e.body;return t||((t=a(_?"svg":"body")).fake=!0),t}();if(parseInt(i,10))for(;i--;)(u=a("div")).id=r?r[i]:c+(i+1),h.appendChild(u);return(o=a("style")).type="text/css",o.id="s"+c,(p.fake?p:h).appendChild(o),p.appendChild(h),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),h.id=c,p.fake&&(p.style.background="",p.style.overflow="hidden",l=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),s=n(h,t),p.fake?(p.parentNode.removeChild(p),x.style.overflow=l,x.offsetHeight):h.parentNode.removeChild(h),!!s}function s(t,e){return!!~(""+t).indexOf(e)}function u(t,e){return function(){return t.apply(e,arguments)}}function l(e,n,i){var r;if("getComputedStyle"in t){r=getComputedStyle.call(t,e,n);var a=t.console;if(null!==r)i&&(r=r.getPropertyValue(i));else if(a){a[a.error?"error":"log"].call(a,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else r=!n&&e.currentStyle&&e.currentStyle[i];return r}function c(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()})).replace(/^ms-/,"-ms-")}function h(e,i){var r=e.length;if("CSS"in t&&"supports"in t.CSS){for(;r--;)if(t.CSS.supports(c(e[r]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var a=[];r--;)a.push("("+c(e[r])+":"+i+")");return o("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",(function(t){return"absolute"==l(t,null,"position")}))}return n}function p(t,e,o,u){function l(){p&&(delete L.style,delete L.modElem)}if(u=!i(u,"undefined")&&u,!i(o,"undefined")){var c=h(t,o);if(!i(c,"undefined"))return c}for(var p,d,f,m,g,v=["modernizr","tspan","samp"];!L.style&&v.length;)p=!0,L.modElem=a(v.shift()),L.style=L.modElem.style;for(f=t.length,d=0;f>d;d++)if(m=t[d],g=L.style[m],s(m,"-")&&(m=r(m)),L.style[m]!==n){if(u||i(o,"undefined"))return l(),"pfx"!=e||m;try{L.style[m]=o}catch(t){}if(L.style[m]!=g)return l(),"pfx"!=e||m}return l(),!1}function d(t,e,n,r,a){var o=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+E.join(o+" ")+o).split(" ");return i(e,"string")||i(e,"undefined")?p(s,e,r,a):function(t,e,n){var r;for(var a in t)if(t[a]in e)return!1===n?t[a]:i(r=e[t[a]],"function")?u(r,n||e):r;return!1}(s=(t+" "+A.join(o+" ")+o).split(" "),e,n)}function f(t,e,i){return d(t,n,n,e,i)}var m=[],g=[],v={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout((function(){e(n[t])}),0)},addTest:function(t,e,n){g.push({name:t,fn:e,options:n})},addAsyncTest:function(t){g.push({name:null,fn:t})}},y=function(){};y.prototype=v,y=new y;var x=e.documentElement,_="svg"===x.nodeName.toLowerCase(),b=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];v._prefixes=b;var w="CSS"in t&&"supports"in t.CSS,M="supportsCSS"in t;y.addTest("supports",w||M);var S=v.testStyles=o;y.addTest("touchevents",(function(){var n;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)n=!0;else{var i=["@media (",b.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");S(i,(function(t){n=9===t.offsetTop}))}return n}));var D="Moz O ms Webkit",E=v._config.usePrefixes?D.split(" "):[];v._cssomPrefixes=E;var T=function(e){var i,r=b.length,a=t.CSSRule;if(void 0===a)return n;if(!e)return!1;if((i=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+e;for(var o=0;r>o;o++){var s=b[o];if(s.toUpperCase()+"_"+i in a)return"@-"+s.toLowerCase()+"-"+e}return!1};v.atRule=T;var A=v._config.usePrefixes?D.toLowerCase().split(" "):[];v._domPrefixes=A;var C={elem:a("modernizr")};y._q.push((function(){delete C.elem}));var L={style:C.elem.style};y._q.unshift((function(){delete L.style})),v.testAllProps=d;var P=v.prefixed=function(t,e,n){return 0===t.indexOf("@")?T(t):(-1!=t.indexOf("-")&&(t=r(t)),e?d(t,e,n):d(t,"pfx"))};y.addTest("backgroundblendmode",P("backgroundBlendMode","text")),v.testAllProps=f,y.addTest("csstransforms3d",(function(){return!!f("perspective","1px",!0)}));var F=function(){var e=t.matchMedia||t.msMatchMedia;return e?function(t){var n=e(t);return n&&n.matches||!1}:function(e){var n=!1;return o("@media "+e+" { #modernizr { position: absolute; } }",(function(e){n="absolute"==(t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle).position})),n}}();v.mq=F,y.addTest("mediaqueries",F("only all")),function(){var t,e,n,r,a,o;for(var s in g)if(g.hasOwnProperty(s)){if(t=[],(e=g[s]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(r=i(e.fn,"function")?e.fn():e.fn,a=0;a<t.length;a++)1===(o=t[a].split(".")).length?y[o[0]]=r:(!y[o[0]]||y[o[0]]instanceof Boolean||(y[o[0]]=new Boolean(y[o[0]])),y[o[0]][o[1]]=r),m.push((r?"":"no-")+o.join("-"))}}(),function(t){var e=x.className,n=y._config.classPrefix||"";if(_&&(e=e.baseVal),y._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");e=e.replace(i,"$1"+n+"js$2")}y._config.enableClasses&&(e+=" "+n+t.join(" "+n),_?x.className.baseVal=e:x.className=e)}(m),delete v.addTest,delete v.addAsyncTest;for(var R=0;R<y._q.length;R++)y._q[R]();t.Modernizr=y}(window,document),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.ScrollMagic=e()}(this,(function(){"use strict";var t=function(){};t.version="2.0.7",window.addEventListener("mousewheel",(function(){}));var e="data-scrollmagic-pin-spacer";t.Controller=function(i){var a,o,s="REVERSE",u="PAUSED",l=n.defaults,c=this,h=r.extend({},l,i),p=[],d=!1,f=0,m=u,g=!0,v=0,y=!0,x=function(){0<h.refreshInterval&&(o=window.setTimeout(E,h.refreshInterval))},_=function(){return h.vertical?r.get.scrollTop(h.container):r.get.scrollLeft(h.container)},b=function(){return h.vertical?r.get.height(h.container):r.get.width(h.container)},w=this._setScrollPos=function(t){h.vertical?g?window.scrollTo(r.get.scrollLeft(),t):h.container.scrollTop=t:g?window.scrollTo(t,r.get.scrollTop()):h.container.scrollLeft=t},M=function(){if(y&&d){var t=r.type.Array(d)?d:p.slice(0);d=!1;var e=f,n=(f=c.scrollPos())-e;0!==n&&(m=0<n?"FORWARD":s),m===s&&t.reverse(),t.forEach((function(t,e){t.update(!0)}))}},S=function(){a=r.rAF(M)},D=function(t){"resize"==t.type&&(v=b(),m=u),!0!==d&&(d=!0,S())},E=function(){if(!g&&v!=b()){var t;try{t=new Event("resize",{bubbles:!1,cancelable:!1})}catch(e){(t=document.createEvent("Event")).initEvent("resize",!1,!1)}h.container.dispatchEvent(t)}p.forEach((function(t,e){t.refresh()})),x()};this._options=h;var T=function(t){if(t.length<=1)return t;var e=t.slice(0);return e.sort((function(t,e){return t.scrollOffset()>e.scrollOffset()?1:-1})),e};return this.addScene=function(e){if(r.type.Array(e))e.forEach((function(t,e){c.addScene(t)}));else if(e instanceof t.Scene)if(e.controller()!==c)e.addTo(c);else if(p.indexOf(e)<0)for(var n in p.push(e),p=T(p),e.on("shift.controller_sort",(function(){p=T(p)})),h.globalSceneOptions)e[n]&&e[n].call(e,h.globalSceneOptions[n]);return c},this.removeScene=function(t){if(r.type.Array(t))t.forEach((function(t,e){c.removeScene(t)}));else{var e=p.indexOf(t);-1<e&&(t.off("shift.controller_sort"),p.splice(e,1),t.remove())}return c},this.updateScene=function(e,n){return r.type.Array(e)?e.forEach((function(t,e){c.updateScene(t,n)})):n?e.update(!0):!0!==d&&e instanceof t.Scene&&(-1==(d=d||[]).indexOf(e)&&d.push(e),d=T(d),S()),c},this.update=function(t){return D({type:"resize"}),t&&M(),c},this.scrollTo=function(n,i){if(r.type.Number(n))w.call(h.container,n,i);else if(n instanceof t.Scene)n.controller()===c&&c.scrollTo(n.scrollOffset(),i);else if(r.type.Function(n))w=n;else{var a=r.get.elements(n)[0];if(a){for(;a.parentNode.hasAttribute(e);)a=a.parentNode;var o=h.vertical?"top":"left",s=r.get.offset(h.container),u=r.get.offset(a);g||(s[o]-=c.scrollPos()),c.scrollTo(u[o]-s[o],i)}}return c},this.scrollPos=function(t){return arguments.length?(r.type.Function(t)&&(_=t),c):_.call(c)},this.info=function(t){var e={size:v,vertical:h.vertical,scrollPos:f,scrollDirection:m,container:h.container,isDocument:g};return arguments.length?void 0!==e[t]?e[t]:void 0:e},this.loglevel=function(t){return c},this.enabled=function(t){return arguments.length?(y!=t&&(y=!!t,c.updateScene(p,!0)),c):y},this.destroy=function(t){window.clearTimeout(o);for(var e=p.length;e--;)p[e].destroy(t);return h.container.removeEventListener("resize",D),h.container.removeEventListener("scroll",D),r.cAF(a),null},function(){for(var t in h)l.hasOwnProperty(t)||delete h[t];if(h.container=r.get.elements(h.container)[0],!h.container)throw"ScrollMagic.Controller init failed.";(g=h.container===window||h.container===document.body||!document.body.contains(h.container))&&(h.container=window),v=b(),h.container.addEventListener("resize",D),h.container.addEventListener("scroll",D);var e=parseInt(h.refreshInterval,10);h.refreshInterval=r.type.Number(e)?e:l.refreshInterval,x()}(),c};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};t.Controller.addOption=function(t,e){n.defaults[t]=e},t.Controller.extend=function(e){var n=this;t.Controller=function(){return n.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Controller,n),t.Controller.prototype=n.prototype,t.Controller.prototype.constructor=t.Controller},t.Scene=function(n){var a,o,s="BEFORE",u="DURING",l="AFTER",c=i.defaults,h=this,p=r.extend({},c,n),d=s,f=0,m={start:0,end:0},g=0,v=!0,y={};this.on=function(t,e){return r.type.Function(e)&&(t=t.trim().split(" ")).forEach((function(t){var n=t.split("."),i=n[0],r=n[1];"*"!=i&&(y[i]||(y[i]=[]),y[i].push({namespace:r||"",callback:e}))})),h},this.off=function(t,e){return t&&(t=t.trim().split(" ")).forEach((function(t,n){var i=t.split("."),r=i[0],a=i[1]||"";("*"===r?Object.keys(y):[r]).forEach((function(t){for(var n=y[t]||[],i=n.length;i--;){var r=n[i];!r||a!==r.namespace&&"*"!==a||e&&e!=r.callback||n.splice(i,1)}n.length||delete y[t]}))})),h},this.trigger=function(e,n){if(e){var i=e.trim().split("."),r=i[0],a=i[1],o=y[r];o&&o.forEach((function(e,i){a&&a!==e.namespace||e.callback.call(h,new t.Event(r,e.namespace,h,n))}))}return h},h.on("change.internal",(function(t){"loglevel"!==t.what&&"tweenChanges"!==t.what&&("triggerElement"===t.what?M():"reverse"===t.what&&h.update())})).on("shift.internal",(function(t){b(),h.update()})),this.addTo=function(e){return e instanceof t.Controller&&o!=e&&(o&&o.removeScene(h),o=e,E(),w(!0),M(!0),b(),o.info("container").addEventListener("resize",S),e.addScene(h),h.trigger("add",{controller:o}),h.update()),h},this.enabled=function(t){return arguments.length?(v!=t&&(v=!!t,h.update(!0)),h):v},this.remove=function(){if(o){o.info("container").removeEventListener("resize",S);var t=o;o=void 0,t.removeScene(h),h.trigger("remove")}return h},this.destroy=function(t){return h.trigger("destroy",{reset:t}),h.remove(),h.off("*.*"),null},this.update=function(t){if(o)if(t)if(o.enabled()&&v){var e,n=o.info("scrollPos");e=0<p.duration?(n-m.start)/(m.end-m.start):n>=m.start?1:0,h.trigger("update",{startPos:m.start,endPos:m.end,scrollPos:n}),h.progress(e)}else x&&d===u&&C(!0);else o.updateScene(h,!1);return h},this.refresh=function(){return w(),M(),h},this.progress=function(t){if(arguments.length){var e=!1,n=d,i=o?o.info("scrollDirection"):"PAUSED",r=p.reverse||f<=t;if(0===p.duration?(e=f!=t,d=0==(f=t<1&&r?0:1)?s:u):t<0&&d!==s&&r?(d=s,e=!(f=0)):0<=t&&t<1&&r?(f=t,d=u,e=!0):1<=t&&d!==l?(f=1,d=l,e=!0):d!==u||r||C(),e){var a={progress:f,state:d,scrollDirection:i},c=d!=n,m=function(t){h.trigger(t,a)};c&&n!==u&&(m("enter"),m(n===s?"start":"end")),m("progress"),c&&d!==u&&(m(d===s?"start":"end"),m("leave"))}return h}return f};var x,_,b=function(){m={start:g+p.offset},o&&p.triggerElement&&(m.start-=o.info("size")*p.triggerHook),m.end=m.start+p.duration},w=function(t){if(a){var e="duration";T(e,a.call(h))&&!t&&(h.trigger("change",{what:e,newval:p[e]}),h.trigger("shift",{reason:e}))}},M=function(t){var n=0,i=p.triggerElement;if(o&&(i||0<g)){if(i)if(i.parentNode){for(var a=o.info(),s=r.get.offset(a.container),u=a.vertical?"top":"left";i.parentNode.hasAttribute(e);)i=i.parentNode;var l=r.get.offset(i);a.isDocument||(s[u]-=o.scrollPos()),n=l[u]-s[u]}else h.triggerElement(void 0);var c=n!=g;g=n,c&&!t&&h.trigger("shift",{reason:"triggerElementPosition"})}},S=function(t){0<p.triggerHook&&h.trigger("shift",{reason:"containerResize"})},D=r.extend(i.validate,{duration:function(t){if(r.type.String(t)&&t.match(/^(\.|\d)*\d+%$/)){var e=parseFloat(t)/100;t=function(){return o?o.info("size")*e:0}}if(r.type.Function(t)){a=t;try{t=parseFloat(a.call(h))}catch(e){t=-1}}if(t=parseFloat(t),!r.type.Number(t)||t<0)throw a&&(a=void 0),0;return t}}),E=function(t){(t=arguments.length?[t]:Object.keys(D)).forEach((function(t,e){var n;if(D[t])try{n=D[t](p[t])}catch(e){n=c[t]}finally{p[t]=n}}))},T=function(t,e){var n=!1,i=p[t];return p[t]!=e&&(p[t]=e,E(t),n=i!=p[t]),n},A=function(t){h[t]||(h[t]=function(e){return arguments.length?("duration"===t&&(a=void 0),T(t,e)&&(h.trigger("change",{what:t,newval:p[t]}),-1<i.shifts.indexOf(t)&&h.trigger("shift",{reason:t})),h):p[t]})};this.controller=function(){return o},this.state=function(){return d},this.scrollOffset=function(){return m.start},this.triggerPosition=function(){var t=p.offset;return o&&(p.triggerElement?t+=g:t+=o.info("size")*h.triggerHook()),t},h.on("shift.internal",(function(t){var e="duration"===t.reason;(d===l&&e||d===u&&0===p.duration)&&C(),e&&L()})).on("progress.internal",(function(t){C()})).on("add.internal",(function(t){L()})).on("destroy.internal",(function(t){h.removePin(t.reset)}));var C=function(t){if(x&&o){var e=o.info(),n=_.spacer.firstChild;if(t||d!==u){var i={position:_.inFlow?"relative":"absolute",top:0,left:0},a=r.css(n,"position")!=i.position;_.pushFollowers?0<p.duration&&(d===l&&0===parseFloat(r.css(_.spacer,"padding-top"))||d===s&&0===parseFloat(r.css(_.spacer,"padding-bottom")))&&(a=!0):i[e.vertical?"top":"left"]=p.duration*f,r.css(n,i),a&&L()}else{"fixed"!=r.css(n,"position")&&(r.css(n,{position:"fixed"}),L());var c=r.get.offset(_.spacer,!0),h=p.reverse||0===p.duration?e.scrollPos-m.start:Math.round(f*p.duration*10)/10;c[e.vertical?"top":"left"]+=h,r.css(_.spacer.firstChild,{top:c.top,left:c.left})}}},L=function(){if(x&&o&&_.inFlow){var t=d===u,e=o.info("vertical"),n=_.spacer.firstChild,i=r.isMarginCollapseType(r.css(_.spacer,"display")),a={};_.relSize.width||_.relSize.autoFullWidth?t?r.css(x,{width:r.get.width(_.spacer)}):r.css(x,{width:"100%"}):(a["min-width"]=r.get.width(e?x:n,!0,!0),a.width=t?a["min-width"]:"auto"),_.relSize.height?t?r.css(x,{height:r.get.height(_.spacer)-(_.pushFollowers?p.duration:0)}):r.css(x,{height:"100%"}):(a["min-height"]=r.get.height(e?n:x,!0,!i),a.height=t?a["min-height"]:"auto"),_.pushFollowers&&(a["padding"+(e?"Top":"Left")]=p.duration*f,a["padding"+(e?"Bottom":"Right")]=p.duration*(1-f)),r.css(_.spacer,a)}},P=function(){o&&x&&d===u&&!o.info("isDocument")&&C()},F=function(){o&&x&&d===u&&((_.relSize.width||_.relSize.autoFullWidth)&&r.get.width(window)!=r.get.width(_.spacer.parentNode)||_.relSize.height&&r.get.height(window)!=r.get.height(_.spacer.parentNode))&&L()},R=function(t){o&&x&&d===u&&!o.info("isDocument")&&(t.preventDefault(),o._setScrollPos(o.info("scrollPos")-((t.wheelDelta||t[o.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-t.detail)))};this.setPin=function(t,n){if(n=r.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},n),!(t=r.get.elements(t)[0]))return h;if("fixed"===r.css(t,"position"))return h;if(x){if(x===t)return h;h.removePin()}var i=(x=t).parentNode.style.display,a=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];x.parentNode.style.display="none";var o="absolute"!=r.css(x,"position"),s=r.css(x,a.concat(["display"])),u=r.css(x,["width","height"]);x.parentNode.style.display=i,!o&&n.pushFollowers&&(n.pushFollowers=!1);var l=x.parentNode.insertBefore(document.createElement("div"),x),c=r.extend(s,{position:o?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(o||r.extend(c,r.css(x,["width","height"])),r.css(l,c),l.setAttribute(e,""),r.addClass(l,n.spacerClass),_={spacer:l,relSize:{width:"%"===u.width.slice(-1),height:"%"===u.height.slice(-1),autoFullWidth:"auto"===u.width&&o&&r.isMarginCollapseType(s.display)},pushFollowers:n.pushFollowers,inFlow:o},!x.___origStyle){x.___origStyle={};var p=x.style;a.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach((function(t){x.___origStyle[t]=p[t]||""}))}return _.relSize.width&&r.css(l,{width:u.width}),_.relSize.height&&r.css(l,{height:u.height}),l.appendChild(x),r.css(x,{position:o?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(_.relSize.width||_.relSize.autoFullWidth)&&r.css(x,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",P),window.addEventListener("resize",P),window.addEventListener("resize",F),x.addEventListener("mousewheel",R),x.addEventListener("DOMMouseScroll",R),C(),h},this.removePin=function(t){if(x){if(d===u&&C(!0),t||!o){var n=_.spacer.firstChild;if(n.hasAttribute(e)){var i=_.spacer.style,a={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach((function(t){a[t]=i[t]||""})),r.css(n,a)}_.spacer.parentNode.insertBefore(n,_.spacer),_.spacer.parentNode.removeChild(_.spacer),x.parentNode.hasAttribute(e)||(r.css(x,x.___origStyle),delete x.___origStyle)}window.removeEventListener("scroll",P),window.removeEventListener("resize",P),window.removeEventListener("resize",F),x.removeEventListener("mousewheel",R),x.removeEventListener("DOMMouseScroll",R),x=void 0}return h};var O,N=[];return h.on("destroy.internal",(function(t){h.removeClassToggle(t.reset)})),this.setClassToggle=function(t,e){var n=r.get.elements(t);return 0!==n.length&&r.type.String(e)&&(0<N.length&&h.removeClassToggle(),O=e,N=n,h.on("enter.internal_class leave.internal_class",(function(t){var e="enter"===t.type?r.addClass:r.removeClass;N.forEach((function(t,n){e(t,O)}))}))),h},this.removeClassToggle=function(t){return t&&N.forEach((function(t,e){r.removeClass(t,O)})),h.off("start.internal_class end.internal_class"),O=void 0,N=[],h},function(){for(var t in p)c.hasOwnProperty(t)||delete p[t];for(var e in c)A(e);E()}(),h};var i={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(t){if(t=parseFloat(t),!r.type.Number(t))throw 0;return t},triggerElement:function(t){if(t=t||void 0){var e=r.get.elements(t)[0];if(!e||!e.parentNode)throw 0;t=e}return t},triggerHook:function(t){var e={onCenter:.5,onEnter:1,onLeave:0};if(r.type.Number(t))t=Math.max(0,Math.min(parseFloat(t),1));else{if(!(t in e))throw 0;t=e[t]}return t},reverse:function(t){return!!t}},shifts:["duration","offset","triggerHook"]};t.Scene.addOption=function(t,e,n,r){t in i.defaults||(i.defaults[t]=e,i.validate[t]=n,r&&i.shifts.push(t))},t.Scene.extend=function(e){var n=this;t.Scene=function(){return n.apply(this,arguments),this.$super=r.extend({},this),e.apply(this,arguments)||this},r.extend(t.Scene,n),t.Scene.prototype=n.prototype,t.Scene.prototype.constructor=t.Scene},t.Event=function(t,e,n,i){for(var r in i=i||{})this[r]=i[r];return this.type=t,this.target=this.currentTarget=n,this.namespace=e||"",this.timeStamp=this.timestamp=Date.now(),this};var r=t._util=function(t){var e,n={},i=function(t){return parseFloat(t)||0},r=function(e){return e.currentStyle?e.currentStyle:t.getComputedStyle(e)},a=function(e,n,a,o){if((n=n===document?t:n)===t)o=!1;else if(!h.DomElement(n))return 0;e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var s=(a?n["offset"+e]||n["outer"+e]:n["client"+e]||n["inner"+e])||0;if(a&&o){var u=r(n);s+="Height"===e?i(u.marginTop)+i(u.marginBottom):i(u.marginLeft)+i(u.marginRight)}return s},o=function(t){return t.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))};n.extend=function(t){for(t=t||{},e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t},n.isMarginCollapseType=function(t){return-1<["block","flex","list-item","table","-webkit-box"].indexOf(t)};var s=0,u=["ms","moz","webkit","o"],l=t.requestAnimationFrame,c=t.cancelAnimationFrame;for(e=0;!l&&e<4;++e)l=t[u[e]+"RequestAnimationFrame"],c=t[u[e]+"CancelAnimationFrame"]||t[u[e]+"CancelRequestAnimationFrame"];l||(l=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-s)),r=t.setTimeout((function(){e(n+i)}),i);return s=n+i,r}),c||(c=function(e){t.clearTimeout(e)}),n.rAF=l.bind(t),n.cAF=c.bind(t);var h=n.type=function(t){return Object.prototype.toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};h.String=function(t){return"string"===h(t)},h.Function=function(t){return"function"===h(t)},h.Array=function(t){return Array.isArray(t)},h.Number=function(t){return!h.Array(t)&&0<=t-parseFloat(t)+1},h.DomElement=function(t){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?t instanceof HTMLElement||t instanceof SVGElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName};var p=n.get={};return p.elements=function(e){var n=[];if(h.String(e))try{e=document.querySelectorAll(e)}catch(e){return n}if("nodelist"===h(e)||h.Array(e)||e instanceof NodeList)for(var i=0,r=n.length=e.length;i<r;i++){var a=e[i];n[i]=h.DomElement(a)?a:p.elements(a)}else(h.DomElement(e)||e===document||e===t)&&(n=[e]);return n},p.scrollTop=function(e){return e&&"number"==typeof e.scrollTop?e.scrollTop:t.pageYOffset||0},p.scrollLeft=function(e){return e&&"number"==typeof e.scrollLeft?e.scrollLeft:t.pageXOffset||0},p.width=function(t,e,n){return a("width",t,e,n)},p.height=function(t,e,n){return a("height",t,e,n)},p.offset=function(t,e){var n={top:0,left:0};if(t&&t.getBoundingClientRect){var i=t.getBoundingClientRect();n.top=i.top,n.left=i.left,e||(n.top+=p.scrollTop(),n.left+=p.scrollLeft())}return n},n.addClass=function(t,e){e&&(t.classList?t.classList.add(e):t.className+=" "+e)},n.removeClass=function(t,e){e&&(t.classList?t.classList.remove(e):t.className=t.className.replace(RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(t,e){if(h.String(e))return r(t)[o(e)];if(h.Array(e)){var n={},i=r(t);return e.forEach((function(t,e){n[t]=i[o(t)]})),n}for(var a in e){var s=e[a];s==parseFloat(s)&&(s+="px"),t.style[o(a)]=s}},n}(window||{});return t})),function(t,e){"use strict";function n(n,i,a,s,u){function l(){M=t.devicePixelRatio>1,a=c(a),i.delay>=0&&setTimeout((function(){h(!0)}),i.delay),(i.delay<0||i.combined)&&(s.e=function(t,e){var r,a=0;return function(o,s){function u(){a=+new Date,e.call(n,o)}var l=+new Date-a;r&&clearTimeout(r),l>t||!i.enableThrottle||s?u():r=setTimeout(u,t-l)}}(i.throttle,(function(t){"resize"===t.type&&(b=w=-1),h(t.all)})),s.a=function(t){t=c(t),a.push.apply(a,t)},s.g=function(){return a=r(a).filter((function(){return!r(this).data(i.loadedName)}))},s.f=function(t){for(var e=0;e<t.length;e++){var n=a.filter((function(){return this===t[e]}));n.length&&h(!1,n)}},h(),r(i.appendScroll).on("scroll."+u+" resize."+u,s.e))}function c(t){var a=i.defaultImage,o=i.placeholder,s=i.imageBase,u=i.srcsetAttribute,l=i.loaderAttribute,c=i._f||{};t=r(t).filter((function(){var t=r(this),n=g(this);return!t.data(i.handledName)&&(t.attr(i.attribute)||t.attr(u)||t.attr(l)||c[n]!==e)})).data("plugin_"+i.name,n);for(var h=0,p=t.length;h<p;h++){var d=r(t[h]),f=g(t[h]),m=d.attr(i.imageBaseAttribute)||s;f===T&&m&&d.attr(u)&&d.attr(u,v(d.attr(u),m)),c[f]===e||d.attr(l)||d.attr(l,c[f]),f===T&&a&&!d.attr(A)?d.attr(A,a):f===T||!o||d.css(P)&&"none"!==d.css(P)||d.css(P,"url('"+o+"')")}return t}function h(t,e){if(a.length){for(var o=e||a,s=!1,u=i.imageBase||"",l=i.srcsetAttribute,c=i.handledName,h=0;h<o.length;h++)if(t||e||d(o[h])){var f=r(o[h]),m=g(o[h]),v=f.attr(i.attribute),y=f.attr(i.imageBaseAttribute)||u,x=f.attr(i.loaderAttribute);f.data(c)||i.visibleOnly&&!f.is(":visible")||!((v||f.attr(l))&&(m===T&&(y+v!==f.attr(A)||f.attr(l)!==f.attr(C))||m!==T&&y+v!==f.css(P))||x)||(s=!0,f.data(c,!0),p(f,m,y,x))}s&&(a=r(a).filter((function(){return!r(this).data(c)})))}else i.autoDestroy&&n.destroy()}function p(t,e,n,a){++_;var o=function(){x("onError",t),y(),o=r.noop};x("beforeLoad",t);var s=i.attribute,u=i.srcsetAttribute,l=i.sizesAttribute,c=i.retinaAttribute,h=i.removeAttribute,p=i.loadedName,d=t.attr(c);if(a){var f=function(){h&&t.removeAttr(i.loaderAttribute),t.data(p,!0),x(S,t),setTimeout(y,1),f=r.noop};t.off(E).one(E,o).one(D,f),x(a,t,(function(e){e?(t.off(D),f()):(t.off(E),o())}))||t.trigger(E)}else{var m=r(new Image);m.one(E,o).one(D,(function(){t.hide(),e===T?t.attr(L,m.attr(L)).attr(C,m.attr(C)).attr(A,m.attr(A)):t.css(P,"url('"+m.attr(A)+"')"),t[i.effect](i.effectTime),h&&(t.removeAttr(s+" "+u+" "+c+" "+i.imageBaseAttribute),l!==L&&t.removeAttr(l)),t.data(p,!0),x(S,t),m.remove(),y()}));var g=(M&&d?d:t.attr(s))||"";m.attr(L,t.attr(l)).attr(C,t.attr(u)).attr(A,g?n+g:null),m.complete&&m.trigger(D)}}function d(t){var e=t.getBoundingClientRect(),n=i.scrollDirection,r=i.threshold,a=m()+r>e.top&&-r<e.bottom,o=f()+r>e.left&&-r<e.right;return"vertical"===n?a:("horizontal"===n||a)&&o}function f(){return b>=0?b:b=r(t).width()}function m(){return w>=0?w:w=r(t).height()}function g(t){return t.tagName.toLowerCase()}function v(t,e){if(e){var n=t.split(",");t="";for(var i=0,r=n.length;i<r;i++)t+=e+n[i].trim()+(i!==r-1?",":"")}return t}function y(){--_,a.length||_||x("onFinishedAll")}function x(t,e,r){return!!(t=i[t])&&(t.apply(n,[].slice.call(arguments,1)),!0)}var _=0,b=-1,w=-1,M=!1,S="afterLoad",D="load",E="error",T="img",A="src",C="srcset",L="sizes",P="background-image";"event"===i.bind||o?l():r(t).on(D+"."+u,l)}function i(i,o){var s=this,u=r.extend({},s.config,o),l={},c=u.name+"-"+ ++a;return s.config=function(t,n){return n===e?u[t]:(u[t]=n,s)},s.addItems=function(t){return l.a&&l.a("string"===r.type(t)?r(t):t),s},s.getItems=function(){return l.g?l.g():{}},s.update=function(t){return l.e&&l.e({},!t),s},s.force=function(t){return l.f&&l.f("string"===r.type(t)?r(t):t),s},s.loadAll=function(){return l.e&&l.e({all:!0},!0),s},s.destroy=function(){return r(u.appendScroll).off("."+c,l.e),r(t).off("."+c),l={},e},n(s,u,i,l,c),u.chainable?i:s}var r=t.jQuery||t.Zepto,a=0,o=!1;r.fn.Lazy=r.fn.lazy=function(t){return new i(this,t)},r.Lazy=r.lazy=function(t,n,a){if(r.isFunction(n)&&(a=n,n=[]),r.isFunction(a)){t=r.isArray(t)?t:[t],n=r.isArray(n)?n:[n];for(var o=i.prototype.config,s=o._f||(o._f={}),u=0,l=t.length;u<l;u++)(o[t[u]]===e||r.isFunction(o[t[u]]))&&(o[t[u]]=a);for(var c=0,h=n.length;c<h;c++)s[n[c]]=t[0]}},i.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},r(t).on("load",(function(){o=!0}))}(window),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Scrollbar=e():t.Scrollbar=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=58)}([function(t,e,n){var i=n(25)("wks"),r=n(16),a=n(2).Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(2),r=n(3),a=n(11),o=n(6),s=n(10),u=function(t,e,n){var l,c,h,p,d=t&u.F,f=t&u.G,m=t&u.S,g=t&u.P,v=t&u.B,y=f?i:m?i[e]||(i[e]={}):(i[e]||{}).prototype,x=f?r:r[e]||(r[e]={}),_=x.prototype||(x.prototype={});for(l in f&&(n=e),n)h=((c=!d&&y&&void 0!==y[l])?y:n)[l],p=v&&c?s(h,i):g&&"function"==typeof h?s(Function.call,h):h,y&&o(y,l,h,t&u.U),x[l]!=h&&a(x,l,p),g&&_[l]!=h&&(_[l]=h)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var i=n(2),r=n(11),a=n(9),o=n(16)("src"),s=n(60),u=(""+s).split("toString");n(3).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(a(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(a(n,o)||r(n,o,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(t,e,n){var i=n(8),r=n(41),a=n(43),o=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(1);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(44);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(7),r=n(17);t.exports=n(4)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(1);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){var i=n(10),r=n(49),a=n(50),o=n(8),s=n(19),u=n(51),l={},c={};(e=t.exports=function(t,e,n,h,p){var d,f,m,g,v=p?function(){return t}:u(t),y=i(n,h,e?2:1),x=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(d=s(t.length);d>x;x++)if((g=e?y(o(f=t[x])[0],f[1]):y(t[x]))===l||g===c)return g}else for(m=v.call(t);!(f=m.next()).done;)if((g=r(m,y,f.value,e))===l||g===c)return g}).BREAK=l,e.RETURN=c},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(31),r=n(28);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(27),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(28);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(16)("meta"),r=n(1),a=n(9),o=n(7).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(13)((function(){return u(Object.preventExtensions({}))})),c=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!a(t,i)&&c(t),t}}},function(t,e,n){"use strict";var i=n(23),r={};r[n(0)("toStringTag")]="z",r+""!="[object z]"&&n(6)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},function(t,e,n){var i=n(24),r=n(0)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:a?i(e):"Object"==(o=i(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(3),r=n(2),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(40)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";var i=n(61)(!0);n(29)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var i=n(40),r=n(5),a=n(6),o=n(11),s=n(14),u=n(62),l=n(33),c=n(68),h=n(0)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,f,m,g,v){u(n,e,f);var y,x,_,b=function(t){if(!p&&t in D)return D[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",M="values"==m,S=!1,D=t.prototype,E=D[h]||D["@@iterator"]||m&&D[m],T=E||b(m),A=m?M?b("entries"):T:void 0,C="Array"==e&&D.entries||E;if(C&&(_=c(C.call(new t)))!==Object.prototype&&_.next&&(l(_,w,!0),i||"function"==typeof _[h]||o(_,h,d)),M&&E&&"values"!==E.name&&(S=!0,T=function(){return E.call(this)}),i&&!v||!p&&!S&&D[h]||o(D,h,T),s[e]=T,s[w]=d,m)if(y={values:M?T:b("values"),keys:g?T:b("keys"),entries:A},v)for(x in y)x in D||a(D,x,y[x]);else r(r.P+r.F*(p||S),e,y);return y}},function(t,e,n){var i=n(64),r=n(46);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(25)("keys"),r=n(16);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(7).f,r=n(9),a=n(0)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},function(t,e,n){for(var i=n(69),r=n(30),a=n(6),o=n(2),s=n(11),u=n(14),l=n(0),c=l("iterator"),h=l("toStringTag"),p=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(d),m=0;m<f.length;m++){var g,v=f[m],y=d[v],x=o[v],_=x&&x.prototype;if(_&&(_[c]||s(_,c,p),_[h]||s(_,h,v),u[v]=p,y))for(g in i)_[g]||a(_,g,i[g],!0)}},function(t,e,n){var i=n(6);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var i=n(2),r=n(5),a=n(6),o=n(35),s=n(21),u=n(15),l=n(36),c=n(1),h=n(13),p=n(52),d=n(33),f=n(73);t.exports=function(t,e,n,m,g,v){var y=i[t],x=y,_=g?"set":"add",b=x&&x.prototype,w={},M=function(t){var e=b[t];a(b,t,"delete"==t||"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof x&&(v||b.forEach&&!h((function(){(new x).entries().next()})))){var S=new x,D=S[_](v?{}:-0,1)!=S,E=h((function(){S.has(1)})),T=p((function(t){new x(t)})),A=!v&&h((function(){for(var t=new x,e=5;e--;)t[_](e,e);return!t.has(-0)}));T||((x=e((function(e,n){l(e,x,t);var i=f(new y,e,x);return null!=n&&u(n,g,i[_],i),i}))).prototype=b,b.constructor=x),(E||A)&&(M("delete"),M("has"),g&&M("get")),(A||D)&&M(_),v&&b.clear&&delete b.clear}else x=m.getConstructor(e,t,g,_),o(x.prototype,n),s.NEED=!0;return d(x,t),w[t]=x,r(r.G+r.W+r.F*(x!=y),w),v||m.setStrong(x,t,g),x}},function(t,e,n){"use strict";var i=n(5);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var i=n(5),r=n(44),a=n(10),o=n(15);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),null==t?new this:(n=[],e?(i=0,s=a(u,arguments[2],2),o(t,!1,(function(t){n.push(s(t,i++))}))):o(t,!1,n.push,n),new this(n))}})}},function(t,e){t.exports=!1},function(t,e,n){t.exports=!n(4)&&!n(13)((function(){return 7!=Object.defineProperty(n(42)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(1),r=n(2).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,n){var i=n(1);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(8),r=n(63),a=n(46),o=n(32)("IE_PROTO"),s=function(){},u=function(){var t,e=n(42)("iframe"),i=a.length;for(e.style.display="none",n(67).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[a[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(7).f,r=n(45),a=n(35),o=n(10),s=n(36),u=n(15),l=n(29),c=n(47),h=n(72),p=n(4),d=n(21).fastKey,f=n(12),m=p?"_s":"size",g=function(t,e){var n,i=d(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t((function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,null!=i&&u(i,n,t[l],t)}));return a(c.prototype,{clear:function(){for(var t=f(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=f(this,e),i=g(n,t);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[m]--}return!!i},forEach:function(t){f(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(f(this,e),t)}}),p&&i(c.prototype,"size",{get:function(){return f(this,e)[m]}}),c},def:function(t,e,n){var i,r,a=g(t,e);return a?a.v=n:(t._l=a={i:r=d(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=a),i&&(i.n=a),t[m]++,"F"!==r&&(t._i[r]=a)),t},getEntry:g,setStrong:function(t,e,n){l(t,e,(function(t,n){this._t=f(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){var i=n(8);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&i(a.call(t)),e}}},function(t,e,n){var i=n(14),r=n(0)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},function(t,e,n){var i=n(23),r=n(0)("iterator"),a=n(14);t.exports=n(3).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||a[i(t)]}},function(t,e,n){var i=n(0)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},t(a)}catch(t){}return n}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(23),r=n(77);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(10),r=n(31),a=n(20),o=n(19),s=n(87);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,h=6==t,p=5==t||h,d=e||s;return function(e,s,f){for(var m,g,v=a(e),y=r(v),x=i(s,f,3),_=o(y.length),b=0,w=n?d(e,_):u?d(e,0):void 0;_>b;b++)if((p||b in y)&&(g=x(m=y[b],b,v),t))if(n)w[b]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(c)return!1;return h?-1:l||c?c:w}}},function(t,e,n){"use strict";var i=n(4),r=n(30),a=n(90),o=n(53),s=n(20),u=n(31),l=Object.assign;t.exports=!l||n(13)((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i}))?function(t,e){for(var n=s(t),l=arguments.length,c=1,h=a.f,p=o.f;l>c;)for(var d,f=u(arguments[c++]),m=h?r(f).concat(h(f)):r(f),g=m.length,v=0;g>v;)d=m[v++],i&&!p.call(f,d)||(n[d]=f[d]);return n}:l},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(99))},function(t,e,n){t.exports=n(100)},function(t,e,n){n(22),n(26),n(34),n(71),n(76),n(78),n(79),t.exports=n(3).Map},function(t,e,n){t.exports=n(25)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(27),r=n(28);t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),u=i(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(45),r=n(17),a=n(33),o={};n(11)(o,n(0)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var i=n(7),r=n(8),a=n(30);t.exports=n(4)?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,u=0;s>u;)i.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var i=n(9),r=n(18),a=n(65)(!1),o=n(32)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=o&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e,n){var i=n(18),r=n(19),a=n(66);t.exports=function(t){return function(e,n,o){var s,u=i(e),l=r(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(27),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):a(t,e)}},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(9),r=n(20),a=n(32)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){"use strict";var i=n(70),r=n(47),a=n(14),o=n(18);t.exports=n(29)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(0)("unscopables"),r=Array.prototype;null==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){"use strict";var i=n(48),r=n(12);t.exports=n(37)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(2),r=n(7),a=n(4),o=n(0)("species");t.exports=function(t){var e=i[t];a&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(1),r=n(74).set;t.exports=function(t,e,n){var a,o=e.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&i(a)&&r&&r(t,a),t}},function(t,e,n){var i=n(1),r=n(8),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(10)(Function.call,n(75).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var i=n(53),r=n(17),a=n(18),o=n(43),s=n(9),u=n(41),l=Object.getOwnPropertyDescriptor;e.f=n(4)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(5);i(i.P+i.R,"Map",{toJSON:n(54)("Map")})},function(t,e,n){var i=n(15);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){n(38)("Map")},function(t,e,n){n(39)("Map")},function(t,e,n){n(22),n(26),n(34),n(81),n(82),n(83),n(84),t.exports=n(3).Set},function(t,e,n){"use strict";var i=n(48),r=n(12);t.exports=n(37)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){var i=n(5);i(i.P+i.R,"Set",{toJSON:n(54)("Set")})},function(t,e,n){n(38)("Set")},function(t,e,n){n(39)("Set")},function(t,e,n){n(22),n(34),n(86),n(92),n(93),t.exports=n(3).WeakMap},function(t,e,n){"use strict";var i,r=n(2),a=n(55)(0),o=n(6),s=n(21),u=n(56),l=n(91),c=n(1),h=n(12),p=n(12),d=!r.ActiveXObject&&"ActiveXObject"in r,f=s.getWeak,m=Object.isExtensible,g=l.ufstore,v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(c(t)){var e=f(t);return!0===e?g(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(h(this,"WeakMap"),t,e)}},x=t.exports=n(37)("WeakMap",v,y,l,!0,!0);p&&d&&(u((i=l.getConstructor(v,"WeakMap")).prototype,y),s.NEED=!0,a(["delete","has","get","set"],(function(t){var e=x.prototype,n=e[t];o(e,t,(function(e,r){if(c(e)&&!m(e)){this._f||(this._f=new i);var a=this._f[t](e,r);return"set"==t?this:a}return n.call(this,e,r)}))})))},function(t,e,n){var i=n(88);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(1),r=n(89),a=n(0)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(24);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(35),r=n(21).getWeak,a=n(8),o=n(1),s=n(36),u=n(15),l=n(55),c=n(9),h=n(12),p=l(5),d=l(6),f=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return p(t.a,(function(t){return t[0]===e}))};g.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var l=t((function(t,i){s(t,l,e,"_i"),t._t=e,t._i=f++,t._l=void 0,null!=i&&u(i,n,t[a],t)}));return i(l.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?m(h(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?m(h(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var i=r(a(e),!0);return!0===i?m(t).set(e,n):i[t._i]=n,t},ufstore:m}},function(t,e,n){n(38)("WeakMap")},function(t,e,n){n(39)("WeakMap")},function(t,e,n){n(26),n(95),t.exports=n(3).Array.from},function(t,e,n){"use strict";var i=n(10),r=n(5),a=n(20),o=n(49),s=n(50),u=n(19),l=n(96),c=n(51);r(r.S+r.F*!n(52)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,h,p=a(t),d="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(p);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),null==y||d==Array&&s(y))for(n=new d(e=u(p.length));e>v;v++)l(n,v,g?m(p[v],v):p[v]);else for(h=y.call(p),n=new d;!(r=h.next()).done;v++)l(n,v,g?o(h,m,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(7),r=n(17);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){n(98),t.exports=n(3).Object.assign},function(t,e,n){var i=n(5);i(i.S+i.F,"Object",{assign:n(56)})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"keyboardHandler",(function(){return et})),n.d(i,"mouseHandler",(function(){return nt})),n.d(i,"resizeHandler",(function(){return it})),n.d(i,"selectHandler",(function(){return rt})),n.d(i,"touchHandler",(function(){return at})),n.d(i,"wheelHandler",(function(){return ot}));
/*! *****************************************************************************
		Copyright (c) Microsoft Corporation. All rights reserved.
		Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		this file except in compliance with the License. You may obtain a copy of the
		License at http://www.apache.org/licenses/LICENSE-2.0

		THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		MERCHANTABLITY OR NON-INFRINGEMENT.

		See the Apache Version 2.0 License for specific language governing permissions
		and limitations under the License.
		***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}n(59),n(80),n(85),n(94),n(97);var s=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},u=n(57),l="object"==typeof self&&self&&self.Object===Object&&self,c=u.a||l||Function("return this")(),h=c.Symbol,p=Object.prototype,d=p.hasOwnProperty,f=p.toString,m=h?h.toStringTag:void 0,g=Object.prototype.toString,v=h?h.toStringTag:void 0,y=/^\s+|\s+$/g,x=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,b=/^0o[0-7]+$/i,w=parseInt,M=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=d.call(t,m),n=t[m];try{t[m]=void 0;var i=!0}catch(t){}var r=f.call(t);return i&&(e?t[m]=n:delete t[m]),r}(t):function(t){return g.call(t)}(t)}(t)}(t))return NaN;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=_.test(t);return n||b.test(t)?w(t.slice(2),n?2:8):x.test(t)?NaN:+t},S=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=M(n))==n?n:0),void 0!==e&&(e=(e=M(e))==e?e:0),function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}(M(t),e,n)};function D(t,e){return void 0===t&&(t=-1/0),void 0===e&&(e=1/0),function(n,i){var r="_"+i;Object.defineProperty(n,i,{get:function(){return this[r]},set:function(n){Object.defineProperty(this,r,{value:S(n,t,e),enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}}function E(t,e){var n="_"+e;Object.defineProperty(t,e,{get:function(){return this[n]},set:function(t){Object.defineProperty(this,n,{value:!!t,enumerable:!1,writable:!0,configurable:!0})},enumerable:!0,configurable:!0})}var T=function(){return c.Date.now()},A=Math.max,C=Math.min,L=function(t,e,n){var i,r,a,o,u,l,c=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=i,a=r;return i=r=void 0,c=e,o=t.apply(a,n)}function m(t){var n=t-l;return void 0===l||n>=e||n<0||p&&t-c>=a}function g(){var t=T();if(m(t))return v(t);u=setTimeout(g,function(t){var n=e-(t-l);return p?C(n,a-(t-c)):n}(t))}function v(t){return u=void 0,d&&i?f(t):(i=r=void 0,o)}function y(){var t=T(),n=m(t);if(i=arguments,r=this,l=t,n){if(void 0===u)return function(t){return c=t,u=setTimeout(g,e),h?f(t):o}(l);if(p)return clearTimeout(u),u=setTimeout(g,e),f(l)}return void 0===u&&(u=setTimeout(g,e)),o}return e=M(e)||0,s(n)&&(h=!!n.leading,a=(p="maxWait"in n)?A(M(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=r=u=void 0},y.flush=function(){return void 0===u?o:v(T())},y};function P(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n,i){var r=i.value;return{get:function(){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{value:L.apply(void 0,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}([r],t))}),this[n]}}}}var F,R=function(){function t(t){var e=this;void 0===t&&(t={}),this.damping=.1,this.thumbMinSize=20,this.renderByPixels=!0,this.alwaysShowTracks=!1,this.continuousScrolling=!0,this.delegateTo=null,this.plugins={},Object.keys(t).forEach((function(n){e[n]=t[n]}))}return Object.defineProperty(t.prototype,"wheelEventTarget",{get:function(){return this.delegateTo},set:function(t){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead."),this.delegateTo=t},enumerable:!0,configurable:!0}),o([D(0,1)],t.prototype,"damping",void 0),o([D(0,1/0)],t.prototype,"thumbMinSize",void 0),o([E],t.prototype,"renderByPixels",void 0),o([E],t.prototype,"alwaysShowTracks",void 0),o([E],t.prototype,"continuousScrolling",void 0),t}(),O=new WeakMap;function N(){if(void 0!==F)return F;var t=!1;try{var e=function(){},n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",e,n),window.removeEventListener("testPassive",e,n)}catch(t){}return F=!!t&&{passive:!1}}function I(t){var e=O.get(t)||[];return O.set(t,e),function(t,n,i){function r(t){t.defaultPrevented||i(t)}n.split(/\s+/g).forEach((function(n){e.push({elem:t,eventName:n,handler:r}),t.addEventListener(n,r,N())}))}}function z(t){var e=function(t){return t.touches?t.touches[t.touches.length-1]:t}(t);return{x:e.clientX,y:e.clientY}}function B(t,e){return void 0===e&&(e=[]),e.some((function(e){return t===e}))}var U=["webkit","moz","ms","o"],k=new RegExp("^-(?!(?:"+U.join("|")+")-)");function G(t,e){e=function(t){var e={};return Object.keys(t).forEach((function(n){if(k.test(n)){var i=t[n];n=n.replace(/^-/,""),e[n]=i,U.forEach((function(t){e["-"+t+"-"+n]=i}))}else e[n]=t[n]})),e}(e),Object.keys(e).forEach((function(n){var i=n.replace(/^-/,"").replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));t.style[i]=e[n]}))}var H,V=function(){function t(t){this.updateTime=Date.now(),this.delta={x:0,y:0},this.velocity={x:0,y:0},this.lastPosition={x:0,y:0},this.lastPosition=z(t)}return t.prototype.update=function(t){var e=this.velocity,n=this.updateTime,i=this.lastPosition,r=Date.now(),a=z(t),o={x:-(a.x-i.x),y:-(a.y-i.y)},s=r-n||16,u=o.x/s*16,l=o.y/s*16;e.x=.9*u+.1*e.x,e.y=.9*l+.1*e.y,this.delta=o,this.updateTime=r,this.lastPosition=a},t}(),j=function(){function t(){this._touchList={}}return Object.defineProperty(t.prototype,"_primitiveValue",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){return void 0!==this._activeTouchID},t.prototype.getDelta=function(){var t=this._getActiveTracker();return t?a({},t.delta):this._primitiveValue},t.prototype.getVelocity=function(){var t=this._getActiveTracker();return t?a({},t.velocity):this._primitiveValue},t.prototype.track=function(t){var e=this,n=t.targetTouches;return Array.from(n).forEach((function(t){e._add(t)})),this._touchList},t.prototype.update=function(t){var e=this,n=t.touches,i=t.changedTouches;return Array.from(n).forEach((function(t){e._renew(t)})),this._setActiveID(i),this._touchList},t.prototype.release=function(t){var e=this;delete this._activeTouchID,Array.from(t.changedTouches).forEach((function(t){e._delete(t)}))},t.prototype._add=function(t){if(!this._has(t)){var e=new V(t);this._touchList[t.identifier]=e}},t.prototype._renew=function(t){this._has(t)&&this._touchList[t.identifier].update(t)},t.prototype._delete=function(t){delete this._touchList[t.identifier]},t.prototype._has=function(t){return this._touchList.hasOwnProperty(t.identifier)},t.prototype._setActiveID=function(t){this._activeTouchID=t[t.length-1].identifier},t.prototype._getActiveTracker=function(){return this._touchList[this._activeTouchID]},t}();!function(t){t.X="x",t.Y="y"}(H||(H={}));var W=function(){function t(t,e){void 0===e&&(e=0),this._direction=t,this._minSize=e,this.element=document.createElement("div"),this.displaySize=0,this.realSize=0,this.offset=0,this.element.className="scrollbar-thumb scrollbar-thumb-"+t}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.update=function(t,e,n){this.realSize=Math.min(e/n,1)*e,this.displaySize=Math.max(this.realSize,this._minSize),this.offset=t/n*(e+(this.realSize-this.displaySize)),G(this.element,this._getStyle())},t.prototype._getStyle=function(){switch(this._direction){case H.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case H.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null}},t}(),q=function(){function t(t,e){void 0===e&&(e=0),this.element=document.createElement("div"),this._isShown=!1,this.element.className="scrollbar-track scrollbar-track-"+t,this.thumb=new W(t,e),this.thumb.attachTo(this.element)}return t.prototype.attachTo=function(t){t.appendChild(this.element)},t.prototype.show=function(){this._isShown||(this._isShown=!0,this.element.classList.add("show"))},t.prototype.hide=function(){this._isShown&&(this._isShown=!1,this.element.classList.remove("show"))},t.prototype.update=function(t,e,n){G(this.element,{display:n<=e?"none":"block"}),this.thumb.update(t,e,n)},t}(),X=function(){function t(t){this._scrollbar=t;var e=t.options.thumbMinSize;this.xAxis=new q(H.X,e),this.yAxis=new q(H.Y,e),this.xAxis.attachTo(t.containerEl),this.yAxis.attachTo(t.containerEl),t.options.alwaysShowTracks&&(this.xAxis.show(),this.yAxis.show())}return t.prototype.update=function(){var t=this._scrollbar,e=t.size,n=t.offset;this.xAxis.update(n.x,e.container.width,e.content.width),this.yAxis.update(n.y,e.container.height,e.content.height)},t.prototype.autoHideOnIdle=function(){this._scrollbar.options.alwaysShowTracks||(this.xAxis.hide(),this.yAxis.hide())},o([P(300)],t.prototype,"autoHideOnIdle",null),t}(),Y=new WeakMap;function Z(t){return Math.pow(t-1,3)+1}var J,K,Q,$=function(){function t(t,e){var n=this.constructor;this.scrollbar=t,this.name=n.pluginName,this.options=a(a({},n.defaultOptions),e)}return t.prototype.onInit=function(){},t.prototype.onDestroy=function(){},t.prototype.onUpdate=function(){},t.prototype.onRender=function(t){},t.prototype.transformDelta=function(t,e){return a({},t)},t.pluginName="",t.defaultOptions={},t}(),tt={order:new Set,constructors:{}};function et(t){var e=I(t),n=t.containerEl;e(n,"keydown",(function(e){var i=document.activeElement;if((i===n||n.contains(i))&&!function(t){return!("INPUT"!==t.tagName&&"SELECT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable||t.disabled)}(i)){var r=function(t,e){var n=t.size,i=t.limit,r=t.offset;switch(e){case J.TAB:return function(t){requestAnimationFrame((function(){t.scrollIntoView(document.activeElement,{offsetTop:t.size.container.height/2,onlyScrollIfNeeded:!0})}))}(t);case J.SPACE:return[0,200];case J.PAGE_UP:return[0,40-n.container.height];case J.PAGE_DOWN:return[0,n.container.height-40];case J.END:return[0,i.y-r.y];case J.HOME:return[0,-r.y];case J.LEFT:return[-40,0];case J.UP:return[0,-40];case J.RIGHT:return[40,0];case J.DOWN:return[0,40];default:return null}}(t,e.keyCode||e.which);if(r){var a=r[0],o=r[1];t.addTransformableMomentum(a,o,e,(function(n){n?e.preventDefault():(t.containerEl.blur(),t.parent&&t.parent.containerEl.focus())}))}}}))}function nt(t){var e,n,i,r,a,o=I(t),s=t.containerEl,u=t.track,l=u.xAxis,c=u.yAxis;function h(e,n){var i=t.size;return e===K.X?n/(i.container.width+(l.thumb.realSize-l.thumb.displaySize))*i.content.width:e===K.Y?n/(i.container.height+(c.thumb.realSize-c.thumb.displaySize))*i.content.height:0}function p(t){return B(t,[l.element,l.thumb.element])?K.X:B(t,[c.element,c.thumb.element])?K.Y:void 0}o(s,"click",(function(e){if(!n&&B(e.target,[l.element,c.element])){var i=e.target,r=p(i),a=i.getBoundingClientRect(),o=z(e),s=t.offset,u=t.limit;if(r===K.X){var d=o.x-a.left-l.thumb.displaySize/2;t.setMomentum(S(h(r,d)-s.x,-s.x,u.x-s.x),0)}r===K.Y&&(d=o.y-a.top-c.thumb.displaySize/2,t.setMomentum(0,S(h(r,d)-s.y,-s.y,u.y-s.y)))}})),o(s,"mousedown",(function(n){if(B(n.target,[l.thumb.element,c.thumb.element])){e=!0;var o=n.target,u=z(n),h=o.getBoundingClientRect();r=p(o),i={x:u.x-h.left,y:u.y-h.top},a=s.getBoundingClientRect(),G(t.containerEl,{"-user-select":"none"})}})),o(window,"mousemove",(function(o){if(e){n=!0;var s=t.offset,u=z(o);if(r===K.X){var l=u.x-i.x-a.left;t.setPosition(h(r,l),s.y)}r===K.Y&&(l=u.y-i.y-a.top,t.setPosition(s.x,h(r,l)))}})),o(window,"mouseup blur",(function(){e=n=!1,G(t.containerEl,{"-user-select":""})}))}function it(t){I(t)(window,"resize",L(t.update.bind(t),300))}function rt(t){var e,n=I(t),i=t.containerEl,r=t.contentEl,a=t.offset,o=t.limit,s=!1;n(window,"mousemove",(function(n){s&&(cancelAnimationFrame(e),function n(i){var r=i.x,s=i.y;(r||s)&&(t.setMomentum(S(a.x+r,0,o.x)-a.x,S(a.y+s,0,o.y)-a.y),e=requestAnimationFrame((function(){n({x:r,y:s})})))}(function(t,e){var n=t.bounding,i=n.top,r=n.right,a=n.bottom,o=n.left,s=z(e),u=s.x,l=s.y,c={x:0,y:0};return 0===u&&0===l||(u>r-20?c.x=u-r+20:u<o+20&&(c.x=u-o-20),l>a-20?c.y=l-a+20:l<i+20&&(c.y=l-i-20),c.x*=2,c.y*=2),c}(t,n)))})),n(r,"selectstart",(function(t){t.stopPropagation(),cancelAnimationFrame(e),s=!0})),n(window,"mouseup blur",(function(){cancelAnimationFrame(e),s=!1})),n(i,"scroll",(function(t){t.preventDefault(),i.scrollTop=i.scrollLeft=0}))}function at(t){var e,n=/Android/.test(navigator.userAgent)?3:2,i=t.options.delegateTo||t.containerEl,r=new j,a=I(t),o=0;a(i,"touchstart",(function(n){r.track(n),t.setMomentum(0,0),0===o&&(e=t.options.damping,t.options.damping=Math.max(e,.5)),o++})),a(i,"touchmove",(function(e){if(!Q||Q===t){r.update(e);var n=r.getDelta(),i=n.x,a=n.y;t.addTransformableMomentum(i,a,e,(function(n){n&&(e.preventDefault(),Q=t)}))}})),a(i,"touchcancel touchend",(function(i){var a=r.getVelocity(),s={x:0,y:0};Object.keys(a).forEach((function(t){var i=a[t]/e;s[t]=Math.abs(i)<50?0:i*n})),t.addTransformableMomentum(s.x,s.y,i),0==--o&&(t.options.damping=e),r.release(i),Q=null}))}function ot(t){I(t)(t.options.delegateTo||t.containerEl,"onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel",(function(e){var n=function(t){if("deltaX"in t){var e=lt(t.deltaMode);return{x:t.deltaX/st.STANDARD*e,y:t.deltaY/st.STANDARD*e}}return"wheelDeltaX"in t?{x:t.wheelDeltaX/st.OTHERS,y:t.wheelDeltaY/st.OTHERS}:{x:0,y:t.wheelDelta/st.OTHERS}}(e),i=n.x,r=n.y;t.addTransformableMomentum(i,r,e,(function(t){t&&e.preventDefault()}))}))}!function(t){t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN"}(J||(J={})),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(K||(K={}));var st={STANDARD:1,OTHERS:-3},ut=[1,28,500],lt=function(t){return ut[t]||ut[0]},ct=new Map,ht=function(){function t(t,e){var n=this;this.offset={x:0,y:0},this.limit={x:1/0,y:1/0},this.bounding={top:0,right:0,bottom:0,left:0},this._plugins=[],this._momentum={x:0,y:0},this._listeners=new Set,this.containerEl=t;var i=this.contentEl=document.createElement("div");this.options=new R(e),t.setAttribute("data-scrollbar","true"),t.setAttribute("tabindex","-1"),G(t,{overflow:"hidden",outline:"none"}),window.navigator.msPointerEnabled&&(t.style.msTouchAction="none"),i.className="scroll-content",Array.from(t.childNodes).forEach((function(t){i.appendChild(t)})),t.appendChild(i),this.track=new X(this),this.size=this.getSize(),this._plugins=function(t,e){return Array.from(tt.order).filter((function(t){return!1!==e[t]})).map((function(n){var i=new(0,tt.constructors[n])(t,e[n]);return e[n]=i.options,i}))}(this,this.options.plugins);var r=t.scrollLeft,a=t.scrollTop;t.scrollLeft=t.scrollTop=0,this.setPosition(r,a,{withoutCallbacks:!0});var o=window,s=o.MutationObserver||o.WebKitMutationObserver||o.MozMutationObserver;"function"==typeof s&&(this._observer=new s((function(){n.update()})),this._observer.observe(i,{subtree:!0,childList:!0})),ct.set(t,this),requestAnimationFrame((function(){n._init()}))}return Object.defineProperty(t.prototype,"parent",{get:function(){for(var t=this.containerEl.parentElement;t;){var e=ct.get(t);if(e)return e;t=t.parentElement}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.offset.y},set:function(t){this.setPosition(this.scrollLeft,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.offset.x},set:function(t){this.setPosition(t,this.scrollTop)},enumerable:!0,configurable:!0}),t.prototype.getSize=function(){return function(t){var e=t.containerEl,n=t.contentEl;return{container:{width:e.clientWidth,height:e.clientHeight},content:{width:n.offsetWidth-n.clientWidth+n.scrollWidth,height:n.offsetHeight-n.clientHeight+n.scrollHeight}}}(this)},t.prototype.update=function(){!function(t){var e=t.getSize(),n={x:Math.max(e.content.width-e.container.width,0),y:Math.max(e.content.height-e.container.height,0)},i=t.containerEl.getBoundingClientRect(),r={top:Math.max(i.top,0),right:Math.min(i.right,window.innerWidth),bottom:Math.min(i.bottom,window.innerHeight),left:Math.max(i.left,0)};t.size=e,t.limit=n,t.bounding=r,t.track.update(),t.setPosition()}(this),this._plugins.forEach((function(t){t.onUpdate()}))},t.prototype.isVisible=function(t){return function(t,e){var n=t.bounding,i=e.getBoundingClientRect(),r=Math.max(n.top,i.top),a=Math.max(n.left,i.left),o=Math.min(n.right,i.right);return r<Math.min(n.bottom,i.bottom)&&a<o}(this,t)},t.prototype.setPosition=function(t,e,n){var i=this;void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===n&&(n={});var r=function(t,e,n){var i=t.options,r=t.offset,o=t.limit,s=t.track,u=t.contentEl;return i.renderByPixels&&(e=Math.round(e),n=Math.round(n)),e=S(e,0,o.x),n=S(n,0,o.y),e!==r.x&&s.xAxis.show(),n!==r.y&&s.yAxis.show(),i.alwaysShowTracks||s.autoHideOnIdle(),e===r.x&&n===r.y?null:(r.x=e,r.y=n,G(u,{"-transform":"translate3d("+-e+"px, "+-n+"px, 0)"}),s.update(),{offset:a({},r),limit:a({},o)})}(this,t,e);r&&!n.withoutCallbacks&&this._listeners.forEach((function(t){t.call(i,r)}))},t.prototype.scrollTo=function(t,e,n,i){void 0===t&&(t=this.offset.x),void 0===e&&(e=this.offset.y),void 0===n&&(n=0),void 0===i&&(i={}),function(t,e,n,i,r){void 0===i&&(i=0);var a=void 0===r?{}:r,o=a.easing,s=void 0===o?Z:o,u=a.callback,l=t.options,c=t.offset,h=t.limit;l.renderByPixels&&(e=Math.round(e),n=Math.round(n));var p=c.x,d=c.y,f=S(e,0,h.x)-p,m=S(n,0,h.y)-d,g=Date.now();cancelAnimationFrame(Y.get(t)),function e(){var n=Date.now()-g,r=i?s(Math.min(n/i,1)):1;if(t.setPosition(p+f*r,d+m*r),n>=i)"function"==typeof u&&u.call(t);else{var a=requestAnimationFrame(e);Y.set(t,a)}}()}(this,t,e,n,i)},t.prototype.scrollIntoView=function(t,e){void 0===e&&(e={}),function(t,e,n){var i=void 0===n?{}:n,r=i.alignToTop,a=void 0===r||r,o=i.onlyScrollIfNeeded,s=void 0!==o&&o,u=i.offsetTop,l=void 0===u?0:u,c=i.offsetLeft,h=void 0===c?0:c,p=i.offsetBottom,d=void 0===p?0:p,f=t.containerEl,m=t.bounding,g=t.offset,v=t.limit;if(e&&f.contains(e)){var y=e.getBoundingClientRect();if(!s||!t.isVisible(e)){var x=a?y.top-m.top-l:y.bottom-m.bottom+d;t.setMomentum(y.left-m.left-h,S(x,-g.y,v.y-g.y))}}}(this,t,e)},t.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("[smooth-scrollbar] scrolling listener should be a function");this._listeners.add(t)},t.prototype.removeListener=function(t){this._listeners.delete(t)},t.prototype.addTransformableMomentum=function(t,e,n,i){this._updateDebounced();var r=this._plugins.reduce((function(t,e){return e.transformDelta(t,n)||t}),{x:t,y:e}),a=!this._shouldPropagateMomentum(r.x,r.y);a&&this.addMomentum(r.x,r.y),i&&i.call(this,a)},t.prototype.addMomentum=function(t,e){this.setMomentum(this._momentum.x+t,this._momentum.y+e)},t.prototype.setMomentum=function(t,e){0===this.limit.x&&(t=0),0===this.limit.y&&(e=0),this.options.renderByPixels&&(t=Math.round(t),e=Math.round(e)),this._momentum.x=t,this._momentum.y=e},t.prototype.updatePluginOptions=function(t,e){this._plugins.forEach((function(n){n.name===t&&Object.assign(n.options,e)}))},t.prototype.destroy=function(){var t=this.containerEl,e=this.contentEl;!function(t){var e=O.get(t);e&&(e.forEach((function(t){var e=t.elem,n=t.eventName,i=t.handler;e.removeEventListener(n,i,N())})),O.delete(t))}(this),this._listeners.clear(),this.setMomentum(0,0),cancelAnimationFrame(this._renderID),this._observer&&this._observer.disconnect(),ct.delete(this.containerEl);for(var n=Array.from(e.childNodes);t.firstChild;)t.removeChild(t.firstChild);n.forEach((function(e){t.appendChild(e)})),G(t,{overflow:""}),t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,this._plugins.forEach((function(t){t.onDestroy()})),this._plugins.length=0},t.prototype._init=function(){var t=this;this.update(),Object.keys(i).forEach((function(e){i[e](t)})),this._plugins.forEach((function(t){t.onInit()})),this._render()},t.prototype._updateDebounced=function(){this.update()},t.prototype._shouldPropagateMomentum=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.options,i=this.offset,r=this.limit;if(!n.continuousScrolling)return!1;0===r.x&&0===r.y&&this._updateDebounced();var a=S(t+i.x,0,r.x),o=S(e+i.y,0,r.y),s=!0;return(s=(s=s&&a===i.x)&&o===i.y)&&(i.x===r.x||0===i.x||i.y===r.y||0===i.y)},t.prototype._render=function(){var t=this._momentum;if(t.x||t.y){var e=this._nextTick("x"),n=this._nextTick("y");t.x=e.momentum,t.y=n.momentum,this.setPosition(e.position,n.position)}var i=a({},this._momentum);this._plugins.forEach((function(t){t.onRender(i)})),this._renderID=requestAnimationFrame(this._render.bind(this))},t.prototype._nextTick=function(t){var e=this.options,n=this.offset,i=this._momentum,r=n[t],a=i[t];if(Math.abs(a)<=.1)return{momentum:0,position:r+a};var o=a*(1-e.damping);return e.renderByPixels&&(o|=0),{momentum:o,position:r+a-o}},o([P(100,{leading:!0})],t.prototype,"_updateDebounced",null),t}(),pt="smooth-scrollbar-style",dt=!1;function ft(){if(!dt&&"undefined"!=typeof window){var t=document.createElement("style");t.id=pt,t.textContent="\n[data-scrollbar] {\n  display: block;\n  position: relative;\n}\n\n.scroll-content {\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n\n.scrollbar-track {\n  position: absolute;\n  opacity: 0;\n  z-index: 1;\n  background: rgba(222, 222, 222, .75);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-transition: opacity 0.5s 0.5s ease-out;\n          transition: opacity 0.5s 0.5s ease-out;\n}\n.scrollbar-track.show,\n.scrollbar-track:hover {\n  opacity: 1;\n  -webkit-transition-delay: 0s;\n          transition-delay: 0s;\n}\n\n.scrollbar-track-x {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n}\n.scrollbar-track-y {\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 100%;\n}\n.scrollbar-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  background: rgba(0, 0, 0, .5);\n  border-radius: 4px;\n}\n",document.head&&document.head.appendChild(t),dt=!0}}n.d(e,"ScrollbarPlugin",(function(){return $}));
/*!
		 * cast `I.Scrollbar` to `Scrollbar` to avoid error
		 *
		 * `I.Scrollbar` is not assignable to `Scrollbar`:
		 *     "privateProp" is missing in `I.Scrollbar`
		 *
		 * @see https://github.com/Microsoft/TypeScript/issues/2672
		 */
var mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.init=function(t,e){if(!t||1!==t.nodeType)throw new TypeError("expect element to be DOM Element, but got "+t);return ft(),ct.has(t)?ct.get(t):new ht(t,e)},e.initAll=function(t){return Array.from(document.querySelectorAll("[data-scrollbar]"),(function(n){return e.init(n,t)}))},e.has=function(t){return ct.has(t)},e.get=function(t){return ct.get(t)},e.getAll=function(){return Array.from(ct.values())},e.destroy=function(t){var e=ct.get(t);e&&e.destroy()},e.destroyAll=function(){ct.forEach((function(t){t.destroy()}))},e.use=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach((function(t){var e=t.pluginName;if(!e)throw new TypeError("plugin name is required");tt.order.add(e),tt.constructors[e]=t}))}.apply(void 0,t)},e.attachStyle=function(){return ft()},e.detachStyle=function(){return function(){if(dt&&"undefined"!=typeof window){var t=document.getElementById(pt);t&&t.parentNode&&(t.parentNode.removeChild(t),dt=!1)}}()},e.version="8.5.1",e.ScrollbarPlugin=$,e}(ht);e.default=mt}]).default})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,(function(t){function e(){}function n(t,e){this.x=t||0,this.y=e||0}function i(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function r(t,e,a,o,s,u,l,c,h,p){Object.defineProperty(this,"id",{value:Nr++}),this.uuid=Fr.generateUUID(),this.name="",this.image=void 0!==t?t:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:r.DEFAULT_MAPPING,this.wrapS=void 0!==a?a:1001,this.wrapT=void 0!==o?o:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==u?u:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==l?l:1023,this.internalFormat=null,this.type=void 0!==c?c:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new i,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function a(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function o(t,e,n){this.width=t,this.height=e,this.scissor=new a(0,0,t,e),this.scissorTest=!1,this.viewport=new a(0,0,t,e),n=n||{},this.texture=new r(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(t,e,n){o.call(this,t,e,n),this.samples=4}function u(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function l(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function c(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||h.DefaultOrder}function p(){this.mask=1}function d(){Object.defineProperty(this,"id",{value:Wr++}),this.uuid=Fr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=d.DefaultUp.clone();var t=new l,e=new h,n=new u,r=new l(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new c},normalMatrix:{value:new i}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=d.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new p,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function f(){d.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.environment=this.background=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(t,e){this.min=void 0!==t?t:new l(1/0,1/0,1/0),this.max=void 0!==e?e:new l(-1/0,-1/0,-1/0)}function g(t,e,n,i,r){var a,o=0;for(a=t.length-3;o<=a;o+=3){ga.fromArray(t,o);var s=r.x*Math.abs(ga.x)+r.y*Math.abs(ga.y)+r.z*Math.abs(ga.z),u=e.dot(ga),l=n.dot(ga),c=i.dot(ga);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}function v(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:-1}function y(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l(0,0,-1)}function x(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function _(t,e,n){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==n?n:new l}function b(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function w(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}function M(t){return.04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function S(t){return.0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}function D(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new l,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new b,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function E(){Object.defineProperty(this,"id",{value:Ga++}),this.uuid=Fr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=this.flatShading=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.version=0}function T(t){E.call(this),this.type="MeshBasicMaterial",this.color=new b(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphTargets=this.skinning=!1,this.setValues(t)}function A(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function C(t,e,n){A.call(this,new Int8Array(t),e,n)}function L(t,e,n){A.call(this,new Uint8Array(t),e,n)}function P(t,e,n){A.call(this,new Uint8ClampedArray(t),e,n)}function F(t,e,n){A.call(this,new Int16Array(t),e,n)}function R(t,e,n){A.call(this,new Uint16Array(t),e,n)}function O(t,e,n){A.call(this,new Int32Array(t),e,n)}function N(t,e,n){A.call(this,new Uint32Array(t),e,n)}function I(t,e,n){A.call(this,new Float32Array(t),e,n)}function z(t,e,n){A.call(this,new Float64Array(t),e,n)}function B(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function U(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function k(){Object.defineProperty(this,"id",{value:Va+=2}),this.uuid=Fr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function G(t,e){d.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new k,this.material=void 0!==e?e:new T,this.updateMorphTargets()}function H(t,e,n,i,r,a,o,s){return null===(1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s))?null:(po.copy(s),po.applyMatrix4(t.matrixWorld),(e=n.ray.origin.distanceTo(po))<n.near||e>n.far?null:{distance:e,point:po.clone(),object:t})}function V(t,e,i,r,a,o,s,u,l,c,h,p){if($a.fromBufferAttribute(a,c),to.fromBufferAttribute(a,h),eo.fromBufferAttribute(a,p),a=t.morphTargetInfluences,e.morphTargets&&o&&a){ao.set(0,0,0),oo.set(0,0,0),so.set(0,0,0);for(var d=0,f=o.length;d<f;d++){var m=a[d],g=o[d];0!==m&&(no.fromBufferAttribute(g,c),io.fromBufferAttribute(g,h),ro.fromBufferAttribute(g,p),s?(ao.addScaledVector(no,m),oo.addScaledVector(io,m),so.addScaledVector(ro,m)):(ao.addScaledVector(no.sub($a),m),oo.addScaledVector(io.sub(to),m),so.addScaledVector(ro.sub(eo),m)))}$a.add(ao),to.add(oo),eo.add(so)}return t.isSkinnedMesh&&(t.boneTransform(c,$a),t.boneTransform(h,to),t.boneTransform(p,eo)),(t=H(t,e,i,r,$a,to,eo,ho))&&(u&&(uo.fromBufferAttribute(u,c),lo.fromBufferAttribute(u,h),co.fromBufferAttribute(u,p),t.uv=_.getUV(ho,$a,to,eo,uo,lo,co,new n)),l&&(uo.fromBufferAttribute(l,c),lo.fromBufferAttribute(l,h),co.fromBufferAttribute(l,p),t.uv2=_.getUV(ho,$a,to,eo,uo,lo,co,new n)),u=new D(c,h,p),_.getNormal($a,to,eo,u.normal),t.face=u),t}function j(){Object.defineProperty(this,"id",{value:fo+=2}),this.uuid=Fr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function W(t){var e,n={};for(e in t)for(var i in n[e]={},t[e]){var r=t[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?n[e][i]=r.clone():Array.isArray(r)?n[e][i]=r.slice():n[e][i]=r}return n}function q(t){for(var e={},n=0;n<t.length;n++){var i,r=W(t[n]);for(i in r)e[i]=r[i]}return e}function X(t){E.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Y(){d.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c,this.projectionMatrixInverse=new c}function Z(t,e,n,i){Y.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function J(t,e,n){if(d.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{this.renderTarget=n;var i=new Z(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new l(1,0,0)),this.add(i);var r=new Z(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new l(-1,0,0)),this.add(r);var a=new Z(90,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new l(0,1,0)),this.add(a);var o=new Z(90,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var s=new Z(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new l(0,0,1)),this.add(s);var u=new Z(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new l(0,0,-1)),this.add(u),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var l=t.xr.enabled,c=t.getRenderTarget();t.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(c),t.xr.enabled=l},this.clear=function(t,e,i,r){for(var a=t.getRenderTarget(),o=0;6>o;o++)t.setRenderTarget(n,o),t.clear(e,i,r);t.setRenderTarget(a)}}}function K(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),o.call(this,t,t,e)}function Q(t,e,n,i,a,o,s,u,l,c,h,p){r.call(this,null,o,s,u,l,c,i,a,h,p),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1,this.needsUpdate=!0}function $(t,e,n,i,r,a){this.planes=[void 0!==t?t:new x,void 0!==e?e:new x,void 0!==n?n:new x,void 0!==i?i:new x,void 0!==r?r:new x,void 0!==a?a:new x]}function tt(){function t(r,a){!1!==n&&(i(r,a),e.requestAnimationFrame(t))}var e=null,n=!1,i=null;return{start:function(){!0!==n&&null!==i&&(e.requestAnimationFrame(t),n=!0)},stop:function(){n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function et(t,e){var n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var a=i.get(e);if(void 0===a)i.set(e,function(e,n){var i=e.array,r=e.usage,a=t.createBuffer();return t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback(),n=5126,i instanceof Float32Array?n=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?n=5123:i instanceof Int16Array?n=5122:i instanceof Uint32Array?n=5125:i instanceof Int32Array?n=5124:i instanceof Int8Array?n=5120:i instanceof Uint8Array&&(n=5121),{buffer:a,type:n,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,r));else if(a.version<e.version){var o=e.array,s=e.updateRange;t.bindBuffer(r,a.buffer),-1===s.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),a.version=e.version}}}}function nt(t,e,n,i){j.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new it(t,e,n,i)),this.mergeVertices()}function it(t,e,n,i){k.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r=(t=t||1)/2,a=(e=e||1)/2,o=(n=Math.floor(n)||1)+1,s=(i=Math.floor(i)||1)+1,u=t/n,l=e/i,c=[],h=[],p=[],d=[];for(t=0;t<s;t++){var f=t*l-a;for(e=0;e<o;e++)h.push(e*u-r,-f,0),p.push(0,0,1),d.push(e/n),d.push(1-t/i)}for(t=0;t<i;t++)for(e=0;e<n;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,c.push(e+o*t,r,s),c.push(r,a,s);this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}function rt(t,e,n,i){function r(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var a,o,s=new b(0),u=0,l=null,c=0,h=null;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,u=void 0!==e?e:1)},getClearAlpha:function(){return u},setClearAlpha:function(t){r(s,u=t)},render:function(e,i,p,d){i=i.background,(p=(p=t.xr).getSession&&p.getSession())&&"additive"===p.environmentBlendMode&&(i=null),null===i?r(s,u):i&&i.isColor&&(r(i,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),i&&(i.isCubeTexture||i.isWebGLCubeRenderTarget||306===i.mapping)?(void 0===o&&((o=new G(new xo(1,1,1),new X({type:"BackgroundCubeMaterial",uniforms:W(Do.cube.uniforms),vertexShader:Do.cube.vertexShader,fragmentShader:Do.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),d=i.isWebGLCubeRenderTarget?i.texture:i,o.material.uniforms.envMap.value=d,o.material.uniforms.flipEnvMap.value=d.isCubeTexture?-1:1,l===i&&c===d.version&&h===t.toneMapping||(o.material.needsUpdate=!0,l=i,c=d.version,h=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)):i&&i.isTexture&&(void 0===a&&((a=new G(new it(2,2),new X({type:"BackgroundMaterial",uniforms:W(Do.background.uniforms),vertexShader:Do.background.vertexShader,fragmentShader:Do.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=i,!0===i.matrixAutoUpdate&&i.updateMatrix(),a.material.uniforms.uvTransform.value.copy(i.matrix),l===i&&c===i.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=i,c=i.version,h=t.toneMapping),e.unshift(a,a.geometry,a.material,0,0,null))}}}function at(t,e,n,i){var r,a=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(i,o,s,u){if(0!==u){if(a){i=t;var l="drawArraysInstanced"}else if(l="drawArraysInstancedANGLE",null===(i=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[l](r,o,s,u),n.update(s,r,u)}}}function ot(t,e,n){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),n=!0===n.logarithmicDepthBuffer,s=t.getParameter(34930);var u=t.getParameter(35660),l=t.getParameter(3379),c=t.getParameter(34076),h=t.getParameter(34921),p=t.getParameter(36347),d=t.getParameter(36348),f=t.getParameter(36349),m=0<u,g=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:n,maxTextures:s,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:p,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function st(){function t(){c.value!==r&&(c.value=r,c.needsUpdate=0<a),n.numPlanes=a,n.numIntersection=0}function e(t,e,i,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=c.value,!0!==r||null===o)for(r=i+4*a,e=e.matrixWorldInverse,l.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,i+=4)u.copy(t[r]).applyMatrix4(e,l),u.normal.toArray(o,i),o[i+3]=u.constant;c.value=o,c.needsUpdate=!0}return n.numPlanes=a,n.numIntersection=0,o}var n=this,r=null,a=0,o=!1,s=!1,u=new x,l=new i,c={value:null,needsUpdate:!1};this.uniform=c,this.numIntersection=this.numPlanes=0,this.init=function(t,n,i){var s=0!==t.length||n||0!==a||o;return o=n,r=e(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,i,u,l,h,p){if(!o||null===n||0===n.length||s&&!u)s?e(null):t();else{var d=4*(u=s?0:a),f=h.clippingState||null;for(c.value=f,f=e(n,l,d,p),n=0;n!==d;++n)f[n]=r[n];h.clippingState=f,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=u}}}function ut(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];switch(n){case"WEBGL_depth_texture":var i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i}}}function lt(t,e,n){function i(t){var r=t.target;for(var s in null!==(t=a.get(r)).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);r.removeEventListener("dispose",i),a.delete(r),(s=o.get(t))&&(e.remove(s),o.delete(t)),n.memory.geometries--}function r(t){var n=[],i=t.index,r=t.attributes.position;if(null!==i){var a=i.array;i=i.version,r=0;for(var s=a.length;r<s;r+=3){var u=a[r+0],l=a[r+1],c=a[r+2];n.push(u,l,l,c,c,u)}}else for(a=r.array,i=r.version,r=0,s=a.length/3-1;r<s;r+=3)u=r+0,l=r+1,c=r+2,n.push(u,l,l,c,c,u);(n=new(65535<U(n)?N:R)(n,1)).version=i,e.update(n,34963),(a=o.get(t))&&e.remove(a),o.set(t,n)}var a=new WeakMap,o=new WeakMap;return{get:function(t,e){var r=a.get(e);return r||(e.addEventListener("dispose",i),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new k).setFromObject(t)),r=e._bufferGeometry),a.set(e,r),n.memory.geometries++,r)},update:function(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);for(r in t=t.morphAttributes){i=0;for(var a=(n=t[r]).length;i<a;i++)e.update(n[i],34962)}},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&r(t)}else r(t);return o.get(t)}}}function ct(t,e,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r)},this.renderInstances=function(i,u,l,c){if(0!==c){if(s){i=t;var h="drawElementsInstanced"}else if(h="drawElementsInstancedANGLE",null===(i=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");i[h](r,l,a,u*o,c),n.update(l,r,c)}}}function ht(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=t/3*i;break;case 1:e.lines+=t/2*i;break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function pt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function dt(t){var e={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,u=void 0===s?0:s.length;if(void 0===(i=e[r.id])){i=[];for(var l=0;l<u;l++)i[l]=[l,0];e[r.id]=i}var c=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,l=0;l<u;l++){var h=i[l];0!==h[1]&&(c&&r.deleteAttribute("morphTarget"+l),a&&r.deleteAttribute("morphNormal"+l))}for(l=0;l<u;l++)(h=i[l])[0]=l,h[1]=s[l];for(i.sort(pt),l=s=0;8>l;l++)(h=i[l])&&(u=h[0],h=h[1])?(c&&r.setAttribute("morphTarget"+l,c[u]),a&&r.setAttribute("morphNormal"+l,a[u]),n[l]=h,s+=h):n[l]=0;r=r.morphTargetsRelative?1:1-s,o.getUniforms().setValue(t,"morphTargetBaseInfluence",r),o.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function ft(t,e,n,i){var r=new WeakMap;return{update:function(t){var a=i.render.frame,o=t.geometry,s=e.get(t,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),r.set(s,a)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function mt(t,e,n,i,a,o,s,u,l,c){t=void 0!==t?t:[],r.call(this,t,void 0!==e?e:301,n,i,a,o,void 0!==s?s:1022,u,l,c),this.flipY=!1}function gt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function vt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1,this.needsUpdate=!0}function yt(t,e,n){var i=t[0];if(0>=i||0<i)return t;var r=e*n,a=Lo[r];if(void 0===a&&(a=new Float32Array(r),Lo[r]=a),0!==e)for(i.toArray(a,0),i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r);return a}function xt(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function _t(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function bt(t,e){var n=Po[e];void 0===n&&(n=new Int32Array(e),Po[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function wt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Mt(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y):xt(n,e)||(t.uniform2fv(this.addr,e),_t(n,e))}function St(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z):void 0!==e.r?n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b):xt(n,e)||(t.uniform3fv(this.addr,e),_t(n,e))}function Dt(t,e){var n=this.cache;void 0!==e.x?n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w):xt(n,e)||(t.uniform4fv(this.addr,e),_t(n,e))}function Et(t,e){var n=this.cache,i=e.elements;void 0===i?xt(n,e)||(t.uniformMatrix2fv(this.addr,!1,e),_t(n,e)):xt(n,i)||(Oo.set(i),t.uniformMatrix2fv(this.addr,!1,Oo),_t(n,i))}function Tt(t,e){var n=this.cache,i=e.elements;void 0===i?xt(n,e)||(t.uniformMatrix3fv(this.addr,!1,e),_t(n,e)):xt(n,i)||(Ro.set(i),t.uniformMatrix3fv(this.addr,!1,Ro),_t(n,i))}function At(t,e){var n=this.cache,i=e.elements;void 0===i?xt(n,e)||(t.uniformMatrix4fv(this.addr,!1,e),_t(n,e)):xt(n,i)||(Fo.set(i),t.uniformMatrix4fv(this.addr,!1,Fo),_t(n,i))}function Ct(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Eo,r)}function Lt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||To,r)}function Pt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Ao,r)}function Ft(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Co,r)}function Rt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ot(t,e){var n=this.cache;xt(n,e)||(t.uniform2iv(this.addr,e),_t(n,e))}function Nt(t,e){var n=this.cache;xt(n,e)||(t.uniform3iv(this.addr,e),_t(n,e))}function It(t,e){var n=this.cache;xt(n,e)||(t.uniform4iv(this.addr,e),_t(n,e))}function zt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Bt(t,e){t.uniform1fv(this.addr,e)}function Ut(t,e){t.uniform1iv(this.addr,e)}function kt(t,e){t.uniform2iv(this.addr,e)}function Gt(t,e){t.uniform3iv(this.addr,e)}function Ht(t,e){t.uniform4iv(this.addr,e)}function Vt(t,e){e=yt(e,this.size,2),t.uniform2fv(this.addr,e)}function jt(t,e){e=yt(e,this.size,3),t.uniform3fv(this.addr,e)}function Wt(t,e){e=yt(e,this.size,4),t.uniform4fv(this.addr,e)}function qt(t,e){e=yt(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Xt(t,e){e=yt(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Yt(t,e){e=yt(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Zt(t,e,n){var i=e.length,r=bt(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.safeSetTexture2D(e[t]||Eo,r[t])}function Jt(t,e,n){var i=e.length,r=bt(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.safeSetTextureCube(e[t]||Co,r[t])}function Kt(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return wt;case 35664:return Mt;case 35665:return St;case 35666:return Dt;case 35674:return Et;case 35675:return Tt;case 35676:return At;case 5124:case 35670:return Rt;case 35667:case 35671:return Ot;case 35668:case 35672:return Nt;case 35669:case 35673:return It;case 5125:return zt;case 35678:case 36198:case 36298:case 36306:case 35682:return Ct;case 35679:case 36299:case 36307:return Pt;case 35680:case 36300:case 36308:case 36293:return Ft;case 36289:case 36303:case 36311:case 36292:return Lt}}(e.type)}function Qt(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Bt;case 35664:return Vt;case 35665:return jt;case 35666:return Wt;case 35674:return qt;case 35675:return Xt;case 35676:return Yt;case 5124:case 35670:return Ut;case 35667:case 35671:return kt;case 35668:case 35672:return Gt;case 35669:case 35673:return Ht;case 35678:case 36198:case 36298:case 36306:case 35682:return Zt;case 35680:case 36300:case 36308:case 36293:return Jt}}(e.type)}function $t(t){this.id=t,this.seq=[],this.map={}}function te(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name),o=this,s=r.name,u=s.length;for(No.lastIndex=0;;){var l=No.exec(s),c=No.lastIndex,h=l[1],p=l[3];if("]"===l[2]&&(h|=0),void 0===p||"["===p&&c+2===u){s=o,r=void 0===p?new Kt(h,r,a):new Qt(h,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(p=o.map[h])&&(p=new $t(h),h=o,o=p,h.seq.push(o),h.map[o.id]=o),o=p}}}function ee(t,e,n){return e=t.createShader(e),t.shaderSource(e,n),t.compileShader(e),e}function ne(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+t)}}function ie(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";for(t=t.getShaderSource(e).split("\n"),e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+(t=t.join("\n"))}function re(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=ne(e))[0]+"ToLinear"+e[1]+"; }"}function ae(t,e){return"vec4 "+t+"( vec4 value ) { return LinearTo"+(e=ne(e))[0]+e[1]+"; }"}function oe(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function se(t){return""!==t}function ue(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function le(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ce(t,e){if(void 0===(t=So[e]))throw Error("Can not resolve #include <"+e+">");return t.replace(zo,ce)}function he(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),pe(t,e,n,i)}function pe(t,e,n,i){for(t="",e=parseInt(e);e<parseInt(n);e++)t+=i.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return t}function de(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function fe(t,e,n){var i,r,a=t.getContext(),o=n.defines,s=n.vertexShader,u=n.fragmentShader,l=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:e="ENVMAP_TYPE_EQUIREC";break;case 305:e="ENVMAP_TYPE_SPHERE"}return e}(n),h=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 304:e="ENVMAP_MODE_REFRACTION"}return e}(n),p=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),d=0<t.gammaFactor?t.gammaFactor:1,f=n.isWebGL2?"":[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(se).join("\n"),m=function(t){var e,n=[];for(e in t){var i=t[e];!1!==i&&n.push("#define "+e+" "+i)}return n.join("\n")}(o),g=a.createProgram();return n.isRawShaderMaterial?(0<(o=[m].filter(se).join("\n")).length&&(o+="\n"),0<(l=[f,m].filter(se).join("\n")).length&&(l+="\n")):(o=[de(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(se).join("\n"),l=[f,de(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?So.tonemapping_pars_fragment:"",0!==n.toneMapping?oe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?So.encodings_pars_fragment:"",n.mapEncoding?re("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?re("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?re("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?re("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?re("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?ae("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(se).join("\n")),s=le(s=ue(s=s.replace(zo,ce),n),n),u=le(u=ue(u=u.replace(zo,ce),n),n),s=s.replace(Uo,pe).replace(Bo,he),u=u.replace(Uo,pe).replace(Bo,he),n.isWebGL2&&!n.isRawShaderMaterial&&(c=!1,h=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==s.match(h)&&null!==u.match(h)&&(c=!0,s=s.replace(h,""),u=u.replace(h,"")),o="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+o,l=["#version 300 es\n\n#define varying in",c?"":"out highp vec4 pc_fragColor;",c?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+l),u=l+u,s=ee(a,35633,o+s),u=ee(a,35632,u),a.attachShader(g,s),a.attachShader(g,u),void 0!==n.index0AttributeName?a.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(g,0,"position"),a.linkProgram(g),t.debug.checkShaderErrors&&(t=a.getProgramInfoLog(g).trim(),c=a.getShaderInfoLog(s).trim(),h=a.getShaderInfoLog(u).trim(),d=p=!0,!1===a.getProgramParameter(g,35714)?(p=!1,f=ie(a,s,"vertex"),m=ie(a,u,"fragment"),console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(g,35715),"gl.getProgramInfoLog",t,f,m)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==c&&""!==h||(d=!1),d&&(this.diagnostics={runnable:p,programLog:t,vertexShader:{log:c,prefix:o},fragmentShader:{log:h,prefix:l}})),a.deleteShader(s),a.deleteShader(u),this.getUniforms=function(){return void 0===i&&(i=new te(a,g)),i},this.getAttributes=function(){if(void 0===r){for(var t={},e=a.getProgramParameter(g,35721),n=0;n<e;n++){var i=a.getActiveAttrib(g,n).name;t[i]=a.getAttribLocation(g,i)}r=t}return r},this.destroy=function(){a.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Io++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=s,this.fragmentShader=u,this}function me(t,e,n){function i(t){if(t)t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding);else var e=3e3;return e}var r=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,u=n.precision,l=n.maxVertexUniforms,c=n.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p="precision isWebGL2 supportsVertexTextures outputEncoding instancing map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(r,p,d,f,m,g,v){var y=f.fog;f=r.isMeshStandardMaterial?f.environment:null,f=r.envMap||f;var x=h[r.type];if(v.isSkinnedMesh){var _=v.skeleton.bones;if(s)_=1024;else{var b=Math.min(Math.floor((l-20)/4),_.length);b<_.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+_.length+" bones. This GPU supports "+b+"."),_=0):_=b}}else _=0;null!==r.precision&&((u=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",u,"instead.")),x?(b=Do[x],b={name:r.type,uniforms:_o.clone(b.uniforms),vertexShader:b.vertexShader,fragmentShader:b.fragmentShader}):b={name:r.type,uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader},r.onBeforeCompile(b,t);var w=t.getRenderTarget();return{isWebGL2:a,shaderID:x,shaderName:b.name,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:u,instancing:!0===v.isInstancedMesh,supportsVertexTextures:c,outputEncoding:null!==w?i(w.texture):t.outputEncoding,map:!!r.map,mapEncoding:i(r.map),matcap:!!r.matcap,matcapEncoding:i(r.matcap),envMap:!!f,envMapMode:f&&f.mapping,envMapEncoding:i(f),envMapCubeUV:!!f&&(306===f.mapping||307===f.mapping),lightMap:!!r.lightMap,lightMapEncoding:i(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:i(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||!r.displacementMap),fog:!!y,useFog:r.fog,fogExp2:y&&y.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&0<_,maxBones:_,useVertexTexture:s,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:p.directional.length,numPointLights:p.point.length,numSpotLights:p.spot.length,numRectAreaLights:p.rectArea.length,numHemiLights:p.hemi.length,numDirLightShadows:p.directionalShadowMap.length,numPointLightShadows:p.pointShadowMap.length,numSpotLightShadows:p.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:g,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&0<d.length,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:a||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||null!==e.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile}},this.getProgramCacheKey=function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);if(void 0===e.isRawShaderMaterial){for(i=0;i<p.length;i++)n.push(e[p[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(e,n){for(var i,a=0,o=r.length;a<o;a++){var s=r[a];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new fe(t,n,e),r.push(i)),i},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function ge(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function ve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ye(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function xe(){function t(t,i,r,o,s,u){var l=e[n];return void 0===l?(l={id:t.id,object:t,geometry:i,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:u},e[n]=l):(l.id=t.id,l.object=t,l.geometry=i,l.material=r,l.program=r.program||a,l.groupOrder=o,l.renderOrder=t.renderOrder,l.z=s,l.group=u),n++,l}var e=[],n=0,i=[],r=[],a={id:-1};return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,n,a,o,s,u){e=t(e,n,a,o,s,u),(!0===a.transparent?r:i).push(e)},unshift:function(e,n,a,o,s,u){e=t(e,n,a,o,s,u),(!0===a.transparent?r:i).unshift(e)},finish:function(){for(var t=n,i=e.length;t<i;t++){var r=e[t];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(t,e){1<i.length&&i.sort(t||ve),1<r.length&&r.sort(e||ye)}}}function _e(){function t(n){(n=n.target).removeEventListener("dispose",t),e.delete(n)}var e=new WeakMap;return{get:function(n,i){var r=e.get(n);if(void 0===r){var a=new xe;e.set(n,new WeakMap),e.get(n).set(i,a),n.addEventListener("dispose",t)}else void 0===(a=r.get(i))&&(a=new xe,r.set(i,a));return a},dispose:function(){e=new WeakMap}}}function be(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new l,color:new b};break;case"SpotLight":n={position:new l,direction:new l,color:new b,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new l,color:new b,distance:0,decay:0};break;case"HemisphereLight":n={direction:new l,skyColor:new b,groundColor:new b};break;case"RectAreaLight":n={color:new b,position:new l,halfWidth:new l,halfHeight:new l}}return t[e.id]=n}}}function we(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Me(){for(var t=new be,e=function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var i={shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={shadowBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;9>r;r++)i.probe.push(new l);var a=new l,o=new c,s=new c;return{setup:function(n,r,u){for(var l=0,c=0,h=0,p=0;9>p;p++)i.probe[p].set(0,0,0);var d=r=0,f=0,m=0,g=0,v=0,y=0,x=0;u=u.matrixWorldInverse,n.sort(we),p=0;for(var _=n.length;p<_;p++){var b=n[p],w=b.color,M=b.intensity,S=b.distance,D=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=w.r*M,c+=w.g*M,h+=w.b*M;else if(b.isLightProbe)for(D=0;9>D;D++)i.probe[D].addScaledVector(b.sh.coefficients[D],M);else if(b.isDirectionalLight){var E=t.get(b);E.color.copy(b.color).multiplyScalar(b.intensity),E.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(u),b.castShadow&&(M=b.shadow,(w=e.get(b)).shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize,i.directionalShadow[r]=w,i.directionalShadowMap[r]=D,i.directionalShadowMatrix[r]=b.shadow.matrix,v++),i.directional[r]=E,r++}else b.isSpotLight?((E=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(u),E.color.copy(w).multiplyScalar(M),E.distance=S,E.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(u),E.coneCos=Math.cos(b.angle),E.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),E.decay=b.decay,b.castShadow&&(M=b.shadow,(w=e.get(b)).shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize,i.spotShadow[f]=w,i.spotShadowMap[f]=D,i.spotShadowMatrix[f]=b.shadow.matrix,x++),i.spot[f]=E,f++):b.isRectAreaLight?((E=t.get(b)).color.copy(w).multiplyScalar(M),E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(u),s.identity(),o.copy(b.matrixWorld),o.premultiply(u),s.extractRotation(o),E.halfWidth.set(.5*b.width,0,0),E.halfHeight.set(0,.5*b.height,0),E.halfWidth.applyMatrix4(s),E.halfHeight.applyMatrix4(s),i.rectArea[m]=E,m++):b.isPointLight?((E=t.get(b)).position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(u),E.color.copy(b.color).multiplyScalar(b.intensity),E.distance=b.distance,E.decay=b.decay,b.castShadow&&(M=b.shadow,(w=e.get(b)).shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize,w.shadowCameraNear=M.camera.near,w.shadowCameraFar=M.camera.far,i.pointShadow[d]=w,i.pointShadowMap[d]=D,i.pointShadowMatrix[d]=b.shadow.matrix,y++),i.point[d]=E,d++):b.isHemisphereLight&&((E=t.get(b)).direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(u),E.direction.normalize(),E.skyColor.copy(b.color).multiplyScalar(M),E.groundColor.copy(b.groundColor).multiplyScalar(M),i.hemi[g]=E,g++)}i.ambient[0]=l,i.ambient[1]=c,i.ambient[2]=h,(n=i.hash).directionalLength===r&&n.pointLength===d&&n.spotLength===f&&n.rectAreaLength===m&&n.hemiLength===g&&n.numDirectionalShadows===v&&n.numPointShadows===y&&n.numSpotShadows===x||(i.directional.length=r,i.spot.length=f,i.rectArea.length=m,i.point.length=d,i.hemi.length=g,i.directionalShadow.length=v,i.directionalShadowMap.length=v,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=v,i.pointShadowMatrix.length=y,i.spotShadowMatrix.length=x,n.directionalLength=r,n.pointLength=d,n.spotLength=f,n.rectAreaLength=m,n.hemiLength=g,n.numDirectionalShadows=v,n.numPointShadows=y,n.numSpotShadows=x,i.version=ko++)},state:i}}function Se(){var t=new Me,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function De(){function t(n){(n=n.target).removeEventListener("dispose",t),e.delete(n)}var e=new WeakMap;return{get:function(n,i){if(!1===e.has(n)){var r=new Se;e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)}else!1===e.get(n).has(i)?(r=new Se,e.get(n).set(i,r)):r=e.get(n).get(i);return r},dispose:function(){e=new WeakMap}}}function Ee(t){E.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Te(t){E.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new l,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Ae(t,e,i){function r(t,e,n){var i=f[n=t<<0|e<<1|n<<2];return void 0===i&&(i=new Ee({depthPacking:3201,morphTargets:t,skinning:e}),f[n]=i),i}function s(t,e,n){var i=m[n=t<<0|e<<1|n<<2];return void 0===i&&(i=new Te({morphTargets:t,skinning:e}),m[n]=i),i}function u(e,n,i,a,o,u,l){var c=r,h=e.customDepthMaterial;return!0===a.isPointLight&&(c=s,h=e.customDistanceMaterial),void 0===h?(h=!1,!0===i.morphTargets&&(h=n.morphAttributes&&n.morphAttributes.position&&0<n.morphAttributes.position.length),n=!1,!0===e.isSkinnedMesh&&(!0===i.skinning?n=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),e=c(h,n,!0===e.isInstancedMesh)):e=h,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(h=e.uuid,c=i.uuid,void 0===(n=g[h])&&(n={},g[h]=n),void 0===(h=n[c])&&(h=e.clone(),n[c]=h),e=h),e.visible=i.visible,e.wireframe=i.wireframe,e.side=3===l?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:v[i.side],e.clipShadows=i.clipShadows,e.clippingPlanes=i.clippingPlanes,e.clipIntersection=i.clipIntersection,e.wireframeLinewidth=i.wireframeLinewidth,e.linewidth=i.linewidth,!0===a.isPointLight&&!0===e.isMeshDistanceMaterial&&(e.referencePosition.setFromMatrixPosition(a.matrixWorld),e.nearDistance=o,e.farDistance=u),e}function l(n,i,r,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);var s=e.update(n),h=n.material;if(Array.isArray(h))for(var p=s.groups,d=0,f=p.length;d<f;d++){var m=p[d],g=h[m.materialIndex];g&&g.visible&&(g=u(n,s,g,a,r.near,r.far,o),t.renderBufferDirect(r,null,s,g,n,m))}else h.visible&&(g=u(n,s,h,a,r.near,r.far,o),t.renderBufferDirect(r,null,s,g,n,null))}for(s=0,h=(n=n.children).length;s<h;s++)l(n[s],i,r,a,o)}}var c=new $,h=new n,p=new n,d=new a,f=[],m=[],g={},v={0:1,1:0,2:2},y=new X({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),x=y.clone();x.defines.HORIZONAL_PASS=1;var _=new k;_.setAttribute("position",new A(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var b=new G(_,y),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(n,r,a){if(!1!==w.enabled&&(!1!==w.autoUpdate||!1!==w.needsUpdate)&&0!==n.length){var s=t.getRenderTarget(),u=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var g=0,v=n.length;g<v;g++){var _=n[g],M=_.shadow;if(void 0===M)console.warn("THREE.WebGLShadowMap:",_,"has no shadow.");else{h.copy(M.mapSize);var S=M.getFrameExtents();h.multiply(S),p.copy(M.mapSize),(h.x>i||h.y>i)&&(h.x>i&&(p.x=Math.floor(i/S.x),h.x=p.x*S.x,M.mapSize.x=p.x),h.y>i&&(p.y=Math.floor(i/S.y),h.y=p.y*S.y,M.mapSize.y=p.y)),null!==M.map||M.isPointLightShadow||3!==this.type||(S={minFilter:1006,magFilter:1006,format:1023},M.map=new o(h.x,h.y,S),M.map.texture.name=_.name+".shadowMap",M.mapPass=new o(h.x,h.y,S),M.camera.updateProjectionMatrix()),null===M.map&&(S={minFilter:1003,magFilter:1003,format:1023},M.map=new o(h.x,h.y,S),M.map.texture.name=_.name+".shadowMap",M.camera.updateProjectionMatrix()),t.setRenderTarget(M.map),t.clear(),S=M.getViewportCount();for(var D=0;D<S;D++){var E=M.getViewport(D);d.set(p.x*E.x,p.y*E.y,p.x*E.z,p.y*E.w),m.viewport(d),M.updateMatrices(_,D),c=M.getFrustum(),l(r,a,M.camera,_,this.type)}M.isPointLightShadow||3!==this.type||(_=M,M=a,S=e.update(b),y.uniforms.shadow_pass.value=_.map.texture,y.uniforms.resolution.value=_.mapSize,y.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(M,null,S,y,b,null),x.uniforms.shadow_pass.value=_.mapPass.texture,x.uniforms.resolution.value=_.mapSize,x.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(M,null,S,x,b,null))}}w.needsUpdate=!1,t.setRenderTarget(s,u,f)}}}function Ce(t,e,n){function i(e,n,i){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return a}function r(n,i){v[n]=1,0===y[n]&&(t.enableVertexAttribArray(n),y[n]=1),x[n]!==i&&((d?t:e.get("ANGLE_instanced_arrays"))[d?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),x[n]=i)}function o(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function s(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function u(e,n,i,r,a,u,l,c){if(0===e)w&&(s(3042),w=!1);else if(w||(o(3042),w=!0),5!==e){if(e!==M||c!==L){if(100===S&&100===T||(t.blendEquation(32774),T=S=100),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}C=A=E=D=null,M=e,L=c}}else a=a||n,u=u||i,l=l||r,n===S&&a===T||(t.blendEquationSeparate(V[n],V[a]),S=n,T=a),i===D&&r===E&&u===A&&l===C||(t.blendFuncSeparate(j[i],j[r],j[u],j[l]),D=i,E=r,A=u,C=l),M=e,L=null}function l(e){P!==e&&(e?t.frontFace(2304):t.frontFace(2305),P=e)}function c(e){0!==e?(o(2884),e!==F&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):s(2884),F=e}function h(e,n,i){e?(o(32823),(O!==n||N!==i)&&(t.polygonOffset(n,i),O=n,N=i)):s(32823)}function p(e){void 0===e&&(e=33984+I-1),B!==e&&(t.activeTexture(e),B=e)}var d=n.isWebGL2,f=new function(){var e=!1,n=new a,i=null,r=new a(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?o(2929):s(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=i=n=null}}},g=new function(){var e=!1,n=null,i=null,r=null,a=null,u=null,l=null,c=null,h=null;return{setTest:function(t){e||(t?o(2960):s(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){u===e&&l===n&&c===i||(t.stencilOp(e,n,i),u=e,l=n,c=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=c=l=u=a=r=i=n=null}}};n=t.getParameter(34921);var v=new Uint8Array(n),y=new Uint8Array(n),x=new Uint8Array(n),_={},b=null,w=null,M=null,S=null,D=null,E=null,T=null,A=null,C=null,L=!1,P=null,F=null,R=null,O=null,N=null,I=t.getParameter(35661),z=!1;n=0,-1!==(n=t.getParameter(7938)).indexOf("WebGL")?(n=parseFloat(/^WebGL ([0-9])/.exec(n)[1]),z=1<=n):-1!==n.indexOf("OpenGL ES")&&(n=parseFloat(/^OpenGL ES ([0-9])/.exec(n)[1]),z=2<=n);var B=null,U={},k=new a,G=new a,H={};H[3553]=i(3553,3553,1),H[34067]=i(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),l(!1),c(1),o(2884),u(0);var V={100:32774,101:32778,102:32779};d?(V[103]=32775,V[104]=32776):null!==(n=e.get("EXT_blend_minmax"))&&(V[103]=n.MIN_EXT,V[104]=n.MAX_EXT);var j={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=v.length;t<e;t++)v[t]=0},enableAttribute:function(t){r(t,0)},enableAttributeAndDivisor:r,disableUnusedAttributes:function(){for(var e=0,n=y.length;e!==n;++e)y[e]!==v[e]&&(t.disableVertexAttribArray(e),y[e]=0)},vertexAttribPointer:function(e,n,i,r,a,o){!0!==d||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,r,a,o):t.vertexAttribIPointer(e,n,i,r,a,o)},enable:o,disable:s,useProgram:function(e){return b!==e&&(t.useProgram(e),b=e,!0)},setBlending:u,setMaterial:function(t,e){2===t.side?s(2884):o(2884);var n=1===t.side;e&&(n=!n),l(n),1===t.blending&&!1===t.transparent?u(0):u(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),e=t.stencilWrite,g.setTest(e),e&&(g.setMask(t.stencilWriteMask),g.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),g.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),h(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:l,setCullFace:c,setLineWidth:function(e){e!==R&&(z&&t.lineWidth(e),R=e)},setPolygonOffset:h,setScissorTest:function(t){t?o(3089):s(3089)},activeTexture:p,bindTexture:function(e,n){null===B&&p();var i=U[B];void 0===i&&(i={type:void 0,texture:void 0},U[B]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||H[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=U[B];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===k.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),k.copy(e))},viewport:function(e){!1===G.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),G.copy(e))},reset:function(){for(var e=0;e<y.length;e++)1===y[e]&&(t.disableVertexAttribArray(e),y[e]=0);_={},B=null,U={},F=P=M=b=null,f.reset(),m.reset(),g.reset()}}}function Le(t,e,n,i,r,a,o){function s(t,e){return F?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(i=e?Fr.floorPowerOfTwo:Math.floor)(r*t.width),r=i(r*t.height),void 0===D&&(D=s(e,r)),(n=n?s(e,r):D).width=e,n.height=r,n.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),n;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function l(t){return Fr.isPowerOfTwo(t.width)&&Fr.isPowerOfTwo(t.height)}function c(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function h(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function p(n,i,r){if(!1===E)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}return n=i,6403===i&&(5126===r&&(n=33326),5131===r&&(n=33325),5121===r&&(n=33321)),6407===i&&(5126===r&&(n=34837),5131===r&&(n=34843),5121===r&&(n=32849)),6408===i&&(5126===r&&(n=34836),5131===r&&(n=34842),5121===r&&(n=32856)),33325!==n&&33326!==n&&34842!==n&&34836!==n||e.get("EXT_color_buffer_float"),n}function d(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e)),e.isVideoTexture&&P.delete(e),o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(r=0;6>r;r++)t.deleteFramebuffer(n.__webglFramebuffer[r]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}o.memory.textures--}function g(t,e){var r=i.get(t);if(t.isVideoTexture){var a=o.render.frame;P.get(t)!==a&&(P.set(t,a),t.update())}if(0<t.version&&r.__version!==t.version)if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void b(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function v(e,r){if(6===e.image.length){var o=i.get(e);if(0<e.version&&o.__version!==e.version){_(o,e),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture);r=e.image[0]&&e.image[0].isDataTexture;for(var d=[],f=0;6>f;f++)d[f]=s||r?r?e.image[f].image:e.image[f]:u(e.image[f],!1,!0,A);var m=d[0],g=l(m)||E,v=a.convert(e.format),y=a.convert(e.type),b=p(e.internalFormat,v,y);if(x(34067,e,g),s){for(f=0;6>f;f++){var w=d[f].mipmaps;for(s=0;s<w.length;s++){var M=w[s];1023!==e.format&&1022!==e.format?null!==v?n.compressedTexImage2D(34069+f,s,b,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+f,s,b,M.width,M.height,0,v,y,M.data)}}o.__maxMipLevel=w.length-1}else{for(w=e.mipmaps,f=0;6>f;f++)if(r)for(n.texImage2D(34069+f,0,b,d[f].width,d[f].height,0,v,y,d[f].data),s=0;s<w.length;s++)M=(M=w[s]).image[f].image,n.texImage2D(34069+f,s+1,b,M.width,M.height,0,v,y,M.data);else for(n.texImage2D(34069+f,0,b,v,y,d[f]),s=0;s<w.length;s++)M=w[s],n.texImage2D(34069+f,s+1,b,v,y,M.image[f]);o.__maxMipLevel=w.length}c(e,g)&&h(34067,e,m.width,m.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function y(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function x(n,a,o){o?(t.texParameteri(n,10242,O[a.wrapS]),t.texParameteri(n,10243,O[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,O[a.wrapR]),t.texParameteri(n,10240,N[a.magFilter]),t.texParameteri(n,10241,N[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,d(a.magFilter)),t.texParameteri(n,10241,d(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(o=e.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===e.get("OES_texture_float_linear")||1016===a.type&&null===(E||e.get("OES_texture_half_float_linear"))||!(1<a.anisotropy||i.get(a).__currentAnisotropy)||(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}function _(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function b(e,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),_(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),r=(r=!E&&(1001!==i.wrapS||1001!==i.wrapT||1003!==i.minFilter&&1006!==i.minFilter))&&!1===l(i.image);var s=l(r=u(i.image,r,!1,C))||E,d=a.convert(i.format),f=a.convert(i.type),m=p(i.internalFormat,d,f);x(o,i,s);var g=i.mipmaps;if(i.isDepthTexture)m=6402,E?m=1015===i.type?36012:1014===i.type?33190:1020===i.type?35056:33189:1015===i.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===i.format&&6402===m&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,f=a.convert(i.type)),1027===i.format&&6402===m&&(m=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,f=a.convert(i.type))),n.texImage2D(3553,0,m,r.width,r.height,0,d,f,null);else if(i.isDataTexture)if(0<g.length&&s){for(var v=0,y=g.length;v<y;v++){var b=g[v];n.texImage2D(3553,v,m,b.width,b.height,0,d,f,b.data)}i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,r.width,r.height,0,d,f,r.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(v=0,y=g.length;v<y;v++)b=g[v],1023!==i.format&&1022!==i.format?null!==d?n.compressedTexImage2D(3553,v,m,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,v,m,b.width,b.height,0,d,f,b.data);e.__maxMipLevel=g.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,r.width,r.height,r.depth,0,d,f,r.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,r.width,r.height,r.depth,0,d,f,r.data),e.__maxMipLevel=0;else if(0<g.length&&s){for(v=0,y=g.length;v<y;v++)b=g[v],n.texImage2D(3553,v,m,d,f,b);i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,d,f,r),e.__maxMipLevel=0;c(i,s)&&h(o,i,r.width,r.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function w(e,r,o,s){var u=a.convert(r.texture.format),l=a.convert(r.texture.type),c=p(r.texture.internalFormat,u,l);n.texImage2D(s,0,c,r.width,r.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function M(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;i?((i=n.depthTexture)&&i.isDepthTexture&&(1015===i.type?r=36012:1014===i.type&&(r=33190)),i=S(n),t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)):t.renderbufferStorage(36161,r,n.width,n.height),t.framebufferRenderbuffer(36160,36096,36161,e)}else n.depthBuffer&&n.stencilBuffer?(i?(i=S(n),t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(e=a.convert(n.texture.format),r=a.convert(n.texture.type),r=p(n.texture.internalFormat,e,r),i?(i=S(n),t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)):t.renderbufferStorage(36161,r,n.width,n.height));t.bindRenderbuffer(36161,null)}function S(t){return E&&t.isWebGLMultisampleRenderTarget?Math.min(L,t.samples):0}var D,E=r.isWebGL2,T=r.maxTextures,A=r.maxCubemapSize,C=r.maxTextureSize,L=r.maxSamples,P=new WeakMap,F=!1;try{F="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}var R=0,O={1e3:10497,1001:33071,1002:33648},N={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},I=!1,z=!1;this.allocateTextureUnit=function(){var t=R;return t>=T&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+T),R+=1,t},this.resetTextureUnits=function(){R=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?b(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);0<t.version&&r.__version!==t.version?b(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",m),s.__webglTexture=t.createTexture(),o.memory.textures++;var u=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultisampleRenderTarget,f=l(e)||E;if(!E||1022!==e.texture.format||1015!==e.texture.type&&1016!==e.texture.type||(e.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u)for(r.__webglFramebuffer=[],d=0;6>d;d++)r.__webglFramebuffer[d]=t.createFramebuffer();else if(r.__webglFramebuffer=t.createFramebuffer(),d)if(E){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer),d=a.convert(e.texture.format);var v=a.convert(e.texture.type);d=p(e.texture.internalFormat,d,v),v=S(e),t.renderbufferStorageMultisample(36161,v,d,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),M(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){for(n.bindTexture(34067,s.__webglTexture),x(34067,e.texture,f),d=0;6>d;d++)w(r.__webglFramebuffer[d],e,36064,34069+d);c(e.texture,f)&&h(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),x(3553,e.texture,f),w(r.__webglFramebuffer,e,36064,3553),c(e.texture,f)&&h(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);if(e.depthBuffer){if(r=i.get(e),s=!0===e.isWebGLCubeRenderTarget,e.depthTexture){if(s)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,r.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(i.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),r=i.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}else if(s)for(r.__webglDepthbuffer=[],s=0;6>s;s++)t.bindFramebuffer(36160,r.__webglFramebuffer[s]),r.__webglDepthbuffer[s]=t.createRenderbuffer(),M(r.__webglDepthbuffer[s],e,!1);else t.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),M(r.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,r=l(t)||E;if(c(e,r)){r=t.isWebGLCubeRenderTarget?34067:3553;var a=i.get(e).__webglTexture;n.bindTexture(r,a),h(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(E){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===I&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),I=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):y(t,e)}}function Pe(t,e,n){var i=n.isWebGL2;return{convert:function(t){if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i)return 5131;var n=e.get("OES_texture_half_float");return null!==n?n.HALF_FLOAT_OES:null}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:1020===t?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Fe(t){Z.call(this),this.cameras=t||[]}function Re(){d.call(this),this.type="Group"}function Oe(){this._grip=this._targetRay=null}function Ne(t,e){function n(t){var e=g.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function i(){g.forEach((function(t,e){t.disconnect(e)})),g.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),E.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function r(t){p=t,E.setContext(c),E.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}function o(t){for(var e=c.inputSources,n=0;n<m.length;n++)g.set(e[n],m[n]);for(n=0;n<t.removed.length;n++){e=t.removed[n];var i=g.get(e);i&&(i.dispatchEvent({type:"disconnected",data:e}),g.delete(e))}for(n=0;n<t.added.length;n++)e=t.added[n],(i=g.get(e))&&i.dispatchEvent({type:"connected",data:e})}function s(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var u=this,c=null,h=1,p=null,d="local-floor",f=null,m=[],g=new Map,v=new Z;v.layers.enable(1),v.viewport=new a;var y=new Z;y.layers.enable(2),y.viewport=new a;var x=[v,y],_=new Fe;_.layers.enable(1),_.layers.enable(2);var b=null,w=null;this.isPresenting=this.enabled=!1,this.getController=function(t){var e=m[t];return void 0===e&&(e=new Oe,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=m[t];return void 0===e&&(e=new Oe,m[t]=e),e.getGripSpace()},this.setFramebufferScaleFactor=function(t){h=t,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){d=t,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p},this.getSession=function(){return c},this.setSession=function(t){null!==(c=t)&&(c.addEventListener("select",n),c.addEventListener("selectstart",n),c.addEventListener("selectend",n),c.addEventListener("squeeze",n),c.addEventListener("squeezestart",n),c.addEventListener("squeezeend",n),c.addEventListener("end",i),!0!==(t=e.getContextAttributes()).xrCompatible&&e.makeXRCompatible(),t=new XRWebGLLayer(c,e,{antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:h}),c.updateRenderState({baseLayer:t}),c.requestReferenceSpace(d).then(r),c.addEventListener("inputsourceschange",o))};var M=new l,S=new l;this.getCamera=function(t){_.near=y.near=v.near=t.near,_.far=y.far=v.far=t.far,b===_.near&&w===_.far||(c.updateRenderState({depthNear:_.near,depthFar:_.far}),b=_.near,w=_.far);var e=t.parent,n=_.cameras;s(_,e);for(var i=0;i<n.length;i++)s(n[i],e);for(t.matrixWorld.copy(_.matrixWorld),i=0,e=(t=t.children).length;i<e;i++)t[i].updateMatrixWorld(!0);if(2===n.length){M.setFromMatrixPosition(v.matrixWorld),S.setFromMatrixPosition(y.matrixWorld),n=M.distanceTo(S);var r=v.projectionMatrix.elements,a=y.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1),t=(r[9]+1)/r[5],e=(r[9]-1)/r[5];var u=(r[8]-1)/r[0],l=(a[8]+1)/a[0];a=o*u,r=o*l,u=(l=n/(-u+l))*-u,v.matrixWorld.decompose(_.position,_.quaternion,_.scale),_.translateX(u),_.translateZ(l),_.matrixWorld.compose(_.position,_.quaternion,_.scale),_.matrixWorldInverse.getInverse(_.matrixWorld),o+=l,l=i+l,_.projectionMatrix.makePerspective(a-u,r+(n-u),t*i/l*o,e*i/l*o,o,l)}else _.projectionMatrix.copy(v.projectionMatrix);return _};var D=null,E=new tt;E.setAnimationLoop((function(e,n){if(null!==(f=n.getViewerPose(p))){var i=f.views,r=c.renderState.baseLayer;t.setFramebuffer(r.framebuffer);var a=!1;i.length!==_.cameras.length&&(_.cameras.length=0,a=!0);for(var o=0;o<i.length;o++){var s=i[o],u=r.getViewport(s),l=x[o];l.matrix.fromArray(s.transform.matrix),l.projectionMatrix.fromArray(s.projectionMatrix),l.viewport.set(u.x,u.y,u.width,u.height),0===o&&_.matrix.copy(l.matrix),!0===a&&_.cameras.push(l)}}for(i=c.inputSources,o=0;o<m.length;o++)m[o].update(i[o],n,p);D&&D(e,n)})),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}function Ie(t){function e(e,n,i){if(e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),(i=n.envMap||i)&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio,e.maxMipLevel.value=t.get(i).__maxMipLevel),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map)var r=n.map;else n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap&&(r=n.emissiveMap);if(void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap)var a=n.aoMap;else n.lightMap&&(a=n.lightMap);void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,a,o){if(i.isMeshBasicMaterial)e(t,i);else if(i.isMeshLambertMaterial)e(t,i),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap);else if(i.isMeshToonMaterial)e(t,i),t.specular.value.copy(i.specular),t.shininess.value=Math.max(i.shininess,1e-4),i.gradientMap&&(t.gradientMap.value=i.gradientMap),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshPhongMaterial)e(t,i),t.specular.value.copy(i.specular),t.shininess.value=Math.max(i.shininess,1e-4),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshStandardMaterial)e(t,i,r),i.isMeshPhysicalMaterial?(n(t,i,r),t.reflectivity.value=i.reflectivity,t.clearcoat.value=i.clearcoat,t.clearcoatRoughness.value=i.clearcoatRoughness,i.sheen&&t.sheen.value.copy(i.sheen),i.clearcoatMap&&(t.clearcoatMap.value=i.clearcoatMap),i.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap),i.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),t.clearcoatNormalMap.value=i.clearcoatNormalMap,1===i.side&&t.clearcoatNormalScale.value.negate()),t.transparency.value=i.transparency):n(t,i,r);else if(i.isMeshMatcapMaterial)e(t,i),i.matcap&&(t.matcap.value=i.matcap),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshDepthMaterial)e(t,i),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isMeshDistanceMaterial)e(t,i),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias),t.referencePosition.value.copy(i.referencePosition),t.nearDistance.value=i.nearDistance,t.farDistance.value=i.farDistance;else if(i.isMeshNormalMaterial)e(t,i),i.bumpMap&&(t.bumpMap.value=i.bumpMap,t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias);else if(i.isLineBasicMaterial)t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,i.isLineDashedMaterial&&(t.dashSize.value=i.dashSize,t.totalSize.value=i.dashSize+i.gapSize,t.scale.value=i.scale);else if(i.isPointsMaterial){if(t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.size.value=i.size*a,t.scale.value=.5*o,i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.map)var s=i.map;else i.alphaMap&&(s=i.alphaMap);void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uvTransform.value.copy(s.matrix))}else if(i.isSpriteMaterial){if(t.diffuse.value.copy(i.color),t.opacity.value=i.opacity,t.rotation.value=i.rotation,i.map&&(t.map.value=i.map),i.alphaMap&&(t.alphaMap.value=i.alphaMap),i.map)var u=i.map;else i.alphaMap&&(u=i.alphaMap);void 0!==u&&(!0===u.matrixAutoUpdate&&u.updateMatrix(),t.uvTransform.value.copy(u.matrix))}else i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function ze(t,e){this.name="",this.color=new b(t),this.density=void 0!==e?e:25e-5}function Be(t,e,n){this.name="",this.color=new b(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Ue(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function ke(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Ge(t){E.call(this),this.type="SpriteMaterial",this.color=new b(16777215),this.alphaMap=this.map=null,this.rotation=0,this.transparent=this.sizeAttenuation=!0,this.setValues(t)}function He(t){if(d.call(this),this.type="Sprite",void 0===Ho){Ho=new k;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new Ue(e,5),Ho.setIndex([0,1,2,0,2,3]),Ho.setAttribute("position",new ke(e,3,0,!1)),Ho.setAttribute("uv",new ke(e,2,3,!1))}this.geometry=Ho,this.material=void 0!==t?t:new Ge,this.center=new n(.5,.5)}function Ve(t,e,n,i,r,a){qo.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Xo.x=a*qo.x-r*qo.y,Xo.y=r*qo.x+a*qo.y):Xo.copy(qo),t.copy(e),t.x+=Xo.x,t.y+=Xo.y,t.applyMatrix4(Yo)}function je(){d.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function We(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),G.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new c,this.bindMatrixInverse=new c}function qe(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new c)}function Xe(){d.call(this),this.type="Bone"}function Ye(t,e,n){G.call(this,t,e),this.instanceMatrix=new A(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function Ze(t){E.call(this),this.type="LineBasicMaterial",this.color=new b(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.morphTargets=!1,this.setValues(t)}function Je(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),d.call(this),this.type="Line",this.geometry=void 0!==t?t:new k,this.material=void 0!==e?e:new Ze,this.updateMorphTargets()}function Ke(t,e){Je.call(this,t,e),this.type="LineSegments"}function Qe(t,e){Je.call(this,t,e),this.type="LineLoop"}function $e(t){E.call(this),this.type="PointsMaterial",this.color=new b(16777215),this.alphaMap=this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function tn(t,e){d.call(this),this.type="Points",this.geometry=void 0!==t?t:new k,this.material=void 0!==e?e:new $e,this.updateMorphTargets()}function en(t,e,n,i,r,a,o){var s=ws.distanceSqToPoint(t);s<n&&(n=new l,ws.closestPointToPoint(t,n),n.applyMatrix4(i),(t=r.ray.origin.distanceTo(n))<r.near||t>r.far||a.push({distance:t,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:o}))}function nn(t,e,n,i,a,o,s,u,l){r.call(this,t,e,n,i,a,o,s,u,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==a?a:1006,this.generateMipmaps=!1}function rn(t,e,n,i,a,o,s,u,l,c,h,p){r.call(this,null,o,s,u,l,c,i,a,h,p),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function an(t,e,n,i,a,o,s,u,l){r.call(this,t,e,n,i,a,o,s,u,l),this.needsUpdate=!0}function on(t,e,n,i,a,o,s,u,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),r.call(this,null,i,a,o,s,u,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=this.flipY=!1}function sn(t){k.call(this),this.type="WireframeGeometry";var e,n,i,r=[],a=[0,0],o={},s=["a","b","c"];if(t&&t.isGeometry){var u=t.faces,c=0;for(n=u.length;c<n;c++){var h=u[c];for(e=0;3>e;e++){var p=h[s[e]],d=h[s[(e+1)%3]];a[0]=Math.min(p,d),a[1]=Math.max(p,d),void 0===o[p=a[0]+","+a[1]]&&(o[p]={index1:a[0],index2:a[1]})}}for(p in o)c=o[p],s=t.vertices[c.index1],r.push(s.x,s.y,s.z),s=t.vertices[c.index2],r.push(s.x,s.y,s.z)}else if(t&&t.isBufferGeometry)if(s=new l,null!==t.index){u=t.attributes.position,h=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:h.count,materialIndex:0}]),t=0,i=f.length;t<i;++t)for(e=(c=f[t]).start,n=c.count,c=e,n=e+n;c<n;c+=3)for(e=0;3>e;e++)p=h.getX(c+e),d=h.getX(c+(e+1)%3),a[0]=Math.min(p,d),a[1]=Math.max(p,d),void 0===o[p=a[0]+","+a[1]]&&(o[p]={index1:a[0],index2:a[1]});for(p in o)c=o[p],s.fromBufferAttribute(u,c.index1),r.push(s.x,s.y,s.z),s.fromBufferAttribute(u,c.index2),r.push(s.x,s.y,s.z)}else for(c=0,n=(u=t.attributes.position).count/3;c<n;c++)for(e=0;3>e;e++)o=3*c+e,s.fromBufferAttribute(u,o),r.push(s.x,s.y,s.z),o=3*c+(e+1)%3,s.fromBufferAttribute(u,o),r.push(s.x,s.y,s.z);this.setAttribute("position",new I(r,3))}function un(t,e,n){j.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ln(t,e,n)),this.mergeVertices()}function ln(t,e,n){k.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],u=[],c=new l,h=new l,p=new l,d=new l,f=new l;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(i=0;i<=n;i++){var g=i/n;for(r=0;r<=e;r++){var v=r/e;t(v,g,h),o.push(h.x,h.y,h.z),0<=v-1e-5?(t(v-1e-5,g,p),d.subVectors(h,p)):(t(v+1e-5,g,p),d.subVectors(p,h)),0<=g-1e-5?(t(v,g-1e-5,p),f.subVectors(h,p)):(t(v,g+1e-5,p),f.subVectors(p,h)),c.crossVectors(d,f).normalize(),s.push(c.x,c.y,c.z),u.push(v,g)}}for(i=0;i<n;i++)for(r=0;r<e;r++)t=i*m+r+1,c=(i+1)*m+r+1,h=(i+1)*m+r,a.push(i*m+r,t,h),a.push(t,c,h);this.setIndex(a),this.setAttribute("position",new I(o,3)),this.setAttribute("normal",new I(s,3)),this.setAttribute("uv",new I(u,2))}function cn(t,e,n,i){j.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new hn(t,e,n,i)),this.mergeVertices()}function hn(t,e,i,r){function a(t){u.push(t.x,t.y,t.z)}function o(e,n){e*=3,n.x=t[e+0],n.y=t[e+1],n.z=t[e+2]}function s(t,e,n,i){0>i&&1===t.x&&(c[e]=t.x-1),0===n.x&&0===n.z&&(c[e]=i/2/Math.PI+.5)}k.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1;var u=[],c=[];!function(t){for(var n=new l,i=new l,r=new l,s=0;s<e.length;s+=3){o(e[s+0],n),o(e[s+1],i),o(e[s+2],r);var u,c,h=n,p=i,d=r,f=Math.pow(2,t),m=[];for(c=0;c<=f;c++){m[c]=[];var g=h.clone().lerp(d,c/f),v=p.clone().lerp(d,c/f),y=f-c;for(u=0;u<=y;u++)m[c][u]=0===u&&c===f?g:g.clone().lerp(v,u/y)}for(c=0;c<f;c++)for(u=0;u<2*(f-c)-1;u++)h=Math.floor(u/2),0==u%2?(a(m[c][h+1]),a(m[c+1][h]),a(m[c][h])):(a(m[c][h+1]),a(m[c+1][h+1]),a(m[c+1][h]))}}(r=r||0),function(t){for(var e=new l,n=0;n<u.length;n+=3)e.x=u[n+0],e.y=u[n+1],e.z=u[n+2],e.normalize().multiplyScalar(t),u[n+0]=e.x,u[n+1]=e.y,u[n+2]=e.z}(i),function(){for(var t=new l,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],c.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new l,e=new l;for(var i=new l,r=new l,a=new n,o=new n,h=new n,p=0,d=0;p<u.length;p+=9,d+=6){t.set(u[p+0],u[p+1],u[p+2]),e.set(u[p+3],u[p+4],u[p+5]),i.set(u[p+6],u[p+7],u[p+8]),a.set(c[d+0],c[d+1]),o.set(c[d+2],c[d+3]),h.set(c[d+4],c[d+5]),r.copy(t).add(e).add(i).divideScalar(3);var f=Math.atan2(r.z,-r.x);s(a,d+0,t,f),s(o,d+2,e,f),s(h,d+4,i,f)}for(t=0;t<c.length;t+=6)e=c[t+0],i=c[t+2],r=c[t+4],a=Math.min(e,i,r),.9<Math.max(e,i,r)&&.1>a&&(.2>e&&(c[t+0]+=1),.2>i&&(c[t+2]+=1),.2>r&&(c[t+4]+=1))}(),this.setAttribute("position",new I(u,3)),this.setAttribute("normal",new I(u.slice(),3)),this.setAttribute("uv",new I(c,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function pn(t,e){j.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new dn(t,e)),this.mergeVertices()}function dn(t,e){hn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fn(t,e){j.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new mn(t,e)),this.mergeVertices()}function mn(t,e){hn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function gn(t,e){j.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new vn(t,e)),this.mergeVertices()}function vn(t,e){var n=(1+Math.sqrt(5))/2;hn.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function yn(t,e){j.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new xn(t,e)),this.mergeVertices()}function xn(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;hn.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function _n(t,e,n,i,r,a){j.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new bn(t,e,n,i,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function bn(t,e,i,r,a){function o(n){f=t.getPointAt(n/e,f);var a=s.normals[n];for(n=s.binormals[n],c=0;c<=r;c++){var o=c/r*Math.PI*2,u=Math.sin(o);o=-Math.cos(o),p.x=o*a.x+u*n.x,p.y=o*a.y+u*n.y,p.z=o*a.z+u*n.z,p.normalize(),g.push(p.x,p.y,p.z),h.x=f.x+i*p.x,h.y=f.y+i*p.y,h.z=f.z+i*p.z,m.push(h.x,h.y,h.z)}}k.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var s=t.computeFrenetFrames(e,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var u,c,h=new l,p=new l,d=new n,f=new l,m=[],g=[],v=[],y=[];for(u=0;u<e;u++)o(u);for(o(!1===a?e:0),u=0;u<=e;u++)for(c=0;c<=r;c++)d.x=u/e,d.y=c/r,v.push(d.x,d.y);!function(){for(c=1;c<=e;c++)for(u=1;u<=r;u++){var t=(r+1)*c+(u-1),n=(r+1)*c+u,i=(r+1)*(c-1)+u;y.push((r+1)*(c-1)+(u-1),t,i),y.push(t,n,i)}}(),this.setIndex(y),this.setAttribute("position",new I(m,3)),this.setAttribute("normal",new I(g,3)),this.setAttribute("uv",new I(v,2))}function wn(t,e,n,i,r,a,o){j.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Mn(t,e,n,i,r,a)),this.mergeVertices()}function Mn(t,e,n,i,r,a){function o(t,e,n,i,r){var a=Math.sin(t);e=n/e*t,n=Math.cos(e),r.x=i*(2+n)*.5*Math.cos(t),r.y=i*(2+n)*a*.5,r.z=i*Math.sin(e)*.5}k.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var s,u=[],c=[],h=[],p=[],d=new l,f=new l,m=new l,g=new l,v=new l,y=new l,x=new l;for(s=0;s<=n;++s){var _=s/n*r*Math.PI*2;for(o(_,r,a,t,m),o(_+.01,r,a,t,g),y.subVectors(g,m),x.addVectors(g,m),v.crossVectors(y,x),x.crossVectors(v,y),v.normalize(),x.normalize(),_=0;_<=i;++_){var b=_/i*Math.PI*2,w=-e*Math.cos(b);b=e*Math.sin(b),d.x=m.x+(w*x.x+b*v.x),d.y=m.y+(w*x.y+b*v.y),d.z=m.z+(w*x.z+b*v.z),c.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),h.push(f.x,f.y,f.z),p.push(s/n),p.push(_/i)}}for(_=1;_<=n;_++)for(s=1;s<=i;s++)t=(i+1)*_+(s-1),e=(i+1)*_+s,r=(i+1)*(_-1)+s,u.push((i+1)*(_-1)+(s-1),t,r),u.push(t,e,r);this.setIndex(u),this.setAttribute("position",new I(c,3)),this.setAttribute("normal",new I(h,3)),this.setAttribute("uv",new I(p,2))}function Sn(t,e,n,i,r){j.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Dn(t,e,n,i,r)),this.mergeVertices()}function Dn(t,e,n,i,r){k.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],u=[],c=[],h=[],p=new l,d=new l,f=new l;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var m=o/i*r,g=a/n*Math.PI*2;d.x=(t+e*Math.cos(g))*Math.cos(m),d.y=(t+e*Math.cos(g))*Math.sin(m),d.z=e*Math.sin(g),u.push(d.x,d.y,d.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),h.push(o/i),h.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++)t=(i+1)*(a-1)+o-1,e=(i+1)*(a-1)+o,r=(i+1)*a+o,s.push((i+1)*a+o-1,t,r),s.push(t,e,r);this.setIndex(s),this.setAttribute("position",new I(u,3)),this.setAttribute("normal",new I(c,3)),this.setAttribute("uv",new I(h,2))}function En(t,e,n,i,r){for(var a,o=0,s=e,u=n-i;s<n;s+=i)o+=(t[u]-t[s])*(t[s+1]+t[u+1]),u=s;if(r===0<o)for(r=e;r<n;r+=i)a=Hn(r,t[r],t[r+1],a);else for(r=n-i;r>=e;r-=i)a=Hn(r,t[r],t[r+1],a);return a&&In(a,a.next)&&(Vn(a),a=a.next),a}function Tn(t,e){if(!t)return t;e||(e=t);do{var n=!1;if(t.steiner||!In(t,t.next)&&0!==Nn(t.prev,t,t.next))t=t.next;else{if(Vn(t),(t=e=t.prev)===t.next)break;n=!0}}while(n||t!==e);return e}function An(t,e,n,i,r,a,o){if(t){if(!o&&a){var s=t,u=s;do{null===u.z&&(u.z=Fn(u.x,u.y,i,r,a)),u.prevZ=u.prev,u=u.nextZ=u.next}while(u!==s);u.prevZ.nextZ=null,u.prevZ=null,s=u;var l,c,h,p,d=1;do{u=s;var f=s=null;for(c=0;u;){c++;var m=u;for(l=h=0;l<d&&(h++,m=m.nextZ);l++);for(p=d;0<h||0<p&&m;)0!==h&&(0===p||!m||u.z<=m.z)?(l=u,u=u.nextZ,h--):(l=m,m=m.nextZ,p--),f?f.nextZ=l:s=l,l.prevZ=f,f=l;u=m}f.nextZ=null,d*=2}while(1<c)}for(s=t;t.prev!==t.next;){if(u=t.prev,m=t.next,a)f=Cn(t,i,r,a);else t:if(f=t,c=f.prev,h=f,d=f.next,0<=Nn(c,h,d))f=!1;else{for(l=f.next.next;l!==f.prev;){if(On(c.x,c.y,h.x,h.y,d.x,d.y,l.x,l.y)&&0<=Nn(l.prev,l,l.next)){f=!1;break t}l=l.next}f=!0}if(f)e.push(u.i/n),e.push(t.i/n),e.push(m.i/n),Vn(t),s=t=m.next;else if((t=m)===s){if(o){if(1===o){o=e,s=n,u=t=Tn(t);do{!In(m=u.prev,f=u.next.next)&&zn(m,u,u.next,f)&&kn(m,f)&&kn(f,m)&&(o.push(m.i/s),o.push(u.i/s),o.push(f.i/s),Vn(u),Vn(u.next),u=t=f),u=u.next}while(u!==t);An(t=Tn(u),e,n,i,r,a,2)}else if(2===o)t:{o=t;do{for(s=o.next.next;s!==o.prev;){if(u=o.i!==s.i){if(m=s,f=(u=o).next.i!==m.i&&u.prev.i!==m.i){e:{f=u;do{if(f.i!==u.i&&f.next.i!==u.i&&f.i!==m.i&&f.next.i!==m.i&&zn(f,f.next,u,m)){f=!0;break e}f=f.next}while(f!==u);f=!1}f=!f}if(f){if(f=kn(u,m)&&kn(m,u)){f=u,c=!1,h=(u.x+m.x)/2,d=(u.y+m.y)/2;do{f.y>d!=f.next.y>d&&f.next.y!==f.y&&h<(f.next.x-f.x)*(d-f.y)/(f.next.y-f.y)+f.x&&(c=!c),f=f.next}while(f!==u);f=c}f=f&&(Nn(u.prev,u,m.prev)||Nn(u,m.prev,m))||In(u,m)&&0<Nn(u.prev,u,u.next)&&0<Nn(m.prev,m,m.next)}u=f}if(u){t=Gn(o,s),o=Tn(o,o.next),t=Tn(t,t.next),An(o,e,n,i,r,a),An(t,e,n,i,r,a);break t}s=s.next}o=o.next}while(o!==t)}}else An(Tn(t),e,n,i,r,a,1);break}}}}function Cn(t,e,n,i){var r=t.prev,a=t.next;if(0<=Nn(r,t,a))return!1;var o=r.x>t.x?r.x>a.x?r.x:a.x:t.x>a.x?t.x:a.x,s=r.y>t.y?r.y>a.y?r.y:a.y:t.y>a.y?t.y:a.y,u=Fn(r.x<t.x?r.x<a.x?r.x:a.x:t.x<a.x?t.x:a.x,r.y<t.y?r.y<a.y?r.y:a.y:t.y<a.y?t.y:a.y,e,n,i);for(e=Fn(o,s,e,n,i),n=t.prevZ,i=t.nextZ;n&&n.z>=u&&i&&i.z<=e;){if(n!==t.prev&&n!==t.next&&On(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=Nn(n.prev,n,n.next))return!1;if(n=n.prevZ,i!==t.prev&&i!==t.next&&On(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=Nn(i.prev,i,i.next))return!1;i=i.nextZ}for(;n&&n.z>=u;){if(n!==t.prev&&n!==t.next&&On(r.x,r.y,t.x,t.y,a.x,a.y,n.x,n.y)&&0<=Nn(n.prev,n,n.next))return!1;n=n.prevZ}for(;i&&i.z<=e;){if(i!==t.prev&&i!==t.next&&On(r.x,r.y,t.x,t.y,a.x,a.y,i.x,i.y)&&0<=Nn(i.prev,i,i.next))return!1;i=i.nextZ}return!0}function Ln(t,e){return t.x-e.x}function Pn(t,e){var n=e,i=t.x,r=t.y,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var o=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a){if(a=o,o===i){if(r===n.y)return n;if(r===n.next.y)return n.next}var s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!s)return null;if(i===a)return s;e=s,o=s.x;var u=s.y,l=1/0;n=s;do{if(i>=n.x&&n.x>=o&&i!==n.x&&On(r<u?i:a,r,o,u,r<u?a:i,r,n.x,n.y)){var c,h=Math.abs(r-n.y)/(i-n.x);if((c=kn(n,t))&&!(c=h<l)&&(c=h===l)&&!(c=n.x>s.x)&&(c=n.x===s.x)){var p=n;c=0>Nn((c=s).prev,c,p.prev)&&0>Nn(p.next,c,c.next)}c&&(s=n,l=h)}n=n.next}while(n!==e);return s}function Fn(t,e,n,i,r){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Rn(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function On(t,e,n,i,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(i-s)-(n-o)*(e-s)&&0<=(n-o)*(a-s)-(r-o)*(i-s)}function Nn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function In(t,e){return t.x===e.x&&t.y===e.y}function zn(t,e,n,i){var r=Un(Nn(t,e,n)),a=Un(Nn(t,e,i)),o=Un(Nn(n,i,t)),s=Un(Nn(n,i,e));return!!(r!==a&&o!==s||0===r&&Bn(t,n,e)||0===a&&Bn(t,i,e)||0===o&&Bn(n,t,i)||0===s&&Bn(n,e,i))}function Bn(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Un(t){return 0<t?1:0>t?-1:0}function kn(t,e){return 0>Nn(t.prev,t,t.next)?0<=Nn(t,e,t.next)&&0<=Nn(t,t.prev,e):0>Nn(t,e,t.prev)||0>Nn(t,t.next,e)}function Gn(t,e){var n=new jn(t.i,t.x,t.y),i=new jn(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Hn(t,e,n,i){return t=new jn(t,e,n),i?(t.next=i.next,t.prev=i,i.next.prev=t,i.next=t):(t.prev=t,t.next=t),t}function Vn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function jn(t,e,n){this.i=t,this.x=e,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Wn(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function qn(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Xn(t,e){j.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Yn(t,e)),this.mergeVertices()}function Yn(t,e){function i(t){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function s(t,e,i){var r=t.x-e.x,a=t.y-e.y,o=i.x-t.x,s=i.y-t.y,u=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var l=Math.sqrt(u),c=Math.sqrt(o*o+s*s);if(u=e.x-a/l,e=e.y+r/l,2>=(a=(o=u+r*(s=((i.x-s/c-u)*s-(i.y+o/c-e)*o)/(r*s-a*o))-t.x)*o+(r=e+a*s-t.y)*r))return new n(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(u)):(o=r,r=a,a=Math.sqrt(u/2));return new n(o/a,r/a)}function u(t,e){for(G=t.length;0<=--G;){var n=G,i=G-1;0>i&&(i=t.length-1);var o,s=g+2*w;for(o=0;o<s;o++){var u=U*o,l=U*(o+1),c=e+i+u,h=e+i+l;l=e+n+l,p(e+n+u),p(c),p(l),p(c),p(h),p(l),u=a.length/3,d((u=S.generateSideWallUV(r,a,u-6,u-3,u-2,u-1))[0]),d(u[1]),d(u[3]),d(u[1]),d(u[2]),d(u[3])}}}function c(t,e,n){f.push(t),f.push(e),f.push(n)}function h(t,e,n){p(t),p(e),p(n),t=a.length/3,d((t=S.generateTopUV(r,a,t-3,t-2,t-1))[0]),d(t[1]),d(t[2])}function p(t){a.push(f[3*t]),a.push(f[3*t+1]),a.push(f[3*t+2])}function d(t){o.push(t.x),o.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,y=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.bevelThickness?e.bevelThickness:6,_=void 0!==e.bevelSize?e.bevelSize:x-2,b=void 0!==e.bevelOffset?e.bevelOffset:0,w=void 0!==e.bevelSegments?e.bevelSegments:3,M=e.extrudePath,S=void 0!==e.UVGenerator?e.UVGenerator:Ts;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var D,E=!1;if(M){var T=M.getSpacedPoints(g);E=!0,y=!1;var A=M.computeFrenetFrames(g,!1),C=new l,L=new l,P=new l}y||(b=_=x=w=0),m=t.extractPoints(m),t=m.shape;var F=m.holes;if(!Es.isClockWise(t)){t=t.reverse();var R=0;for(D=F.length;R<D;R++){var O=F[R];Es.isClockWise(O)&&(F[R]=O.reverse())}}var N=Es.triangulateShape(t,F),I=t;for(R=0,D=F.length;R<D;R++)O=F[R],t=t.concat(O);var z,B,U=t.length,k=N.length;m=[];var G=0,H=I.length,V=H-1;for(z=G+1;G<H;G++,V++,z++)V===H&&(V=0),z===H&&(z=0),m[G]=s(I[G],I[V],I[z]);M=[];var j=m.concat();for(R=0,D=F.length;R<D;R++){O=F[R];var W=[];for(G=0,V=(H=O.length)-1,z=G+1;G<H;G++,V++,z++)V===H&&(V=0),z===H&&(z=0),W[G]=s(O[G],O[V],O[z]);M.push(W),j=j.concat(W)}for(V=0;V<w;V++){H=V/w;var q=x*Math.cos(H*Math.PI/2);for(z=_*Math.sin(H*Math.PI/2)+b,G=0,H=I.length;G<H;G++){var X=i(I[G],m[G],z);c(X.x,X.y,-q)}for(R=0,D=F.length;R<D;R++)for(O=F[R],W=M[R],G=0,H=O.length;G<H;G++)c((X=i(O[G],W[G],z)).x,X.y,-q)}for(z=_+b,G=0;G<U;G++)X=y?i(t[G],j[G],z):t[G],E?(L.copy(A.normals[0]).multiplyScalar(X.x),C.copy(A.binormals[0]).multiplyScalar(X.y),P.copy(T[0]).add(L).add(C),c(P.x,P.y,P.z)):c(X.x,X.y,0);for(H=1;H<=g;H++)for(G=0;G<U;G++)X=y?i(t[G],j[G],z):t[G],E?(L.copy(A.normals[H]).multiplyScalar(X.x),C.copy(A.binormals[H]).multiplyScalar(X.y),P.copy(T[H]).add(L).add(C),c(P.x,P.y,P.z)):c(X.x,X.y,v/g*H);for(V=w-1;0<=V;V--){for(H=V/w,q=x*Math.cos(H*Math.PI/2),z=_*Math.sin(H*Math.PI/2)+b,G=0,H=I.length;G<H;G++)c((X=i(I[G],m[G],z)).x,X.y,v+q);for(R=0,D=F.length;R<D;R++)for(O=F[R],W=M[R],G=0,H=O.length;G<H;G++)X=i(O[G],W[G],z),E?c(X.x,X.y+T[g-1].y,T[g-1].x+q):c(X.x,X.y,v+q)}!function(){var t=a.length/3;if(y){var e=0*U;for(G=0;G<k;G++)h((B=N[G])[2]+e,B[1]+e,B[0]+e);for(e=U*(g+2*w),G=0;G<k;G++)h((B=N[G])[0]+e,B[1]+e,B[2]+e)}else{for(G=0;G<k;G++)h((B=N[G])[2],B[1],B[0]);for(G=0;G<k;G++)h((B=N[G])[0]+U*g,B[1]+U*g,B[2]+U*g)}r.addGroup(t,a.length/3-t,0)}(),function(){var t=a.length/3,e=0;for(u(I,e),e+=I.length,R=0,D=F.length;R<D;R++)u(O=F[R],e),e+=O.length;r.addGroup(t,a.length/3-t,1)}()}k.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,a=[],o=[],s=0,u=t.length;s<u;s++)i(t[s]);this.setAttribute("position",new I(a,3)),this.setAttribute("uv",new I(o,2)),this.computeVertexNormals()}function Zn(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Jn(t,e){j.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Kn(t,e)),this.mergeVertices()}function Kn(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new j;t=n.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Yn.call(this,t,e),this.type="TextBufferGeometry"}function Qn(t,e,n,i,r,a,o){j.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new $n(t,e,n,i,r,a,o)),this.mergeVertices()}function $n(t,e,n,i,r,a,o){k.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,u,c=Math.min(a+o,Math.PI),h=0,p=[],d=new l,f=new l,m=[],g=[],v=[],y=[];for(u=0;u<=n;u++){var x=[],_=u/n,b=0;for(0==u&&0==a?b=.5/e:u==n&&c==Math.PI&&(b=-.5/e),s=0;s<=e;s++){var w=s/e;d.x=-t*Math.cos(i+w*r)*Math.sin(a+_*o),d.y=t*Math.cos(a+_*o),d.z=t*Math.sin(i+w*r)*Math.sin(a+_*o),g.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),y.push(w+b,1-_),x.push(h++)}p.push(x)}for(u=0;u<n;u++)for(s=0;s<e;s++)t=p[u][s+1],i=p[u][s],r=p[u+1][s],o=p[u+1][s+1],(0!==u||0<a)&&m.push(t,i,o),(u!==n-1||c<Math.PI)&&m.push(i,r,o);this.setIndex(m),this.setAttribute("position",new I(g,3)),this.setAttribute("normal",new I(v,3)),this.setAttribute("uv",new I(y,2))}function ti(t,e,n,i,r,a){j.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new ei(t,e,n,i,r,a)),this.mergeVertices()}function ei(t,e,i,r,a,o){k.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},t=t||.5,e=e||1,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var s,u,c=[],h=[],p=[],d=[],f=t,m=(e-t)/(r=void 0!==r?Math.max(1,r):1),g=new l,v=new n;for(s=0;s<=r;s++){for(u=0;u<=i;u++)t=a+u/i*o,g.x=f*Math.cos(t),g.y=f*Math.sin(t),h.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,d.push(v.x,v.y);f+=m}for(s=0;s<r;s++)for(e=s*(i+1),u=0;u<i;u++)a=(t=u+e)+i+1,o=t+i+2,f=t+1,c.push(t,a,f),c.push(a,o,f);this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}function ni(t,e,n,i){j.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new ii(t,e,n,i)),this.mergeVertices()}function ii(t,e,i,r){k.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=Fr.clamp(r,0,2*Math.PI);var a,o=[],s=[],u=[],c=1/e,h=new l,p=new n;for(a=0;a<=e;a++){var d=i+a*c*r,f=Math.sin(d),m=Math.cos(d);for(d=0;d<=t.length-1;d++)h.x=t[d].x*f,h.y=t[d].y,h.z=t[d].x*m,s.push(h.x,h.y,h.z),p.x=a/e,p.y=d/(t.length-1),u.push(p.x,p.y)}for(a=0;a<e;a++)for(d=0;d<t.length-1;d++)c=(i=d+a*t.length)+t.length,h=i+t.length+1,p=i+1,o.push(i,c,p),o.push(c,h,p);if(this.setIndex(o),this.setAttribute("position",new I(s,3)),this.setAttribute("uv",new I(u,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,o=new l,s=new l,u=new l,i=e*t.length*3,d=a=0;a<t.length;a++,d+=3)o.x=r[d+0],o.y=r[d+1],o.z=r[d+2],s.x=r[i+d+0],s.y=r[i+d+1],s.z=r[i+d+2],u.addVectors(o,s).normalize(),r[d+0]=r[i+d+0]=u.x,r[d+1]=r[i+d+1]=u.y,r[d+2]=r[i+d+2]=u.z}function ri(t,e){j.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new ai(t,e)),this.mergeVertices()}function ai(t,e){function n(t){var n,s=r.length/3,l=(t=t.extractPoints(e)).shape,c=t.holes;for(!1===Es.isClockWise(l)&&(l=l.reverse()),t=0,n=c.length;t<n;t++){var h=c[t];!0===Es.isClockWise(h)&&(c[t]=h.reverse())}var p=Es.triangulateShape(l,c);for(t=0,n=c.length;t<n;t++)h=c[t],l=l.concat(h);for(t=0,n=l.length;t<n;t++)h=l[t],r.push(h.x,h.y,0),a.push(0,0,1),o.push(h.x,h.y);for(t=0,n=p.length;t<n;t++)l=p[t],i.push(l[0]+s,l[1]+s,l[2]+s),u+=3}k.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],a=[],o=[],s=0,u=0;if(!1===Array.isArray(t))n(t);else for(var l=0;l<t.length;l++)n(t[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(i),this.setAttribute("position",new I(r,3)),this.setAttribute("normal",new I(a,3)),this.setAttribute("uv",new I(o,2))}function oi(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}function si(t,e){k.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var n=[];e=Math.cos(Fr.DEG2RAD*(void 0!==e?e:1));var i=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new j;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices;for(var s=0,u=(o=o.faces).length;s<u;s++)for(var l=o[s],c=0;3>c;c++){var h=l[a[c]],p=l[a[(c+1)%3]];i[0]=Math.min(h,p),i[1]=Math.max(h,p),void 0===r[h=i[0]+","+i[1]]?r[h]={index1:i[0],index2:i[1],face1:s,face2:void 0}:r[h].face2=s}for(h in r)(void 0===(i=r[h]).face2||o[i.face1].normal.dot(o[i.face2].normal)<=e)&&(a=t[i.index1],n.push(a.x,a.y,a.z),a=t[i.index2],n.push(a.x,a.y,a.z));this.setAttribute("position",new I(n,3))}function li(t,e,n,i,r,a,o,s){j.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new ci(t,e,n,i,r,a,o,s)),this.mergeVertices()}function ci(t,e,i,r,a,o,s,u){function c(i){var a,o=new n,c=new l,v=0,_=!0===i?t:e,b=!0===i?1:-1,w=g;for(a=1;a<=r;a++)d.push(0,y*b,0),f.push(0,b,0),m.push(.5,.5),g++;var M=g;for(a=0;a<=r;a++){var S=a/r*u+s,D=Math.cos(S);S=Math.sin(S),c.x=_*S,c.y=y*b,c.z=_*D,d.push(c.x,c.y,c.z),f.push(0,b,0),o.x=.5*D+.5,o.y=.5*S*b+.5,m.push(o.x,o.y),g++}for(a=0;a<r;a++)o=w+a,c=M+a,!0===i?p.push(c,c+1,o):p.push(c+1,c,o),v+=3;h.addGroup(x,v,!0===i?1:2),x+=v}k.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],y=i/2,x=0;!function(){var n,o,c=new l,_=new l,b=0,w=(e-t)/i;for(o=0;o<=a;o++){var M=[],S=o/a,D=S*(e-t)+t;for(n=0;n<=r;n++){var E=n/r,T=E*u+s,A=Math.sin(T);T=Math.cos(T),_.x=D*A,_.y=-S*i+y,_.z=D*T,d.push(_.x,_.y,_.z),c.set(A,w,T).normalize(),f.push(c.x,c.y,c.z),m.push(E,1-S),M.push(g++)}v.push(M)}for(n=0;n<r;n++)for(o=0;o<a;o++)c=v[o+1][n],_=v[o+1][n+1],w=v[o][n+1],p.push(v[o][n],c,w),p.push(c,_,w),b+=6;h.addGroup(x,b,0),x+=b}(),!1===o&&(0<t&&c(!0),0<e&&c(!1)),this.setIndex(p),this.setAttribute("position",new I(d,3)),this.setAttribute("normal",new I(f,3)),this.setAttribute("uv",new I(m,2))}function hi(t,e,n,i,r,a,o){li.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function pi(t,e,n,i,r,a,o){ci.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function di(t,e,n,i){j.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new fi(t,e,n,i)),this.mergeVertices()}function fi(t,e,i,r){k.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a,o=[],s=[],u=[],c=[],h=new l,p=new n;s.push(0,0,0),u.push(0,0,1),c.push(.5,.5);var d=0;for(a=3;d<=e;d++,a+=3){var f=i+d/e*r;h.x=t*Math.cos(f),h.y=t*Math.sin(f),s.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(s[a]/t+1)/2,p.y=(s[a+1]/t+1)/2,c.push(p.x,p.y)}for(a=1;a<=e;a++)o.push(a,a+1,0);this.setIndex(o),this.setAttribute("position",new I(s,3)),this.setAttribute("normal",new I(u,3)),this.setAttribute("uv",new I(c,2))}function mi(t){E.call(this),this.type="ShadowMaterial",this.color=new b(0),this.transparent=!0,this.setValues(t)}function gi(t){X.call(this,t),this.type="RawShaderMaterial"}function yi(t){E.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new b(16777215),this.roughness=1,this.metalness=0,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function xi(t){yi.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new n(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function _i(t){E.call(this),this.type="MeshPhongMaterial",this.color=new b(16777215),this.specular=new b(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function bi(t){E.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new b(16777215),this.specular=new b(1118481),this.shininess=30,this.lightMap=this.gradientMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=this.specularMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function wi(t){E.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.fog=!1,this.setValues(t)}function Mi(t){E.call(this),this.type="MeshLambertMaterial",this.color=new b(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Si(t){E.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new b(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function Di(t){Ze.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Ei(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ti(t,e,n,i){Ei.call(this,t,e,n,i),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Ai(t,e,n,i){Ei.call(this,t,e,n,i)}function Ci(t,e,n,i){Ei.call(this,t,e,n,i)}function Li(t,e,n,i){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ls.convertArray(e,this.TimeBufferType),this.values=Ls.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Pi(t,e,n){Li.call(this,t,e,n)}function Fi(t,e,n,i){Li.call(this,t,e,n,i)}function Ri(t,e,n,i){Li.call(this,t,e,n,i)}function Oi(t,e,n,i){Ei.call(this,t,e,n,i)}function Ni(t,e,n,i){Li.call(this,t,e,n,i)}function Ii(t,e,n,i){Li.call(this,t,e,n,i)}function zi(t,e,n,i){Li.call(this,t,e,n,i)}function Bi(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:2500,this.uuid=Fr.generateUUID(),0>this.duration&&this.resetDuration()}function Ui(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ri;case"vector":case"vector2":case"vector3":case"vector4":return zi;case"color":return Fi;case"quaternion":return Ni;case"bool":case"boolean":return Pi;case"string":return Ii}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];Ls.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function ki(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad)&&i.onLoad()},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){return-1!==(t=u.indexOf(t))&&u.splice(t,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var i=u[e],r=u[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}function Gi(t){this.manager=void 0!==t?t:Fs,this.crossOrigin="anonymous",this.resourcePath=this.path="",this.requestHeader={}}function Hi(t){Gi.call(this,t)}function Vi(t){Gi.call(this,t)}function ji(t){Gi.call(this,t)}function Wi(t){Gi.call(this,t)}function qi(t){Gi.call(this,t)}function Xi(t){Gi.call(this,t)}function Yi(t){Gi.call(this,t)}function Zi(){this.type="Curve",this.arcLengthDivisions=200}function Ji(t,e,n,i,r,a,o,s){Zi.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Ki(t,e,n,i){Zi.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Qi(){Zi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $i(t){Qi.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function tr(t){$i.call(this,t),this.uuid=Fr.generateUUID(),this.type="Shape",this.holes=[]}function er(t,e){d.call(this),this.type="Light",this.color=new b(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function nr(t,e,n){er.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(d.DefaultUp),this.updateMatrix(),this.groundColor=new b(e)}function ir(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.mapPass=this.map=null,this.matrix=new c,this._frustum=new $,this._frameExtents=new n(1,1),this._viewportCount=1,this._viewports=[new a(0,0,1,1)]}function rr(){ir.call(this,new Z(50,1,.5,500))}function ar(t,e,n,i,r,a){er.call(this,t,e),this.type="SpotLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new rr}function or(){ir.call(this,new Z(90,1,.5,500)),this._frameExtents=new n(4,2),this._viewportCount=6,this._viewports=[new a(2,1,1,1),new a(0,1,1,1),new a(3,1,1,1),new a(1,1,1,1),new a(3,0,1,1),new a(1,0,1,1)],this._cubeDirections=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],this._cubeUps=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)]}function sr(t,e,n,i){er.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new or}function ur(t,e,n,i,r,a){Y.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function lr(){ir.call(this,new ur(-5,5,5,-5,.5,500))}function cr(t,e){er.call(this,t,e),this.type="DirectionalLight",this.position.copy(d.DefaultUp),this.updateMatrix(),this.target=new d,this.shadow=new lr}function hr(t,e){er.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function pr(t,e,n,i){er.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function dr(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new l)}function fr(t,e){er.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new dr}function mr(t){Gi.call(this,t),this.textures={}}function gr(){k.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function vr(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),A.call(this,t,e,n),this.meshPerAttribute=i||1}function yr(t){Gi.call(this,t)}function xr(t){Gi.call(this,t)}function _r(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Gi.call(this,t),this.options=void 0}function br(){this.type="ShapePath",this.color=new b,this.subPaths=[],this.currentPath=null}function wr(t){this.type="Font",this.data=t}function Mr(t){Gi.call(this,t)}function Sr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Dr(t){d.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.loopEnd=this.loopStart=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._progress=this._startedAt=0,this.filters=[]}function Er(t,e,n){this.path=e,this.parsedPath=n||Er.parseTrackName(e),this.node=Er.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Tr(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,Tr(t.children[n]));return e}function Ar(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),i=new k;i.setIndex(new A(t,1)),i.setAttribute("position",new A(n,3)),Ke.call(this,i,new Ze({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Cr(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new k).setAttribute("position",new I(e,3)),t.setAttribute("color",new I([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Ze({vertexColors:!0,toneMapped:!1}),Ke.call(this,t,e),this.type="AxesHelper"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0!==(t=this._listeners[t])&&(-1!==(e=t.indexOf(e))&&t.splice(e,1)))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,i=(e=e.slice(0)).length;n<i;n++)e[n].call(this,t)}}}});for(var Lr=[],Pr=0;256>Pr;Pr++)Lr[Pr]=(16>Pr?"0":"")+Pr.toString(16);var Fr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Lr[255&t]+Lr[t>>8&255]+Lr[t>>16&255]+Lr[t>>24&255]+"-"+Lr[255&e]+Lr[e>>8&255]+"-"+Lr[e>>16&15|64]+Lr[e>>24&255]+"-"+Lr[63&n|128]+Lr[n>>8&255]+"-"+Lr[n>>16&255]+Lr[n>>24&255]+Lr[255&i]+Lr[i>>8&255]+Lr[i>>16&255]+Lr[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Fr.DEG2RAD},radToDeg:function(t){return t*Fr.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2);n=o(n/2);var u=a((e+i)/2),l=o((e+i)/2),c=a((e-i)/2),h=o((e-i)/2);switch(a=a((i-e)/2),e=o((i-e)/2),r){case"XYX":t.set(s*l,n*c,n*h,s*u);break;case"YZY":t.set(n*h,s*l,n*c,s*u);break;case"ZXZ":t.set(n*c,n*h,s*l,s*u);break;case"XZX":t.set(s*l,n*e,n*a,s*u);break;case"YXY":t.set(n*a,s*l,n*e,s*u);break;case"ZYZ":t.set(n*e,n*a,s*l,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e);e=Math.sin(e);var i=this.x-t.x,r=this.y-t.y;return this.x=i*n-r*e+t.x,this.y=i*e+r*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(i.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,u){var l=this.elements;return l[0]=t,l[1]=i,l[2]=o,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements;e=this.elements,t=n[0];var r=n[3],a=n[6],o=n[1],s=n[4],u=n[7],l=n[2],c=n[5];n=n[8];var h=i[0],p=i[3],d=i[6],f=i[1],m=i[4],g=i[7],v=i[2],y=i[5];return i=i[8],e[0]=t*h+r*f+a*v,e[3]=t*p+r*m+a*y,e[6]=t*d+r*g+a*i,e[1]=o*h+s*f+u*v,e[4]=o*p+s*m+u*y,e[7]=o*d+s*g+u*i,e[2]=l*h+c*f+n*v,e[5]=l*p+c*m+n*y,e[8]=l*d+c*g+n*i,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7];return e*a*(t=t[8])-e*o*u-n*r*t+n*o*s+i*r*u-i*a*s},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements;t=this.elements,e=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=(n=n[8])*o-s*l,h=s*u-n*a,p=l*a-o*u,d=e*c+i*h+r*p;return 0===d?this.set(0,0,0,0,0,0,0,0,0):(d=1/d,t[0]=c*d,t[1]=(r*l-n*i)*d,t[2]=(s*i-r*o)*d,t[3]=h*d,t[4]=(n*e-r*u)*d,t[5]=(r*a-s*e)*d,t[6]=p*d,t[7]=(i*u-l*e)*d,t[8]=(o*e-i*a)*d,this)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(n*s,n*r,-n*(s*a+r*o)+a+t,-i*r,i*s,-i*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var n=this.elements,i=n[0],r=n[3],a=n[6],o=n[1],s=n[4],u=n[7];return n[0]=e*i+t*o,n[3]=e*r+t*s,n[6]=e*a+t*u,n[1]=-t*i+e*o,n[4]=-t*r+e*s,n[7]=-t*a+e*u,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;9>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Rr,Or={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===Rr&&(Rr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Rr.width=t.width,Rr.height=t.height;var e=Rr.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=Rr}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Nr=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=300,r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Fr.generateUUID()),!e&&void 0===t.images[i.uuid]){if(Array.isArray(i))for(var r=[],a=0,o=i.length;a<o;a++)r.push(Or.getDataURL(i[a]));else r=Or.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(r.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(a.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(a.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],n=t[4],i=t[8],r=t[1],a=t[5],o=t[9],s=t[2],u=t[6],l=t[10];return.01>Math.abs(n-r)&&.01>Math.abs(i-s)&&.01>Math.abs(o-u)?.1>Math.abs(n+r)&&.1>Math.abs(i+s)&&.1>Math.abs(o+u)&&.1>Math.abs(e+a+l-3)?(this.set(1,0,0,0),this):(t=Math.PI,l=(l+1)/2,n=(n+r)/4,i=(i+s)/4,o=(o+u)/4,(e=(e+1)/2)>(a=(a+1)/2)&&e>l?.01>e?(u=0,n=s=.707106781):(s=n/(u=Math.sqrt(e)),n=i/u):a>l?.01>a?(u=.707106781,s=0,n=.707106781):(u=n/(s=Math.sqrt(a)),n=o/s):.01>l?(s=u=.707106781,n=0):(u=i/(n=Math.sqrt(l)),s=o/n),this.set(u,s,n,t),this):(t=Math.sqrt((u-o)*(u-o)+(i-s)*(i-s)+(r-n)*(r-n)),.001>Math.abs(t)&&(t=1),this.x=(u-o)/t,this.y=(i-s)/t,this.z=(r-n)/t,this.w=Math.acos((e+a+l-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.assign(Object.create(o.prototype),{constructor:s,isWebGLMultisampleRenderTarget:!0,copy:function(t){return o.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(u,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],u=n[i+1],l=n[i+2];n=n[i+3],i=r[a+0];var c=r[a+1],h=r[a+2];if(n!==(r=r[a+3])||s!==i||u!==c||l!==h){a=1-o;var p=s*i+u*c+l*h+n*r,d=0<=p?1:-1,f=1-p*p;f>Number.EPSILON&&(f=Math.sqrt(f),p=Math.atan2(f,p*d),a=Math.sin(a*p)/f,o=Math.sin(o*p)/f),s=s*a+i*(d*=o),u=u*a+c*d,l=l*a+h*d,n=n*a+r*d,a===1-o&&(s*=o=1/Math.sqrt(s*s+u*u+l*l+n*n),u*=o,l*=o,n*=o)}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=n},multiplyQuaternionsFlat:function(t,e,n,i,r,a){var o=n[i],s=n[i+1],u=n[i+2];n=n[i+3],i=r[a];var l=r[a+1],c=r[a+2];return r=r[a+3],t[e]=o*r+n*i+s*c-u*l,t[e+1]=s*r+n*l+u*i-o*c,t[e+2]=u*r+n*c+o*l-s*i,t[e+3]=n*r-o*i-s*l-u*c,t}}),Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(u.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(n/2),u=a(i/2);switch(a=a(r/2),n=o(n/2),i=o(i/2),r=o(r/2),t){case"XYZ":this._x=n*u*a+s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a-n*i*r;break;case"YXZ":this._x=n*u*a+s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a+n*i*r;break;case"ZXY":this._x=n*u*a-s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a-n*i*r;break;case"ZYX":this._x=n*u*a-s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a+n*i*r;break;case"YZX":this._x=n*u*a+s*i*r,this._y=s*i*a+n*u*r,this._z=s*u*r-n*i*a,this._w=s*u*a-n*i*r;break;case"XZY":this._x=n*u*a-s*i*r,this._y=s*i*a-n*u*r,this._z=s*u*r+n*i*a,this._w=s*u*a+n*i*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var n=Math.sin(e);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0];t=e[4];var i=e[8],r=e[1],a=e[5],o=e[9],s=e[2],u=e[6],l=n+a+(e=e[10]);return 0<l?(n=.5/Math.sqrt(l+1),this._w=.25/n,this._x=(u-o)*n,this._y=(i-s)*n,this._z=(r-t)*n):n>a&&n>e?(n=2*Math.sqrt(1+n-a-e),this._w=(u-o)/n,this._x=.25*n,this._y=(t+r)/n,this._z=(i+s)/n):a>e?(n=2*Math.sqrt(1+a-n-e),this._w=(i-s)/n,this._x=(t+r)/n,this._y=.25*n,this._z=(o+u)/n):(n=2*Math.sqrt(1+e-n-a),this._w=(r-t)/n,this._x=(i+s)/n,this._y=(o+u)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return 1e-6>n?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Fr.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);return 0===n||this.slerp(t,Math.min(1,e/n)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=n*e+t*a+i*s-r*o,this._y=i*e+t*o+r*a-n*s,this._z=r*e+t*s+n*o-i*a,this._w=t*e-n*a-i*o-r*s,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=n,this._y=i,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*n+e*this._x,this._y=o*i+e*this._y,this._z=o*r+e*this._z,this.normalize(),this._onChangeCallback(),this;t=Math.sqrt(t);var s=Math.atan2(t,o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=n*o+this._x*e,this._y=i*o+this._y*e,this._z=r*o+this._z*e,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Ir=new l,zr=new u;Object.assign(l.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(zr.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(zr.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=1/((t=t.elements)[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*i-o*n,u=t*n+o*e-r*i,l=t*i+r*n-a*e;return e=-r*e-a*n-o*i,this.x=s*t+e*-r+u*-o-l*-a,this.y=u*t+e*-a+l*-r-s*-o,this.z=l*t+e*-o+s*-a-u*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=i*e-t*a,this.y=t*r-n*e,this.z=n*a-i*r,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return Ir.copy(this).projectOnVector(t),this.sub(Ir)},reflect:function(t){return this.sub(Ir.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(Fr.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Br=new l,Ur=new c,kr=new l(0,0,0),Gr=new l(1,1,1),Hr=new l,Vr=new l,jr=new l;Object.assign(c.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,u,l,c,h,p,d,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/Br.setFromMatrixColumn(t,0).length(),r=1/Br.setFromMatrixColumn(t,1).length();return t=1/Br.setFromMatrixColumn(t,2).length(),e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n);n=Math.sin(n);var o=Math.cos(i);i=Math.sin(i);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var u=a*r,l=n*s,c=n*r;e[0]=o*s,e[4]=-o*r,e[8]=i,e[1]=u+l*i,e[5]=t-c*i,e[9]=-n*o,e[2]=c-t*i,e[6]=l+u*i,e[10]=a*o}else"YXZ"===t.order?(t=o*s,u=o*r,l=i*s,c=i*r,e[0]=t+c*n,e[4]=l*n-u,e[8]=a*i,e[1]=a*r,e[5]=a*s,e[9]=-n,e[2]=u*n-l,e[6]=c+t*n,e[10]=a*o):"ZXY"===t.order?(t=o*s,u=o*r,l=i*s,c=i*r,e[0]=t-c*n,e[4]=-a*r,e[8]=l+u*n,e[1]=u+l*n,e[5]=a*s,e[9]=c-t*n,e[2]=-a*i,e[6]=n,e[10]=a*o):"ZYX"===t.order?(t=a*s,u=a*r,l=n*s,c=n*r,e[0]=o*s,e[4]=l*i-u,e[8]=t*i+c,e[1]=o*r,e[5]=c*i+t,e[9]=u*i-l,e[2]=-i,e[6]=n*o,e[10]=a*o):"YZX"===t.order?(t=a*o,u=a*i,l=n*o,c=n*i,e[0]=o*s,e[4]=c-t*r,e[8]=l*r+u,e[1]=r,e[5]=a*s,e[9]=-n*s,e[2]=-i*s,e[6]=u*r+l,e[10]=t-c*r):"XZY"===t.order&&(t=a*o,u=a*i,l=n*o,c=n*i,e[0]=o*s,e[4]=-r,e[8]=i*s,e[1]=t*r+c,e[5]=a*s,e[9]=u*r-l,e[2]=l*r-u,e[6]=n*s,e[10]=c*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(kr,t,Gr)},lookAt:function(t,e,n){var i=this.elements;return jr.subVectors(t,e),0===jr.lengthSq()&&(jr.z=1),jr.normalize(),Hr.crossVectors(n,jr),0===Hr.lengthSq()&&(1===Math.abs(n.z)?jr.x+=1e-4:jr.z+=1e-4,jr.normalize(),Hr.crossVectors(n,jr)),Hr.normalize(),Vr.crossVectors(jr,Hr),i[0]=Hr.x,i[4]=Vr.x,i[8]=jr.x,i[1]=Hr.y,i[5]=Vr.y,i[9]=jr.y,i[2]=Hr.z,i[6]=Vr.z,i[10]=jr.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements;e=this.elements,t=n[0];var r=n[4],a=n[8],o=n[12],s=n[1],u=n[5],l=n[9],c=n[13],h=n[2],p=n[6],d=n[10],f=n[14],m=n[3],g=n[7],v=n[11];n=n[15];var y=i[0],x=i[4],_=i[8],b=i[12],w=i[1],M=i[5],S=i[9],D=i[13],E=i[2],T=i[6],A=i[10],C=i[14],L=i[3],P=i[7],F=i[11];return i=i[15],e[0]=t*y+r*w+a*E+o*L,e[4]=t*x+r*M+a*T+o*P,e[8]=t*_+r*S+a*A+o*F,e[12]=t*b+r*D+a*C+o*i,e[1]=s*y+u*w+l*E+c*L,e[5]=s*x+u*M+l*T+c*P,e[9]=s*_+u*S+l*A+c*F,e[13]=s*b+u*D+l*C+c*i,e[2]=h*y+p*w+d*E+f*L,e[6]=h*x+p*M+d*T+f*P,e[10]=h*_+p*S+d*A+f*F,e[14]=h*b+p*D+d*C+f*i,e[3]=m*y+g*w+v*E+n*L,e[7]=m*x+g*M+v*T+n*P,e[11]=m*_+g*S+v*A+n*F,e[15]=m*b+g*D+v*C+n*i,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],p=t[14];return t[3]*(+r*s*c-i*u*c-r*o*h+n*u*h+i*o*p-n*s*p)+t[7]*(+e*s*p-e*u*h+r*a*h-i*a*p+i*u*l-r*s*l)+t[11]*(+e*u*c-e*o*p-r*a*c+n*a*p+r*o*l-n*u*l)+t[15]*(-i*o*l-e*s*c+e*o*h+i*a*c-n*a*h+n*s*l)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate."),e=this.elements;var n=t.elements;t=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],p=n[10],d=n[11],f=n[12],m=n[13],g=n[14],v=h*g*l-m*p*l+m*u*d-s*g*d-h*u*(n=n[15])+s*p*n,y=f*p*l-c*g*l-f*u*d+o*g*d+c*u*n-o*p*n,x=c*m*l-f*h*l+f*s*d-o*m*d-c*s*n+o*h*n,_=f*h*u-c*m*u-f*s*p+o*m*p+c*s*g-o*h*g,b=t*v+i*y+r*x+a*_;return 0===b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(b=1/b,e[0]=v*b,e[1]=(m*p*a-h*g*a-m*r*d+i*g*d+h*r*n-i*p*n)*b,e[2]=(s*g*a-m*u*a+m*r*l-i*g*l-s*r*n+i*u*n)*b,e[3]=(h*u*a-s*p*a-h*r*l+i*p*l+s*r*d-i*u*d)*b,e[4]=y*b,e[5]=(c*g*a-f*p*a+f*r*d-t*g*d-c*r*n+t*p*n)*b,e[6]=(f*u*a-o*g*a-f*r*l+t*g*l+o*r*n-t*u*n)*b,e[7]=(o*p*a-c*u*a+c*r*l-t*p*l-o*r*d+t*u*d)*b,e[8]=x*b,e[9]=(f*h*a-c*m*a-f*i*d+t*m*d+c*i*n-t*h*n)*b,e[10]=(o*m*a-f*s*a+f*i*l-t*m*l-o*i*n+t*s*n)*b,e[11]=(c*s*a-o*h*a-c*i*l+t*h*l+o*i*d-t*s*d)*b,e[12]=_*b,e[13]=(c*m*r-f*h*r+f*i*p-t*m*p-c*i*g+t*h*g)*b,e[14]=(f*s*r-o*m*r-f*i*u+t*m*u+o*i*g-t*s*g)*b,e[15]=(o*h*r-c*s*r+c*i*u-t*h*u-o*i*p+t*s*p)*b,this)},scale:function(t){var e=this.elements,n=t.x,i=t.y;return t=t.z,e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e);e=Math.sin(e);var i=1-n,r=t.x,a=t.y;t=t.z;var o=i*r,s=i*a;return this.set(o*r+n,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+n,s*t-e*r,0,o*t-e*a,s*t+e*r,i*t*t+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,u=r+r,l=a+a,c=o+o;e=r*u;var h=r*l;r*=c;var p=a*l;a*=c,o*=c,u*=s,l*=s,s*=c,c=n.x;var d=n.y;return n=n.z,i[0]=(1-(p+o))*c,i[1]=(h+s)*c,i[2]=(r-l)*c,i[3]=0,i[4]=(h-s)*d,i[5]=(1-(e+o))*d,i[6]=(a+u)*d,i[7]=0,i[8]=(r+l)*n,i[9]=(a-u)*n,i[10]=(1-(e+p))*n,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=Br.set(i[0],i[1],i[2]).length(),a=Br.set(i[4],i[5],i[6]).length(),o=Br.set(i[8],i[9],i[10]).length();0>this.determinant()&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Ur.copy(this),t=1/r,i=1/a;var s=1/o;return Ur.elements[0]*=t,Ur.elements[1]*=t,Ur.elements[2]*=t,Ur.elements[4]*=i,Ur.elements[5]*=i,Ur.elements[6]*=i,Ur.elements[8]*=s,Ur.elements[9]*=s,Ur.elements[10]*=s,e.setFromRotationMatrix(Ur),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(n-i),o[9]=(n+i)/(n-i),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),u=1/(n-i),l=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-(e+t)*s,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-(n+i)*u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-(a+r)*l,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;16>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(h.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=Fr.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6];switch(r=r[10],e=e||this._order){case"XYZ":this._y=Math.asin(i(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-l,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-i(l,-1,1)),.9999999>Math.abs(l)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,t),this._z=0);break;case"ZXY":this._x=Math.asin(i(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-c,r),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,t));break;case"ZYX":this._y=Math.asin(-i(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(h,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(i(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,t)):(this._x=0,this._y=Math.atan2(o,r));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-l,r),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return ui.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ui,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return vi.setFromEuler(this),this.setFromQuaternion(vi,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(p.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var Wr=0,qr=new l,Xr=new u,Yr=new c,Zr=new l,Jr=new l,Kr=new l,Qr=new u,$r=new l(1,0,0),ta=new l(0,1,0),ea=new l(0,0,1),na={type:"added"},ia={type:"removed"};d.DefaultUp=new l(0,1,0),d.DefaultMatrixAutoUpdate=!0,d.prototype=Object.assign(Object.create(e.prototype),{constructor:d,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Xr.setFromAxisAngle(t,e),this.quaternion.multiply(Xr),this},rotateOnWorldAxis:function(t,e){return Xr.setFromAxisAngle(t,e),this.quaternion.premultiply(Xr),this},rotateX:function(t){return this.rotateOnAxis($r,t)},rotateY:function(t){return this.rotateOnAxis(ta,t)},rotateZ:function(t){return this.rotateOnAxis(ea,t)},translateOnAxis:function(t,e){return qr.copy(t).applyQuaternion(this.quaternion),this.position.add(qr.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis($r,t)},translateY:function(t){return this.translateOnAxis(ta,t)},translateZ:function(t){return this.translateOnAxis(ea,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Yr.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Zr.copy(t):Zr.set(t,e,n),t=this.parent,this.updateWorldMatrix(!0,!1),Jr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yr.lookAt(Jr,Zr,this.up):Yr.lookAt(Zr,Jr,this.up),this.quaternion.setFromRotationMatrix(Yr),t&&(Yr.extractRotation(t.matrixWorld),Xr.setFromRotationMatrix(Yr),this.quaternion.premultiply(Xr.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(na)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(ia)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Yr.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Yr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Yr),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new l),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jr,t,Kr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Jr,Qr,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(e=0,n=(t=this.children).length;e<n;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes)if(o=o.shapes,Array.isArray(o))for(var s=0,u=o.length;s<u;s++)e(t.shapes,o[s]);else e(t.shapes,o)}if(void 0!==this.material)if(Array.isArray(this.material)){for(o=[],s=0,u=this.material.length;s<u;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material);if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(i){i=n(t.geometries),s=n(t.materials),u=n(t.textures);var l=n(t.images);o=n(t.shapes),0<i.length&&(r.geometries=i),0<s.length&&(r.materials=s),0<u.length&&(r.textures=u),0<l.length&&(r.images=l),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}}),f.prototype=Object.assign(Object.create(d.prototype),{constructor:f,isScene:!0,copy:function(t,e){return d.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=d.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ra=[new l,new l,new l,new l,new l,new l,new l,new l],aa=new l,oa=new m,sa=new l,ua=new l,la=new l,ca=new l,ha=new l,pa=new l,da=new l,fa=new l,ma=new l,ga=new l;Object.assign(m.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){return e=aa.copy(e).multiplyScalar(.5),this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new l),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new l),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),oa.copy(e.boundingBox),oa.applyMatrix4(t.matrixWorld),this.union(oa)),e=0;for(var n=(t=t.children).length;e<n;e++)this.expandByObject(t[e]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new l),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,aa),aa.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,n=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,n=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){return!this.isEmpty()&&(this.getCenter(da),fa.subVectors(this.max,da),sa.subVectors(t.a,da),ua.subVectors(t.b,da),la.subVectors(t.c,da),ca.subVectors(ua,sa),ha.subVectors(la,ua),pa.subVectors(sa,la),!!g(t=[0,-ca.z,ca.y,0,-ha.z,ha.y,0,-pa.z,pa.y,ca.z,0,-ca.x,ha.z,0,-ha.x,pa.z,0,-pa.x,-ca.y,ca.x,0,-ha.y,ha.x,0,-pa.y,pa.x,0],sa,ua,la,fa)&&(!!g(t=[1,0,0,0,1,0,0,0,1],sa,ua,la,fa)&&(ma.crossVectors(ca,ha),g(t=[ma.x,ma.y,ma.z],sa,ua,la,fa))))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new l),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return aa.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(aa).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(ra[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ra[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ra[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ra[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ra[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ra[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ra[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ra[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ra)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var va=new m;Object.assign(v.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):va.setFromPoints(t).getCenter(n);for(var i=e=0,r=t.length;i<r;i++)e=Math.max(e,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return 0>this.radius},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new l),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new m),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var ya=new l,xa=new l,_a=new l,ba=new l,wa=new l,Ma=new l,Sa=new l;Object.assign(y.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new l),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,ya)),this},closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new l),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=ya.subVectors(t,this.origin).dot(this.direction);return 0>e?this.origin.distanceToSquared(t):(ya.copy(this.direction).multiplyScalar(e).add(this.origin),ya.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){xa.copy(t).add(e).multiplyScalar(.5),_a.copy(e).sub(t).normalize(),ba.copy(this.origin).sub(xa);var r=.5*t.distanceTo(e),a=-this.direction.dot(_a),o=ba.dot(this.direction),s=-ba.dot(_a),u=ba.lengthSq(),l=Math.abs(1-a*a);if(0<l){e=a*o-s;var c=r*l;0<=(t=a*s-o)?e>=-c?e<=c?a=(t*=r=1/l)*(t+a*(e*=r)+2*o)+e*(a*t+e+2*s)+u:(e=r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+u):(e=-r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+u):e<=-c?a=-(t=Math.max(0,-(-a*r+o)))*t+(e=0<t?-r:Math.min(Math.max(-r,-s),r))*(e+2*s)+u:e<=c?(t=0,a=(e=Math.min(Math.max(-r,-s),r))*(e+2*s)+u):a=-(t=Math.max(0,-(a*r+o)))*t+(e=0<t?r:Math.min(Math.max(-r,-s),r))*(e+2*s)+u}else e=0<a?-r:r,a=-(t=Math.max(0,-(a*e+o)))*t+e*(e+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(t).add(this.origin),i&&i.copy(_a).multiplyScalar(e).add(xa),a},intersectSphere:function(t,e){ya.subVectors(t.center,this.origin);var n=ya.dot(this.direction),i=ya.dot(ya)-n*n;return i>(t=t.radius*t.radius)?null:(i=n-(t=Math.sqrt(t-i)),n+=t,0>i&&0>n?null:0>i?this.at(n,e):this.at(i,e))},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var n=1/this.direction.x,i=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=n){var o=(t.min.x-a.x)*n;n*=t.max.x-a.x}else o=(t.max.x-a.x)*n,n*=t.min.x-a.x;if(0<=i){var s=(t.min.y-a.y)*i;i*=t.max.y-a.y}else s=(t.max.y-a.y)*i,i*=t.min.y-a.y;return o>i||s>n?null:((s>o||o!=o)&&(o=s),(i<n||n!=n)&&(n=i),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>n?null:((s>o||o!=o)&&(o=s),(t<n||n!=n)&&(n=t),0>n?null:this.at(0<=o?o:n,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,ya)},intersectTriangle:function(t,e,n,i,r){if(wa.subVectors(e,t),Ma.subVectors(n,t),Sa.crossVectors(wa,Ma),0<(e=this.direction.dot(Sa))){if(i)return null;i=1}else{if(!(0>e))return null;i=-1,e=-e}return ba.subVectors(this.origin,t),0>(t=i*this.direction.dot(Ma.crossVectors(ba,Ma)))||0>(n=i*this.direction.dot(wa.cross(ba)))||t+n>e||0>(t=-i*ba.dot(Sa))?null:this.at(t/e,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Da=new l,Ea=new l,Ta=new i;Object.assign(x.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){return e=Da.subVectors(n,e).cross(Ea.subVectors(t,e)).normalize(),this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new l),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new l);var n=t.delta(Da),i=this.normal.dot(n);if(0===i){if(0===this.distanceToPoint(t.start))return e.copy(t.start)}else if(!(0>(i=-(t.start.dot(this.normal)+this.constant)/i)||1<i))return e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new l),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){return e=e||Ta.getNormalMatrix(t),t=this.coplanarPoint(Da).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize(),this.constant=-t.dot(e),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Aa=new l,Ca=new l,La=new l,Pa=new l,Fa=new l,Ra=new l,Oa=new l,Na=new l,Ia=new l,za=new l;Object.assign(_,{getNormal:function(t,e,n,i){return void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new l),i.subVectors(n,e),Aa.subVectors(t,e),i.cross(Aa),0<(t=i.lengthSq())?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){Aa.subVectors(i,e),Ca.subVectors(n,e),La.subVectors(t,e),t=Aa.dot(Aa),e=Aa.dot(Ca),n=Aa.dot(La);var a=Ca.dot(Ca);i=Ca.dot(La);var o=t*a-e*e;return void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new l),0===o?r.set(-2,-1,-1):(a=(a*n-e*i)*(o=1/o),t=(t*i-e*n)*o,r.set(1-a-t,t,a))},containsPoint:function(t,e,n,i){return _.getBarycoord(t,e,n,i,Pa),0<=Pa.x&&0<=Pa.y&&1>=Pa.x+Pa.y},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Pa),s.set(0,0),s.addScaledVector(r,Pa.x),s.addScaledVector(a,Pa.y),s.addScaledVector(o,Pa.z),s},isFrontFacing:function(t,e,n,i){return Aa.subVectors(n,e),Ca.subVectors(t,e),0>Aa.cross(Ca).dot(i)}}),Object.assign(_.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Aa.subVectors(this.c,this.b),Ca.subVectors(this.a,this.b),.5*Aa.cross(Ca).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new l),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return _.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new x),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return _.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return _.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return _.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return _.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new l);var n=this.a,i=this.b,r=this.c;Fa.subVectors(i,n),Ra.subVectors(r,n),Na.subVectors(t,n);var a=Fa.dot(Na),o=Ra.dot(Na);if(0>=a&&0>=o)return e.copy(n);Ia.subVectors(t,i);var s=Fa.dot(Ia),u=Ra.dot(Ia);if(0<=s&&u<=s)return e.copy(i);var c=a*u-s*o;if(0>=c&&0<=a&&0>=s)return i=a/(a-s),e.copy(n).addScaledVector(Fa,i);za.subVectors(t,r),t=Fa.dot(za);var h=Ra.dot(za);return 0<=h&&t<=h?e.copy(r):0>=(a=t*o-a*h)&&0<=o&&0>=h?(c=o/(o-h),e.copy(n).addScaledVector(Ra,c)):0>=(o=s*h-t*u)&&0<=u-s&&0<=t-h?(Oa.subVectors(r,i),c=(u-s)/(u-s+(t-h)),e.copy(i).addScaledVector(Oa,c)):(i=a*(r=1/(o+a+c)),c*=r,e.copy(n).addScaledVector(Fa,i).addScaledVector(Ra,c))},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ua={h:0,s:0,l:0},ka={h:0,s:0,l:0};Object.assign(b.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){return t=Fr.euclideanModulo(t,1),e=Fr.clamp(e,0,1),n=Fr.clamp(n,0,1),0===e?this.r=this.g=this.b=n:(n=2*n-(e=.5>=n?n*(1+e):n+e-n*e),this.r=w(n,e,t+1/3),this.g=w(n,e,t),this.b=w(n,e,t-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){i=parseFloat(n[1])/360;var r=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(i,r,a)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(i=(n=n[1]).length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===i)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(t){var e=Ba[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=M(t.r),this.g=M(t.g),this.b=M(t.b),this},copyLinearToSRGB:function(t){return this.r=S(t.r),this.g=S(t.g),this.b=S(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),o=Math.min(n,i,r),s=(o+a)/2;if(o===a)o=e=0;else{var u=a-o;switch(o=.5>=s?u/(a+o):u/(2-a-o),a){case n:e=(i-r)/u+(i<r?6:0);break;case i:e=(r-n)/u+2;break;case r:e=(n-i)/u+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Ua),Ua.h+=t,Ua.s+=e,Ua.l+=n,this.setHSL(Ua.h,Ua.s,Ua.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Ua),t.getHSL(ka),t=Fr.lerp(Ua.h,ka.h,e);var n=Fr.lerp(Ua.s,ka.s,e);return e=Fr.lerp(Ua.l,ka.l,e),this.setHSL(t,n,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),b.NAMES=Ba,Object.assign(D.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ga=0;E.prototype=Object.assign(Object.create(e.prototype),{constructor:E,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else{var i=this[e];void 0===i?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n&&(n=e(t.textures),t=e(t.images),0<n.length&&(i.textures=n),0<t.length&&(i.images=t)),i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(E.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),T.prototype=Object.create(E.prototype),T.prototype.constructor=T,T.prototype.isMeshBasicMaterial=!0,T.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Ha=new l;Object.defineProperty(A.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new b),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new n),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new l),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){for(var e=0,n=this.count;e<n;e++)Ha.x=this.getX(e),Ha.y=this.getY(e),Ha.z=this.getZ(e),Ha.applyMatrix3(t),this.setXYZ(e,Ha.x,Ha.y,Ha.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Ha.x=this.getX(e),Ha.y=this.getY(e),Ha.z=this.getZ(e),Ha.applyMatrix4(t),this.setXYZ(e,Ha.x,Ha.y,Ha.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Ha.x=this.getX(e),Ha.y=this.getY(e),Ha.z=this.getZ(e),Ha.applyNormalMatrix(t),this.setXYZ(e,Ha.x,Ha.y,Ha.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Ha.x=this.getX(e),Ha.y=this.getY(e),Ha.z=this.getZ(e),Ha.transformDirection(t),this.setXYZ(e,Ha.x,Ha.y,Ha.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),C.prototype=Object.create(A.prototype),C.prototype.constructor=C,L.prototype=Object.create(A.prototype),L.prototype.constructor=L,P.prototype=Object.create(A.prototype),P.prototype.constructor=P,F.prototype=Object.create(A.prototype),F.prototype.constructor=F,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,N.prototype=Object.create(A.prototype),N.prototype.constructor=N,I.prototype=Object.create(A.prototype),I.prototype.constructor=I,z.prototype=Object.create(A.prototype),z.prototype.constructor=z,Object.assign(B.prototype,{computeGroups:function(t){var e=[],n=void 0;t=t.faces;for(var i=0;i<t.length;i++){var r=t[i];if(r.materialIndex!==n){n=r.materialIndex,void 0!==a&&(a.count=3*i-a.start,e.push(a));var a={start:3*i,materialIndex:n}}}void 0!==a&&(a.count=3*i-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,u=s.length;if(0<u){for(var l=[],c=0;c<u;c++)l[c]={name:s[c].name,data:[]};this.morphTargets.position=l}var h=t.morphNormals,p=h.length;if(0<p){var d=[];for(c=0;c<p;c++)d[c]={name:h[c].name,data:[]};this.morphTargets.normal=d}var f=t.skinIndices,m=t.skinWeights,g=f.length===i.length,v=m.length===i.length;for(0<i.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<e.length;c++){var y=e[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var x=y.vertexNormals;for(3===x.length?this.normals.push(x[0],x[1],x[2]):(x=y.normal,this.normals.push(x,x,x)),3===(x=y.vertexColors).length?this.colors.push(x[0],x[1],x[2]):(x=y.color,this.colors.push(x,x,x)),!0===a&&(void 0!==(x=r[0][c])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new n,new n,new n))),!0===o&&(void 0!==(x=r[1][c])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new n,new n,new n))),x=0;x<u;x++){var _=s[x].vertices;l[x].data.push(_[y.a],_[y.b],_[y.c])}for(x=0;x<p;x++)_=h[x].vertexNormals[c],d[x].data.push(_.a,_.b,_.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Va=1,ja=new c,Wa=new d,qa=new l,Xa=new m,Ya=new m,Za=new l;k.prototype=Object.assign(Object.create(e.prototype),{constructor:k,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<U(t)?N:R)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;if(void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)){var n=(new i).getNormalMatrix(t);e.applyNormalMatrix(n),e.needsUpdate=!0}return void 0!==(e=this.attributes.tangent)&&(e.transformDirection(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ja.makeRotationX(t),this.applyMatrix4(ja),this},rotateY:function(t){return ja.makeRotationY(t),this.applyMatrix4(ja),this},rotateZ:function(t){return ja.makeRotationZ(t),this.applyMatrix4(ja),this},translate:function(t,e,n){return ja.makeTranslation(t,e,n),this.applyMatrix4(ja),this},scale:function(t,e,n){return ja.makeScale(t,e,n),this.applyMatrix4(ja),this},lookAt:function(t){return Wa.lookAt(t),Wa.updateMatrix(),this.applyMatrix4(Wa.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(qa).negate(),this.translate(qa.x,qa.y,qa.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new I(3*e.vertices.length,3);var n=new I(3*e.colors.length,3);this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new I(e.lineDistances.length,1),this.setAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new I(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}return!0===e.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new B).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var n in this.setAttribute("position",new A(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.setAttribute("normal",new A(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.setAttribute("color",new A(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new A(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new A(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var i=t.morphTargets[n],r=0,a=i.length;r<a;r++){var o=i[r],s=new I(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[n]=e}return 0<t.skinIndices.length&&(n=new I(4*t.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new I(4*t.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e){t=0;for(var n=e.length;t<n;t++)Xa.setFromBufferAttribute(e[t]),this.morphTargetsRelative?(Za.addVectors(this.boundingBox.min,Xa.min),this.boundingBox.expandByPoint(Za),Za.addVectors(this.boundingBox.max,Xa.max),this.boundingBox.expandByPoint(Za)):(this.boundingBox.expandByPoint(Xa.min),this.boundingBox.expandByPoint(Xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(Xa.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];Ya.setFromBufferAttribute(a),this.morphTargetsRelative?(Za.addVectors(Xa.min,Ya.min),Xa.expandByPoint(Za),Za.addVectors(Xa.max,Ya.max),Xa.expandByPoint(Za)):(Xa.expandByPoint(Ya.min),Xa.expandByPoint(Ya.max))}Xa.getCenter(n);var o=0;for(i=0,r=t.count;i<r;i++)Za.fromBufferAttribute(t,i),o=Math.max(o,n.distanceToSquared(Za));if(e)for(i=0,r=e.length;i<r;i++){a=e[i];for(var s=this.morphTargetsRelative,u=0,l=a.count;u<l;u++)Za.fromBufferAttribute(a,u),s&&(qa.fromBufferAttribute(t,u),Za.add(qa)),o=Math.max(o,n.distanceToSquared(Za))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new A(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;i=e.normal.array;var o=new l,s=new l,u=new l,c=new l,h=new l;if(t){var p=t.array;for(r=0,a=t.count;r<a;r+=3){t=3*p[r+0];var d=3*p[r+1],f=3*p[r+2];o.fromArray(n,t),s.fromArray(n,d),u.fromArray(n,f),c.subVectors(u,s),h.subVectors(o,s),c.cross(h),i[t]+=c.x,i[t+1]+=c.y,i[t+2]+=c.z,i[d]+=c.x,i[d+1]+=c.y,i[d+2]+=c.z,i[f]+=c.x,i[f+1]+=c.y,i[f+2]+=c.z}}else for(r=0,a=n.length;r<a;r+=9)o.fromArray(n,r),s.fromArray(n,r+3),u.fromArray(n,r+6),c.subVectors(u,s),h.subVectors(o,s),c.cross(h),i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=c.x,i[r+4]=c.y,i[r+5]=c.z,i[r+6]=c.x,i[r+7]=c.y,i[r+8]=c.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,i=this.attributes;for(n in i)if(void 0!==t.attributes[n]){var r=i[n].array,a=t.attributes[n],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var u=0;u<a;u++,s++)r[s]=o[u]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Za.x=t.getX(e),Za.y=t.getY(e),Za.z=t.getZ(e),Za.normalize(),t.setXYZ(e,Za.x,Za.y,Za.z)},toNonIndexed:function(){function t(t,e){var n=t.array,i=t.itemSize;t=t.normalized;for(var r,a=new n.constructor(e.length*i),o=0,s=0,u=e.length;s<u;s++){r=e[s]*i;for(var l=0;l<i;l++)a[o++]=n[r++]}return new A(a,i,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,n=new k,i=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,i),n.setAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],u=o[e];r=0;for(var l=u.length;r<l;r++)a=t(a=u[r],i),s.push(a);n.morphAttributes[e]=s}for(n.morphTargetsRelative=this.morphTargetsRelative,r=0,e=(i=this.groups).length;r<e;r++)a=i[r],n.addGroup(a.start,a.count,a.materialIndex);return n},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(l in e)void 0!==e[l]&&(t[l]=e[l]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var n=this.attributes;for(l in n){var i=(e=n[l]).toJSON();""!==e.name&&(i.name=e.name),t.data.attributes[l]=i}n={};var r=!1;for(l in this.morphAttributes){for(var a=this.morphAttributes[l],o=[],s=0,u=a.length;s<u;s++)i=(e=a[s]).toJSON(),""!==e.name&&(i.name=e.name),o.push(i);0<o.length&&(n[l]=o,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);var l=this.groups;return 0<l.length&&(t.data.groups=JSON.parse(JSON.stringify(l))),null!==(l=this.boundingSphere)&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new k).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var n=t.index;for(o in null!==n&&this.setIndex(n.clone()),n=t.attributes)this.setAttribute(o,n[o].clone());var i=t.morphAttributes;for(o in i){var r=[],a=i[o];for(n=0,e=a.length;n<e;n++)r.push(a[n].clone());this.morphAttributes[o]=r}this.morphTargetsRelative=t.morphTargetsRelative;var o=t.groups;for(n=0,e=o.length;n<e;n++)i=o[n],this.addGroup(i.start,i.count,i.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ja=new c,Ka=new y,Qa=new v,$a=new l,to=new l,eo=new l,no=new l,io=new l,ro=new l,ao=new l,oo=new l,so=new l,uo=new n,lo=new n,co=new n,ho=new l,po=new l;G.prototype=Object.assign(Object.create(d.prototype),{constructor:G,isMesh:!0,copy:function(t){return d.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(t,e){var i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Qa.copy(i.boundingSphere),Qa.applyMatrix4(a),!1!==t.ray.intersectsSphere(Qa)&&(Ja.getInverse(a),Ka.copy(t.ray).applyMatrix4(Ja),null===i.boundingBox||!1!==Ka.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o=i.index;a=i.attributes.position;var s,u,l=i.morphAttributes.position,c=i.morphTargetsRelative,h=i.attributes.uv,p=i.attributes.uv2,d=i.groups,f=i.drawRange;if(null!==o)if(Array.isArray(r)){var m=0;for(s=d.length;m<s;m++){var g=d[m],v=r[g.materialIndex],y=Math.max(g.start,f.start);for(u=i=Math.min(g.start+g.count,f.start+f.count);y<u;y+=3){i=o.getX(y);var x=o.getX(y+1),b=o.getX(y+2);(i=V(this,v,t,Ka,a,l,c,h,p,i,x,b))&&(i.faceIndex=Math.floor(y/3),i.face.materialIndex=g.materialIndex,e.push(i))}}}else for(m=y=Math.max(0,f.start),s=i=Math.min(o.count,f.start+f.count);m<s;m+=3)i=o.getX(m),x=o.getX(m+1),b=o.getX(m+2),(i=V(this,r,t,Ka,a,l,c,h,p,i,x,b))&&(i.faceIndex=Math.floor(m/3),e.push(i));else if(void 0!==a)if(Array.isArray(r))for(m=0,s=d.length;m<s;m++)for(v=r[(g=d[m]).materialIndex],y=Math.max(g.start,f.start),u=i=Math.min(g.start+g.count,f.start+f.count);y<u;y+=3)(i=V(this,v,t,Ka,a,l,c,h,p,i=y,x=y+1,b=y+2))&&(i.faceIndex=Math.floor(y/3),i.face.materialIndex=g.materialIndex,e.push(i));else for(m=y=Math.max(0,f.start),s=i=Math.min(a.count,f.start+f.count);m<s;m+=3)(i=V(this,r,t,Ka,a,l,c,h,p,i=m,x=m+1,b=m+2))&&(i.faceIndex=Math.floor(m/3),e.push(i))}else if(i.isGeometry)for(a=Array.isArray(r),l=i.vertices,c=i.faces,0<(i=i.faceVertexUvs[0]).length&&(o=i),f=0,m=c.length;f<m;f++)s=c[f],void 0!==(i=a?r[s.materialIndex]:r)&&(h=l[s.a],p=l[s.b],d=l[s.c],i=H(this,i,t,Ka,h,p,d,ho))&&(o&&o[f]&&(g=o[f],uo.copy(g[0]),lo.copy(g[1]),co.copy(g[2]),i.uv=_.getUV(ho,h,p,d,uo,lo,co,new n)),i.face=s,i.faceIndex=f,e.push(i))},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var fo=0,mo=new c,go=new d,vo=new l;j.prototype=Object.assign(Object.create(e.prototype),{constructor:j,isGeometry:!0,applyMatrix4:function(t){for(var e=(new i).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){(t=this.faces[n]).normal.applyMatrix3(e).normalize();for(var a=0,o=t.vertexNormals.length;a<o;a++)t.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(t){return mo.makeRotationX(t),this.applyMatrix4(mo),this},rotateY:function(t){return mo.makeRotationY(t),this.applyMatrix4(mo),this},rotateZ:function(t){return mo.makeRotationZ(t),this.applyMatrix4(mo),this},translate:function(t,e,n){return mo.makeTranslation(t,e,n),this.applyMatrix4(mo),this},scale:function(t,e,n){return mo.makeScale(t,e,n),this.applyMatrix4(mo),this},lookAt:function(t){return go.lookAt(t),go.updateMatrix(),this.applyMatrix4(go.matrix),this},fromBufferGeometry:function(t){function e(t,e,r,a){var o=void 0===u?[]:[i.colors[t].clone(),i.colors[e].clone(),i.colors[r].clone()];a=new D(t,e,r,void 0===s?[]:[(new l).fromArray(s,3*t),(new l).fromArray(s,3*e),(new l).fromArray(s,3*r)],o,a),i.faces.push(a),void 0!==c&&i.faceVertexUvs[0].push([(new n).fromArray(c,2*t),(new n).fromArray(c,2*e),(new n).fromArray(c,2*r)]),void 0!==h&&i.faceVertexUvs[1].push([(new n).fromArray(h,2*t),(new n).fromArray(h,2*e),(new n).fromArray(h,2*r)])}var i=this,r=null!==t.index?t.index.array:void 0,a=t.attributes;if(void 0===a.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,u=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;for(void 0!==h&&(this.faceVertexUvs[1]=[]),a=0;a<o.length;a+=3)i.vertices.push((new l).fromArray(o,a)),void 0!==u&&i.colors.push((new b).fromArray(u,a));var p=t.groups;if(0<p.length)for(a=0;a<p.length;a++){var d=(o=p[a]).start,f=d;for(d+=o.count;f<d;f+=3)void 0!==r?e(r[f],r[f+1],r[f+2],o.materialIndex):e(f,f+1,f+2,o.materialIndex)}else if(void 0!==r)for(a=0;a<r.length;a+=3)e(r[a],r[a+1],r[a+2]);else for(a=0;a<o.length/3;a+=3)e(a,a+1,a+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(vo).negate(),this.translate(vo.x,vo.y,vo.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var n=new c;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var t=new l,e=new l,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b];t.subVectors(this.vertices[r.c],o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var n=Array(this.vertices.length),i=0;for(e=this.vertices.length;i<e;i++)n[i]=new l;if(t){var r=new l,a=new l;for(t=0,i=this.faces.length;t<i;t++){e=this.faces[t];var o=this.vertices[e.a],s=this.vertices[e.b],u=this.vertices[e.c];r.subVectors(u,s),a.subVectors(o,s),r.cross(a),n[e.a].add(r),n[e.b].add(r),n[e.c].add(r)}}else for(this.computeFaceNormals(),t=0,i=this.faces.length;t<i;t++)n[(e=this.faces[t]).a].add(e.normal),n[e.b].add(e.normal),n[e.c].add(e.normal);for(i=0,e=this.vertices.length;i<e;i++)n[i].normalize();for(t=0,i=this.faces.length;t<i;t++)3===(o=(e=this.faces[t]).vertexNormals).length?(o[0].copy(n[e.a]),o[1].copy(n[e.b]),o[2].copy(n[e.c])):(o[0]=n[e.a].clone(),o[1]=n[e.b].clone(),o[2]=n[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n=0;for(e=this.faces.length;n<e;n++){var i=this.faces[n];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);var r=0;for(t=i.vertexNormals.length;r<t;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}var a=new j;for(a.faces=this.faces,r=0,t=this.morphTargets.length;r<t;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],i=this.morphNormals[r].faceNormals;var o=this.morphNormals[r].vertexNormals;for(n=0,e=this.faces.length;n<e;n++){var s=new l,u={a:new l,b:new l,c:new l};i.push(s),o.push(u)}}for(o=this.morphNormals[r],a.vertices=this.morphTargets[r].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,e=this.faces.length;n<e;n++)i=this.faces[n],s=o.faceNormals[n],u=o.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,e=this.faces.length;n<e;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new v),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,a=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new i).getNormalMatrix(e));for(var p=0,d=s.length;p<d;p++){var f=s[p].clone();void 0!==e&&f.applyMatrix4(e),o.push(f)}for(p=0,d=h.length;p<d;p++)c.push(h[p].clone());for(p=0,d=l.length;p<d;p++){var m=(s=l[p]).vertexNormals;for(h=s.vertexColors,(c=new D(s.a+a,s.b+a,s.c+a)).normal.copy(s.normal),void 0!==r&&c.normal.applyMatrix3(r).normalize(),e=0,o=m.length;e<o;e++)f=m[e].clone(),void 0!==r&&f.applyMatrix3(r).normalize(),c.vertexNormals.push(f);for(c.color.copy(s.color),e=0,o=h.length;e<o;e++)f=h[e],c.vertexColors.push(f.clone());c.materialIndex=s.materialIndex+n,u.push(c)}for(p=0,d=t.faceVertexUvs.length;p<d;p++)for(n=t.faceVertexUvs[p],void 0===this.faceVertexUvs[p]&&(this.faceVertexUvs[p]=[]),e=0,o=n.length;e<o;e++){for(a=[],u=0,l=(r=n[e]).length;u<l;u++)a.push(r[u].clone());this.faceVertexUvs[p].push(a)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},n=[],i=[],r=Math.pow(10,4),a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=i[r.a],r.b=i[r.b],r.c=i[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),i=0,t=this.faceVertexUvs.length;i<t;i++)this.faceVertexUvs[i].splice(r,1);return a=this.vertices.length-n.length,this.vertices=n,a},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new l(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]),n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},clone:function(){return(new j).copy(this)},copy:function(t){var e,n,i;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(a=0,e=(r=t.colors).length;a<e;a++)this.colors.push(r[a].clone());for(a=0,e=(r=t.faces).length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,n=o.length;r<n;r++){var s=o[r],u=[],l=0;for(i=s.length;l<i;l++)u.push(s[l].clone());this.faceVertexUvs[a].push(u)}}for(a=0,e=(l=t.morphTargets).length;a<e;a++){if((i={}).name=l[a].name,void 0!==l[a].vertices)for(i.vertices=[],r=0,n=l[a].vertices.length;r<n;r++)i.vertices.push(l[a].vertices[r].clone());if(void 0!==l[a].normals)for(i.normals=[],r=0,n=l[a].normals.length;r<n;r++)i.normals.push(l[a].normals[r].clone());this.morphTargets.push(i)}for(a=0,e=(l=t.morphNormals).length;a<e;a++){if(i={},void 0!==l[a].vertexNormals)for(i.vertexNormals=[],r=0,n=l[a].vertexNormals.length;r<n;r++)o=l[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),i.vertexNormals.push(s);if(void 0!==l[a].faceNormals)for(i.faceNormals=[],r=0,n=l[a].faceNormals.length;r<n;r++)i.faceNormals.push(l[a].faceNormals[r].clone());this.morphNormals.push(i)}for(a=0,e=(r=t.skinWeights).length;a<e;a++)this.skinWeights.push(r[a].clone());for(a=0,e=(r=t.skinIndices).length;a<e;a++)this.skinIndices.push(r[a].clone());for(a=0,e=(r=t.lineDistances).length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var yo=function(t){function e(e,n,i,r,a,o){t.call(this),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new xo(e,n,i,r,a,o)),this.mergeVertices()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(j),xo=function(t){function e(e,n,i,r,a,o){function s(t,e,n,i,r,a,o,s,g,v,y){var x=a/g,_=o/v,b=a/2,w=o/2,M=s/2;o=g+1;for(var S=v+1,D=a=0,E=new l,T=0;T<S;T++)for(var A=T*_-w,C=0;C<o;C++)E[t]=(C*x-b)*i,E[e]=A*r,E[n]=M,h.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[n]=0<s?1:-1,p.push(E.x,E.y,E.z),d.push(C/g),d.push(1-T/v),a+=1;for(t=0;t<v;t++)for(e=0;e<g;e++)n=f+e+o*(t+1),i=f+(e+1)+o*(t+1),r=f+(e+1)+o*t,c.push(f+e+o*t,n,r),c.push(n,i,r),D+=6;u.addGroup(m,D,y),m+=D,f+=a}t.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:o};var u=this;e=e||1,n=n||1,i=i||1,r=Math.floor(r)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var c=[],h=[],p=[],d=[],f=0,m=0;s("z","y","x",-1,-1,i,n,e,o,a,0),s("z","y","x",1,-1,i,n,-e,o,a,1),s("x","z","y",1,1,e,i,n,r,o,2),s("x","z","y",1,-1,e,i,-n,r,o,3),s("x","y","z",1,-1,e,n,i,r,a,4),s("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(c),this.setAttribute("position",new I(h,3)),this.setAttribute("normal",new I(p,3)),this.setAttribute("uv",new I(d,2))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(k),_o={clone:W,merge:q};X.prototype=Object.create(E.prototype),X.prototype.constructor=X,X.prototype.isShaderMaterial=!0,X.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=W(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},X.prototype.toJSON=function(t){var e=E.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;e.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},Y.prototype=Object.assign(Object.create(d.prototype),{constructor:Y,isCamera:!0,copy:function(t,e){return d.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new l),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){d.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){d.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Z.prototype=Object.assign(Object.create(Y.prototype),{constructor:Z,isPerspectiveCamera:!0,copy:function(t,e){return Y.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*Fr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Fr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fr.RAD2DEG*Math.atan(Math.tan(.5*Fr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Fr.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=d.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),J.prototype=Object.create(d.prototype),J.prototype.constructor=J,K.prototype=Object.create(o.prototype),K.prototype.constructor=K,K.prototype.isWebGLCubeRenderTarget=!0,K.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new f,i=new X({type:"CubemapFromEquirect",uniforms:W({tEquirect:{value:null}}),vertexShader:"varying vec3 vWorldDirection;\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}",side:1,blending:0});return i.uniforms.tEquirect.value=e,e=new G(new xo(5,5,5),i),n.add(e),new J(1,10,this).update(t,n),e.geometry.dispose(),e.material.dispose(),this},Q.prototype=Object.create(r.prototype),Q.prototype.constructor=Q,Q.prototype.isDataTexture=!0;var bo=new v,wo=new l;Object.assign($.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements;t=n[0];var i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],p=n[10],d=n[11],f=n[12],m=n[13],g=n[14];return n=n[15],e[0].setComponents(a-t,l-o,d-c,n-f).normalize(),e[1].setComponents(a+t,l+o,d+c,n+f).normalize(),e[2].setComponents(a+i,l+s,d+h,n+m).normalize(),e[3].setComponents(a-i,l-s,d-h,n-m).normalize(),e[4].setComponents(a-r,l-u,d-p,n-g).normalize(),e[5].setComponents(a+r,l+u,d+p,n+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),bo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(bo)},intersectsSprite:function(t){return bo.center.set(0,0,0),bo.radius=.7071067811865476,bo.applyMatrix4(t.matrixWorld),this.intersectsSphere(bo)},intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var i=0;6>i;i++)if(e[i].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,n=0;6>n;n++){var i=e[n];if(wo.x=0<i.normal.x?t.max.x:t.min.x,wo.y=0<i.normal.y?t.max.y:t.min.y,wo.z=0<i.normal.z?t.max.z:t.min.z,0>i.distanceToPoint(wo))return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0}});var Mo={common:{diffuse:{value:new b(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new i},uv2Transform:{value:new i},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new b(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new b(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}},sprite:{diffuse:{value:new b(15658734)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}}};nt.prototype=Object.create(j.prototype),nt.prototype.constructor=nt,it.prototype=Object.create(k.prototype),it.prototype.constructor=it;var So={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Do={basic:{uniforms:q([Mo.common,Mo.specularmap,Mo.envmap,Mo.aomap,Mo.lightmap,Mo.fog]),vertexShader:So.meshbasic_vert,fragmentShader:So.meshbasic_frag},lambert:{uniforms:q([Mo.common,Mo.specularmap,Mo.envmap,Mo.aomap,Mo.lightmap,Mo.emissivemap,Mo.fog,Mo.lights,{emissive:{value:new b(0)}}]),vertexShader:So.meshlambert_vert,fragmentShader:So.meshlambert_frag},phong:{uniforms:q([Mo.common,Mo.specularmap,Mo.envmap,Mo.aomap,Mo.lightmap,Mo.emissivemap,Mo.bumpmap,Mo.normalmap,Mo.displacementmap,Mo.fog,Mo.lights,{emissive:{value:new b(0)},specular:{value:new b(1118481)},shininess:{value:30}}]),vertexShader:So.meshphong_vert,fragmentShader:So.meshphong_frag},standard:{uniforms:q([Mo.common,Mo.envmap,Mo.aomap,Mo.lightmap,Mo.emissivemap,Mo.bumpmap,Mo.normalmap,Mo.displacementmap,Mo.roughnessmap,Mo.metalnessmap,Mo.fog,Mo.lights,{emissive:{value:new b(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},toon:{uniforms:q([Mo.common,Mo.specularmap,Mo.aomap,Mo.lightmap,Mo.emissivemap,Mo.bumpmap,Mo.normalmap,Mo.displacementmap,Mo.gradientmap,Mo.fog,Mo.lights,{emissive:{value:new b(0)},specular:{value:new b(1118481)},shininess:{value:30}}]),vertexShader:So.meshtoon_vert,fragmentShader:So.meshtoon_frag},matcap:{uniforms:q([Mo.common,Mo.bumpmap,Mo.normalmap,Mo.displacementmap,Mo.fog,{matcap:{value:null}}]),vertexShader:So.meshmatcap_vert,fragmentShader:So.meshmatcap_frag},points:{uniforms:q([Mo.points,Mo.fog]),vertexShader:So.points_vert,fragmentShader:So.points_frag},dashed:{uniforms:q([Mo.common,Mo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:So.linedashed_vert,fragmentShader:So.linedashed_frag},depth:{uniforms:q([Mo.common,Mo.displacementmap]),vertexShader:So.depth_vert,fragmentShader:So.depth_frag},normal:{uniforms:q([Mo.common,Mo.bumpmap,Mo.normalmap,Mo.displacementmap,{opacity:{value:1}}]),vertexShader:So.normal_vert,fragmentShader:So.normal_frag},sprite:{uniforms:q([Mo.sprite,Mo.fog]),vertexShader:So.sprite_vert,fragmentShader:So.sprite_frag},background:{uniforms:{uvTransform:{value:new i},t2D:{value:null}},vertexShader:So.background_vert,fragmentShader:So.background_frag},cube:{uniforms:q([Mo.envmap,{opacity:{value:1}}]),vertexShader:So.cube_vert,fragmentShader:So.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:So.equirect_vert,fragmentShader:So.equirect_frag},distanceRGBA:{uniforms:q([Mo.common,Mo.displacementmap,{referencePosition:{value:new l},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:So.distanceRGBA_vert,fragmentShader:So.distanceRGBA_frag},shadow:{uniforms:q([Mo.lights,Mo.fog,{color:{value:new b(0)},opacity:{value:1}}]),vertexShader:So.shadow_vert,fragmentShader:So.shadow_frag}};Do.physical={uniforms:q([Do.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new n(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new b(0)},transparency:{value:0}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},mt.prototype=Object.create(r.prototype),mt.prototype.constructor=mt,mt.prototype.isCubeTexture=!0,Object.defineProperty(mt.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),gt.prototype=Object.create(r.prototype),gt.prototype.constructor=gt,gt.prototype.isDataTexture2DArray=!0,vt.prototype=Object.create(r.prototype),vt.prototype.constructor=vt,vt.prototype.isDataTexture3D=!0;var Eo=new r,To=new gt,Ao=new vt,Co=new mt,Lo=[],Po=[],Fo=new Float32Array(16),Ro=new Float32Array(9),Oo=new Float32Array(4);Qt.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),_t(e,t)},$t.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var No=/([\w\d_]+)(\])?(\[|\.)?/g;te.prototype.setValue=function(t,e,n,i){void 0!==(e=this.map[e])&&e.setValue(t,n,i)},te.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},te.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},te.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Io=0,zo=/^[ \t]*#include +<([\w\d./]+)>/gm,Bo=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Uo=/#pragma unroll_loop_start[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,ko=0;Ee.prototype=Object.create(E.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isMeshDepthMaterial=!0,Ee.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Fe.prototype=Object.assign(Object.create(Z.prototype),{constructor:Fe,isArrayCamera:!0}),Re.prototype=Object.assign(Object.create(d.prototype),{constructor:Re,isGroup:!0}),Object.assign(Oe.prototype,{constructor:Oe,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Re,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Re,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(t,e,n){var i=null,r=null,a=this._targetRay,o=this._grip;return t&&(null!==a&&(null!==(i=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==o&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)))),null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),this}}),Object.assign(Ne.prototype,e.prototype),Object.assign(ze.prototype,{isFogExp2:!0,clone:function(){return new ze(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Be.prototype,{isFog:!0,clone:function(){return new Be(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ue.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ue.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var Go=new l;Object.defineProperties(ke.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ke.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)Go.x=this.getX(e),Go.y=this.getY(e),Go.z=this.getZ(e),Go.applyMatrix4(t),this.setXYZ(e,Go.x,Go.y,Go.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],e=0;e<this.count;e++)for(var n=e*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[n+i]);return new A(new this.array.constructor(t),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],e=0;e<this.count;e++)for(var n=e*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[n+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}),Ge.prototype=Object.create(E.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isSpriteMaterial=!0,Ge.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Ho,Vo=new l,jo=new l,Wo=new l,qo=new n,Xo=new n,Yo=new c,Zo=new l,Jo=new l,Ko=new l,Qo=new n,$o=new n,ts=new n;He.prototype=Object.assign(Object.create(d.prototype),{constructor:He,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jo.setFromMatrixScale(this.matrixWorld),Yo.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Wo.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&jo.multiplyScalar(-Wo.z);var i=this.material.rotation;if(0!==i)var r=Math.cos(i),a=Math.sin(i);i=this.center,Ve(Zo.set(-.5,-.5,0),Wo,i,jo,a,r),Ve(Jo.set(.5,-.5,0),Wo,i,jo,a,r),Ve(Ko.set(.5,.5,0),Wo,i,jo,a,r),Qo.set(0,0),$o.set(1,0),ts.set(1,1);var o=t.ray.intersectTriangle(Zo,Jo,Ko,!1,Vo);null===o&&(Ve(Jo.set(-.5,.5,0),Wo,i,jo,a,r),$o.set(0,1),null===(o=t.ray.intersectTriangle(Zo,Ko,Jo,!1,Vo)))||(a=t.ray.origin.distanceTo(Vo))<t.near||a>t.far||e.push({distance:a,point:Vo.clone(),uv:_.getUV(Vo,Zo,Jo,Ko,Qo,$o,ts,new n),face:null,object:this})},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return d.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var es,ns,is,rs,as,os=new l,ss=new l;je.prototype=Object.assign(Object.create(d.prototype),{constructor:je,isLOD:!0,copy:function(t){d.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(0<this.levels.length){os.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(os);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(1<e.length){os.setFromMatrixPosition(t.matrixWorld),ss.setFromMatrixPosition(this.matrixWorld),t=os.distanceTo(ss)/t.zoom,e[0].object.visible=!0;for(var n=1,i=e.length;n<i&&t>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}},toJSON:function(t){t=d.prototype.toJSON.call(this,t),!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var e=this.levels,n=0,i=e.length;n<i;n++){var r=e[n];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),We.prototype=Object.assign(Object.create(G.prototype),{constructor:We,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new a,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){G.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:(es=new l,ns=new a,is=new a,rs=new l,as=new c,function(t,e){var n=this.skeleton,i=this.geometry;for(ns.fromBufferAttribute(i.attributes.skinIndex,t),is.fromBufferAttribute(i.attributes.skinWeight,t),es.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0),t=0;4>t;t++)if(0!==(i=is.getComponent(t))){var r=ns.getComponent(t);as.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(rs.copy(es).applyMatrix4(as),i)}return e.applyMatrix4(this.bindMatrixInverse)})});var us=new c,ls=new c;Object.assign(qe.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new c;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n=0;for(e=this.bones.length;n<e;n++)(t=this.bones[n])&&t.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,e=this.bones.length;n<e;n++)(t=this.bones[n])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++)us.multiplyMatrices(t[r]?t[r].matrixWorld:ls,e[r]),us.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new qe(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Xe.prototype=Object.assign(Object.create(d.prototype),{constructor:Xe,isBone:!0});var cs=new c,hs=new c,ps=[],ds=new G;Ye.prototype=Object.assign(Object.create(G.prototype),{constructor:Ye,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(ds.geometry=this.geometry,ds.material=this.material,void 0!==ds.material)for(var r=0;r<i;r++){this.getMatrixAt(r,cs),hs.multiplyMatrices(n,cs),ds.matrixWorld=hs,ds.raycast(t,ps);for(var a=0,o=ps.length;a<o;a++){var s=ps[a];s.instanceId=r,s.object=this,e.push(s)}ps.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Ze.prototype=Object.create(E.prototype),Ze.prototype.constructor=Ze,Ze.prototype.isLineBasicMaterial=!0,Ze.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var fs=new l,ms=new l,gs=new c,vs=new y,ys=new v;Je.prototype=Object.assign(Object.create(d.prototype),{constructor:Je,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)fs.fromBufferAttribute(e,i-1),ms.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=fs.distanceTo(ms);t.setAttribute("lineDistance",new I(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,(n=t.lineDistances)[0]=0,i=1,r=e.length;i<r;i++)n[i]=n[i-1],n[i]+=e[i-1].distanceTo(e[i]);return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ys.copy(n.boundingSphere),ys.applyMatrix4(i),ys.radius+=r,!1!==t.ray.intersectsSphere(ys)){gs.getInverse(i),vs.copy(t.ray).applyMatrix4(gs),i=r/((this.scale.x+this.scale.y+this.scale.z)/3),i*=i;var a=new l,o=new l;r=new l;var s=new l,u=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var c=n.index,h=n.attributes.position.array;if(null!==c){n=0;for(var p=(c=c.array).length-1;n<p;n+=u){var d=c[n+1];a.fromArray(h,3*c[n]),o.fromArray(h,3*d),(d=vs.distanceSqToSegment(a,o,s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,p=h.length/3-1;n<p;n+=u)a.fromArray(h,3*n),o.fromArray(h,3*n+3),(d=vs.distanceSqToSegment(a,o,s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(o=(a=n.vertices).length,n=0;n<o-1;n+=u)(d=vs.distanceSqToSegment(a[n],a[n+1],s,r))>i||(s.applyMatrix4(this.matrixWorld),(d=t.ray.origin.distanceTo(s))<t.near||d>t.far||e.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var xs=new l,_s=new l;Ke.prototype=Object.assign(Object.create(Je.prototype),{constructor:Ke,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)xs.fromBufferAttribute(e,i),_s.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+xs.distanceTo(_s);t.setAttribute("lineDistance",new I(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(e=t.vertices,n=t.lineDistances,i=0,r=e.length;i<r;i+=2)xs.copy(e[i]),_s.copy(e[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+xs.distanceTo(_s);return this}}),Qe.prototype=Object.assign(Object.create(Je.prototype),{constructor:Qe,isLineLoop:!0}),$e.prototype=Object.create(E.prototype),$e.prototype.constructor=$e,$e.prototype.isPointsMaterial=!0,$e.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var bs=new c,ws=new y,Ms=new v,Ss=new l;tn.prototype=Object.assign(Object.create(d.prototype),{constructor:tn,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ms.copy(n.boundingSphere),Ms.applyMatrix4(i),Ms.radius+=r,!1!==t.ray.intersectsSphere(Ms))if(bs.getInverse(i),ws.copy(t.ray).applyMatrix4(bs),r/=(this.scale.x+this.scale.y+this.scale.z)/3,r*=r,n.isBufferGeometry){var a=n.index;if(n=n.attributes.position.array,null!==a){var o=a.array;a=0;for(var s=o.length;a<s;a++){var u=o[a];Ss.fromArray(n,3*u),en(Ss,u,r,i,t,e,this)}}else for(a=0,o=n.length/3;a<o;a++)Ss.fromArray(n,3*a),en(Ss,a,r,i,t,e,this)}else for(a=0,o=(n=n.vertices).length;a<o;a++)en(n[a],a,r,i,t,e,this)},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var n=t[e[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=n.length;t<e;t++){var i=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),nn.prototype=Object.assign(Object.create(r.prototype),{constructor:nn,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),rn.prototype=Object.create(r.prototype),rn.prototype.constructor=rn,rn.prototype.isCompressedTexture=!0,an.prototype=Object.create(r.prototype),an.prototype.constructor=an,an.prototype.isCanvasTexture=!0,on.prototype=Object.create(r.prototype),on.prototype.constructor=on,on.prototype.isDepthTexture=!0,sn.prototype=Object.create(k.prototype),sn.prototype.constructor=sn,un.prototype=Object.create(j.prototype),un.prototype.constructor=un,ln.prototype=Object.create(k.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(j.prototype),cn.prototype.constructor=cn,hn.prototype=Object.create(k.prototype),hn.prototype.constructor=hn,pn.prototype=Object.create(j.prototype),pn.prototype.constructor=pn,dn.prototype=Object.create(hn.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(j.prototype),fn.prototype.constructor=fn,mn.prototype=Object.create(hn.prototype),mn.prototype.constructor=mn,gn.prototype=Object.create(j.prototype),gn.prototype.constructor=gn,vn.prototype=Object.create(hn.prototype),vn.prototype.constructor=vn,yn.prototype=Object.create(j.prototype),yn.prototype.constructor=yn,xn.prototype=Object.create(hn.prototype),xn.prototype.constructor=xn,_n.prototype=Object.create(j.prototype),_n.prototype.constructor=_n,bn.prototype=Object.create(k.prototype),bn.prototype.constructor=bn,bn.prototype.toJSON=function(){var t=k.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},wn.prototype=Object.create(j.prototype),wn.prototype.constructor=wn,Mn.prototype=Object.create(k.prototype),Mn.prototype.constructor=Mn,Sn.prototype=Object.create(j.prototype),Sn.prototype.constructor=Sn,Dn.prototype=Object.create(k.prototype),Dn.prototype.constructor=Dn;var Ds=function(t,e,n){n=n||2;var i,r=e&&e.length,a=r?e[0]*n:t.length,o=En(t,0,a,n,!0),s=[];if(!o||o.next===o.prev)return s;if(r){var u,l=n;r=[];var c=0;for(u=e.length;c<u;c++){var h=e[c]*l;(h=En(t,h,c<u-1?e[c+1]*l:t.length,l,!1))===h.next&&(h.steiner=!0),r.push(Rn(h))}for(r.sort(Ln),c=0;c<r.length;c++)(e=Pn(l=r[c],e=o))&&(l=Gn(e,l),Tn(e,e.next),Tn(l,l.next)),o=Tn(o,o.next)}if(t.length>80*n){var p=i=t[0],d=r=t[1];for(l=n;l<a;l+=n)(c=t[l])<p&&(p=c),(e=t[l+1])<d&&(d=e),c>i&&(i=c),e>r&&(r=e);i=0!==(i=Math.max(i-p,r-d))?1/i:0}return An(o,s,n,p,d,i),s},Es={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return 0>Es.area(t)},triangulateShape:function(t,e){var n=[],i=[],r=[];Wn(t),qn(n,t);var a=t.length;for(e.forEach(Wn),t=0;t<e.length;t++)i.push(a),a+=e[t].length,qn(n,e[t]);for(e=Ds(n,i),t=0;t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};Xn.prototype=Object.create(j.prototype),Xn.prototype.constructor=Xn,Xn.prototype.toJSON=function(){var t=j.prototype.toJSON.call(this);return Zn(this.parameters.shapes,this.parameters.options,t)},Yn.prototype=Object.create(k.prototype),Yn.prototype.constructor=Yn,Yn.prototype.toJSON=function(){var t=k.prototype.toJSON.call(this);return Zn(this.parameters.shapes,this.parameters.options,t)};var Ts={generateTopUV:function(t,e,i,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new n(e[3*i],e[3*i+1]),new n(t,r),new n(o,a)]},generateSideWallUV:function(t,e,i,r,a,o){t=e[3*i];var s=e[3*i+1];i=e[3*i+2];var u=e[3*r],l=e[3*r+1];r=e[3*r+2];var c=e[3*a],h=e[3*a+1];a=e[3*a+2];var p=e[3*o],d=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-l)?[new n(t,1-i),new n(u,1-r),new n(c,1-a),new n(p,1-e)]:[new n(s,1-i),new n(l,1-r),new n(h,1-a),new n(d,1-e)]}};Jn.prototype=Object.create(j.prototype),Jn.prototype.constructor=Jn,Kn.prototype=Object.create(Yn.prototype),Kn.prototype.constructor=Kn,Qn.prototype=Object.create(j.prototype),Qn.prototype.constructor=Qn,$n.prototype=Object.create(k.prototype),$n.prototype.constructor=$n,ti.prototype=Object.create(j.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(k.prototype),ei.prototype.constructor=ei,ni.prototype=Object.create(j.prototype),ni.prototype.constructor=ni,ii.prototype=Object.create(k.prototype),ii.prototype.constructor=ii,ri.prototype=Object.create(j.prototype),ri.prototype.constructor=ri,ri.prototype.toJSON=function(){var t=j.prototype.toJSON.call(this);return oi(this.parameters.shapes,t)},ai.prototype=Object.create(k.prototype),ai.prototype.constructor=ai,ai.prototype.toJSON=function(){var t=k.prototype.toJSON.call(this);return oi(this.parameters.shapes,t)},si.prototype=Object.create(k.prototype),si.prototype.constructor=si,li.prototype=Object.create(j.prototype),li.prototype.constructor=li,ci.prototype=Object.create(k.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(li.prototype),hi.prototype.constructor=hi,pi.prototype=Object.create(ci.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(j.prototype),di.prototype.constructor=di,fi.prototype=Object.create(k.prototype),fi.prototype.constructor=fi;var As=Object.freeze({__proto__:null,WireframeGeometry:sn,ParametricGeometry:un,ParametricBufferGeometry:ln,TetrahedronGeometry:pn,TetrahedronBufferGeometry:dn,OctahedronGeometry:fn,OctahedronBufferGeometry:mn,IcosahedronGeometry:gn,IcosahedronBufferGeometry:vn,DodecahedronGeometry:yn,DodecahedronBufferGeometry:xn,PolyhedronGeometry:cn,PolyhedronBufferGeometry:hn,TubeGeometry:_n,TubeBufferGeometry:bn,TorusKnotGeometry:wn,TorusKnotBufferGeometry:Mn,TorusGeometry:Sn,TorusBufferGeometry:Dn,TextGeometry:Jn,TextBufferGeometry:Kn,SphereGeometry:Qn,SphereBufferGeometry:$n,RingGeometry:ti,RingBufferGeometry:ei,PlaneGeometry:nt,PlaneBufferGeometry:it,LatheGeometry:ni,LatheBufferGeometry:ii,ShapeGeometry:ri,ShapeBufferGeometry:ai,ExtrudeGeometry:Xn,ExtrudeBufferGeometry:Yn,EdgesGeometry:si,ConeGeometry:hi,ConeBufferGeometry:pi,CylinderGeometry:li,CylinderBufferGeometry:ci,CircleGeometry:di,CircleBufferGeometry:fi,BoxGeometry:yo,BoxBufferGeometry:xo});mi.prototype=Object.create(E.prototype),mi.prototype.constructor=mi,mi.prototype.isShadowMaterial=!0,mi.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this},gi.prototype=Object.create(X.prototype),gi.prototype.constructor=gi,gi.prototype.isRawShaderMaterial=!0,yi.prototype=Object.create(E.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshStandardMaterial=!0,yi.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},xi.prototype=Object.create(yi.prototype),xi.prototype.constructor=xi,xi.prototype.isMeshPhysicalMaterial=!0,xi.prototype.copy=function(t){return yi.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new b).copy(t.sheen):null,this.transparency=t.transparency,this},_i.prototype=Object.create(E.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshPhongMaterial=!0,_i.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},bi.prototype=Object.create(E.prototype),bi.prototype.constructor=bi,bi.prototype.isMeshToonMaterial=!0,bi.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},wi.prototype=Object.create(E.prototype),wi.prototype.constructor=wi,wi.prototype.isMeshNormalMaterial=!0,wi.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Mi.prototype=Object.create(E.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isMeshLambertMaterial=!0,Mi.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Si.prototype=Object.create(E.prototype),Si.prototype.constructor=Si,Si.prototype.isMeshMatcapMaterial=!0,Si.prototype.copy=function(t){return E.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Di.prototype=Object.create(Ze.prototype),Di.prototype.constructor=Di,Di.prototype.isLineDashedMaterial=!0,Di.prototype.copy=function(t){return Ze.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Cs=Object.freeze({__proto__:null,ShadowMaterial:mi,SpriteMaterial:Ge,RawShaderMaterial:gi,ShaderMaterial:X,PointsMaterial:$e,MeshPhysicalMaterial:xi,MeshStandardMaterial:yi,MeshPhongMaterial:_i,MeshToonMaterial:bi,MeshNormalMaterial:wi,MeshLambertMaterial:Mi,MeshDepthMaterial:Ee,MeshDistanceMaterial:Te,MeshBasicMaterial:T,MeshMatcapMaterial:Si,LineDashedMaterial:Di,LineBasicMaterial:Ze,Material:E}),Ls={arraySlice:function(t,e,n){return Ls.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,u=0;u!==e;++u)r[o++]=t[s+u];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}},subclip:function(t,e,n,i,r){r=r||30,(t=t.clone()).name=e;var a=[];for(e=0;e<t.tracks.length;++e){for(var o=t.tracks[e],s=o.getValueSize(),u=[],l=[],c=0;c<o.times.length;++c){var h=o.times[c]*r;if(!(h<n||h>=i))for(u.push(o.times[c]),h=0;h<s;++h)l.push(o.values[c*s+h])}0!==u.length&&(o.times=Ls.convertArray(u,o.times.constructor),o.values=Ls.convertArray(l,o.values.constructor),a.push(o))}for(t.tracks=a,n=1/0,e=0;e<t.tracks.length;++e)n>t.tracks[e].times[0]&&(n=t.tracks[e].times[0]);for(e=0;e<t.tracks.length;++e)t.tracks[e].shift(-1*n);return t.resetDuration(),t},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===i||0>=i)&&(i=30);var r=t.tracks.length;for(e/=i,i=0;i<r;++i){var a=n.tracks[i],o=a.ValueTypeName;if("bool"!==o&&"string"!==o){var s=t.tracks.find((function(t){return t.name===a.name&&t.ValueTypeName===o}));if(void 0!==s){var l=a.getValueSize(),c=a.times.length-1;e<=a.times[0]?c=Ls.arraySlice(a.values,0,a.valueSize):e>=a.times[c]?c=Ls.arraySlice(a.values,c*l):((c=a.createInterpolant()).evaluate(e),c=c.resultBuffer),"quaternion"===o&&new u(c[0],c[1],c[2],c[3]).normalize().conjugate().toArray(c);for(var h=s.times.length,p=0;p<h;++p){var d=p*l;if("quaternion"===o)u.multiplyQuaternionsFlat(s.values,d,c,0,s.values,d);else for(var f=0;f<l;++f)s.values[d+f]-=c[f]}}}}return t.blendMode=2501,t}};Object.assign(Ei.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,t<(i=e[++n]))break e}i=e.length;break n}if(t>=r)break t;for(t<(a=e[1])&&(n=2,r=a),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,t>=(r=e[--n-1]))break e}i=n,n=0}for(;n<i;)t<e[r=n+i>>>1]?i=r:n=r+1;if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize;t*=i;for(var r=0;r!==i;++r)e[r]=n[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ei.prototype,{beforeStart_:Ei.prototype.copySampleValue_,afterEnd_:Ei.prototype.copySampleValue_}),Ti.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Ti,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}t=.5*(n-e),i=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-n),this._offsetPrev=r*i,this._offsetNext=a*i},interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,u=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,h=this._weightNext,p=(n-e)/(i-e);for(e=-c*(i=(n=p*p)*p)+2*c*n-c*p,c=(1+c)*i+(-1.5-2*c)*n+(-.5+c)*p+1,p=(-1-h)*i+(1.5+h)*n+.5*p,h=h*i-h*n,n=0;n!==o;++n)r[n]=e*a[u+n]+c*a[s+n]+p*a[t+n]+h*a[l+n];return r}}),Ai.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Ai,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(n=1-(e=(n-e)/(i-e)),i=0;i!==o;++i)r[i]=a[s+i]*n+a[t+i]*e;return r}}),Ci.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Ci,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Li,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:Ls.convertArray(t.times,Array),values:Ls.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e}}),Object.assign(Li.prototype,{constructor:Li,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ci(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ai(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ti(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;return++a,0===r&&a===i||(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=Ls.arraySlice(n,r,a),this.values=Ls.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times;e=this.values;var i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==i;a++){var o=n[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&Ls.isTypedArray(e))for(a=0,n=e.length;a!==n;++a)if(i=e[a],isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,i),t=!1;break}return t},optimize:function(){for(var t=Ls.arraySlice(this.times),e=Ls.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0]))if(i)s=!0;else{var l=o*n,c=l-n,h=l+n;for(u=0;u!==n;++u){var p=e[l+u];if(p!==e[c+u]||p!==e[h+u]){s=!0;break}}}if(s){if(o!==r)for(t[r]=t[o],s=o*n,l=r*n,u=0;u!==n;++u)e[l+u]=e[s+u];++r}}if(0<a){for(t[r]=t[a],s=a*n,l=r*n,u=0;u!==n;++u)e[l+u]=e[s+u];++r}return r!==t.length?(this.times=Ls.arraySlice(t,0,r),this.values=Ls.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this},clone:function(){var t=Ls.arraySlice(this.times,0),e=Ls.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),Pi.prototype=Object.assign(Object.create(Li.prototype),{constructor:Pi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Fi.prototype=Object.assign(Object.create(Li.prototype),{constructor:Fi,ValueTypeName:"color"}),Ri.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ri,ValueTypeName:"number"}),Oi.prototype=Object.assign(Object.create(Ei.prototype),{constructor:Oi,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize;for(e=(n-e)/(i-e),n=(t*=o)+o;t!==n;t+=4)u.slerpFlat(r,0,a,t-o,a,t,e);return r}}),Ni.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ni,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Oi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Ii.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ii,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zi.prototype=Object.assign(Object.create(Li.prototype),{constructor:zi,ValueTypeName:"vector"}),Object.assign(Bi,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Ui(n[r]).scale(i));return new Bi(t.name,t.duration,e,t.blendMode)},toJSON:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(var i=0,r=n.length;i!==r;++i)e.push(Li.toJSON(n[i]));return t},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],u=[];s.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);var l=Ls.getKeyframeOrder(s);s=Ls.sortedArray(s,1,l),u=Ls.sortedArray(u,1,l),i||0!==s[0]||(s.push(r),u.push(u[0])),a.push(new Ri(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/n))}return new Bi(t,-1,a)},findByName:function(t,e){var n=t;for(Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations),t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(r);if(u&&1<u.length){var l=u[1];(u=i[l])||(i[l]=u=[]),u.push(s)}}for(l in t=[],i)t.push(Bi.CreateFromMorphTargetSequence(l,i[l],e,n));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];Ls.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.blendMode;t=t.hierarchy||[];for(var u=0;u<t.length;u++){var l=t[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var p in a){var d=[],f=[];for(h=0;h!==l[c].morphTargets.length;++h){var m=l[c];d.push(m.time),f.push(m.morphTarget===p?1:0)}i.push(new Ri(".morphTargetInfluence["+p+"]",d,f))}a=a.length*(o||1)}else n(zi,(c=".bones["+e[u].name+"]")+".position",l,"pos",i),n(Ni,c+".quaternion",l,"rot",i),n(zi,c+".scale",l,"scl",i)}return 0===i.length?null:new Bi(r,a,i,s)}}),Object.assign(Bi.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Bi(this.name,this.duration,t,this.blendMode)}});var Ps={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Fs=new ki;Object.assign(Gi.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Rs={};Hi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Hi,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Ps.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===Rs[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){n=o[1];var s=!!o[2];o=o[3],o=decodeURIComponent(o),s&&(o=atob(o));try{var u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":var l=new Uint8Array(o.length);for(s=0;s<o.length;s++)l[s]=o.charCodeAt(s);var c="blob"===u?new Blob([l.buffer],{type:n}):l.buffer;break;case"document":c=(new DOMParser).parseFromString(o,n);break;case"json":c=JSON.parse(o);break;default:c=o}setTimeout((function(){e&&e(c),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{Rs[t]=[],Rs[t].push({onLoad:e,onProgress:n,onError:i});var h=new XMLHttpRequest;for(s in h.open("https://artemsemkin.com/rhye/html/404.html",t,!0),h.addEventListener("load",(function(e){var n=this.response,i=Rs[t];if(delete Rs[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ps.add(t,n);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}}else{for(a=0,o=i.length;a<o;a++)(s=i[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)}),!1),h.addEventListener("progress",(function(e){for(var n=Rs[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}}),!1),h.addEventListener("error",(function(e){var n=Rs[t];delete Rs[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),h.addEventListener("abort",(function(e){var n=Rs[t];delete Rs[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)h.setRequestHeader(s,this.requestHeader[s]);h.send(null)}return r.manager.itemStart(t),h}Rs[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Vi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Vi,load:function(t,e,n,i){var r=this,a=new Hi(r.manager);a.setPath(r.path),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Bi.parse(t[n]);e.push(i)}return e}}),ji.prototype=Object.assign(Object.create(Gi.prototype),{constructor:ji,load:function(t,e,n,i){function r(r){u.load(t[r],(function(t){t=a.parse(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(l+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))}),n,i)}var a=this,o=[],s=new rn;s.image=o;var u=new Hi(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)r(c);else u.load(t,(function(t){if((t=a.parse(t,!0)).isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){o[i]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+r]),o[i].format=t.format,o[i].width=t.width,o[i].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)}),n,i);return s}}),Wi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Wi,load:function(t,e,n,i){var r=this,a=new Q,o=new Hi(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){(t=r.parse(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1006,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=1008),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))}),n,i),a}}),qi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:qi,load:function(t,e,n,i){function r(){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),Ps.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),i&&i(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=Ps.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout((function(){e&&e(s),o.manager.itemEnd(t)}),0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",r,!1),u.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}),Xi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Xi,load:function(t,e,n,i){function r(n){o.load(t[n],(function(t){a.images[n]=t,6===++s&&(a.needsUpdate=!0,e&&e(a))}),void 0,i)}var a=new mt,o=new qi(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(n=0;n<t.length;++n)r(n);return a}}),Yi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Yi,load:function(t,e,n,i){var a=new r,o=new qi(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){a.image=n,n=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),a.format=n?1022:1023,a.needsUpdate=!0,void 0!==e&&e(a)}),n,i),a}}),Object.assign(Zi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;for(n.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(i),n.push(r),i=a}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n=this.getLengths(),i=n.length;e=e||t*n[i-1];for(var r,a=0,o=i-1;a<=o;)if(0>(r=n[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else{if(!(0<r)){o=t;break}o=t-1}return n[t=o]===e?t/(i-1):(t+(e-(a=n[t]))/(n[t+1]-a))/(i-1)},getTangent:function(t,e){var i=t-1e-4;return 0>i&&(i=0),1<(t+=1e-4)&&(t=1),i=this.getPoint(i),t=this.getPoint(t),(e=e||(i.isVector2?new n:new l)).copy(t).sub(i).normalize(),e},getTangentAt:function(t,e){return t=this.getUtoTmapping(t),this.getTangent(t,e)},computeFrenetFrames:function(t,e){var n,i=new l,r=[],a=[],o=[],s=new l,u=new c;for(n=0;n<=t;n++){var h=n/t;r[n]=this.getTangentAt(h,new l),r[n].normalize()}a[0]=new l,o[0]=new l,n=Number.MAX_VALUE,h=Math.abs(r[0].x);var p=Math.abs(r[0].y),d=Math.abs(r[0].z);for(h<=n&&(n=h,i.set(1,0,0)),p<=n&&(n=p,i.set(0,1,0)),d<=n&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],s),o[0].crossVectors(r[0],a[0]),n=1;n<=t;n++)a[n]=a[n-1].clone(),o[n]=o[n-1].clone(),s.crossVectors(r[n-1],r[n]),s.length()>Number.EPSILON&&(s.normalize(),i=Math.acos(Fr.clamp(r[n-1].dot(r[n]),-1,1)),a[n].applyMatrix4(u.makeRotationAxis(s,i))),o[n].crossVectors(r[n],a[n]);if(!0===e)for(i=Math.acos(Fr.clamp(a[0].dot(a[t]),-1,1)),i/=t,0<r[0].dot(s.crossVectors(a[0],a[t]))&&(i=-i),n=1;n<=t;n++)a[n].applyMatrix4(u.makeRotationAxis(r[n],i*n)),o[n].crossVectors(r[n],a[n]);return{tangents:r,normals:a,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),ur.prototype=Object.assign(Object.create(Y.prototype),{constructor:ur,isOrthographicCamera:!0,copy:function(t,e){return Y.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t;n+=t,t=i+e,e=i-e,null!==this.view&&this.view.enabled&&(i=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,n=(r+=i*this.view.offsetX)+i*this.view.width,e=(t-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(r,n,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=d.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),mr.prototype=Object.assign(Object.create(Gi.prototype),{constructor:mr,load:function(t,e,n,i){var r=this,a=new Hi(r.manager);a.setPath(r.path),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)},parse:function(t){function e(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}var r=this.textures,o=new Cs[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new b).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&(o.vertexColors="number"==typeof t.vertexColors?0<t.vertexColors:t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var u=t.uniforms[s];switch(o.uniforms[s]={},u.type){case"t":o.uniforms[s].value=e(u.value);break;case"c":o.uniforms[s].value=(new b).setHex(u.value);break;case"v2":o.uniforms[s].value=(new n).fromArray(u.value);break;case"v3":o.uniforms[s].value=(new l).fromArray(u.value);break;case"v4":o.uniforms[s].value=(new a).fromArray(u.value);break;case"m3":o.uniforms[s].value=(new i).fromArray(u.value);case"m4":o.uniforms[s].value=(new c).fromArray(u.value);break;default:o.uniforms[s].value=u.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(s=t.normalScale,!1===Array.isArray(s)&&(s=[s,s]),o.normalScale=(new n).fromArray(s)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new n).fromArray(t.clearcoatNormalScale)),o},setTextures:function(t){return this.textures=t,this}});var Os={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("https://artemsemkin.com/");return-1===e?"./":t.substr(0,e+1)}};gr.prototype=Object.assign(Object.create(k.prototype),{constructor:gr,isInstancedBufferGeometry:!0,copy:function(t){return k.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=k.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),vr.prototype=Object.assign(Object.create(A.prototype),{constructor:vr,isInstancedBufferAttribute:!0,copy:function(t){return A.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=A.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),yr.prototype=Object.assign(Object.create(Gi.prototype),{constructor:yr,load:function(t,e,n,i){var r=this,a=new Hi(r.manager);a.setPath(r.path),a.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new gr:new k,n=t.data.index;if(void 0!==n){var i=new Ns[n.type](n.array);e.setIndex(new A(i,1))}for(var r in n=t.data.attributes){var a=n[r];i=new Ns[a.type](a.array),i=new(a.isInstancedBufferAttribute?vr:A)(i,a.itemSize,a.normalized),void 0!==a.name&&(i.name=a.name),e.setAttribute(r,i)}var o=t.data.morphAttributes;if(o)for(r in o){var s=o[r],u=[];n=0;for(var c=s.length;n<c;n++)a=s[n],i=new A(i=new Ns[a.type](a.array),a.itemSize,a.normalized),void 0!==a.name&&(i.name=a.name),u.push(i);e.morphAttributes[r]=u}if(t.data.morphTargetsRelative&&(e.morphTargetsRelative=!0),void 0!==(r=t.data.groups||t.data.drawcalls||t.data.offsets))for(n=0,a=r.length;n!==a;++n)i=r[n],e.addGroup(i.start,i.count,i.materialIndex);return void 0!==(n=t.data.boundingSphere)&&(r=new l,void 0!==n.center&&r.fromArray(n.center),e.boundingSphere=new v(r,n.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Ns={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};xr.prototype=Object.assign(Object.create(Gi.prototype),{constructor:xr,load:function(t,e,n,i){var r=this,a=""===this.path?Os.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new Hi(r.manager)).setPath(this.path),a.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(n=a.metadata)||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)}),n,i)},parse:function(t,e){var n=this.parseShape(t.shapes);n=this.parseGeometries(t.geometries,n);var i=this.parseImages(t.images,(function(){void 0!==e&&e(r)}));i=this.parseTextures(t.textures,i),i=this.parseMaterials(t.materials,i);var r=this.parseObject(t.object,n,i);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new tr).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new yr,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new As[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new As[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new As[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new As[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new As[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new As[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new As[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new As[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new As[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new As[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new As[o.type]((new kh[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new As[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new As[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var u=0,l=o.shapes.length;u<l;u++){var c=e[o.shapes[u]];s.push(c)}s=new As[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],u=0,l=o.shapes.length;u<l;u++)c=e[o.shapes[u]],s.push(c);void 0!==(u=o.options.extrudePath)&&(o.options.extrudePath=(new kh[u.type]).fromJSON(u)),s=new As[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(o);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new mr;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],u=0;u<o.materials.length;u++){var l=o.materials[u];void 0===n[l.uuid]&&(n[l.uuid]=r.parse(l)),s.push(n[l.uuid])}i[o.uuid]=s}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=Bi.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){function n(t){return i.manager.itemStart(t),a.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}var i=this,r={};if(void 0!==t&&0<t.length){var a=new qi(e=new ki(e));a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],u=s.url;if(Array.isArray(u)){r[s.uuid]=[];for(var l=0,c=u.length;l<c;l++){var h=u[l];h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h,r[s.uuid].push(n(h))}}else h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:i.resourcePath+s.url,r[s.uuid]=n(h)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var a=0,o=t.length;a<o;a++){var s=t[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var u=Array.isArray(e[s.image])?new mt(e[s.image]):new r(e[s.image]);u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping,Is)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.center&&u.center.fromArray(s.center),void 0!==s.rotation&&(u.rotation=s.rotation),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0],zs),u.wrapT=n(s.wrap[1],zs)),void 0!==s.format&&(u.format=s.format),void 0!==s.type&&(u.type=s.type),void 0!==s.encoding&&(u.encoding=s.encoding),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter,Bs)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter,Bs)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(u.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(u.unpackAlignment=s.unpackAlignment),i[s.uuid]=u}return i},parseObject:function(t,e,n){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":var a=new f;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new b(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Be(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new ze(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Z(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new ur(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new hr(t.color,t.intensity);break;case"DirectionalLight":a=new cr(t.color,t.intensity);break;case"PointLight":a=new sr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new pr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new ar(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new nr(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new fr).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=i(t.geometry);var o=r(t.material);a=new G(a,o);break;case"InstancedMesh":a=i(t.geometry),o=r(t.material);var s=t.instanceMatrix;(a=new Ye(a,o,t.count)).instanceMatrix=new A(new Float32Array(s.array),16);break;case"LOD":a=new je;break;case"Line":a=new Je(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new Qe(i(t.geometry),r(t.material));break;case"LineSegments":a=new Ke(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new tn(i(t.geometry),r(t.material));break;case"Sprite":a=new He(r(t.material));break;case"Group":a=new Re;break;default:a=new d}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(s=t.children,o=0;o<s.length;o++)a.add(this.parseObject(s[o],e,n));if("LOD"===t.type)for(void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate),t=t.levels,s=0;s<t.length;s++){o=t[s];var u=a.getObjectByProperty("uuid",o.object);void 0!==u&&a.addLevel(u,o.distance)}return a}});var Is={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},zs={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Bs={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};_r.prototype=Object.assign(Object.create(Gi.prototype),{constructor:_r,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Ps.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(n){Ps.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(br.prototype,{moveTo:function(t,e){return this.currentPath=new $i,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new tr;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(o=e[a],u=-u,s=e[r],l=-l),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return!0}else{if(0===(r=l*(t.x-o.x)-u*(t.y-o.y)))return!0;0>r||(i=!i)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return i}var r=Es.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);if(e=[],1===a.length){var o=a[0],s=new tr;return s.curves=o.curves,e.push(s),e}var u=!r(a[0].getPoints());u=t?!u:u,s=[];var l=[],c=[],h=0;l[h]=void 0,c[h]=[];for(var p=0,d=a.length;p<d;p++){var f=(o=a[p]).getPoints(),m=r(f);(m=t?!m:m)?(!u&&l[h]&&h++,l[h]={s:new tr,p:f},l[h].s.curves=o.curves,u&&h++,c[h]=[]):c[h].push({h:o,p:f[0]})}if(!l[0])return n(a);if(1<l.length){for(p=!1,t=[],r=0,a=l.length;r<a;r++)s[r]=[];for(r=0,a=l.length;r<a;r++)for(o=c[r],m=0;m<o.length;m++){for(u=o[m],h=!0,f=0;f<l.length;f++)i(u.p,l[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),h?(h=!1,s[f].push(u)):p=!0);h&&s[r].push(u)}0<t.length&&(p||(c=s))}for(p=0,r=l.length;p<r;p++)for(s=l[p].s,e.push(s),a=0,o=(t=c[p]).length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(wr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var n=[],i=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");i/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i;t=[];for(var o=0,s=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)o=0,s-=a;else{var c=l;l=i;var h=o,p=s,d=e,f=d.glyphs[c]||d.glyphs["?"];if(f){if(c=new br,f.o)for(var m=0,g=(d=f._cachedOutline||(f._cachedOutline=f.o.split(" "))).length;m<g;)switch(d[m++]){case"m":var v=d[m++]*l+h,y=d[m++]*l+p;c.moveTo(v,y);break;case"l":v=d[m++]*l+h,y=d[m++]*l+p,c.lineTo(v,y);break;case"q":var x=d[m++]*l+h,_=d[m++]*l+p,b=d[m++]*l+h,w=d[m++]*l+p;c.quadraticCurveTo(b,w,x,_);break;case"b":x=d[m++]*l+h,_=d[m++]*l+p,b=d[m++]*l+h,w=d[m++]*l+p,v=d[m++]*l+h,y=d[m++]*l+p,c.bezierCurveTo(b,w,v,y,x,_)}l={offsetX:f.ha*l,path:c}}else console.error('THREE.Font: character "'+c+'" does not exists in font family '+d.familyName+"."),l=void 0;o+=l.offsetX,t.push(l.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(n,t[e].toShapes());return n}}),Mr.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Mr,load:function(t,e,n,i){var r=this,a=new Hi(this.manager);a.setPath(this.path),a.load(t,(function(t){try{var n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=r.parse(n),e&&e(t)}),n,i)},parse:function(t){return new wr(t)}});var Us,ks={getContext:function(){return void 0===Us&&(Us=new(window.AudioContext||window.webkitAudioContext)),Us},setContext:function(t){Us=t}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),t.ACESFilmicToneMapping=5,t.AddEquation=100,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=hr,t.AmbientLightProbe=function(t,e){fr.call(this,void 0,e),t=(new b).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))},t.AnimationClip=Bi,t.AnimationLoader=Vi,t.AnimationMixer=function(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1},t.AnimationObjectGroup=function(){this.uuid=Fr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}},t.AnimationUtils=Ls,t.ArcCurve=function(t,e,n,i,r,a){Ji.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"},t.ArrayCamera=Fe,t.ArrowHelper=function(t,e,n,i,r,a){d.call(this),this.type="ArrowHelper",void 0===t&&(t=new l(0,0,1)),void 0===e&&(e=new l(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===yf&&(yf=new k,yf.setAttribute("position",new I([0,0,0,0,1,0],3)),Ng=new ci(0,.5,1,5,1),Ng.translate(0,-.5,0)),this.position.copy(e),this.line=new Je(yf,new Ze({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new G(Ng,new T({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)},t.Audio=Dr,t.AudioAnalyser=function(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)},t.AudioContext=ks,t.AudioListener=function(){d.call(this),this.type="AudioListener",this.context=ks.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Sr},t.AudioLoader=function(t){Gi.call(this,t)},t.AxesHelper=Cr,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Cr(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Wi(t)},t.Bone=Xe,t.BooleanKeyframeTrack=Pi,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ar(t,e)},t.Box2=function(t,e){this.min=void 0!==t?t:new n(1/0,1/0),this.max=void 0!==e?e:new n(-1/0,-1/0)},t.Box3=m,t.Box3Helper=function(t,e){this.type="Box3Helper",this.box=t,e=e||16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new k;n.setIndex(new A(t,1)),n.setAttribute("position",new I([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ke.call(this,n,new Ze({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()},t.BoxBufferGeometry=xo,t.BoxGeometry=yo,t.BoxHelper=Ar,t.BufferAttribute=A,t.BufferGeometry=k,t.BufferGeometryLoader=yr,t.ByteType=1010,t.Cache=Ps,t.Camera=Y,t.CameraHelper=function(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var i=new k,r=new Ze({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],s={},u=new b(16755200),l=new b(16711680),c=new b(43775),h=new b(16777215),p=new b(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",l),e("p","n2",l),e("p","n3",l),e("p","n4",l),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",h),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),i.setAttribute("position",new I(a,3)),i.setAttribute("color",new I(o,3)),Ke.call(this,i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=an,t.CatmullRomCurve3=Ki,t.CineonToneMapping=4,t.CircleBufferGeometry=fi,t.CircleGeometry=di,t.ClampToEdgeWrapping=1001,t.Clock=Sr,t.ClosedSplineCurve3=function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ki.call(this,t),this.type="catmullrom",this.closed=!0},t.Color=b,t.ColorKeyframeTrack=Fi,t.CompressedTexture=rn,t.CompressedTextureLoader=ji,t.ConeBufferGeometry=pi,t.ConeGeometry=hi,t.CubeCamera=J,t.CubeGeometry=yo,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=mt,t.CubeTextureLoader=Xi,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=function(t,e,i,r){Zi.call(this),this.type="CubicBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n,this.v3=r||new n},t.CubicBezierCurve3=function(t,e,n,i){Zi.call(this),this.type="CubicBezierCurve3",this.v0=t||new l,this.v1=e||new l,this.v2=n||new l,this.v3=i||new l},t.CubicInterpolant=Ti,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Zi,t.CurvePath=Qi,t.CustomBlending=5,t.CylinderBufferGeometry=ci,t.CylinderGeometry=li,t.Cylindrical=function(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this},t.DataTexture=Q,t.DataTexture2DArray=gt,t.DataTexture3D=vt,t.DataTextureLoader=Wi,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Fs,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=on,t.DirectionalLight=cr,t.DirectionalLightHelper=function(t,e,n){d.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1),(t=new k).setAttribute("position",new I([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Ze({fog:!1,toneMapped:!1}),this.lightPlane=new Je(t,e),this.add(this.lightPlane),(t=new k).setAttribute("position",new I([0,0,0,0,0,1],3)),this.targetLine=new Je(t,e),this.add(this.targetLine),this.update()},t.DirectionalLightShadow=lr,t.DiscreteInterpolant=Ci,t.DodecahedronBufferGeometry=xn,t.DodecahedronGeometry=yn,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new A(t,e).setUsage(35048)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=si,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ke(new si(t.geometry),new Ze({color:void 0!==e?e:16777215}))},t.EllipseCurve=Ji,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=h,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Yn,t.ExtrudeGeometry=Xn,t.Face3=D,t.Face4=function(t,e,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new D(t,e,n,r,a,o)},t.FaceColors=1,t.FileLoader=Hi,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new I(t,e)},t.Float32BufferAttribute=I,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new z(t,e)},t.Float64BufferAttribute=z,t.FloatType=1015,t.Fog=Be,t.FogExp2=ze,t.Font=wr,t.FontLoader=Mr,t.FrontFaceDirectionCCW=1,t.FrontFaceDirectionCW=0,t.FrontSide=0,t.Frustum=$,t.GammaEncoding=3007,t.Geometry=j,t.GeometryUtils={merge:function(t,e,n){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var i=e.matrix;e=e.geometry}t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=function(t,e,n,i){t=t||10,e=e||10,n=new b(void 0!==n?n:4473924),i=new b(void 0!==i?i:8947848);var r=e/2,a=t/e,o=t/2;t=[];for(var s=[],u=0,l=0,c=-o;u<=e;u++,c+=a){t.push(-o,0,c,o,0,c),t.push(c,0,-o,c,0,o);var h=u===r?n:i;h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3}(e=new k).setAttribute("position",new I(t,3)),e.setAttribute("color",new I(s,3)),n=new Ze({vertexColors:!0,toneMapped:!1}),Ke.call(this,e,n),this.type="GridHelper"},t.Group=Re,t.HalfFloatType=1016,t.HemisphereLight=nr,t.HemisphereLightHelper=function(t,e,n){d.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,(t=new mn(e)).rotateY(.5*Math.PI),this.material=new T({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.setAttribute("color",new A(e,3)),this.add(new G(t,this.material)),this.update()},t.HemisphereLightProbe=function(t,e,n){fr.call(this,void 0,n),t=(new b).set(t),n=(new b).set(e),e=new l(t.r,t.g,t.b),t=new l(n.r,n.g,n.b);var i=(n=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(n),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(i)},t.IcosahedronBufferGeometry=vn,t.IcosahedronGeometry=gn,t.ImageBitmapLoader=_r,t.ImageLoader=qi,t.ImageUtils=Or,t.ImmediateRenderObject=function(t){d.call(this),this.material=t,this.render=function(){},this.hasUvs=this.hasColors=this.hasNormals=this.hasPositions=!1,this.uvArray=this.colorArray=this.normalArray=this.positionArray=null,this.count=0},t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=vr,t.InstancedBufferGeometry=gr,t.InstancedInterleavedBuffer=function(t,e,n){Ue.call(this,t,e),this.meshPerAttribute=n||1},t.InstancedMesh=Ye,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new F(t,e)},t.Int16BufferAttribute=F,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(t,e)},t.Int32BufferAttribute=O,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(t,e)},t.Int8BufferAttribute=C,t.IntType=1013,t.InterleavedBuffer=Ue,t.InterleavedBufferAttribute=ke,t.Interpolant=Ei,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=7680,t.KeyframeTrack=Li,t.LOD=je,t.LatheBufferGeometry=ii,t.LatheGeometry=ni,t.Layers=p,t.LensFlare=function(){console.error("https://artemsemkin.com/rhye/html/THREE.LensFlare has been moved to /examples/jsm/objects/404.html")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=er,t.LightProbe=fr,t.LightShadow=ir,t.Line=Je,t.Line3=function(t,e){this.start=void 0!==t?t:new l,this.end=void 0!==e?e:new l},t.LineBasicMaterial=Ze,t.LineCurve=function(t,e){Zi.call(this),this.type="LineCurve",this.v1=t||new n,this.v2=e||new n},t.LineCurve3=function(t,e){Zi.call(this),this.type="LineCurve3",this.v1=t||new l,this.v2=e||new l},t.LineDashedMaterial=Di,t.LineLoop=Qe,t.LinePieces=1,t.LineSegments=Ke,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=Ai,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=Gi,t.LoaderUtils=Os,t.LoadingManager=ki,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=E,t.MaterialLoader=mr,t.Math=Fr,t.MathUtils=Fr,t.Matrix3=i,t.Matrix4=c,t.MaxEquation=104,t.Mesh=G,t.MeshBasicMaterial=T,t.MeshDepthMaterial=Ee,t.MeshDistanceMaterial=Te,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=Mi,t.MeshMatcapMaterial=Si,t.MeshNormalMaterial=wi,t.MeshPhongMaterial=_i,t.MeshPhysicalMaterial=xi,t.MeshStandardMaterial=yi,t.MeshToonMaterial=bi,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Ri,t.Object3D=d,t.ObjectLoader=xr,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=mn,t.OctahedronGeometry=fn,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=ur,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=function(t){this._renderer=t,this._pingPongRenderTarget=null,(t=new gi({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t=new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new l(0,1,0)},inputEncoding:{value:mb[3e3]},outputEncoding:{value:mb[3e3]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",this._blurMaterial=t,this._cubemapShader=this._equirectShader=null,this._compileMaterial(this._blurMaterial)},t.ParametricBufferGeometry=ln,t.ParametricGeometry=un,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new He(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new $e(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new tn(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new $e(t)},t.Path=$i,t.PerspectiveCamera=Z,t.Plane=x,t.PlaneBufferGeometry=it,t.PlaneGeometry=nt,t.PlaneHelper=function(t,e,n){this.plane=t,this.size=void 0===e?1:e,t=void 0!==n?n:16776960,(e=new k).setAttribute("position",new I([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),Je.call(this,e,new Ze({color:t,toneMapped:!1})),this.type="PlaneHelper",(e=new k).setAttribute("position",new I([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new G(e,new T({color:t,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new tn(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new $e(t)},t.PointLight=sr,t.PointLightHelper=function(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n,t=new $n(e,4,2),e=new T({wireframe:!0,fog:!1,toneMapped:!1}),G.call(this,t,e),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()},t.Points=tn,t.PointsMaterial=$e,t.PolarGridHelper=function(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new b(void 0!==r?r:4473924),a=new b(void 0!==a?a:8947848);var o,s=[],u=[];for(o=0;o<=e;o++){var l=o/e*2*Math.PI,c=Math.sin(l)*t;l=Math.cos(l)*t,s.push(0,0,0),s.push(c,0,l);var h=1&o?r:a;u.push(h.r,h.g,h.b),u.push(h.r,h.g,h.b)}for(o=0;o<=n;o++){h=1&o?r:a;var p=t-t/n*o;for(e=0;e<i;e++)l=e/i*2*Math.PI,c=Math.sin(l)*p,l=Math.cos(l)*p,s.push(c,0,l),u.push(h.r,h.g,h.b),l=(e+1)/i*2*Math.PI,c=Math.sin(l)*p,l=Math.cos(l)*p,s.push(c,0,l),u.push(h.r,h.g,h.b)}(t=new k).setAttribute("position",new I(s,3)),t.setAttribute("color",new I(u,3)),s=new Ze({vertexColors:!0,toneMapped:!1}),Ke.call(this,t,s),this.type="PolarGridHelper"},t.PolyhedronBufferGeometry=hn,t.PolyhedronGeometry=cn,t.PositionalAudio=function(t){Dr.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)},t.PropertyBinding=Er,t.PropertyMixer=function(t,e,n){switch(this.binding=t,this.valueSize=n,e){case"quaternion":t=this._slerp,e=this._slerpAdditive;var i=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":e=t=this._select,i=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:t=this._lerp,e=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=t,this._mixBufferRegionAdditive=e,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0},t.QuadraticBezierCurve=function(t,e,i){Zi.call(this),this.type="QuadraticBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n},t.QuadraticBezierCurve3=function(t,e,n){Zi.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new l,this.v1=e||new l,this.v2=n||new l},t.Quaternion=u,t.QuaternionKeyframeTrack=Ni,t.QuaternionLinearInterpolant=Oi,t.REVISION="117",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=37496,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBIntegerFormat=1032,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=37492,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=gi,t.Ray=y,t.Raycaster=function(t,e,n,i){this.ray=new y(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new p,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.RectAreaLight=pr,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=ei,t.RingGeometry=ti,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=f,t.SceneUtils={createMultiMaterialObject:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")},detach:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")},attach:function(){console.error("https://artemsemkin.com/rhye/html/THREE.SceneUtils has been moved to /examples/jsm/utils/404.html")}},t.ShaderChunk=So,t.ShaderLib=Do,t.ShaderMaterial=X,t.ShadowMaterial=mi,t.Shape=tr,t.ShapeBufferGeometry=ai,t.ShapeGeometry=ri,t.ShapePath=br,t.ShapeUtils=Es,t.ShortType=1011,t.Skeleton=qe,t.SkeletonHelper=function(t){for(var e=Tr(t),n=new k,i=[],r=[],a=new b(0,0,1),o=new b(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new I(i,3)),n.setAttribute("color",new I(r,3)),i=new Ze({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}),Ke.call(this,n,i),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},t.SkinnedMesh=We,t.SmoothShading=2,t.Sphere=v,t.SphereBufferGeometry=$n,t.SphereGeometry=Qn,t.Spherical=function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this},t.SphericalHarmonics3=dr,t.SphericalReflectionMapping=305,t.Spline=function(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ki.call(this,t),this.type="catmullrom"},t.SplineCurve=function(t){Zi.call(this),this.type="SplineCurve",this.points=t||[]},t.SplineCurve3=function(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ki.call(this,t),this.type="catmullrom"},t.SpotLight=ar,t.SpotLightHelper=function(t,e){d.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new k,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,i=1;32>n;n++,i++){var r=n/32*Math.PI*2,a=i/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.setAttribute("position",new I(e,3)),e=new Ze({fog:!1,toneMapped:!1}),this.cone=new Ke(t,e),this.add(this.cone),this.update()},t.SpotLightShadow=rr,t.Sprite=He,t.SpriteMaterial=Ge,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=35044,t.StaticReadUsage=35045,t.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Z,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Z,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}},t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Ii,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=dn,t.TetrahedronGeometry=pn,t.TextBufferGeometry=Kn,t.TextGeometry=Jn,t.Texture=r,t.TextureLoader=Yi,t.TorusBufferGeometry=Dn,t.TorusGeometry=Sn,t.TorusKnotBufferGeometry=Mn,t.TorusKnotGeometry=wn,t.Triangle=_,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=bn,t.TubeGeometry=_n,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new R(t,e)},t.Uint16BufferAttribute=R,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new N(t,e)},t.Uint32BufferAttribute=N,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new L(t,e)},t.Uint8BufferAttribute=L,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new P(t,e)},t.Uint8ClampedBufferAttribute=P,t.Uncharted2ToneMapping=3,t.Uniform=function(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t},t.UniformsLib=Mo,t.UniformsUtils=_o,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector2=n,t.Vector3=l,t.Vector4=a,t.VectorKeyframeTrack=zi,t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(t,e,n)},t.VertexColors=2,t.VideoTexture=nn,t.WebGLCubeRenderTarget=K,t.WebGLMultisampleRenderTarget=s,t.WebGLRenderTarget=o,t.WebGLRenderTargetCube=function(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new K(t,n)},t.WebGLRenderer=function(t){var e;function i(){C=new ut(It),!1===(L=new ot(It,C,t)).isWebGL2&&(C.get("WEBGL_depth_texture"),C.get("OES_texture_float"),C.get("OES_texture_half_float"),C.get("OES_texture_half_float_linear"),C.get("OES_standard_derivatives"),C.get("OES_element_index_uint"),C.get("ANGLE_instanced_arrays")),C.get("OES_texture_float_linear"),q=new Pe(It,C,L),(P=new Ce(It,C,L)).scissor(_t.copy(At).multiplyScalar(St).floor()),P.viewport(xt.copy(Tt).multiplyScalar(St).floor()),F=new ht(It),R=new ge,O=new Le(It,C,P,R,L,q,F),N=new et(It,L),I=new lt(It,N,F),z=new ft(It,I,N,F),V=new dt(It),B=new me(X,C,L),U=new Ie(R),k=new _e,G=new De,H=new rt(X,P,z,M),j=new at(It,C,F,L),W=new ct(It,C,F,L),F.programs=B.programs,X.capabilities=L,X.extensions=C,X.properties=R,X.renderLists=k,X.state=P,X.info=F}function r(t){t.preventDefault(),Y=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1,i()}function s(t){(t=t.target).removeEventListener("dispose",s),u(t),R.remove(t)}function u(t){var e=R.get(t).program;t.program=void 0,void 0!==e&&B.releaseProgram(e)}function h(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)A.pushLight(t),t.castShadow&&A.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Lt.intersectsSprite(t)){i&&Nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ot);var r=z.update(t),a=t.material;a.visible&&T.push(t,r,a,n,Nt.z,null)}}else if(t.isImmediateRenderObject)i&&Nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ot),T.push(t,null,t.material,n,Nt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==F.render.frame&&(t.skeleton.update(),t.skeleton.frame=F.render.frame),!t.frustumCulled||Lt.intersectsObject(t)))if(i&&Nt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Ot),r=z.update(t),a=t.material,Array.isArray(a))for(var o=r.groups,s=0,u=o.length;s<u;s++){var l=o[s],c=a[l.materialIndex];c&&c.visible&&T.push(t,r,c,n,Nt.z,l)}else a.visible&&T.push(t,r,a,n,Nt.z,null);for(s=0,u=(t=t.children).length;s<u;s++)h(t[s],e,n,i)}}function p(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,u=o.geometry,l=void 0===i?o.material:i;if(o=o.group,n.isArrayCamera){yt=n;for(var c=n.cameras,h=0,p=c.length;h<p;h++){var f=c[h];s.layers.test(f.layers)&&(P.viewport(xt.copy(f.viewport)),A.setupLights(f),d(s,e,f,u,l,o))}}else yt=null,d(s,e,n,u,l,o)}}function d(t,n,i,r,a,o){if(t.onBeforeRender(X,n,i,r,a,o),A=G.get(n,yt||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var s=g(i,n,a,t);P.setMaterial(a),mt=e=null,gt=!1,function(t,e){t.render((function(t){X.renderBufferImmediate(t,e)}))}(t,s)}else X.renderBufferDirect(i,n,r,a,t,o);t.onAfterRender(X,n,i,r,a,o),A=G.get(n,yt||i)}function m(t,e,n){var i=R.get(t),r=A.state.lights,a=r.state.version;n=B.getParameters(t,r.state,A.state.shadowsArray,e,Pt.numPlanes,Pt.numIntersection,n);var o=B.getProgramCacheKey(n),l=i.program,c=!0;if(void 0===l)t.addEventListener("dispose",s);else if(l.cacheKey!==o)u(t);else{if(i.lightsStateVersion!==a)i.lightsStateVersion=a;else if(void 0!==n.shaderID)return;c=!1}if(c&&(l=B.acquireProgram(n,o),i.program=l,i.uniforms=n.uniforms,i.outputEncoding=n.outputEncoding,t.program=l),n=l.getAttributes(),t.morphTargets)for(o=t.numSupportedMorphTargets=0;o<X.maxMorphTargets;o++)0<=n["morphTarget"+o]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(o=t.numSupportedMorphNormals=0;o<X.maxMorphNormals;o++)0<=n["morphNormal"+o]&&t.numSupportedMorphNormals++;n=i.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Pt.numPlanes,i.numIntersection=Pt.numIntersection,n.clippingPlanes=Pt.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.needsLights=t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,i.lightsStateVersion=a,i.needsLights&&(n.ambientLightColor.value=r.state.ambient,n.lightProbe.value=r.state.probe,n.directionalLights.value=r.state.directional,n.directionalLightShadows.value=r.state.directionalShadow,n.spotLights.value=r.state.spot,n.spotLightShadows.value=r.state.spotShadow,n.rectAreaLights.value=r.state.rectArea,n.pointLights.value=r.state.point,n.pointLightShadows.value=r.state.pointShadow,n.hemisphereLights.value=r.state.hemi,n.directionalShadowMap.value=r.state.directionalShadowMap,n.directionalShadowMatrix.value=r.state.directionalShadowMatrix,n.spotShadowMap.value=r.state.spotShadowMap,n.spotShadowMatrix.value=r.state.spotShadowMatrix,n.pointShadowMap.value=r.state.pointShadowMap,n.pointShadowMatrix.value=r.state.pointShadowMatrix),t=i.program.getUniforms(),t=te.seqWithValue(t.seq,n),i.uniformsList=t}function g(t,e,n,i){O.resetTextureUnits();var r=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===nt?X.outputEncoding:nt.texture.encoding,s=R.get(n),u=A.state.lights;Ft&&(Rt||t!==vt)&&Pt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,t===vt&&n.id===pt),n.version===s.__version?void 0===s.program||n.fog&&s.fog!==r||s.environment!==a||s.needsLights&&s.lightsStateVersion!==u.state.version?m(n,e,i):void 0===s.numClippingPlanes||s.numClippingPlanes===Pt.numPlanes&&s.numIntersection===Pt.numIntersection?s.outputEncoding!==o&&m(n,e,i):m(n,e,i):(m(n,e,i),s.__version=n.version);var l=!1,c=!1,h=!1;if(o=(e=s.program).getUniforms(),u=s.uniforms,P.useProgram(e.program)&&(h=c=l=!0),n.id!==pt&&(pt=n.id,c=!0),(l||vt!==t)&&(o.setValue(It,"projectionMatrix",t.projectionMatrix),L.logarithmicDepthBuffer&&o.setValue(It,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),vt!==t&&(vt=t,h=c=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap)&&(void 0!==(l=o.map.cameraPosition)&&l.setValue(It,Nt.setFromMatrixPosition(t.matrixWorld))),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&o.setValue(It,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&o.setValue(It,"viewMatrix",t.matrixWorldInverse)),n.skinning&&(o.setOptional(It,i,"bindMatrix"),o.setOptional(It,i,"bindMatrixInverse"),t=i.skeleton))if(l=t.bones,L.floatVertexTextures){if(void 0===t.boneTexture){l=Math.sqrt(4*l.length),l=Fr.ceilPowerOfTwo(l),l=Math.max(l,4);var p=new Float32Array(l*l*4);p.set(t.boneMatrices);var d=new Q(p,l,l,1023,1015);t.boneMatrices=p,t.boneTexture=d,t.boneTextureSize=l}o.setValue(It,"boneTexture",t.boneTexture,O),o.setValue(It,"boneTextureSize",t.boneTextureSize)}else o.setOptional(It,t,"boneMatrices");return(c||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,o.setValue(It,"receiveShadow",i.receiveShadow)),c&&(o.setValue(It,"toneMappingExposure",X.toneMappingExposure),o.setValue(It,"toneMappingWhitePoint",X.toneMappingWhitePoint),s.needsLights&&(c=h,u.ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.directionalLightShadows.needsUpdate=c,u.pointLights.needsUpdate=c,u.pointLightShadows.needsUpdate=c,u.spotLights.needsUpdate=c,u.spotLightShadows.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),r&&n.fog&&U.refreshFogUniforms(u,r),U.refreshMaterialUniforms(u,n,a,St,Mt),void 0!==u.ltc_1&&(u.ltc_1.value=Mo.LTC_1),void 0!==u.ltc_2&&(u.ltc_2.value=Mo.LTC_2),te.upload(It,s.uniformsList,u,O)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(te.upload(It,s.uniformsList,u,O),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&o.setValue(It,"center",i.center),o.setValue(It,"modelViewMatrix",i.modelViewMatrix),o.setValue(It,"normalMatrix",i.normalMatrix),o.setValue(It,"modelMatrix",i.matrixWorld),e}var v=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),y=void 0!==t.context?t.context:null,x=void 0!==t.alpha&&t.alpha,_=void 0===t.depth||t.depth,b=void 0===t.stencil||t.stencil,w=void 0!==t.antialias&&t.antialias,M=void 0===t.premultipliedAlpha||t.premultipliedAlpha,S=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,D=void 0!==t.powerPreference?t.powerPreference:"default",E=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,T=null,A=null;this.domElement=v,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingWhitePoint=this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var C,L,P,F,R,O,N,I,z,B,U,k,G,H,V,j,W,q,X=this,Y=!1,Z=null,J=0,K=0,nt=null,it=null,pt=-1,mt=e=null,gt=!1,vt=null,yt=null,xt=new a,_t=new a,bt=null,wt=v.width,Mt=v.height,St=1,Dt=null,Et=null,Tt=new a(0,0,wt,Mt),At=new a(0,0,wt,Mt),Ct=!1,Lt=new $,Pt=new st,Ft=!1,Rt=!1,Ot=new c,Nt=new l;try{x={alpha:x,depth:_,stencil:b,antialias:w,premultipliedAlpha:M,preserveDrawingBuffer:S,powerPreference:D,failIfMajorPerformanceCaveat:E},v.addEventListener("webglcontextlost",r,!1),v.addEventListener("webglcontextrestored",o,!1);var It=y||v.getContext("webgl",x)||v.getContext("experimental-webgl",x);if(null===It){if(null!==v.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===It.getShaderPrecisionFormat&&(It.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}i();var zt=new Ne(X,It);this.xr=zt;var Bt=new Ae(X,z,L.maxTextureSize);this.shadowMap=Bt,this.getContext=function(){return It},this.getContextAttributes=function(){return It.getContextAttributes()},this.forceContextLoss=function(){var t=C.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=C.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return St},this.setPixelRatio=function(t){void 0!==t&&(St=t,this.setSize(wt,Mt,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new n),t.set(wt,Mt)},this.setSize=function(t,e,n){zt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(wt=t,Mt=e,v.width=Math.floor(t*St),v.height=Math.floor(e*St),!1!==n&&(v.style.width=t+"px",v.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new n),t.set(wt*St,Mt*St).floor()},this.setDrawingBufferSize=function(t,e,n){wt=t,Mt=e,St=n,v.width=Math.floor(t*n),v.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new a),t.copy(xt)},this.getViewport=function(t){return t.copy(Tt)},this.setViewport=function(t,e,n,i){t.isVector4?Tt.set(t.x,t.y,t.z,t.w):Tt.set(t,e,n,i),P.viewport(xt.copy(Tt).multiplyScalar(St).floor())},this.getScissor=function(t){return t.copy(At)},this.setScissor=function(t,e,n,i){t.isVector4?At.set(t.x,t.y,t.z,t.w):At.set(t,e,n,i),P.scissor(_t.copy(At).multiplyScalar(St).floor())},this.getScissorTest=function(){return Ct},this.setScissorTest=function(t){P.setScissorTest(Ct=t)},this.setOpaqueSort=function(t){Dt=t},this.setTransparentSort=function(t){Et=t},this.getClearColor=function(){return H.getClearColor()},this.setClearColor=function(){H.setClearColor.apply(H,arguments)},this.getClearAlpha=function(){return H.getClearAlpha()},this.setClearAlpha=function(){H.setClearAlpha.apply(H,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),It.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){v.removeEventListener("webglcontextlost",r,!1),v.removeEventListener("webglcontextrestored",o,!1),k.dispose(),G.dispose(),R.dispose(),z.dispose(),zt.dispose(),Gt.stop()},this.renderBufferImmediate=function(t,e){P.initAttributes();var n=R.get(t);t.hasPositions&&!n.position&&(n.position=It.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=It.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=It.createBuffer()),t.hasColors&&!n.color&&(n.color=It.createBuffer()),e=e.getAttributes(),t.hasPositions&&(It.bindBuffer(34962,n.position),It.bufferData(34962,t.positionArray,35048),P.enableAttribute(e.position),It.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(It.bindBuffer(34962,n.normal),It.bufferData(34962,t.normalArray,35048),P.enableAttribute(e.normal),It.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(It.bindBuffer(34962,n.uv),It.bufferData(34962,t.uvArray,35048),P.enableAttribute(e.uv),It.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(It.bindBuffer(34962,n.color),It.bufferData(34962,t.colorArray,35048),P.enableAttribute(e.color),It.vertexAttribPointer(e.color,3,5126,!1,0,0)),P.disableUnusedAttributes(),It.drawArrays(4,0,t.count),t.count=0};var Ut=new f;this.renderBufferDirect=function(t,n,i,r,a,o){null===n&&(n=Ut);var s=a.isMesh&&0>a.matrixWorld.determinant(),u=g(t,n,r,a);P.setMaterial(r,s);var l=!1;if(e===i.id&&mt===u.id&&gt===(!0===r.wireframe)||(e=i.id,mt=u.id,gt=!0===r.wireframe,l=!0),(r.morphTargets||r.morphNormals)&&(V.update(a,i,r,u),l=!0),!0===a.isInstancedMesh&&(l=!0),t=i.index,n=i.attributes.position,null===t){if(void 0===n||0===n.count)return}else if(0===t.count)return;var c=1;if(!0===r.wireframe&&(t=I.getWireframeAttribute(i),c=2),s=j,null!==t){var h=N.get(t);(s=W).setIndex(h)}if(l){if(!1!==L.isWebGL2||!a.isInstancedMesh&&!i.isInstancedBufferGeometry||null!==C.get("ANGLE_instanced_arrays")){P.initAttributes(),l=i.attributes,u=u.getAttributes();var p=r.defaultAttributeValues;for(M in u){var d=u[M];if(0<=d){var f=l[M];if(void 0!==f){var m=f.normalized,v=f.itemSize,y=N.get(f);if(void 0!==y){var x=y.buffer,_=y.type;if(y=y.bytesPerElement,f.isInterleavedBufferAttribute){var b=f.data,w=b.stride;f=f.offset,b&&b.isInstancedInterleavedBuffer?(P.enableAttributeAndDivisor(d,b.meshPerAttribute),void 0===i._maxInstanceCount&&(i._maxInstanceCount=b.meshPerAttribute*b.count)):P.enableAttribute(d),It.bindBuffer(34962,x),P.vertexAttribPointer(d,v,_,m,w*y,f*y)}else f.isInstancedBufferAttribute?(P.enableAttributeAndDivisor(d,f.meshPerAttribute),void 0===i._maxInstanceCount&&(i._maxInstanceCount=f.meshPerAttribute*f.count)):P.enableAttribute(d),It.bindBuffer(34962,x),P.vertexAttribPointer(d,v,_,m,0,0)}}else if("instanceMatrix"===M)void 0!==(y=N.get(a.instanceMatrix))&&(x=y.buffer,_=y.type,P.enableAttributeAndDivisor(d+0,1),P.enableAttributeAndDivisor(d+1,1),P.enableAttributeAndDivisor(d+2,1),P.enableAttributeAndDivisor(d+3,1),It.bindBuffer(34962,x),It.vertexAttribPointer(d+0,4,_,!1,64,0),It.vertexAttribPointer(d+1,4,_,!1,64,16),It.vertexAttribPointer(d+2,4,_,!1,64,32),It.vertexAttribPointer(d+3,4,_,!1,64,48));else if(void 0!==p&&void 0!==(m=p[M]))switch(m.length){case 2:It.vertexAttrib2fv(d,m);break;case 3:It.vertexAttrib3fv(d,m);break;case 4:It.vertexAttrib4fv(d,m);break;default:It.vertexAttrib1fv(d,m)}}}P.disableUnusedAttributes()}null!==t&&It.bindBuffer(34963,h.buffer)}var M=i.drawRange.start*c;l=null!==o?o.start*c:0,h=Math.max(M,l),0!==(o=Math.max(0,Math.min(null!==t?t.count:n.count,M+i.drawRange.count*c,l+(null!==o?o.count*c:1/0))-1-h+1))&&(a.isMesh?!0===r.wireframe?(P.setLineWidth(r.wireframeLinewidth*(null===nt?St:1)),s.setMode(1)):s.setMode(4):a.isLine?(void 0===(r=r.linewidth)&&(r=1),P.setLineWidth(r*(null===nt?St:1)),a.isLineSegments?s.setMode(1):a.isLineLoop?s.setMode(2):s.setMode(3)):a.isPoints?s.setMode(0):a.isSprite&&s.setMode(4),a.isInstancedMesh?s.renderInstances(i,h,o,a.count):i.isInstancedBufferGeometry?s.renderInstances(i,h,o,Math.min(i.instanceCount,i._maxInstanceCount)):s.render(h,o))},this.compile=function(t,e){(A=G.get(t,e)).init(),t.traverse((function(t){t.isLight&&(A.pushLight(t),t.castShadow&&A.pushShadow(t))})),A.setupLights(e);var n={};t.traverse((function(e){var i=e.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];!1==a.uuid in n&&(m(a,t,e),n[a.uuid]=!0)}else!1==i.uuid in n&&(m(i,t,e),n[i.uuid]=!0)}))};var kt=null,Gt=new tt;Gt.setAnimationLoop((function(t){zt.isPresenting||kt&&kt(t)})),"undefined"!=typeof window&&Gt.setContext(window),this.setAnimationLoop=function(t){kt=t,zt.setAnimationLoop(t),Gt.start()},this.render=function(t,n,i,r){if(void 0!==i){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var a=i}if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var o=r}n&&n.isCamera?Y||(mt=e=null,gt=!1,pt=-1,vt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),zt.enabled&&zt.isPresenting&&(n=zt.getCamera(n)),t.onBeforeRender(X,t,n,a||nt),(A=G.get(t,n)).init(),Ot.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),Lt.setFromProjectionMatrix(Ot),Rt=this.localClippingEnabled,Ft=Pt.init(this.clippingPlanes,Rt,n),(T=k.get(t,n)).init(),h(t,n,0,X.sortObjects),T.finish(),!0===X.sortObjects&&T.sort(Dt,Et),Ft&&Pt.beginShadows(),Bt.render(A.state.shadowsArray,t,n),A.setupLights(n),Ft&&Pt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),H.render(T,t,n,o),i=T.opaque,r=T.transparent,t.overrideMaterial?(a=t.overrideMaterial,i.length&&p(i,t,n,a),r.length&&p(r,t,n,a)):(i.length&&p(i,t,n),r.length&&p(r,t,n)),t.onAfterRender(X,t,n),null!==nt&&(O.updateRenderTargetMipmap(nt),O.updateMultisampleRenderTarget(nt)),P.buffers.depth.setTest(!0),P.buffers.depth.setMask(!0),P.buffers.color.setMask(!0),P.setPolygonOffset(!1),A=T=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){Z!==t&&null===nt&&It.bindFramebuffer(36160,t),Z=t},this.getActiveCubeFace=function(){return J},this.getActiveMipmapLevel=function(){return K},this.getRenderTarget=function(){return nt},this.setRenderTarget=function(t,e,n){nt=t,J=e,K=n,t&&void 0===R.get(t).__webglFramebuffer&&O.setupRenderTarget(t);var i=Z,r=!1;t?(i=R.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(i=i[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?R.get(t).__webglMultisampledFramebuffer:i,xt.copy(t.viewport),_t.copy(t.scissor),bt=t.scissorTest):(xt.copy(Tt).multiplyScalar(St).floor(),_t.copy(At).multiplyScalar(St).floor(),bt=Ct),it!==i&&(It.bindFramebuffer(36160,i),it=i),P.viewport(xt),P.scissor(_t),P.setScissorTest(bt),r&&(t=R.get(t.texture),It.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,n||0))},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=R.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){o=!1,s!==it&&(It.bindFramebuffer(36160,s),o=!0);try{var u=t.texture,l=u.format,c=u.type;1023!==l&&q.convert(l)!==It.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===c||q.convert(c)===It.getParameter(35738)||1015===c&&(L.isWebGL2||C.get("OES_texture_float")||C.get("WEBGL_color_buffer_float"))||1016===c&&(L.isWebGL2?C.get("EXT_color_buffer_float"):C.get("EXT_color_buffer_half_float"))?36053===It.checkFramebufferStatus(36160)?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&It.readPixels(e,n,i,r,q.convert(l),q.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&It.bindFramebuffer(36160,it)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i);i=Math.floor(e.image.height*i);var a=q.convert(e.format);O.setTexture2D(e,0),It.copyTexImage2D(3553,n,a,t.x,t.y,r,i,0),P.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,a=e.image.height,o=q.convert(n.format),s=q.convert(n.type);O.setTexture2D(n,0),e.isDataTexture?It.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?It.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):It.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&It.generateMipmap(3553),P.unbindTexture()},this.initTexture=function(t){O.setTexture2D(t,0),P.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))},t.WebGLUtils=Pe,t.WireframeGeometry=sn,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ke(new sn(t.geometry),new Ze({color:void 0!==e?e:16777215}))}})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";var e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function n(t){m=document,g=window,(y=y||t||g.gsap||console.warn("Please gsap.registerPlugin(SplitText)"))&&(_=y.utils.toArray,x=y.core.context||function(){},v=1)}function i(t){return g.getComputedStyle(t)}function r(t){return"absolute"===t.position||!0===t.absolute}function a(t,e){for(var n,i=e.length;-1<--i;)if(n=e[i],t.substr(0,n.length)===n)return n.length}function o(t,e){void 0===t&&(t="");var n=~t.indexOf("++"),i=1;return n&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(n?i++:"")+"'>":">")}}function s(t,e,n){var i=t.nodeType;if(1===i||9===i||11===i)for(t=t.firstChild;t;t=t.nextSibling)s(t,e,n);else 3!==i&&4!==i||(t.nodeValue=t.nodeValue.split(e).join(n))}function u(t,e){for(var n=e.length;-1<--n;)t.push(e[n])}function l(t,e,n){for(var i;t&&t!==e;){if(i=t._next||t.nextSibling)return i.textContent.charAt(0)===n;t=t.parentNode||t._parent}}function c(t){var e,n,i=_(t.childNodes),r=i.length;for(e=0;e<r;e++)(n=i[e])._isSplit?c(n):e&&n.previousSibling&&3===n.previousSibling.nodeType?(n.previousSibling.nodeValue+=3===n.nodeType?n.nodeValue:n.firstChild.nodeValue,t.removeChild(n)):3!==n.nodeType&&(t.insertBefore(n.firstChild,n),t.removeChild(n))}function h(t,e){return parseFloat(e[t])||0}function p(t,e,n,a,o,p,d){var f,g,v,y,x,_,b,w,M,S,D,E,T=i(t),A=h("paddingLeft",T),C=-999,L=h("borderBottomWidth",T)+h("borderTopWidth",T),P=h("borderLeftWidth",T)+h("borderRightWidth",T),F=h("paddingTop",T)+h("paddingBottom",T),R=h("paddingLeft",T)+h("paddingRight",T),O=h("fontSize",T)*(e.lineThreshold||.2),N=T.textAlign,I=[],z=[],B=[],U=e.wordDelimiter||" ",k=e.tag?e.tag:e.span?"span":"div",G=e.type||e.split||"chars,words,lines",H=o&&~G.indexOf("lines")?[]:null,V=~G.indexOf("words"),j=~G.indexOf("chars"),W=r(e),q=e.linesClass,X=~(q||"").indexOf("++"),Y=[],Z="flex"===T.display,J=t.style.display;for(X&&(q=q.split("++").join("")),Z&&(t.style.display="block"),v=(g=t.getElementsByTagName("*")).length,x=[],f=0;f<v;f++)x[f]=g[f];if(H||W)for(f=0;f<v;f++)((_=(y=x[f]).parentNode===t)||W||j&&!V)&&(E=y.offsetTop,H&&_&&Math.abs(E-C)>O&&("BR"!==y.nodeName||0===f)&&(b=[],H.push(b),C=E),W&&(y._x=y.offsetLeft,y._y=E,y._w=y.offsetWidth,y._h=y.offsetHeight),H&&((y._isSplit&&_||!j&&_||V&&_||!V&&y.parentNode.parentNode===t&&!y.parentNode._isSplit)&&(b.push(y),y._x-=A,l(y,t,U)&&(y._wordEnd=!0)),"BR"===y.nodeName&&(y.nextSibling&&"BR"===y.nextSibling.nodeName||0===f)&&H.push([])));for(f=0;f<v;f++)if(_=(y=x[f]).parentNode===t,"BR"!==y.nodeName)if(W&&(M=y.style,V||_||(y._x+=y.parentNode._x,y._y+=y.parentNode._y),M.left=y._x+"px",M.top=y._y+"px",M.position="absolute",M.display="block",M.width=y._w+1+"px",M.height=y._h+"px"),!V&&j)if(y._isSplit)for(y._next=g=y.nextSibling,y.parentNode.appendChild(y);g&&3===g.nodeType&&" "===g.textContent;)y._next=g.nextSibling,y.parentNode.appendChild(g),g=g.nextSibling;else y.parentNode._isSplit?(y._parent=y.parentNode,!y.previousSibling&&y.firstChild&&(y.firstChild._isFirst=!0),y.nextSibling&&" "===y.nextSibling.textContent&&!y.nextSibling.nextSibling&&Y.push(y.nextSibling),y._next=y.nextSibling&&y.nextSibling._isFirst?null:y.nextSibling,y.parentNode.removeChild(y),x.splice(f--,1),v--):_||(E=!y.nextSibling&&l(y.parentNode,t,U),y.parentNode._parent&&y.parentNode._parent.appendChild(y),E&&y.parentNode.appendChild(m.createTextNode(" ")),"span"===k&&(y.style.display="inline"),I.push(y));else y.parentNode._isSplit&&!y._isSplit&&""!==y.innerHTML?z.push(y):j&&!y._isSplit&&("span"===k&&(y.style.display="inline"),I.push(y));else H||W?(y.parentNode&&y.parentNode.removeChild(y),x.splice(f--,1),v--):V||t.appendChild(y);for(f=Y.length;-1<--f;)Y[f].parentNode.removeChild(Y[f]);if(H){for(W&&(S=m.createElement(k),t.appendChild(S),D=S.offsetWidth+"px",E=S.offsetParent===t?0:t.offsetLeft,t.removeChild(S)),M=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(w=" "===U&&(!W||!V&&!j),f=0;f<H.length;f++){for(b=H[f],(S=m.createElement(k)).style.cssText="display:block;text-align:"+N+";position:"+(W?"absolute;":"relative;"),q&&(S.className=q+(X?f+1:"")),B.push(S),v=b.length,g=0;g<v;g++)"BR"!==b[g].nodeName&&(y=b[g],S.appendChild(y),w&&y._wordEnd&&S.appendChild(m.createTextNode(" ")),W&&(0===g&&(S.style.top=y._y+"px",S.style.left=A+E+"px"),y.style.top="0px",E&&(y.style.left=y._x-E+"px")));0===v?S.innerHTML="&nbsp;":V||j||(c(S),s(S,String.fromCharCode(160)," ")),W&&(S.style.width=D,S.style.height=y._h+"px"),t.appendChild(S)}t.style.cssText=M}W&&(d>t.clientHeight&&(t.style.height=d-F+"px",t.clientHeight<d&&(t.style.height=d+L+"px")),p>t.clientWidth&&(t.style.width=p-R+"px",t.clientWidth<p&&(t.style.width=p+P+"px"))),Z&&(J?t.style.display=J:t.style.removeProperty("display")),u(n,I),V&&u(a,z),u(o,B)}function d(t,n,i,o){var u,l,c,h,p,d,f,g,v=n.tag?n.tag:n.span?"span":"div",y=~(n.type||n.split||"chars,words,lines").indexOf("chars"),x=r(n),_=n.wordDelimiter||" ",b=" "!==_?"":x?"&#173; ":" ",S="</"+v+">",D=1,E=n.specialChars?"function"==typeof n.specialChars?n.specialChars:a:null,T=m.createElement("div"),A=t.parentNode;for(A.insertBefore(T,t),T.textContent=t.nodeValue,A.removeChild(t),f=-1!==(u=function t(e){var n=e.nodeType,i="";if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=t(e)}else if(3===n||4===n)return e.nodeValue;return i}(t=T)).indexOf("<"),!1!==n.reduceWhiteSpace&&(u=u.replace(M," ").replace(w,"")),f&&(u=u.split("<").join("{{LT}}")),p=u.length,l=(" "===u.charAt(0)?b:"")+i(),c=0;c<p;c++)if(d=u.charAt(c),E&&(g=E(u.substr(c),n.specialChars)))d=u.substr(c,g||1),l+=y&&" "!==d?o()+d+"</"+v+">":d,c+=g-1;else if(d===_&&u.charAt(c-1)!==_&&c){for(l+=D?S:"",D=0;u.charAt(c+1)===_;)l+=b,c++;c===p-1?l+=b:")"!==u.charAt(c+1)&&(l+=b+i(),D=1)}else"{"===d&&"{{LT}}"===u.substr(c,6)?(l+=y?o()+"{{LT}}</"+v+">":"{{LT}}",c+=5):55296<=d.charCodeAt(0)&&d.charCodeAt(0)<=56319||65024<=u.charCodeAt(c+1)&&u.charCodeAt(c+1)<=65039?(h=((u.substr(c,12).split(e)||[])[1]||"").length||2,l+=y&&" "!==d?o()+u.substr(c,h)+"</"+v+">":u.substr(c,h),c+=h-1):l+=y&&" "!==d?o()+d+"</"+v+">":d;t.outerHTML=l+(D?S:""),f&&s(A,"{{LT}}","<")}function f(t,e,n,a){var o,s,u=_(t.childNodes),l=u.length,c=r(e);if(3!==t.nodeType||1<l){for(e.absolute=!1,o=0;o<l;o++)(s=u[o])._next=s._isFirst=s._parent=s._wordEnd=null,3===s.nodeType&&!/\S+/.test(s.nodeValue)||(c&&3!==s.nodeType&&"inline"===i(s).display&&(s.style.display="inline-block",s.style.position="relative"),s._isSplit=!0,f(s,e,n,a));return e.absolute=c,void(t._isSplit=!0)}d(t,e,n,a)}var m,g,v,y,x,_,b,w=/(?:\r|\n|\t\t)/g,M=/(?:\s\s+)/g,S=((b=D.prototype).split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,n,i,r=this.elements.length,a=t.tag?t.tag:t.span?"span":"div",s=o(t.wordsClass,a),u=o(t.charsClass,a);-1<--r;)i=this.elements[r],this._originals[r]=i.innerHTML,e=i.clientHeight,n=i.clientWidth,f(i,t,s,u),p(i,t,this.chars,this.words,this.lines,n,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},b.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,n){return e.innerHTML=t[n]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},D.create=function(t,e){return new D(t,e)},D);function D(t,e){v||n(),this.elements=_(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},x(this),this.split(e)}S.version="3.12.2",S.register=n,t.SplitText=S,t.default=S,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"function"==typeof define&&define.amd?define(["ScrollMagic","TweenMax","TimelineMax"],e):"object"==typeof exports?(require("gsap"),e(require("scrollmagic"),TweenMax,TimelineMax)):e(t.ScrollMagic||t.jQuery&&t.jQuery.ScrollMagic,t.TweenMax||t.TweenLite,t.TimelineMax||t.TimelineLite)}(this,(function(t,e,n){"use strict";t.Scene.addOption("tweenChanges",!1,(function(t){return!!t})),t.Scene.extend((function(){var t,i=this;i.on("progress.plugin_gsap",(function(){r()})),i.on("destroy.plugin_gsap",(function(t){i.removeTween(t.reset)}));var r=function(){if(t){var e=i.progress(),n=i.state();t.repeat&&-1===t.repeat()?"DURING"===n&&t.paused()?t.play():"DURING"===n||t.paused()||t.pause():e!=t.progress()&&(0===i.duration()?0<e?t.play():t.reverse():i.tweenChanges()&&t.tweenTo?t.tweenTo(e*t.duration()):t.progress(e).pause())}};i.setTween=function(a,o,s){var u;1<arguments.length&&(arguments.length<3&&(s=o,o=1),a=e.to(a,o,s));try{(u=n?new n({smoothChildTiming:!0}).add(a):a).pause()}catch(a){return i}return t&&i.removeTween(),t=u,a.repeat&&-1===a.repeat()&&(t.repeat(-1),t.yoyo(a.yoyo())),r(),i},i.removeTween=function(e){return t&&(e&&t.progress(0).pause(),t.kill(),t=void 0),i}}))})),function(t,e){"function"==typeof define&&define.amd?define(["ScrollMagic","jquery"],e):"object"==typeof exports?e(require("scrollmagic"),require("jquery")):e(t.ScrollMagic,t.jQuery)}(this,(function(t,e){"use strict";t._util.get.elements=function(t){return e(t).toArray()},t._util.addClass=function(t,n){e(t).addClass(n)},t._util.removeClass=function(t,n){e(t).removeClass(n)},e.ScrollMagic=t})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}((function(t){t.extend(t.fn,{validate:function(e){if(this.length){var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",(function(e){n.submitButton=e.currentTarget,t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)})),this.on("submit.validate",(function(e){function i(){var i,r;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),!n.settings.submitHandler||(r=n.settings.submitHandler.call(n,n.currentForm,e),i&&i.remove(),void 0!==r&&r)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)}))),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each((function(){(e=n.element(this)&&e)||(i=i.concat(n.errorList))})),n.errorList=i),e},rules:function(e,n){var i,r,a,o,s,u,l=this[0];if(null!=l&&(!l.form&&l.hasAttribute("contenteditable")&&(l.form=this.closest("form")[0],l.name=this.attr("name")),null!=l.form)){if(e)switch(i=t.data(l.form,"validator").settings,r=i.rules,a=t.validator.staticRules(l),e){case"add":t.extend(a,t.validator.normalizeRule(n)),delete a.messages,r[l.name]=a,n.messages&&(i.messages[l.name]=t.extend(i.messages[l.name],n.messages));break;case"remove":return n?(u={},t.each(n.split(/\s/),(function(t,e){u[e]=a[e],delete a[e]})),u):(delete r[l.name],a)}return(o=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l)).required&&(s=o.required,delete o.required,o=t.extend({required:s},o)),o.remote&&(s=o.remote,delete o.remote,o=t.extend(o,{remote:s})),o}}}),t.extend(t.expr.pseudos||t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(void 0===n||(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,(function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),(function(){return n}))}))),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){9===n.which&&""===this.elementValue(e)||-1!==t.inArray(n.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=t(this).attr("name"));var n=t.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),r=n.settings;r[i]&&!t(this).is(r.ignore)&&r[i].call(n,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,(function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,(function(t,n){i[n]=e}))})),n=this.settings.rules,t.each(n,(function(e,i){n[e]=t.validator.normalizeRule(i)})),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,r=this.clean(e),a=this.validationTargetFor(r),o=this,s=!0;return void 0===a?delete this.invalid[r.name]:(this.prepareElement(a),this.currentElements=t(a),(i=this.groups[a.name])&&t.each(this.groups,(function(t,e){e===i&&t!==a.name&&((r=o.validationTargetFor(o.clean(o.findByName(t))))&&r.name in o.invalid&&(o.currentElements.push(r),s=o.check(r)&&s))})),n=!1!==this.check(a),s=s&&n,this.invalid[a.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),s},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,(function(t,e){return{message:t,element:n.findByName(e)[0]}})),this.successList=t.grep(this.successList,(function(t){return!(t.name in e)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,(function(t){return t.element.name===e.name})).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter((function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0],this.name=i),!(i in n||!e.objectLength(t(this).rules())||(n[i]=!0,0))}))},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,r=t(e),a=e.type;return"radio"===a||"checkbox"===a?this.findByName(e.name).filter(":checked").val():"number"===a&&void 0!==e.validity?e.validity.badInput?"NaN":r.val():(n=e.hasAttribute("contenteditable")?r.text():r.val(),"file"===a?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("https://artemsemkin.com/"))>=0?n.substr(i+1):(i=n.lastIndexOf("\\"))>=0?n.substr(i+1):n:"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,a,o=t(e).rules(),s=t.map(o,(function(t,e){return e})).length,u=!1,l=this.elementValue(e);if("function"==typeof o.normalizer?a=o.normalizer:"function"==typeof this.settings.normalizer&&(a=this.settings.normalizer),a){if("string"!=typeof(l=a.call(e,l)))throw new TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){r={method:i,parameters:o[i]};try{if("dependency-mismatch"===(n=t.validator.methods[i].call(this,l,e,r.parameters))&&1===s){u=!0;continue}if(u=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),t}}if(!u)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map((function(){return this.element}))},showLabel:function(e,n){var i,r,a,o,s=this.errorsFor(e),u=this.idOrName(e),l=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(i=s=t("<"+this.settings.errorElement+">").attr("id",u+"-error").addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),s.is("label")?s.attr("for",u):0===s.parents("label[for='"+this.escapeCssMeta(u)+"']").length&&(a=s.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(l+=" "+a):l=a,t(e).attr("aria-describedby",l),(r=this.groups[e.name])&&(o=this,t.each(o.groups,(function(e,n){n===r&&t("[name='"+o.escapeCssMeta(e)+"']",o.currentForm).attr("aria-describedby",s.attr("id"))}))))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.submitButton&&t("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),(function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])})),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(""===(i=e.getAttribute(n))&&(i=!0),i=!!i):i=a.attr(n),this.normalizeAttributeRule(r,o,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},a=t(e),o=e.getAttribute("type");for(n in t.validator.methods)i=a.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(r,o,n,i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,(function(i,r){if(!1!==r){if(r.param||r.depends){var a=!0;switch(typeof r.depends){case"string":a=!!t(r.depends,n.form).length;break;case"function":a=r.depends.call(n,n)}a?e[i]=void 0===r.param||r.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}else delete e[i]})),t.each(e,(function(i,r){e[i]=t.isFunction(r)&&"normalizer"!==i?r(n):r})),t.each(["minlength","maxlength"],(function(){e[this]&&(e[this]=Number(e[this]))})),t.each(["rangelength","range"],(function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))})),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),(function(){n[this]=!0})),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=t(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(e,n)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i},maxlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r<=i},rangelength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(e,n,i){var r,a=t(n).attr("type"),o="Step attribute on input type "+a+" is not supported.",s=new RegExp("\\b"+a+"\\b"),u=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},l=function(t){return Math.round(t*Math.pow(10,r))},c=!0;if(a&&!s.test(["text","number","range"].join()))throw new Error(o);return r=u(i),(u(e)>r||l(e)%l(i)!=0)&&(c=!1),this.optional(n)||c},equalTo:function(e,n,i){var r=t(i);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",(function(){t(n).valid()})),e===r.val()},remote:function(e,n,i,r){if(this.optional(n))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var a,o,s,u=this.previousValue(n,r);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),u.originalMessage=u.originalMessage||this.settings.messages[n.name][r],this.settings.messages[n.name][r]=u.message,i="string"==typeof i&&{url:i}||i,s=t.param(t.extend({data:e},i.data)),u.old===s?u.valid:(u.old=s,a=this,this.startRequest(n),(o={})[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:a.currentForm,success:function(t){var i,o,s,l=!0===t||"true"===t;a.settings.messages[n.name][r]=u.originalMessage,l?(s=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(n),a.formSubmitted=s,a.successList.push(n),a.invalid[n.name]=!1,a.showErrors()):(i={},o=t||a.defaultMessage(n,{method:r,parameters:e}),i[n.name]=u.message=o,a.invalid[n.name]=!0,a.showErrors(i)),u.valid=l,a.stopRequest(n,l)}},i)),"pending")}}});var e,n={};return t.ajaxPrefilter?t.ajaxPrefilter((function(t,e,i){var r=t.port;"abort"===t.mode&&(n[r]&&n[r].abort(),n[r]=i)})):(e=t.ajax,t.ajax=function(i){var r=("mode"in i?i:t.ajaxSettings).mode,a=("port"in i?i:t.ajaxSettings).port;return"abort"===r?(n[a]&&n[a].abort(),n[a]=e.apply(this,arguments),n[a]):e.apply(this,arguments)}),t})),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.PhotoSwipeUI_Default=e()}(this,(function(){"use strict";return function(t,e){var n,i,r,a,o,s,u,l,c,h,p,d=this,f=!1,m=!0,g=!0,v={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(t,e){return t.title?(e.children[0].innerHTML=t.title,!0):(e.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return t.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=0,x=function(t){var n=t.vGap;if(B()){var o=h.barsSize;if(h.captionEl&&"auto"===o.bottom)if(a||((a=e.createEl("pswp__caption pswp__caption--fake")).appendChild(e.createEl("pswp__caption__center")),i.insertBefore(a,r),e.addClass(i,"pswp__ui--fit")),h.addCaptionHTMLFn(t,a,!0)){var s=a.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=o.top;else n.bottom="auto"===o.bottom?0:o.bottom;n.top=o.top}else n.top=n.bottom=0},_=[{name:"caption",option:"captionEl",onInit:function(t){r=t}},{name:"share-modal",option:"shareEl",onInit:function(t){u=t},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(t){s=t},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:t.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(t){o=t}},{name:"button--close",option:"closeEl",onTap:t.close},{name:"button--arrow--left",option:"arrowEl",onTap:t.prev},{name:"button--arrow--right",option:"arrowEl",onTap:t.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(t){t}}];d.init=function(){e.extend(t.options,v,!0),h=t.options,i=e.getChildByClass(t.scrollWrap,"pswp__ui"),c=t.listen,function(){var t;c("onVerticalDrag",(function(t){m&&t<.95?d.hideControls():!m&&t>=.95&&d.showControls()})),c("onPinchClose",(function(e){m&&e<.9?(d.hideControls(),t=!0):t&&!m&&e>.9&&d.showControls()})),c("zoomGestureEnded",(function(){(t=!1)&&!m&&d.showControls()}))}(),c("beforeChange",d.update),c("doubleTap",(function(e){var n=t.currItem.initialZoomLevel;t.getZoomLevel()!==n?t.zoomTo(n,e,333):t.zoomTo(h.getDoubleTapZoom(!1,t.currItem),e,333)})),c("preventDragEvent",(function(t,e,n){var i=t.target||t.srcElement;i&&i.getAttribute("class")&&t.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)})),c("bindEvents",(function(){e.bind(i,"pswpTap click",A),e.bind(t.scrollWrap,"pswpTap",d.onGlobalTap),t.likelyTouchDevice||e.bind(t.scrollWrap,"mouseover",d.onMouseOver)})),c("unbindEvents",(function(){g||F(),p&&clearInterval(p),e.unbind(document,"mouseout",L),e.unbind(document,"mousemove",K),e.unbind(i,"pswpTap click",A),e.unbind(t.scrollWrap,"pswpTap",d.onGlobalTap),e.unbind(t.scrollWrap,"mouseover",d.onMouseOver),n&&(e.unbind(document,n.eventK,d.updateFullscreen),n.isFullscreen()&&(h.hideAnimationDuration=0,n.exit()),n=null)})),c("destroy",(function(){h.captionEl&&(a&&i.removeChild(a),e.removeClass(r,"pswp__caption--empty")),u&&(u.children[0].onclick=null),e.removeClass(i,"pswp__ui--over-close"),e.addClass(i,"pswp__ui--hidden"),d.setIdle(!1)})),h.showAnimationDuration||e.removeClass(i,"pswp__ui--hidden"),c("initialZoomIn",(function(){h.showAnimationDuration&&e.removeClass(i,"pswp__ui--hidden")})),c("initialZoomOut",(function(){e.addClass(i,"pswp__ui--hidden")})),c("parseVerticalMargin",x),function(){var t,n,r,a=function(i){if(i)for(var a=i.length,o=0;o<a;o++){t=i[o],n=t.className;for(var s=0;s<_.length;s++)r=_[s],n.indexOf("pswp__"+r.name)>-1&&(h[r.option]?(e.removeClass(t,"pswp__element--disabled"),r.onInit&&r.onInit(t)):e.addClass(t,"pswp__element--disabled"))}};a(i.children);var o=e.getChildByClass(i,"pswp__top-bar");o&&a(o.children)}(),h.shareEl&&s&&u&&(g=!0),D(),h.timeToIdle&&c("mouseUsed",(function(){e.bind(document,"mousemove",K),e.bind(document,"mouseout",L),p=setInterval((function(){2==++y&&d.setIdle(!0)}),h.timeToIdle/2)})),M(),N()},d.setIdle=function(t){t,C(i,"ui--idle",t)},d.update=function(){m&&t.currItem?(d.updateIndexIndicator(),h.captionEl&&(h.addCaptionHTMLFn(t.currItem,r),C(r,"caption--empty",!t.currItem.title)),f=!0):f=!1,g||F(),D()},d.updateFullscreen=function(i){i&&setTimeout((function(){t.setScrollOffset(0,e.getScrollY())}),50),e[(n.isFullscreen()?"add":"remove")+"Class"](t.template,"pswp--fs")},d.updateIndexIndicator=function(){h.counterEl&&(o.innerHTML=t.getCurrentIndex()+1+h.indexIndicatorSep+h.getNumItemsFn())},d.onGlobalTap=function(n){var i=(n=n||window.event).target||n.srcElement;if(n.detail&&"mouse"===n.detail.pointerType){if(I(i))return void t.close();e.hasClass(i,"pswp__img")&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?h.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(n.detail.releasePoint))}else if(h.tapToToggleControls&&(m?d.hideControls():d.showControls()),h.tapToClose&&(e.hasClass(i,"pswp__img")||I(i)))return void t.close()},d.onMouseOver=function(t){var e=(t=t||window.event).target||t.srcElement;C(i,"ui--over-close",I(e))},d.hideControls=function(){e.addClass(i,"pswp__ui--hidden"),m=!1},d.showControls=function(){m=!0,f||d.update(),e.removeClass(i,"pswp__ui--hidden")},d.supportsFullscreen=function(){var t=document;return!!(t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen)},d.getFullscreenAPI=function(){var e,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return l=h.closeOnScroll,h.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?t.template[this.enterK]():void t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return h.closeOnScroll=l,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}}));